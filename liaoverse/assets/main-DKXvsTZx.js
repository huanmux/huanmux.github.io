const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calls-3v4aLndh.js","assets/bundler-DFjWqsBn.js","assets/Gazebos-DpshQxYp.js"])))=>i.map(i=>d[i]);
function w2(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function Xa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function k2(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var Uc={exports:{}},Zi={},Bc={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function _2(){if(Yh)return We;Yh=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=x&&I[x]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function j(I,K,E){this.props=I,this.context=K,this.refs=N,this.updater=E||b}j.prototype.isReactComponent={},j.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},j.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function P(){}P.prototype=j.prototype;function T(I,K,E){this.props=I,this.context=K,this.refs=N,this.updater=E||b}var A=T.prototype=new P;A.constructor=T,w(A,j.prototype),A.isPureReactComponent=!0;var B=Array.isArray,Q=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function J(I,K,E){var ke,de={},fe=null,Ae=null;if(K!=null)for(ke in K.ref!==void 0&&(Ae=K.ref),K.key!==void 0&&(fe=""+K.key),K)Q.call(K,ke)&&!W.hasOwnProperty(ke)&&(de[ke]=K[ke]);var Ce=arguments.length-2;if(Ce===1)de.children=E;else if(1<Ce){for(var ae=Array(Ce),Te=0;Te<Ce;Te++)ae[Te]=arguments[Te+2];de.children=ae}if(I&&I.defaultProps)for(ke in Ce=I.defaultProps,Ce)de[ke]===void 0&&(de[ke]=Ce[ke]);return{$$typeof:e,type:I,key:fe,ref:Ae,props:de,_owner:M.current}}function we(I,K){return{$$typeof:e,type:I.type,key:K,ref:I.ref,props:I.props,_owner:I._owner}}function z(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function $(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(E){return K[E]})}var ee=/\/+/g;function ue(I,K){return typeof I=="object"&&I!==null&&I.key!=null?$(""+I.key):K.toString(36)}function te(I,K,E,ke,de){var fe=typeof I;(fe==="undefined"||fe==="boolean")&&(I=null);var Ae=!1;if(I===null)Ae=!0;else switch(fe){case"string":case"number":Ae=!0;break;case"object":switch(I.$$typeof){case e:case t:Ae=!0}}if(Ae)return Ae=I,de=de(Ae),I=ke===""?"."+ue(Ae,0):ke,B(de)?(E="",I!=null&&(E=I.replace(ee,"$&/")+"/"),te(de,K,E,"",function(Te){return Te})):de!=null&&(z(de)&&(de=we(de,E+(!de.key||Ae&&Ae.key===de.key?"":(""+de.key).replace(ee,"$&/")+"/")+I)),K.push(de)),1;if(Ae=0,ke=ke===""?".":ke+":",B(I))for(var Ce=0;Ce<I.length;Ce++){fe=I[Ce];var ae=ke+ue(fe,Ce);Ae+=te(fe,K,E,ae,de)}else if(ae=y(I),typeof ae=="function")for(I=ae.call(I),Ce=0;!(fe=I.next()).done;)fe=fe.value,ae=ke+ue(fe,Ce++),Ae+=te(fe,K,E,ae,de);else if(fe==="object")throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ae}function X(I,K,E){if(I==null)return I;var ke=[],de=0;return te(I,ke,"","",function(fe){return K.call(E,fe,de++)}),ke}function ye(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(E){(I._status===0||I._status===-1)&&(I._status=1,I._result=E)},function(E){(I._status===0||I._status===-1)&&(I._status=2,I._result=E)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var xe={current:null},G={transition:null},ne={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:G,ReactCurrentOwner:M};function S(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:X,forEach:function(I,K,E){X(I,function(){K.apply(this,arguments)},E)},count:function(I){var K=0;return X(I,function(){K++}),K},toArray:function(I){return X(I,function(K){return K})||[]},only:function(I){if(!z(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},We.Component=j,We.Fragment=n,We.Profiler=o,We.PureComponent=T,We.StrictMode=i,We.Suspense=h,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,We.act=S,We.cloneElement=function(I,K,E){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ke=w({},I.props),de=I.key,fe=I.ref,Ae=I._owner;if(K!=null){if(K.ref!==void 0&&(fe=K.ref,Ae=M.current),K.key!==void 0&&(de=""+K.key),I.type&&I.type.defaultProps)var Ce=I.type.defaultProps;for(ae in K)Q.call(K,ae)&&!W.hasOwnProperty(ae)&&(ke[ae]=K[ae]===void 0&&Ce!==void 0?Ce[ae]:K[ae])}var ae=arguments.length-2;if(ae===1)ke.children=E;else if(1<ae){Ce=Array(ae);for(var Te=0;Te<ae;Te++)Ce[Te]=arguments[Te+2];ke.children=Ce}return{$$typeof:e,type:I.type,key:de,ref:fe,props:ke,_owner:Ae}},We.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},We.createElement=J,We.createFactory=function(I){var K=J.bind(null,I);return K.type=I,K},We.createRef=function(){return{current:null}},We.forwardRef=function(I){return{$$typeof:d,render:I}},We.isValidElement=z,We.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:ye}},We.memo=function(I,K){return{$$typeof:p,type:I,compare:K===void 0?null:K}},We.startTransition=function(I){var K=G.transition;G.transition={};try{I()}finally{G.transition=K}},We.unstable_act=S,We.useCallback=function(I,K){return xe.current.useCallback(I,K)},We.useContext=function(I){return xe.current.useContext(I)},We.useDebugValue=function(){},We.useDeferredValue=function(I){return xe.current.useDeferredValue(I)},We.useEffect=function(I,K){return xe.current.useEffect(I,K)},We.useId=function(){return xe.current.useId()},We.useImperativeHandle=function(I,K,E){return xe.current.useImperativeHandle(I,K,E)},We.useInsertionEffect=function(I,K){return xe.current.useInsertionEffect(I,K)},We.useLayoutEffect=function(I,K){return xe.current.useLayoutEffect(I,K)},We.useMemo=function(I,K){return xe.current.useMemo(I,K)},We.useReducer=function(I,K,E){return xe.current.useReducer(I,K,E)},We.useRef=function(I){return xe.current.useRef(I)},We.useState=function(I){return xe.current.useState(I)},We.useSyncExternalStore=function(I,K,E){return xe.current.useSyncExternalStore(I,K,E)},We.useTransition=function(){return xe.current.useTransition()},We.version="18.3.1",We}var Xh;function Ju(){return Xh||(Xh=1,Bc.exports=_2()),Bc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function j2(){if(Zh)return Zi;Zh=1;var e=Ju(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,p){var g,x={},y=null,b=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)i.call(h,g)&&!a.hasOwnProperty(g)&&(x[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)x[g]===void 0&&(x[g]=h[g]);return{$$typeof:t,type:d,key:y,ref:b,props:x,_owner:o.current}}return Zi.Fragment=n,Zi.jsx=u,Zi.jsxs=u,Zi}var ep;function S2(){return ep||(ep=1,Uc.exports=j2()),Uc.exports}var c=S2(),_=Ju();const C2=Xa(_),N2=w2({__proto__:null,default:C2},[_]);var Pa={},qc={exports:{}},lr={},Vc={exports:{}},Hc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function E2(){return tp||(tp=1,(function(e){function t(G,ne){var S=G.length;G.push(ne);e:for(;0<S;){var I=S-1>>>1,K=G[I];if(0<o(K,ne))G[I]=ne,G[S]=K,S=I;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ne=G[0],S=G.pop();if(S!==ne){G[0]=S;e:for(var I=0,K=G.length,E=K>>>1;I<E;){var ke=2*(I+1)-1,de=G[ke],fe=ke+1,Ae=G[fe];if(0>o(de,S))fe<K&&0>o(Ae,de)?(G[I]=Ae,G[fe]=S,I=fe):(G[I]=de,G[ke]=S,I=ke);else if(fe<K&&0>o(Ae,S))G[I]=Ae,G[fe]=S,I=fe;else break e}}return ne}function o(G,ne){var S=G.sortIndex-ne.sortIndex;return S!==0?S:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],p=[],g=1,x=null,y=3,b=!1,w=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var ne=n(p);ne!==null;){if(ne.callback===null)i(p);else if(ne.startTime<=G)i(p),ne.sortIndex=ne.expirationTime,t(h,ne);else break;ne=n(p)}}function B(G){if(N=!1,A(G),!w)if(n(h)!==null)w=!0,ye(Q);else{var ne=n(p);ne!==null&&xe(B,ne.startTime-G)}}function Q(G,ne){w=!1,N&&(N=!1,P(J),J=-1),b=!0;var S=y;try{for(A(ne),x=n(h);x!==null&&(!(x.expirationTime>ne)||G&&!$());){var I=x.callback;if(typeof I=="function"){x.callback=null,y=x.priorityLevel;var K=I(x.expirationTime<=ne);ne=e.unstable_now(),typeof K=="function"?x.callback=K:x===n(h)&&i(h),A(ne)}else i(h);x=n(h)}if(x!==null)var E=!0;else{var ke=n(p);ke!==null&&xe(B,ke.startTime-ne),E=!1}return E}finally{x=null,y=S,b=!1}}var M=!1,W=null,J=-1,we=5,z=-1;function $(){return!(e.unstable_now()-z<we)}function ee(){if(W!==null){var G=e.unstable_now();z=G;var ne=!0;try{ne=W(!0,G)}finally{ne?ue():(M=!1,W=null)}}else M=!1}var ue;if(typeof T=="function")ue=function(){T(ee)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,X=te.port2;te.port1.onmessage=ee,ue=function(){X.postMessage(null)}}else ue=function(){j(ee,0)};function ye(G){W=G,M||(M=!0,ue())}function xe(G,ne){J=j(function(){G(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,ye(Q))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var S=y;y=ne;try{return G()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var S=y;y=G;try{return ne()}finally{y=S}},e.unstable_scheduleCallback=function(G,ne,S){var I=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?I+S:I):S=I,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=S+K,G={id:g++,callback:ne,priorityLevel:G,startTime:S,expirationTime:K,sortIndex:-1},S>I?(G.sortIndex=S,t(p,G),n(h)===null&&G===n(p)&&(N?(P(J),J=-1):N=!0,xe(B,S-I))):(G.sortIndex=K,t(h,G),w||b||(w=!0,ye(Q))),G},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(G){var ne=y;return function(){var S=y;y=ne;try{return G.apply(this,arguments)}finally{y=S}}}})(Hc)),Hc}var rp;function T2(){return rp||(rp=1,Vc.exports=E2()),Vc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function P2(){if(np)return lr;np=1;var e=Ju(),t=T2();function n(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},x={};function y(r){return h.call(x,r)?!0:h.call(g,r)?!1:p.test(r)?x[r]=!0:(g[r]=!0,!1)}function b(r,s,l,f){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function w(r,s,l,f){if(s===null||typeof s>"u"||b(r,s,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function N(r,s,l,f,m,v,k){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=v,this.removeEmptyString=k}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){j[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];j[s]=new N(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){j[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){j[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){j[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){j[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){j[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){j[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){j[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function T(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(P,T);j[s]=new N(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(P,T);j[s]=new N(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(P,T);j[s]=new N(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){j[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),j.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){j[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});function A(r,s,l,f){var m=j.hasOwnProperty(s)?j[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,l,m,f)&&(l=null),f||m===null?y(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,f=m.attributeNamespace,l===null?r.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?r.setAttributeNS(f,s,l):r.setAttribute(s,l))))}var B=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),$=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),G=Symbol.iterator;function ne(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var S=Object.assign,I;function K(r){if(I===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+r}var E=!1;function ke(r,s){if(!r||E)return"";E=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var f=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){f=q}r.call(s.prototype)}else{try{throw Error()}catch(q){f=q}r()}}catch(q){if(q&&f&&typeof q.stack=="string"){for(var m=q.stack.split(`
`),v=f.stack.split(`
`),k=m.length-1,L=v.length-1;1<=k&&0<=L&&m[k]!==v[L];)L--;for(;1<=k&&0<=L;k--,L--)if(m[k]!==v[L]){if(k!==1||L!==1)do if(k--,L--,0>L||m[k]!==v[L]){var R=`
`+m[k].replace(" at new "," at ");return r.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",r.displayName)),R}while(1<=k&&0<=L);break}}}finally{E=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?K(r):""}function de(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=ke(r.type,!1),r;case 11:return r=ke(r.type.render,!1),r;case 1:return r=ke(r.type,!0),r;default:return""}}function fe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case W:return"Fragment";case M:return"Portal";case we:return"Profiler";case J:return"StrictMode";case ue:return"Suspense";case te:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case $:return(r.displayName||"Context")+".Consumer";case z:return(r._context.displayName||"Context")+".Provider";case ee:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case X:return s=r.displayName||null,s!==null?s:fe(r.type)||"Memo";case ye:s=r._payload,r=r._init;try{return fe(r(s))}catch{}}return null}function Ae(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ce(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ae(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Te(r){var s=ae(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),f=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(k){f=""+k,v.call(this,k)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Pe(r){r._valueTracker||(r._valueTracker=Te(r))}function He(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return r&&(f=ae(r)?r.checked?"true":"false":r.value),r=f,r!==l?(s.setValue(r),!0):!1}function tt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function vt(r,s){var l=s.checked;return S({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function ve(r,s){var l=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;l=Ce(s.value!=null?s.value:l),r._wrapperState={initialChecked:f,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ve(r,s){s=s.checked,s!=null&&A(r,"checked",s,!1)}function pt(r,s){Ve(r,s);var l=Ce(s.value),f=s.type;if(l!=null)f==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Nt(r,s.type,l):s.hasOwnProperty("defaultValue")&&Nt(r,s.type,Ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ct(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Nt(r,s,l){(s!=="number"||tt(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Gt=Array.isArray;function Kt(r,s,l,f){if(r=r.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=s.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&f&&(r[l].defaultSelected=!0)}else{for(l=""+Ce(l),s=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,f&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function lt(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return S({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function en(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(n(92));if(Gt(l)){if(1<l.length)throw Error(n(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Ce(l)}}function Qt(r,s){var l=Ce(s.value),f=Ce(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),f!=null&&(r.defaultValue=""+f)}function tn(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Y(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Y(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Re,Fe=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,f,m){MSApp.execUnsafeLocalFunction(function(){return r(s,l,f,m)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Re.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function be(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(r){wt.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),dt[s]=dt[r]})});function rt(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||dt.hasOwnProperty(r)&&dt[r]?(""+s).trim():s+"px"}function dr(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=rt(l,s[l],f);l==="float"&&(l="cssFloat"),f?r.setProperty(l,m):r[l]=m}}var fr=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(r,s){if(s){if(fr[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Qe(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ue=null;function ft(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var kr=null,Jt=null,hr=null;function $t(r){if(r=Di(r)){if(typeof kr!="function")throw Error(n(280));var s=r.stateNode;s&&(s=Ho(s),kr(r.stateNode,r.type,s))}}function _r(r){Jt?hr?hr.push(r):hr=[r]:Jt=r}function Hn(){if(Jt){var r=Jt,s=hr;if(hr=Jt=null,$t(r),s)for(r=0;r<s.length;r++)$t(s[r])}}function qr(r,s){return r(s)}function rn(){}var pr=!1;function Ft(r,s,l){if(pr)return r(s,l);pr=!0;try{return qr(r,s,l)}finally{pr=!1,(Jt!==null||hr!==null)&&(rn(),Hn())}}function yt(r,s){var l=r.stateNode;if(l===null)return null;var f=Ho(l);if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,s,typeof l));return l}var Vr=!1;if(d)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){Vr=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{Vr=!1}function Wn(r,s,l,f,m,v,k,L,R){var q=Array.prototype.slice.call(arguments,3);try{s.apply(l,q)}catch(se){this.onError(se)}}var Lr=!1,Ir=null,nn=!1,sn=null,ys={onError:function(r){Lr=!0,Ir=r}};function bs(r,s,l,f,m,v,k,L,R){Lr=!1,Ir=null,Wn.apply(ys,arguments)}function vn(r,s,l,f,m,v,k,L,R){if(bs.apply(this,arguments),Lr){if(Lr){var q=Ir;Lr=!1,Ir=null}else throw Error(n(198));nn||(nn=!0,sn=q)}}function mr(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ws(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Gn(r){if(mr(r)!==r)throw Error(n(188))}function ks(r){var s=r.alternate;if(!s){if(s=mr(r),s===null)throw Error(n(188));return s!==r?null:r}for(var l=r,f=s;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return Gn(m),r;if(v===f)return Gn(m),s;v=v.sibling}throw Error(n(188))}if(l.return!==f.return)l=m,f=v;else{for(var k=!1,L=m.child;L;){if(L===l){k=!0,l=m,f=v;break}if(L===f){k=!0,f=m,l=v;break}L=L.sibling}if(!k){for(L=v.child;L;){if(L===l){k=!0,l=v,f=m;break}if(L===f){k=!0,f=v,l=m;break}L=L.sibling}if(!k)throw Error(n(189))}}if(l.alternate!==f)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:s}function _s(r){return r=ks(r),r!==null?Ar(r):null}function Ar(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ar(r);if(s!==null)return s;r=r.sibling}return null}var on=t.unstable_scheduleCallback,Kn=t.unstable_cancelCallback,js=t.unstable_shouldYield,yi=t.unstable_requestPaint,D=t.unstable_now,he=t.unstable_getCurrentPriorityLevel,C=t.unstable_ImmediatePriority,V=t.unstable_UserBlockingPriority,Z=t.unstable_NormalPriority,ge=t.unstable_LowPriority,je=t.unstable_IdlePriority,ce=null,oe=null;function De(r){if(oe&&typeof oe.onCommitFiberRoot=="function")try{oe.onCommitFiberRoot(ce,r,void 0,(r.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:Co,rr=Math.log,Et=Math.LN2;function Co(r){return r>>>=0,r===0?32:31-(rr(r)/Et|0)|0}var No=64,Eo=4194304;function bi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function To(r,s){var l=r.pendingLanes;if(l===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes,k=l&268435455;if(k!==0){var L=k&~m;L!==0?f=bi(L):(v&=k,v!==0&&(f=bi(v)))}else k=l&~m,k!==0?f=bi(k):v!==0&&(f=bi(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&m)===0&&(m=f&-f,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=f;0<s;)l=31-nt(s),m=1<<l,f|=r[l],s&=~m;return f}function F1(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U1(r,s){for(var l=r.suspendedLanes,f=r.pingedLanes,m=r.expirationTimes,v=r.pendingLanes;0<v;){var k=31-nt(v),L=1<<k,R=m[k];R===-1?((L&l)===0||(L&f)!==0)&&(m[k]=F1(L,s)):R<=s&&(r.expiredLanes|=L),v&=~L}}function ll(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Nd(){var r=No;return No<<=1,(No&4194240)===0&&(No=64),r}function cl(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function wi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-nt(s),r[s]=l}function B1(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-nt(l),v=1<<m;s[m]=0,f[m]=-1,r[m]=-1,l&=~v}}function ul(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var f=31-nt(l),m=1<<f;m&s|r[f]&s&&(r[f]|=s),l&=~m}}var Ze=0;function Ed(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Td,dl,Pd,Ld,Id,fl=!1,Po=[],yn=null,bn=null,wn=null,ki=new Map,_i=new Map,kn=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ad(r,s){switch(r){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":ki.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(s.pointerId)}}function ji(r,s,l,f,m,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Di(s),s!==null&&dl(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function V1(r,s,l,f,m){switch(s){case"focusin":return yn=ji(yn,r,s,l,f,m),!0;case"dragenter":return bn=ji(bn,r,s,l,f,m),!0;case"mouseover":return wn=ji(wn,r,s,l,f,m),!0;case"pointerover":var v=m.pointerId;return ki.set(v,ji(ki.get(v)||null,r,s,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,_i.set(v,ji(_i.get(v)||null,r,s,l,f,m)),!0}return!1}function Rd(r){var s=Qn(r.target);if(s!==null){var l=mr(s);if(l!==null){if(s=l.tag,s===13){if(s=ws(l),s!==null){r.blockedOn=s,Id(r.priority,function(){Pd(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Lo(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=pl(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var f=new l.constructor(l.type,l);Ue=f,l.target.dispatchEvent(f),Ue=null}else return s=Di(l),s!==null&&dl(s),r.blockedOn=l,!1;s.shift()}return!0}function Md(r,s,l){Lo(r)&&l.delete(s)}function H1(){fl=!1,yn!==null&&Lo(yn)&&(yn=null),bn!==null&&Lo(bn)&&(bn=null),wn!==null&&Lo(wn)&&(wn=null),ki.forEach(Md),_i.forEach(Md)}function Si(r,s){r.blockedOn===s&&(r.blockedOn=null,fl||(fl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H1)))}function Ci(r){function s(m){return Si(m,r)}if(0<Po.length){Si(Po[0],r);for(var l=1;l<Po.length;l++){var f=Po[l];f.blockedOn===r&&(f.blockedOn=null)}}for(yn!==null&&Si(yn,r),bn!==null&&Si(bn,r),wn!==null&&Si(wn,r),ki.forEach(s),_i.forEach(s),l=0;l<kn.length;l++)f=kn[l],f.blockedOn===r&&(f.blockedOn=null);for(;0<kn.length&&(l=kn[0],l.blockedOn===null);)Rd(l),l.blockedOn===null&&kn.shift()}var Ss=B.ReactCurrentBatchConfig,Io=!0;function W1(r,s,l,f){var m=Ze,v=Ss.transition;Ss.transition=null;try{Ze=1,hl(r,s,l,f)}finally{Ze=m,Ss.transition=v}}function G1(r,s,l,f){var m=Ze,v=Ss.transition;Ss.transition=null;try{Ze=4,hl(r,s,l,f)}finally{Ze=m,Ss.transition=v}}function hl(r,s,l,f){if(Io){var m=pl(r,s,l,f);if(m===null)Ll(r,s,f,Ao,l),Ad(r,f);else if(V1(m,r,s,l,f))f.stopPropagation();else if(Ad(r,f),s&4&&-1<q1.indexOf(r)){for(;m!==null;){var v=Di(m);if(v!==null&&Td(v),v=pl(r,s,l,f),v===null&&Ll(r,s,f,Ao,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else Ll(r,s,f,null,l)}}var Ao=null;function pl(r,s,l,f){if(Ao=null,r=ft(f),r=Qn(r),r!==null)if(s=mr(r),s===null)r=null;else if(l=s.tag,l===13){if(r=ws(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ao=r,null}function Od(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(he()){case C:return 1;case V:return 4;case Z:case ge:return 16;case je:return 536870912;default:return 16}default:return 16}}var _n=null,ml=null,Ro=null;function zd(){if(Ro)return Ro;var r,s=ml,l=s.length,f,m="value"in _n?_n.value:_n.textContent,v=m.length;for(r=0;r<l&&s[r]===m[r];r++);var k=l-r;for(f=1;f<=k&&s[l-f]===m[v-f];f++);return Ro=m.slice(r,1<f?1-f:void 0)}function Mo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Oo(){return!0}function Dd(){return!1}function gr(r){function s(l,f,m,v,k){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=k,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(l=r[L],this[L]=l?l(v):v[L]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Oo:Dd,this.isPropagationStopped=Dd,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),s}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=gr(Cs),Ni=S({},Cs,{view:0,detail:0}),K1=gr(Ni),xl,vl,Ei,zo=S({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ei&&(Ei&&r.type==="mousemove"?(xl=r.screenX-Ei.screenX,vl=r.screenY-Ei.screenY):vl=xl=0,Ei=r),xl)},movementY:function(r){return"movementY"in r?r.movementY:vl}}),$d=gr(zo),Q1=S({},zo,{dataTransfer:0}),J1=gr(Q1),Y1=S({},Ni,{relatedTarget:0}),yl=gr(Y1),X1=S({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Z1=gr(X1),e0=S({},Cs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),t0=gr(e0),r0=S({},Cs,{data:0}),Fd=gr(r0),n0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o0(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=i0[r])?!!s[r]:!1}function bl(){return o0}var a0=S({},Ni,{key:function(r){if(r.key){var s=n0[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Mo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?s0[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bl,charCode:function(r){return r.type==="keypress"?Mo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Mo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),l0=gr(a0),c0=S({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=gr(c0),u0=S({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bl}),d0=gr(u0),f0=S({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),h0=gr(f0),p0=S({},zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),m0=gr(p0),g0=[9,13,27,32],wl=d&&"CompositionEvent"in window,Ti=null;d&&"documentMode"in document&&(Ti=document.documentMode);var x0=d&&"TextEvent"in window&&!Ti,Bd=d&&(!wl||Ti&&8<Ti&&11>=Ti),qd=" ",Vd=!1;function Hd(r,s){switch(r){case"keyup":return g0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ns=!1;function v0(r,s){switch(r){case"compositionend":return Wd(s);case"keypress":return s.which!==32?null:(Vd=!0,qd);case"textInput":return r=s.data,r===qd&&Vd?null:r;default:return null}}function y0(r,s){if(Ns)return r==="compositionend"||!wl&&Hd(r,s)?(r=zd(),Ro=ml=_n=null,Ns=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bd&&s.locale!=="ko"?null:s.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!b0[r.type]:s==="textarea"}function Kd(r,s,l,f){_r(f),s=Bo(s,"onChange"),0<s.length&&(l=new gl("onChange","change",null,l,f),r.push({event:l,listeners:s}))}var Pi=null,Li=null;function w0(r){hf(r,0)}function Do(r){var s=Is(r);if(He(s))return r}function k0(r,s){if(r==="change")return s}var Qd=!1;if(d){var kl;if(d){var _l="oninput"in document;if(!_l){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),_l=typeof Jd.oninput=="function"}kl=_l}else kl=!1;Qd=kl&&(!document.documentMode||9<document.documentMode)}function Yd(){Pi&&(Pi.detachEvent("onpropertychange",Xd),Li=Pi=null)}function Xd(r){if(r.propertyName==="value"&&Do(Li)){var s=[];Kd(s,Li,r,ft(r)),Ft(w0,s)}}function _0(r,s,l){r==="focusin"?(Yd(),Pi=s,Li=l,Pi.attachEvent("onpropertychange",Xd)):r==="focusout"&&Yd()}function j0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Do(Li)}function S0(r,s){if(r==="click")return Do(s)}function C0(r,s){if(r==="input"||r==="change")return Do(s)}function N0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rr=typeof Object.is=="function"?Object.is:N0;function Ii(r,s){if(Rr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!h.call(s,m)||!Rr(r[m],s[m]))return!1}return!0}function Zd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ef(r,s){var l=Zd(r);r=0;for(var f;l;){if(l.nodeType===3){if(f=r+l.textContent.length,r<=s&&f>=s)return{node:l,offset:s-r};r=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zd(l)}}function tf(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?tf(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function rf(){for(var r=window,s=tt();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=tt(r.document)}return s}function jl(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function E0(r){var s=rf(),l=r.focusedElem,f=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&tf(l.ownerDocument.documentElement,l)){if(f!==null&&jl(l)){if(s=f.start,r=f.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!r.extend&&v>f&&(m=f,f=v,v=m),m=ef(l,v);var k=ef(l,f);m&&k&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),r.removeAllRanges(),v>f?(r.addRange(s),r.extend(k.node,k.offset)):(s.setEnd(k.node,k.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var T0=d&&"documentMode"in document&&11>=document.documentMode,Es=null,Sl=null,Ai=null,Cl=!1;function nf(r,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Cl||Es==null||Es!==tt(f)||(f=Es,"selectionStart"in f&&jl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ai&&Ii(Ai,f)||(Ai=f,f=Bo(Sl,"onSelect"),0<f.length&&(s=new gl("onSelect","select",null,s,l),r.push({event:s,listeners:f}),s.target=Es)))}function $o(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Ts={animationend:$o("Animation","AnimationEnd"),animationiteration:$o("Animation","AnimationIteration"),animationstart:$o("Animation","AnimationStart"),transitionend:$o("Transition","TransitionEnd")},Nl={},sf={};d&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Fo(r){if(Nl[r])return Nl[r];if(!Ts[r])return r;var s=Ts[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in sf)return Nl[r]=s[l];return r}var of=Fo("animationend"),af=Fo("animationiteration"),lf=Fo("animationstart"),cf=Fo("transitionend"),uf=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(r,s){uf.set(r,s),a(s,[r])}for(var El=0;El<df.length;El++){var Tl=df[El],P0=Tl.toLowerCase(),L0=Tl[0].toUpperCase()+Tl.slice(1);jn(P0,"on"+L0)}jn(of,"onAnimationEnd"),jn(af,"onAnimationIteration"),jn(lf,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(cf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function ff(r,s,l){var f=r.type||"unknown-event";r.currentTarget=l,vn(f,s,void 0,r),r.currentTarget=null}function hf(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var f=r[l],m=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var k=f.length-1;0<=k;k--){var L=f[k],R=L.instance,q=L.currentTarget;if(L=L.listener,R!==v&&m.isPropagationStopped())break e;ff(m,L,q),v=R}else for(k=0;k<f.length;k++){if(L=f[k],R=L.instance,q=L.currentTarget,L=L.listener,R!==v&&m.isPropagationStopped())break e;ff(m,L,q),v=R}}}if(nn)throw r=sn,nn=!1,sn=null,r}function ct(r,s){var l=s[zl];l===void 0&&(l=s[zl]=new Set);var f=r+"__bubble";l.has(f)||(pf(s,r,2,!1),l.add(f))}function Pl(r,s,l){var f=0;s&&(f|=4),pf(l,r,f,s)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function Mi(r){if(!r[Uo]){r[Uo]=!0,i.forEach(function(l){l!=="selectionchange"&&(I0.has(l)||Pl(l,!1,r),Pl(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Uo]||(s[Uo]=!0,Pl("selectionchange",!1,s))}}function pf(r,s,l,f){switch(Od(s)){case 1:var m=W1;break;case 4:m=G1;break;default:m=hl}l=m.bind(null,s,l,r),m=void 0,!Vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?r.addEventListener(s,l,{capture:!0,passive:m}):r.addEventListener(s,l,!0):m!==void 0?r.addEventListener(s,l,{passive:m}):r.addEventListener(s,l,!1)}function Ll(r,s,l,f,m){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var L=f.stateNode.containerInfo;if(L===m||L.nodeType===8&&L.parentNode===m)break;if(k===4)for(k=f.return;k!==null;){var R=k.tag;if((R===3||R===4)&&(R=k.stateNode.containerInfo,R===m||R.nodeType===8&&R.parentNode===m))return;k=k.return}for(;L!==null;){if(k=Qn(L),k===null)return;if(R=k.tag,R===5||R===6){f=v=k;continue e}L=L.parentNode}}f=f.return}Ft(function(){var q=v,se=ft(l),le=[];e:{var re=uf.get(r);if(re!==void 0){var _e=gl,Ee=r;switch(r){case"keypress":if(Mo(l)===0)break e;case"keydown":case"keyup":_e=l0;break;case"focusin":Ee="focus",_e=yl;break;case"focusout":Ee="blur",_e=yl;break;case"beforeblur":case"afterblur":_e=yl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=d0;break;case of:case af:case lf:_e=Z1;break;case cf:_e=h0;break;case"scroll":_e=K1;break;case"wheel":_e=m0;break;case"copy":case"cut":case"paste":_e=t0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Ud}var Le=(s&4)!==0,kt=!Le&&r==="scroll",F=Le?re!==null?re+"Capture":null:re;Le=[];for(var O=q,U;O!==null;){U=O;var me=U.stateNode;if(U.tag===5&&me!==null&&(U=me,F!==null&&(me=yt(O,F),me!=null&&Le.push(Oi(O,me,U)))),kt)break;O=O.return}0<Le.length&&(re=new _e(re,Ee,null,l,se),le.push({event:re,listeners:Le}))}}if((s&7)===0){e:{if(re=r==="mouseover"||r==="pointerover",_e=r==="mouseout"||r==="pointerout",re&&l!==Ue&&(Ee=l.relatedTarget||l.fromElement)&&(Qn(Ee)||Ee[an]))break e;if((_e||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,_e?(Ee=l.relatedTarget||l.toElement,_e=q,Ee=Ee?Qn(Ee):null,Ee!==null&&(kt=mr(Ee),Ee!==kt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(_e=null,Ee=q),_e!==Ee)){if(Le=$d,me="onMouseLeave",F="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Ud,me="onPointerLeave",F="onPointerEnter",O="pointer"),kt=_e==null?re:Is(_e),U=Ee==null?re:Is(Ee),re=new Le(me,O+"leave",_e,l,se),re.target=kt,re.relatedTarget=U,me=null,Qn(se)===q&&(Le=new Le(F,O+"enter",Ee,l,se),Le.target=U,Le.relatedTarget=kt,me=Le),kt=me,_e&&Ee)t:{for(Le=_e,F=Ee,O=0,U=Le;U;U=Ps(U))O++;for(U=0,me=F;me;me=Ps(me))U++;for(;0<O-U;)Le=Ps(Le),O--;for(;0<U-O;)F=Ps(F),U--;for(;O--;){if(Le===F||F!==null&&Le===F.alternate)break t;Le=Ps(Le),F=Ps(F)}Le=null}else Le=null;_e!==null&&mf(le,re,_e,Le,!1),Ee!==null&&kt!==null&&mf(le,kt,Ee,Le,!0)}}e:{if(re=q?Is(q):window,_e=re.nodeName&&re.nodeName.toLowerCase(),_e==="select"||_e==="input"&&re.type==="file")var Ie=k0;else if(Gd(re))if(Qd)Ie=C0;else{Ie=j0;var Me=_0}else(_e=re.nodeName)&&_e.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ie=S0);if(Ie&&(Ie=Ie(r,q))){Kd(le,Ie,l,se);break e}Me&&Me(r,re,q),r==="focusout"&&(Me=re._wrapperState)&&Me.controlled&&re.type==="number"&&Nt(re,"number",re.value)}switch(Me=q?Is(q):window,r){case"focusin":(Gd(Me)||Me.contentEditable==="true")&&(Es=Me,Sl=q,Ai=null);break;case"focusout":Ai=Sl=Es=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,nf(le,l,se);break;case"selectionchange":if(T0)break;case"keydown":case"keyup":nf(le,l,se)}var Oe;if(wl)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Ns?Hd(r,l)&&($e="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&($e="onCompositionStart");$e&&(Bd&&l.locale!=="ko"&&(Ns||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Ns&&(Oe=zd()):(_n=se,ml="value"in _n?_n.value:_n.textContent,Ns=!0)),Me=Bo(q,$e),0<Me.length&&($e=new Fd($e,r,null,l,se),le.push({event:$e,listeners:Me}),Oe?$e.data=Oe:(Oe=Wd(l),Oe!==null&&($e.data=Oe)))),(Oe=x0?v0(r,l):y0(r,l))&&(q=Bo(q,"onBeforeInput"),0<q.length&&(se=new Fd("onBeforeInput","beforeinput",null,l,se),le.push({event:se,listeners:q}),se.data=Oe))}hf(le,s)})}function Oi(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Bo(r,s){for(var l=s+"Capture",f=[];r!==null;){var m=r,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=yt(r,l),v!=null&&f.unshift(Oi(r,v,m)),v=yt(r,s),v!=null&&f.push(Oi(r,v,m))),r=r.return}return f}function Ps(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function mf(r,s,l,f,m){for(var v=s._reactName,k=[];l!==null&&l!==f;){var L=l,R=L.alternate,q=L.stateNode;if(R!==null&&R===f)break;L.tag===5&&q!==null&&(L=q,m?(R=yt(l,v),R!=null&&k.unshift(Oi(l,R,L))):m||(R=yt(l,v),R!=null&&k.push(Oi(l,R,L)))),l=l.return}k.length!==0&&r.push({event:s,listeners:k})}var A0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function gf(r){return(typeof r=="string"?r:""+r).replace(A0,`
`).replace(R0,"")}function qo(r,s,l){if(s=gf(s),gf(r)!==s&&l)throw Error(n(425))}function Vo(){}var Il=null,Al=null;function Rl(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ml=typeof setTimeout=="function"?setTimeout:void 0,M0=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,O0=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(r){return xf.resolve(null).then(r).catch(z0)}:Ml;function z0(r){setTimeout(function(){throw r})}function Ol(r,s){var l=s,f=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){r.removeChild(m),Ci(s);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);Ci(s)}function Sn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function vf(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),Hr="__reactFiber$"+Ls,zi="__reactProps$"+Ls,an="__reactContainer$"+Ls,zl="__reactEvents$"+Ls,D0="__reactListeners$"+Ls,$0="__reactHandles$"+Ls;function Qn(r){var s=r[Hr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[an]||l[Hr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=vf(r);r!==null;){if(l=r[Hr])return l;r=vf(r)}return s}r=l,l=r.parentNode}return null}function Di(r){return r=r[Hr]||r[an],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Is(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Ho(r){return r[zi]||null}var Dl=[],As=-1;function Cn(r){return{current:r}}function ut(r){0>As||(r.current=Dl[As],Dl[As]=null,As--)}function it(r,s){As++,Dl[As]=r.current,r.current=s}var Nn={},Ut=Cn(Nn),nr=Cn(!1),Jn=Nn;function Rs(r,s){var l=r.type.contextTypes;if(!l)return Nn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=s[v];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=m),m}function sr(r){return r=r.childContextTypes,r!=null}function Wo(){ut(nr),ut(Ut)}function yf(r,s,l){if(Ut.current!==Nn)throw Error(n(168));it(Ut,s),it(nr,l)}function bf(r,s,l){var f=r.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(n(108,Ae(r)||"Unknown",m));return S({},l,f)}function Go(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Nn,Jn=Ut.current,it(Ut,r),it(nr,nr.current),!0}function wf(r,s,l){var f=r.stateNode;if(!f)throw Error(n(169));l?(r=bf(r,s,Jn),f.__reactInternalMemoizedMergedChildContext=r,ut(nr),ut(Ut),it(Ut,r)):ut(nr),it(nr,l)}var ln=null,Ko=!1,$l=!1;function kf(r){ln===null?ln=[r]:ln.push(r)}function F0(r){Ko=!0,kf(r)}function En(){if(!$l&&ln!==null){$l=!0;var r=0,s=Ze;try{var l=ln;for(Ze=1;r<l.length;r++){var f=l[r];do f=f(!0);while(f!==null)}ln=null,Ko=!1}catch(m){throw ln!==null&&(ln=ln.slice(r+1)),on(C,En),m}finally{Ze=s,$l=!1}}return null}var Ms=[],Os=0,Qo=null,Jo=0,jr=[],Sr=0,Yn=null,cn=1,un="";function Xn(r,s){Ms[Os++]=Jo,Ms[Os++]=Qo,Qo=r,Jo=s}function _f(r,s,l){jr[Sr++]=cn,jr[Sr++]=un,jr[Sr++]=Yn,Yn=r;var f=cn;r=un;var m=32-nt(f)-1;f&=~(1<<m),l+=1;var v=32-nt(s)+m;if(30<v){var k=m-m%5;v=(f&(1<<k)-1).toString(32),f>>=k,m-=k,cn=1<<32-nt(s)+m|l<<m|f,un=v+r}else cn=1<<v|l<<m|f,un=r}function Fl(r){r.return!==null&&(Xn(r,1),_f(r,1,0))}function Ul(r){for(;r===Qo;)Qo=Ms[--Os],Ms[Os]=null,Jo=Ms[--Os],Ms[Os]=null;for(;r===Yn;)Yn=jr[--Sr],jr[Sr]=null,un=jr[--Sr],jr[Sr]=null,cn=jr[--Sr],jr[Sr]=null}var xr=null,vr=null,ht=!1,Mr=null;function jf(r,s){var l=Tr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Sf(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,xr=r,vr=Sn(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,xr=r,vr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Yn!==null?{id:cn,overflow:un}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Tr(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,xr=r,vr=null,!0):!1;default:return!1}}function Bl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ql(r){if(ht){var s=vr;if(s){var l=s;if(!Sf(r,s)){if(Bl(r))throw Error(n(418));s=Sn(l.nextSibling);var f=xr;s&&Sf(r,s)?jf(f,l):(r.flags=r.flags&-4097|2,ht=!1,xr=r)}}else{if(Bl(r))throw Error(n(418));r.flags=r.flags&-4097|2,ht=!1,xr=r}}}function Cf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;xr=r}function Yo(r){if(r!==xr)return!1;if(!ht)return Cf(r),ht=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Rl(r.type,r.memoizedProps)),s&&(s=vr)){if(Bl(r))throw Nf(),Error(n(418));for(;s;)jf(r,s),s=Sn(s.nextSibling)}if(Cf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){vr=Sn(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}vr=null}}else vr=xr?Sn(r.stateNode.nextSibling):null;return!0}function Nf(){for(var r=vr;r;)r=Sn(r.nextSibling)}function zs(){vr=xr=null,ht=!1}function Vl(r){Mr===null?Mr=[r]:Mr.push(r)}var U0=B.ReactCurrentBatchConfig;function $i(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var f=l.stateNode}if(!f)throw Error(n(147,r));var m=f,v=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(k){var L=m.refs;k===null?delete L[v]:L[v]=k},s._stringRef=v,s)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function Xo(r,s){throw r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Ef(r){var s=r._init;return s(r._payload)}function Tf(r){function s(F,O){if(r){var U=F.deletions;U===null?(F.deletions=[O],F.flags|=16):U.push(O)}}function l(F,O){if(!r)return null;for(;O!==null;)s(F,O),O=O.sibling;return null}function f(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function m(F,O){return F=On(F,O),F.index=0,F.sibling=null,F}function v(F,O,U){return F.index=U,r?(U=F.alternate,U!==null?(U=U.index,U<O?(F.flags|=2,O):U):(F.flags|=2,O)):(F.flags|=1048576,O)}function k(F){return r&&F.alternate===null&&(F.flags|=2),F}function L(F,O,U,me){return O===null||O.tag!==6?(O=Mc(U,F.mode,me),O.return=F,O):(O=m(O,U),O.return=F,O)}function R(F,O,U,me){var Ie=U.type;return Ie===W?se(F,O,U.props.children,me,U.key):O!==null&&(O.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ye&&Ef(Ie)===O.type)?(me=m(O,U.props),me.ref=$i(F,O,U),me.return=F,me):(me=ka(U.type,U.key,U.props,null,F.mode,me),me.ref=$i(F,O,U),me.return=F,me)}function q(F,O,U,me){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Oc(U,F.mode,me),O.return=F,O):(O=m(O,U.children||[]),O.return=F,O)}function se(F,O,U,me,Ie){return O===null||O.tag!==7?(O=os(U,F.mode,me,Ie),O.return=F,O):(O=m(O,U),O.return=F,O)}function le(F,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Mc(""+O,F.mode,U),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Q:return U=ka(O.type,O.key,O.props,null,F.mode,U),U.ref=$i(F,null,O),U.return=F,U;case M:return O=Oc(O,F.mode,U),O.return=F,O;case ye:var me=O._init;return le(F,me(O._payload),U)}if(Gt(O)||ne(O))return O=os(O,F.mode,U,null),O.return=F,O;Xo(F,O)}return null}function re(F,O,U,me){var Ie=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Ie!==null?null:L(F,O,""+U,me);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Q:return U.key===Ie?R(F,O,U,me):null;case M:return U.key===Ie?q(F,O,U,me):null;case ye:return Ie=U._init,re(F,O,Ie(U._payload),me)}if(Gt(U)||ne(U))return Ie!==null?null:se(F,O,U,me,null);Xo(F,U)}return null}function _e(F,O,U,me,Ie){if(typeof me=="string"&&me!==""||typeof me=="number")return F=F.get(U)||null,L(O,F,""+me,Ie);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Q:return F=F.get(me.key===null?U:me.key)||null,R(O,F,me,Ie);case M:return F=F.get(me.key===null?U:me.key)||null,q(O,F,me,Ie);case ye:var Me=me._init;return _e(F,O,U,Me(me._payload),Ie)}if(Gt(me)||ne(me))return F=F.get(U)||null,se(O,F,me,Ie,null);Xo(O,me)}return null}function Ee(F,O,U,me){for(var Ie=null,Me=null,Oe=O,$e=O=0,Mt=null;Oe!==null&&$e<U.length;$e++){Oe.index>$e?(Mt=Oe,Oe=null):Mt=Oe.sibling;var Xe=re(F,Oe,U[$e],me);if(Xe===null){Oe===null&&(Oe=Mt);break}r&&Oe&&Xe.alternate===null&&s(F,Oe),O=v(Xe,O,$e),Me===null?Ie=Xe:Me.sibling=Xe,Me=Xe,Oe=Mt}if($e===U.length)return l(F,Oe),ht&&Xn(F,$e),Ie;if(Oe===null){for(;$e<U.length;$e++)Oe=le(F,U[$e],me),Oe!==null&&(O=v(Oe,O,$e),Me===null?Ie=Oe:Me.sibling=Oe,Me=Oe);return ht&&Xn(F,$e),Ie}for(Oe=f(F,Oe);$e<U.length;$e++)Mt=_e(Oe,F,$e,U[$e],me),Mt!==null&&(r&&Mt.alternate!==null&&Oe.delete(Mt.key===null?$e:Mt.key),O=v(Mt,O,$e),Me===null?Ie=Mt:Me.sibling=Mt,Me=Mt);return r&&Oe.forEach(function(zn){return s(F,zn)}),ht&&Xn(F,$e),Ie}function Le(F,O,U,me){var Ie=ne(U);if(typeof Ie!="function")throw Error(n(150));if(U=Ie.call(U),U==null)throw Error(n(151));for(var Me=Ie=null,Oe=O,$e=O=0,Mt=null,Xe=U.next();Oe!==null&&!Xe.done;$e++,Xe=U.next()){Oe.index>$e?(Mt=Oe,Oe=null):Mt=Oe.sibling;var zn=re(F,Oe,Xe.value,me);if(zn===null){Oe===null&&(Oe=Mt);break}r&&Oe&&zn.alternate===null&&s(F,Oe),O=v(zn,O,$e),Me===null?Ie=zn:Me.sibling=zn,Me=zn,Oe=Mt}if(Xe.done)return l(F,Oe),ht&&Xn(F,$e),Ie;if(Oe===null){for(;!Xe.done;$e++,Xe=U.next())Xe=le(F,Xe.value,me),Xe!==null&&(O=v(Xe,O,$e),Me===null?Ie=Xe:Me.sibling=Xe,Me=Xe);return ht&&Xn(F,$e),Ie}for(Oe=f(F,Oe);!Xe.done;$e++,Xe=U.next())Xe=_e(Oe,F,$e,Xe.value,me),Xe!==null&&(r&&Xe.alternate!==null&&Oe.delete(Xe.key===null?$e:Xe.key),O=v(Xe,O,$e),Me===null?Ie=Xe:Me.sibling=Xe,Me=Xe);return r&&Oe.forEach(function(b2){return s(F,b2)}),ht&&Xn(F,$e),Ie}function kt(F,O,U,me){if(typeof U=="object"&&U!==null&&U.type===W&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Q:e:{for(var Ie=U.key,Me=O;Me!==null;){if(Me.key===Ie){if(Ie=U.type,Ie===W){if(Me.tag===7){l(F,Me.sibling),O=m(Me,U.props.children),O.return=F,F=O;break e}}else if(Me.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===ye&&Ef(Ie)===Me.type){l(F,Me.sibling),O=m(Me,U.props),O.ref=$i(F,Me,U),O.return=F,F=O;break e}l(F,Me);break}else s(F,Me);Me=Me.sibling}U.type===W?(O=os(U.props.children,F.mode,me,U.key),O.return=F,F=O):(me=ka(U.type,U.key,U.props,null,F.mode,me),me.ref=$i(F,O,U),me.return=F,F=me)}return k(F);case M:e:{for(Me=U.key;O!==null;){if(O.key===Me)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){l(F,O.sibling),O=m(O,U.children||[]),O.return=F,F=O;break e}else{l(F,O);break}else s(F,O);O=O.sibling}O=Oc(U,F.mode,me),O.return=F,F=O}return k(F);case ye:return Me=U._init,kt(F,O,Me(U._payload),me)}if(Gt(U))return Ee(F,O,U,me);if(ne(U))return Le(F,O,U,me);Xo(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(l(F,O.sibling),O=m(O,U),O.return=F,F=O):(l(F,O),O=Mc(U,F.mode,me),O.return=F,F=O),k(F)):l(F,O)}return kt}var Ds=Tf(!0),Pf=Tf(!1),Zo=Cn(null),ea=null,$s=null,Hl=null;function Wl(){Hl=$s=ea=null}function Gl(r){var s=Zo.current;ut(Zo),r._currentValue=s}function Kl(r,s,l){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===l)break;r=r.return}}function Fs(r,s){ea=r,Hl=$s=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(ir=!0),r.firstContext=null)}function Cr(r){var s=r._currentValue;if(Hl!==r)if(r={context:r,memoizedValue:s,next:null},$s===null){if(ea===null)throw Error(n(308));$s=r,ea.dependencies={lanes:0,firstContext:r}}else $s=$s.next=r;return s}var Zn=null;function Ql(r){Zn===null?Zn=[r]:Zn.push(r)}function Lf(r,s,l,f){var m=s.interleaved;return m===null?(l.next=l,Ql(s)):(l.next=m.next,m.next=l),s.interleaved=l,dn(r,f)}function dn(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Tn=!1;function Jl(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function If(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function fn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Pn(r,s,l){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,dn(r,l)}return m=f.interleaved,m===null?(s.next=s,Ql(f)):(s.next=m.next,m.next=s),f.interleaved=s,dn(r,l)}function ta(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var f=s.lanes;f&=r.pendingLanes,l|=f,s.lanes=l,ul(r,l)}}function Af(r,s){var l=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var k={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=k:v=v.next=k,l=l.next}while(l!==null);v===null?m=v=s:v=v.next=s}else m=v=s;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function ra(r,s,l,f){var m=r.updateQueue;Tn=!1;var v=m.firstBaseUpdate,k=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var R=L,q=R.next;R.next=null,k===null?v=q:k.next=q,k=R;var se=r.alternate;se!==null&&(se=se.updateQueue,L=se.lastBaseUpdate,L!==k&&(L===null?se.firstBaseUpdate=q:L.next=q,se.lastBaseUpdate=R))}if(v!==null){var le=m.baseState;k=0,se=q=R=null,L=v;do{var re=L.lane,_e=L.eventTime;if((f&re)===re){se!==null&&(se=se.next={eventTime:_e,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ee=r,Le=L;switch(re=s,_e=l,Le.tag){case 1:if(Ee=Le.payload,typeof Ee=="function"){le=Ee.call(_e,le,re);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Le.payload,re=typeof Ee=="function"?Ee.call(_e,le,re):Ee,re==null)break e;le=S({},le,re);break e;case 2:Tn=!0}}L.callback!==null&&L.lane!==0&&(r.flags|=64,re=m.effects,re===null?m.effects=[L]:re.push(L))}else _e={eventTime:_e,lane:re,tag:L.tag,payload:L.payload,callback:L.callback,next:null},se===null?(q=se=_e,R=le):se=se.next=_e,k|=re;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;re=L,L=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);if(se===null&&(R=le),m.baseState=R,m.firstBaseUpdate=q,m.lastBaseUpdate=se,s=m.shared.interleaved,s!==null){m=s;do k|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);rs|=k,r.lanes=k,r.memoizedState=le}}function Rf(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var f=r[s],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(n(191,m));m.call(f)}}}var Fi={},Wr=Cn(Fi),Ui=Cn(Fi),Bi=Cn(Fi);function es(r){if(r===Fi)throw Error(n(174));return r}function Yl(r,s){switch(it(Bi,s),it(Ui,r),it(Wr,Fi),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ie(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=ie(s,r)}ut(Wr),it(Wr,s)}function Us(){ut(Wr),ut(Ui),ut(Bi)}function Mf(r){es(Bi.current);var s=es(Wr.current),l=ie(s,r.type);s!==l&&(it(Ui,r),it(Wr,l))}function Xl(r){Ui.current===r&&(ut(Wr),ut(Ui))}var gt=Cn(0);function na(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zl=[];function ec(){for(var r=0;r<Zl.length;r++)Zl[r]._workInProgressVersionPrimary=null;Zl.length=0}var sa=B.ReactCurrentDispatcher,tc=B.ReactCurrentBatchConfig,ts=0,xt=null,Tt=null,At=null,ia=!1,qi=!1,Vi=0,B0=0;function Bt(){throw Error(n(321))}function rc(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Rr(r[l],s[l]))return!1;return!0}function nc(r,s,l,f,m,v){if(ts=v,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,sa.current=r===null||r.memoizedState===null?W0:G0,r=l(f,m),qi){v=0;do{if(qi=!1,Vi=0,25<=v)throw Error(n(301));v+=1,At=Tt=null,s.updateQueue=null,sa.current=K0,r=l(f,m)}while(qi)}if(sa.current=la,s=Tt!==null&&Tt.next!==null,ts=0,At=Tt=xt=null,ia=!1,s)throw Error(n(300));return r}function sc(){var r=Vi!==0;return Vi=0,r}function Gr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?xt.memoizedState=At=r:At=At.next=r,At}function Nr(){if(Tt===null){var r=xt.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=At===null?xt.memoizedState:At.next;if(s!==null)At=s,Tt=r;else{if(r===null)throw Error(n(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?xt.memoizedState=At=r:At=At.next=r}return At}function Hi(r,s){return typeof s=="function"?s(r):s}function ic(r){var s=Nr(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var f=Tt,m=f.baseQueue,v=l.pending;if(v!==null){if(m!==null){var k=m.next;m.next=v.next,v.next=k}f.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,f=f.baseState;var L=k=null,R=null,q=v;do{var se=q.lane;if((ts&se)===se)R!==null&&(R=R.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),f=q.hasEagerState?q.eagerState:r(f,q.action);else{var le={lane:se,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};R===null?(L=R=le,k=f):R=R.next=le,xt.lanes|=se,rs|=se}q=q.next}while(q!==null&&q!==v);R===null?k=f:R.next=L,Rr(f,s.memoizedState)||(ir=!0),s.memoizedState=f,s.baseState=k,s.baseQueue=R,l.lastRenderedState=f}if(r=l.interleaved,r!==null){m=r;do v=m.lane,xt.lanes|=v,rs|=v,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function oc(r){var s=Nr(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var f=l.dispatch,m=l.pending,v=s.memoizedState;if(m!==null){l.pending=null;var k=m=m.next;do v=r(v,k.action),k=k.next;while(k!==m);Rr(v,s.memoizedState)||(ir=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,f]}function Of(){}function zf(r,s){var l=xt,f=Nr(),m=s(),v=!Rr(f.memoizedState,m);if(v&&(f.memoizedState=m,ir=!0),f=f.queue,ac(Ff.bind(null,l,f,r),[r]),f.getSnapshot!==s||v||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Wi(9,$f.bind(null,l,f,m,s),void 0,null),Rt===null)throw Error(n(349));(ts&30)!==0||Df(l,s,m)}return m}function Df(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function $f(r,s,l,f){s.value=l,s.getSnapshot=f,Uf(s)&&Bf(r)}function Ff(r,s,l){return l(function(){Uf(s)&&Bf(r)})}function Uf(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Rr(r,l)}catch{return!0}}function Bf(r){var s=dn(r,1);s!==null&&$r(s,r,1,-1)}function qf(r){var s=Gr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:r},s.queue=r,r=r.dispatch=H0.bind(null,xt,r),[s.memoizedState,r]}function Wi(r,s,l,f){return r={tag:r,create:s,destroy:l,deps:f,next:null},s=xt.updateQueue,s===null?(s={lastEffect:null,stores:null},xt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(f=l.next,l.next=r,r.next=f,s.lastEffect=r)),r}function Vf(){return Nr().memoizedState}function oa(r,s,l,f){var m=Gr();xt.flags|=r,m.memoizedState=Wi(1|s,l,void 0,f===void 0?null:f)}function aa(r,s,l,f){var m=Nr();f=f===void 0?null:f;var v=void 0;if(Tt!==null){var k=Tt.memoizedState;if(v=k.destroy,f!==null&&rc(f,k.deps)){m.memoizedState=Wi(s,l,v,f);return}}xt.flags|=r,m.memoizedState=Wi(1|s,l,v,f)}function Hf(r,s){return oa(8390656,8,r,s)}function ac(r,s){return aa(2048,8,r,s)}function Wf(r,s){return aa(4,2,r,s)}function Gf(r,s){return aa(4,4,r,s)}function Kf(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Qf(r,s,l){return l=l!=null?l.concat([r]):null,aa(4,4,Kf.bind(null,s,r),l)}function lc(){}function Jf(r,s){var l=Nr();s=s===void 0?null:s;var f=l.memoizedState;return f!==null&&s!==null&&rc(s,f[1])?f[0]:(l.memoizedState=[r,s],r)}function Yf(r,s){var l=Nr();s=s===void 0?null:s;var f=l.memoizedState;return f!==null&&s!==null&&rc(s,f[1])?f[0]:(r=r(),l.memoizedState=[r,s],r)}function Xf(r,s,l){return(ts&21)===0?(r.baseState&&(r.baseState=!1,ir=!0),r.memoizedState=l):(Rr(l,s)||(l=Nd(),xt.lanes|=l,rs|=l,r.baseState=!0),s)}function q0(r,s){var l=Ze;Ze=l!==0&&4>l?l:4,r(!0);var f=tc.transition;tc.transition={};try{r(!1),s()}finally{Ze=l,tc.transition=f}}function Zf(){return Nr().memoizedState}function V0(r,s,l){var f=Rn(r);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},eh(r))th(s,l);else if(l=Lf(r,s,l,f),l!==null){var m=Xt();$r(l,r,f,m),rh(l,s,f)}}function H0(r,s,l){var f=Rn(r),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(eh(r))th(s,m);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var k=s.lastRenderedState,L=v(k,l);if(m.hasEagerState=!0,m.eagerState=L,Rr(L,k)){var R=s.interleaved;R===null?(m.next=m,Ql(s)):(m.next=R.next,R.next=m),s.interleaved=m;return}}catch{}finally{}l=Lf(r,s,m,f),l!==null&&(m=Xt(),$r(l,r,f,m),rh(l,s,f))}}function eh(r){var s=r.alternate;return r===xt||s!==null&&s===xt}function th(r,s){qi=ia=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function rh(r,s,l){if((l&4194240)!==0){var f=s.lanes;f&=r.pendingLanes,l|=f,s.lanes=l,ul(r,l)}}var la={readContext:Cr,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},W0={readContext:Cr,useCallback:function(r,s){return Gr().memoizedState=[r,s===void 0?null:s],r},useContext:Cr,useEffect:Hf,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,oa(4194308,4,Kf.bind(null,s,r),l)},useLayoutEffect:function(r,s){return oa(4194308,4,r,s)},useInsertionEffect:function(r,s){return oa(4,2,r,s)},useMemo:function(r,s){var l=Gr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var f=Gr();return s=l!==void 0?l(s):s,f.memoizedState=f.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},f.queue=r,r=r.dispatch=V0.bind(null,xt,r),[f.memoizedState,r]},useRef:function(r){var s=Gr();return r={current:r},s.memoizedState=r},useState:qf,useDebugValue:lc,useDeferredValue:function(r){return Gr().memoizedState=r},useTransition:function(){var r=qf(!1),s=r[0];return r=q0.bind(null,r[1]),Gr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var f=xt,m=Gr();if(ht){if(l===void 0)throw Error(n(407));l=l()}else{if(l=s(),Rt===null)throw Error(n(349));(ts&30)!==0||Df(f,s,l)}m.memoizedState=l;var v={value:l,getSnapshot:s};return m.queue=v,Hf(Ff.bind(null,f,v,r),[r]),f.flags|=2048,Wi(9,$f.bind(null,f,v,l,s),void 0,null),l},useId:function(){var r=Gr(),s=Rt.identifierPrefix;if(ht){var l=un,f=cn;l=(f&~(1<<32-nt(f)-1)).toString(32)+l,s=":"+s+"R"+l,l=Vi++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=B0++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},G0={readContext:Cr,useCallback:Jf,useContext:Cr,useEffect:ac,useImperativeHandle:Qf,useInsertionEffect:Wf,useLayoutEffect:Gf,useMemo:Yf,useReducer:ic,useRef:Vf,useState:function(){return ic(Hi)},useDebugValue:lc,useDeferredValue:function(r){var s=Nr();return Xf(s,Tt.memoizedState,r)},useTransition:function(){var r=ic(Hi)[0],s=Nr().memoizedState;return[r,s]},useMutableSource:Of,useSyncExternalStore:zf,useId:Zf,unstable_isNewReconciler:!1},K0={readContext:Cr,useCallback:Jf,useContext:Cr,useEffect:ac,useImperativeHandle:Qf,useInsertionEffect:Wf,useLayoutEffect:Gf,useMemo:Yf,useReducer:oc,useRef:Vf,useState:function(){return oc(Hi)},useDebugValue:lc,useDeferredValue:function(r){var s=Nr();return Tt===null?s.memoizedState=r:Xf(s,Tt.memoizedState,r)},useTransition:function(){var r=oc(Hi)[0],s=Nr().memoizedState;return[r,s]},useMutableSource:Of,useSyncExternalStore:zf,useId:Zf,unstable_isNewReconciler:!1};function Or(r,s){if(r&&r.defaultProps){s=S({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function cc(r,s,l,f){s=r.memoizedState,l=l(f,s),l=l==null?s:S({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ca={isMounted:function(r){return(r=r._reactInternals)?mr(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var f=Xt(),m=Rn(r),v=fn(f,m);v.payload=s,l!=null&&(v.callback=l),s=Pn(r,v,m),s!==null&&($r(s,r,m,f),ta(s,r,m))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var f=Xt(),m=Rn(r),v=fn(f,m);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Pn(r,v,m),s!==null&&($r(s,r,m,f),ta(s,r,m))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Xt(),f=Rn(r),m=fn(l,f);m.tag=2,s!=null&&(m.callback=s),s=Pn(r,m,f),s!==null&&($r(s,r,f,l),ta(s,r,f))}};function nh(r,s,l,f,m,v,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,k):s.prototype&&s.prototype.isPureReactComponent?!Ii(l,f)||!Ii(m,v):!0}function sh(r,s,l){var f=!1,m=Nn,v=s.contextType;return typeof v=="object"&&v!==null?v=Cr(v):(m=sr(s)?Jn:Ut.current,f=s.contextTypes,v=(f=f!=null)?Rs(r,m):Nn),s=new s(l,v),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ca,r.stateNode=s,s._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=v),s}function ih(r,s,l,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==r&&ca.enqueueReplaceState(s,s.state,null)}function uc(r,s,l,f){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},Jl(r);var v=s.contextType;typeof v=="object"&&v!==null?m.context=Cr(v):(v=sr(s)?Jn:Ut.current,m.context=Rs(r,v)),m.state=r.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(cc(r,s,v,l),m.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&ca.enqueueReplaceState(m,m.state,null),ra(r,l,m,f),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Bs(r,s){try{var l="",f=s;do l+=de(f),f=f.return;while(f);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:s,stack:m,digest:null}}function dc(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function fc(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Q0=typeof WeakMap=="function"?WeakMap:Map;function oh(r,s,l){l=fn(-1,l),l.tag=3,l.payload={element:null};var f=s.value;return l.callback=function(){ga||(ga=!0,Nc=f),fc(r,s)},l}function ah(r,s,l){l=fn(-1,l),l.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;l.payload=function(){return f(m)},l.callback=function(){fc(r,s)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){fc(r,s),typeof f!="function"&&(In===null?In=new Set([this]):In.add(this));var k=s.stack;this.componentDidCatch(s.value,{componentStack:k!==null?k:""})}),l}function lh(r,s,l){var f=r.pingCache;if(f===null){f=r.pingCache=new Q0;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(l)||(m.add(l),r=c2.bind(null,r,s,l),s.then(r,r))}function ch(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function uh(r,s,l,f,m){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=fn(-1,1),s.tag=2,Pn(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var J0=B.ReactCurrentOwner,ir=!1;function Yt(r,s,l,f){s.child=r===null?Pf(s,null,l,f):Ds(s,r.child,l,f)}function dh(r,s,l,f,m){l=l.render;var v=s.ref;return Fs(s,m),f=nc(r,s,l,f,v,m),l=sc(),r!==null&&!ir?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,hn(r,s,m)):(ht&&l&&Fl(s),s.flags|=1,Yt(r,s,f,m),s.child)}function fh(r,s,l,f,m){if(r===null){var v=l.type;return typeof v=="function"&&!Rc(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,hh(r,s,v,f,m)):(r=ka(l.type,null,f,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,(r.lanes&m)===0){var k=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ii,l(k,f)&&r.ref===s.ref)return hn(r,s,m)}return s.flags|=1,r=On(v,f),r.ref=s.ref,r.return=s,s.child=r}function hh(r,s,l,f,m){if(r!==null){var v=r.memoizedProps;if(Ii(v,f)&&r.ref===s.ref)if(ir=!1,s.pendingProps=f=v,(r.lanes&m)!==0)(r.flags&131072)!==0&&(ir=!0);else return s.lanes=r.lanes,hn(r,s,m)}return hc(r,s,l,f,m)}function ph(r,s,l){var f=s.pendingProps,m=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Vs,yr),yr|=l;else{if((l&1073741824)===0)return r=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,it(Vs,yr),yr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,it(Vs,yr),yr|=f}else v!==null?(f=v.baseLanes|l,s.memoizedState=null):f=l,it(Vs,yr),yr|=f;return Yt(r,s,m,l),s.child}function mh(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function hc(r,s,l,f,m){var v=sr(l)?Jn:Ut.current;return v=Rs(s,v),Fs(s,m),l=nc(r,s,l,f,v,m),f=sc(),r!==null&&!ir?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,hn(r,s,m)):(ht&&f&&Fl(s),s.flags|=1,Yt(r,s,l,m),s.child)}function gh(r,s,l,f,m){if(sr(l)){var v=!0;Go(s)}else v=!1;if(Fs(s,m),s.stateNode===null)da(r,s),sh(s,l,f),uc(s,l,f,m),f=!0;else if(r===null){var k=s.stateNode,L=s.memoizedProps;k.props=L;var R=k.context,q=l.contextType;typeof q=="object"&&q!==null?q=Cr(q):(q=sr(l)?Jn:Ut.current,q=Rs(s,q));var se=l.getDerivedStateFromProps,le=typeof se=="function"||typeof k.getSnapshotBeforeUpdate=="function";le||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==f||R!==q)&&ih(s,k,f,q),Tn=!1;var re=s.memoizedState;k.state=re,ra(s,f,k,m),R=s.memoizedState,L!==f||re!==R||nr.current||Tn?(typeof se=="function"&&(cc(s,l,se,f),R=s.memoizedState),(L=Tn||nh(s,l,L,f,re,R,q))?(le||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(s.flags|=4194308)):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=R),k.props=f,k.state=R,k.context=q,f=L):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{k=s.stateNode,If(r,s),L=s.memoizedProps,q=s.type===s.elementType?L:Or(s.type,L),k.props=q,le=s.pendingProps,re=k.context,R=l.contextType,typeof R=="object"&&R!==null?R=Cr(R):(R=sr(l)?Jn:Ut.current,R=Rs(s,R));var _e=l.getDerivedStateFromProps;(se=typeof _e=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==le||re!==R)&&ih(s,k,f,R),Tn=!1,re=s.memoizedState,k.state=re,ra(s,f,k,m);var Ee=s.memoizedState;L!==le||re!==Ee||nr.current||Tn?(typeof _e=="function"&&(cc(s,l,_e,f),Ee=s.memoizedState),(q=Tn||nh(s,l,q,f,re,Ee,R)||!1)?(se||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Ee,R),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Ee,R)),typeof k.componentDidUpdate=="function"&&(s.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ee),k.props=f,k.state=Ee,k.context=R,f=q):(typeof k.componentDidUpdate!="function"||L===r.memoizedProps&&re===r.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&re===r.memoizedState||(s.flags|=1024),f=!1)}return pc(r,s,l,f,v,m)}function pc(r,s,l,f,m,v){mh(r,s);var k=(s.flags&128)!==0;if(!f&&!k)return m&&wf(s,l,!1),hn(r,s,v);f=s.stateNode,J0.current=s;var L=k&&typeof l.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,r!==null&&k?(s.child=Ds(s,r.child,null,v),s.child=Ds(s,null,L,v)):Yt(r,s,L,v),s.memoizedState=f.state,m&&wf(s,l,!0),s.child}function xh(r){var s=r.stateNode;s.pendingContext?yf(r,s.pendingContext,s.pendingContext!==s.context):s.context&&yf(r,s.context,!1),Yl(r,s.containerInfo)}function vh(r,s,l,f,m){return zs(),Vl(m),s.flags|=256,Yt(r,s,l,f),s.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function gc(r){return{baseLanes:r,cachePool:null,transitions:null}}function yh(r,s,l){var f=s.pendingProps,m=gt.current,v=!1,k=(s.flags&128)!==0,L;if((L=k)||(L=r!==null&&r.memoizedState===null?!1:(m&2)!==0),L?(v=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),it(gt,m&1),r===null)return ql(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(k=f.children,r=f.fallback,v?(f=s.mode,v=s.child,k={mode:"hidden",children:k},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=k):v=_a(k,f,0,null),r=os(r,f,l,null),v.return=s,r.return=s,v.sibling=r,s.child=v,s.child.memoizedState=gc(l),s.memoizedState=mc,r):xc(s,k));if(m=r.memoizedState,m!==null&&(L=m.dehydrated,L!==null))return Y0(r,s,k,f,L,m,l);if(v){v=f.fallback,k=s.mode,m=r.child,L=m.sibling;var R={mode:"hidden",children:f.children};return(k&1)===0&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=R,s.deletions=null):(f=On(m,R),f.subtreeFlags=m.subtreeFlags&14680064),L!==null?v=On(L,v):(v=os(v,k,l,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,k=r.child.memoizedState,k=k===null?gc(l):{baseLanes:k.baseLanes|l,cachePool:null,transitions:k.transitions},v.memoizedState=k,v.childLanes=r.childLanes&~l,s.memoizedState=mc,f}return v=r.child,r=v.sibling,f=On(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=l),f.return=s,f.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=f,s.memoizedState=null,f}function xc(r,s){return s=_a({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function ua(r,s,l,f){return f!==null&&Vl(f),Ds(s,r.child,null,l),r=xc(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Y0(r,s,l,f,m,v,k){if(l)return s.flags&256?(s.flags&=-257,f=dc(Error(n(422))),ua(r,s,k,f)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(v=f.fallback,m=s.mode,f=_a({mode:"visible",children:f.children},m,0,null),v=os(v,m,k,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&Ds(s,r.child,null,k),s.child.memoizedState=gc(k),s.memoizedState=mc,v);if((s.mode&1)===0)return ua(r,s,k,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var L=f.dgst;return f=L,v=Error(n(419)),f=dc(v,f,void 0),ua(r,s,k,f)}if(L=(k&r.childLanes)!==0,ir||L){if(f=Rt,f!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|k))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,dn(r,m),$r(f,r,m,-1))}return Ac(),f=dc(Error(n(421))),ua(r,s,k,f)}return m.data==="$?"?(s.flags|=128,s.child=r.child,s=u2.bind(null,r),m._reactRetry=s,null):(r=v.treeContext,vr=Sn(m.nextSibling),xr=s,ht=!0,Mr=null,r!==null&&(jr[Sr++]=cn,jr[Sr++]=un,jr[Sr++]=Yn,cn=r.id,un=r.overflow,Yn=s),s=xc(s,f.children),s.flags|=4096,s)}function bh(r,s,l){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Kl(r.return,s,l)}function vc(r,s,l,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function wh(r,s,l){var f=s.pendingProps,m=f.revealOrder,v=f.tail;if(Yt(r,s,f.children,l),f=gt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&bh(r,l,s);else if(r.tag===19)bh(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(it(gt,f),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)r=l.alternate,r!==null&&na(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),vc(s,!1,m,l,v);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&na(r)===null){s.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}vc(s,!0,l,null,v);break;case"together":vc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function da(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function hn(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),rs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,l=On(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=On(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function X0(r,s,l){switch(s.tag){case 3:xh(s),zs();break;case 5:Mf(s);break;case 1:sr(s.type)&&Go(s);break;case 4:Yl(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;it(Zo,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(it(gt,gt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?yh(r,s,l):(it(gt,gt.current&1),r=hn(r,s,l),r!==null?r.sibling:null);it(gt,gt.current&1);break;case 19:if(f=(l&s.childLanes)!==0,(r.flags&128)!==0){if(f)return wh(r,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),it(gt,gt.current),f)break;return null;case 22:case 23:return s.lanes=0,ph(r,s,l)}return hn(r,s,l)}var kh,yc,_h,jh;kh=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},yc=function(){},_h=function(r,s,l,f){var m=r.memoizedProps;if(m!==f){r=s.stateNode,es(Wr.current);var v=null;switch(l){case"input":m=vt(r,m),f=vt(r,f),v=[];break;case"select":m=S({},m,{value:void 0}),f=S({},f,{value:void 0}),v=[];break;case"textarea":m=lt(r,m),f=lt(r,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Vo)}mt(l,f);var k;l=null;for(q in m)if(!f.hasOwnProperty(q)&&m.hasOwnProperty(q)&&m[q]!=null)if(q==="style"){var L=m[q];for(k in L)L.hasOwnProperty(k)&&(l||(l={}),l[k]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?v||(v=[]):(v=v||[]).push(q,null));for(q in f){var R=f[q];if(L=m?.[q],f.hasOwnProperty(q)&&R!==L&&(R!=null||L!=null))if(q==="style")if(L){for(k in L)!L.hasOwnProperty(k)||R&&R.hasOwnProperty(k)||(l||(l={}),l[k]="");for(k in R)R.hasOwnProperty(k)&&L[k]!==R[k]&&(l||(l={}),l[k]=R[k])}else l||(v||(v=[]),v.push(q,l)),l=R;else q==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,L=L?L.__html:void 0,R!=null&&L!==R&&(v=v||[]).push(q,R)):q==="children"?typeof R!="string"&&typeof R!="number"||(v=v||[]).push(q,""+R):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(R!=null&&q==="onScroll"&&ct("scroll",r),v||L===R||(v=[])):(v=v||[]).push(q,R))}l&&(v=v||[]).push("style",l);var q=v;(s.updateQueue=q)&&(s.flags|=4)}},jh=function(r,s,l,f){l!==f&&(s.flags|=4)};function Gi(r,s){if(!ht)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,f=0;if(s)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=f,r.childLanes=l,s}function Z0(r,s,l){var f=s.pendingProps;switch(Ul(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return sr(s.type)&&Wo(),qt(s),null;case 3:return f=s.stateNode,Us(),ut(nr),ut(Ut),ec(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Yo(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mr!==null&&(Pc(Mr),Mr=null))),yc(r,s),qt(s),null;case 5:Xl(s);var m=es(Bi.current);if(l=s.type,r!==null&&s.stateNode!=null)_h(r,s,l,f,m),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(n(166));return qt(s),null}if(r=es(Wr.current),Yo(s)){f=s.stateNode,l=s.type;var v=s.memoizedProps;switch(f[Hr]=s,f[zi]=v,r=(s.mode&1)!==0,l){case"dialog":ct("cancel",f),ct("close",f);break;case"iframe":case"object":case"embed":ct("load",f);break;case"video":case"audio":for(m=0;m<Ri.length;m++)ct(Ri[m],f);break;case"source":ct("error",f);break;case"img":case"image":case"link":ct("error",f),ct("load",f);break;case"details":ct("toggle",f);break;case"input":ve(f,v),ct("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},ct("invalid",f);break;case"textarea":en(f,v),ct("invalid",f)}mt(l,v),m=null;for(var k in v)if(v.hasOwnProperty(k)){var L=v[k];k==="children"?typeof L=="string"?f.textContent!==L&&(v.suppressHydrationWarning!==!0&&qo(f.textContent,L,r),m=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(v.suppressHydrationWarning!==!0&&qo(f.textContent,L,r),m=["children",""+L]):o.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&ct("scroll",f)}switch(l){case"input":Pe(f),Ct(f,v,!0);break;case"textarea":Pe(f),tn(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Vo)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Y(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=k.createElement(l,{is:f.is}):(r=k.createElement(l),l==="select"&&(k=r,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):r=k.createElementNS(r,l),r[Hr]=s,r[zi]=f,kh(r,s,!1,!1),s.stateNode=r;e:{switch(k=Qe(l,f),l){case"dialog":ct("cancel",r),ct("close",r),m=f;break;case"iframe":case"object":case"embed":ct("load",r),m=f;break;case"video":case"audio":for(m=0;m<Ri.length;m++)ct(Ri[m],r);m=f;break;case"source":ct("error",r),m=f;break;case"img":case"image":case"link":ct("error",r),ct("load",r),m=f;break;case"details":ct("toggle",r),m=f;break;case"input":ve(r,f),m=vt(r,f),ct("invalid",r);break;case"option":m=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},m=S({},f,{value:void 0}),ct("invalid",r);break;case"textarea":en(r,f),m=lt(r,f),ct("invalid",r);break;default:m=f}mt(l,m),L=m;for(v in L)if(L.hasOwnProperty(v)){var R=L[v];v==="style"?dr(r,R):v==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Fe(r,R)):v==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&be(r,R):typeof R=="number"&&be(r,""+R):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?R!=null&&v==="onScroll"&&ct("scroll",r):R!=null&&A(r,v,R,k))}switch(l){case"input":Pe(r),Ct(r,f,!1);break;case"textarea":Pe(r),tn(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Ce(f.value));break;case"select":r.multiple=!!f.multiple,v=f.value,v!=null?Kt(r,!!f.multiple,v,!1):f.defaultValue!=null&&Kt(r,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=Vo)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(r&&s.stateNode!=null)jh(r,s,r.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(n(166));if(l=es(Bi.current),es(Wr.current),Yo(s)){if(f=s.stateNode,l=s.memoizedProps,f[Hr]=s,(v=f.nodeValue!==l)&&(r=xr,r!==null))switch(r.tag){case 3:qo(f.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&qo(f.nodeValue,l,(r.mode&1)!==0)}v&&(s.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Hr]=s,s.stateNode=f}return qt(s),null;case 13:if(ut(gt),f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ht&&vr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Nf(),zs(),s.flags|=98560,v=!1;else if(v=Yo(s),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Hr]=s}else zs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),v=!1}else Mr!==null&&(Pc(Mr),Mr=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(gt.current&1)!==0?Pt===0&&(Pt=3):Ac())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return Us(),yc(r,s),r===null&&Mi(s.stateNode.containerInfo),qt(s),null;case 10:return Gl(s.type._context),qt(s),null;case 17:return sr(s.type)&&Wo(),qt(s),null;case 19:if(ut(gt),v=s.memoizedState,v===null)return qt(s),null;if(f=(s.flags&128)!==0,k=v.rendering,k===null)if(f)Gi(v,!1);else{if(Pt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(k=na(r),k!==null){for(s.flags|=128,Gi(v,!1),f=k.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=l,l=s.child;l!==null;)v=l,r=f,v.flags&=14680066,k=v.alternate,k===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=k.childLanes,v.lanes=k.lanes,v.child=k.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=k.memoizedProps,v.memoizedState=k.memoizedState,v.updateQueue=k.updateQueue,v.type=k.type,r=k.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return it(gt,gt.current&1|2),s.child}r=r.sibling}v.tail!==null&&D()>Hs&&(s.flags|=128,f=!0,Gi(v,!1),s.lanes=4194304)}else{if(!f)if(r=na(k),r!==null){if(s.flags|=128,f=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Gi(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!ht)return qt(s),null}else 2*D()-v.renderingStartTime>Hs&&l!==1073741824&&(s.flags|=128,f=!0,Gi(v,!1),s.lanes=4194304);v.isBackwards?(k.sibling=s.child,s.child=k):(l=v.last,l!==null?l.sibling=k:s.child=k,v.last=k)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=D(),s.sibling=null,l=gt.current,it(gt,f?l&1|2:l&1),s):(qt(s),null);case 22:case 23:return Ic(),f=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(yr&1073741824)!==0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function e2(r,s){switch(Ul(s),s.tag){case 1:return sr(s.type)&&Wo(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Us(),ut(nr),ut(Ut),ec(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Xl(s),null;case 13:if(ut(gt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));zs()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ut(gt),null;case 4:return Us(),null;case 10:return Gl(s.type._context),null;case 22:case 23:return Ic(),null;case 24:return null;default:return null}}var fa=!1,Vt=!1,t2=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function qs(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){bt(r,s,f)}else l.current=null}function bc(r,s,l){try{l()}catch(f){bt(r,s,f)}}var Sh=!1;function r2(r,s){if(Il=Io,r=rf(),jl(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var k=0,L=-1,R=-1,q=0,se=0,le=r,re=null;t:for(;;){for(var _e;le!==l||m!==0&&le.nodeType!==3||(L=k+m),le!==v||f!==0&&le.nodeType!==3||(R=k+f),le.nodeType===3&&(k+=le.nodeValue.length),(_e=le.firstChild)!==null;)re=le,le=_e;for(;;){if(le===r)break t;if(re===l&&++q===m&&(L=k),re===v&&++se===f&&(R=k),(_e=le.nextSibling)!==null)break;le=re,re=le.parentNode}le=_e}l=L===-1||R===-1?null:{start:L,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Al={focusedElem:r,selectionRange:l},Io=!1,Ne=s;Ne!==null;)if(s=Ne,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Ne=r;else for(;Ne!==null;){s=Ne;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Le=Ee.memoizedProps,kt=Ee.memoizedState,F=s.stateNode,O=F.getSnapshotBeforeUpdate(s.elementType===s.type?Le:Or(s.type,Le),kt);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(me){bt(s,s.return,me)}if(r=s.sibling,r!==null){r.return=s.return,Ne=r;break}Ne=s.return}return Ee=Sh,Sh=!1,Ee}function Ki(r,s,l){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&r)===r){var v=m.destroy;m.destroy=void 0,v!==void 0&&bc(s,l,v)}m=m.next}while(m!==f)}}function ha(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var f=l.create;l.destroy=f()}l=l.next}while(l!==s)}}function wc(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function Ch(r){var s=r.alternate;s!==null&&(r.alternate=null,Ch(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Hr],delete s[zi],delete s[zl],delete s[D0],delete s[$0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Nh(r){return r.tag===5||r.tag===3||r.tag===4}function Eh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Nh(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function kc(r,s,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Vo));else if(f!==4&&(r=r.child,r!==null))for(kc(r,s,l),r=r.sibling;r!==null;)kc(r,s,l),r=r.sibling}function _c(r,s,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(_c(r,s,l),r=r.sibling;r!==null;)_c(r,s,l),r=r.sibling}var zt=null,zr=!1;function Ln(r,s,l){for(l=l.child;l!==null;)Th(r,s,l),l=l.sibling}function Th(r,s,l){if(oe&&typeof oe.onCommitFiberUnmount=="function")try{oe.onCommitFiberUnmount(ce,l)}catch{}switch(l.tag){case 5:Vt||qs(l,s);case 6:var f=zt,m=zr;zt=null,Ln(r,s,l),zt=f,zr=m,zt!==null&&(zr?(r=zt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):zt.removeChild(l.stateNode));break;case 18:zt!==null&&(zr?(r=zt,l=l.stateNode,r.nodeType===8?Ol(r.parentNode,l):r.nodeType===1&&Ol(r,l),Ci(r)):Ol(zt,l.stateNode));break;case 4:f=zt,m=zr,zt=l.stateNode.containerInfo,zr=!0,Ln(r,s,l),zt=f,zr=m;break;case 0:case 11:case 14:case 15:if(!Vt&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,k=v.destroy;v=v.tag,k!==void 0&&((v&2)!==0||(v&4)!==0)&&bc(l,s,k),m=m.next}while(m!==f)}Ln(r,s,l);break;case 1:if(!Vt&&(qs(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(L){bt(l,s,L)}Ln(r,s,l);break;case 21:Ln(r,s,l);break;case 22:l.mode&1?(Vt=(f=Vt)||l.memoizedState!==null,Ln(r,s,l),Vt=f):Ln(r,s,l);break;default:Ln(r,s,l)}}function Ph(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new t2),s.forEach(function(f){var m=d2.bind(null,r,f);l.has(f)||(l.add(f),f.then(m,m))})}}function Dr(r,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var v=r,k=s,L=k;e:for(;L!==null;){switch(L.tag){case 5:zt=L.stateNode,zr=!1;break e;case 3:zt=L.stateNode.containerInfo,zr=!0;break e;case 4:zt=L.stateNode.containerInfo,zr=!0;break e}L=L.return}if(zt===null)throw Error(n(160));Th(v,k,m),zt=null,zr=!1;var R=m.alternate;R!==null&&(R.return=null),m.return=null}catch(q){bt(m,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Lh(s,r),s=s.sibling}function Lh(r,s){var l=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Dr(s,r),Kr(r),f&4){try{Ki(3,r,r.return),ha(3,r)}catch(Le){bt(r,r.return,Le)}try{Ki(5,r,r.return)}catch(Le){bt(r,r.return,Le)}}break;case 1:Dr(s,r),Kr(r),f&512&&l!==null&&qs(l,l.return);break;case 5:if(Dr(s,r),Kr(r),f&512&&l!==null&&qs(l,l.return),r.flags&32){var m=r.stateNode;try{be(m,"")}catch(Le){bt(r,r.return,Le)}}if(f&4&&(m=r.stateNode,m!=null)){var v=r.memoizedProps,k=l!==null?l.memoizedProps:v,L=r.type,R=r.updateQueue;if(r.updateQueue=null,R!==null)try{L==="input"&&v.type==="radio"&&v.name!=null&&Ve(m,v),Qe(L,k);var q=Qe(L,v);for(k=0;k<R.length;k+=2){var se=R[k],le=R[k+1];se==="style"?dr(m,le):se==="dangerouslySetInnerHTML"?Fe(m,le):se==="children"?be(m,le):A(m,se,le,q)}switch(L){case"input":pt(m,v);break;case"textarea":Qt(m,v);break;case"select":var re=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var _e=v.value;_e!=null?Kt(m,!!v.multiple,_e,!1):re!==!!v.multiple&&(v.defaultValue!=null?Kt(m,!!v.multiple,v.defaultValue,!0):Kt(m,!!v.multiple,v.multiple?[]:"",!1))}m[zi]=v}catch(Le){bt(r,r.return,Le)}}break;case 6:if(Dr(s,r),Kr(r),f&4){if(r.stateNode===null)throw Error(n(162));m=r.stateNode,v=r.memoizedProps;try{m.nodeValue=v}catch(Le){bt(r,r.return,Le)}}break;case 3:if(Dr(s,r),Kr(r),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Ci(s.containerInfo)}catch(Le){bt(r,r.return,Le)}break;case 4:Dr(s,r),Kr(r);break;case 13:Dr(s,r),Kr(r),m=r.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Cc=D())),f&4&&Ph(r);break;case 22:if(se=l!==null&&l.memoizedState!==null,r.mode&1?(Vt=(q=Vt)||se,Dr(s,r),Vt=q):Dr(s,r),Kr(r),f&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!se&&(r.mode&1)!==0)for(Ne=r,se=r.child;se!==null;){for(le=Ne=se;Ne!==null;){switch(re=Ne,_e=re.child,re.tag){case 0:case 11:case 14:case 15:Ki(4,re,re.return);break;case 1:qs(re,re.return);var Ee=re.stateNode;if(typeof Ee.componentWillUnmount=="function"){f=re,l=re.return;try{s=f,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(Le){bt(f,l,Le)}}break;case 5:qs(re,re.return);break;case 22:if(re.memoizedState!==null){Rh(le);continue}}_e!==null?(_e.return=re,Ne=_e):Rh(le)}se=se.sibling}e:for(se=null,le=r;;){if(le.tag===5){if(se===null){se=le;try{m=le.stateNode,q?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(L=le.stateNode,R=le.memoizedProps.style,k=R!=null&&R.hasOwnProperty("display")?R.display:null,L.style.display=rt("display",k))}catch(Le){bt(r,r.return,Le)}}}else if(le.tag===6){if(se===null)try{le.stateNode.nodeValue=q?"":le.memoizedProps}catch(Le){bt(r,r.return,Le)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===r)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===r)break e;for(;le.sibling===null;){if(le.return===null||le.return===r)break e;se===le&&(se=null),le=le.return}se===le&&(se=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Dr(s,r),Kr(r),f&4&&Ph(r);break;case 21:break;default:Dr(s,r),Kr(r)}}function Kr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Nh(l)){var f=l;break e}l=l.return}throw Error(n(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(be(m,""),f.flags&=-33);var v=Eh(r);_c(r,v,m);break;case 3:case 4:var k=f.stateNode.containerInfo,L=Eh(r);kc(r,L,k);break;default:throw Error(n(161))}}catch(R){bt(r,r.return,R)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function n2(r,s,l){Ne=r,Ih(r)}function Ih(r,s,l){for(var f=(r.mode&1)!==0;Ne!==null;){var m=Ne,v=m.child;if(m.tag===22&&f){var k=m.memoizedState!==null||fa;if(!k){var L=m.alternate,R=L!==null&&L.memoizedState!==null||Vt;L=fa;var q=Vt;if(fa=k,(Vt=R)&&!q)for(Ne=m;Ne!==null;)k=Ne,R=k.child,k.tag===22&&k.memoizedState!==null?Mh(m):R!==null?(R.return=k,Ne=R):Mh(m);for(;v!==null;)Ne=v,Ih(v),v=v.sibling;Ne=m,fa=L,Vt=q}Ah(r)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,Ne=v):Ah(r)}}function Ah(r){for(;Ne!==null;){var s=Ne;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Vt||ha(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Vt)if(l===null)f.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:Or(s.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Rf(s,v,f);break;case 3:var k=s.updateQueue;if(k!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Rf(s,k,l)}break;case 5:var L=s.stateNode;if(l===null&&s.flags&4){l=L;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var se=q.memoizedState;if(se!==null){var le=se.dehydrated;le!==null&&Ci(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vt||s.flags&512&&wc(s)}catch(re){bt(s,s.return,re)}}if(s===r){Ne=null;break}if(l=s.sibling,l!==null){l.return=s.return,Ne=l;break}Ne=s.return}}function Rh(r){for(;Ne!==null;){var s=Ne;if(s===r){Ne=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Ne=l;break}Ne=s.return}}function Mh(r){for(;Ne!==null;){var s=Ne;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{ha(4,s)}catch(R){bt(s,l,R)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(R){bt(s,m,R)}}var v=s.return;try{wc(s)}catch(R){bt(s,v,R)}break;case 5:var k=s.return;try{wc(s)}catch(R){bt(s,k,R)}}}catch(R){bt(s,s.return,R)}if(s===r){Ne=null;break}var L=s.sibling;if(L!==null){L.return=s.return,Ne=L;break}Ne=s.return}}var s2=Math.ceil,pa=B.ReactCurrentDispatcher,jc=B.ReactCurrentOwner,Er=B.ReactCurrentBatchConfig,Ye=0,Rt=null,_t=null,Dt=0,yr=0,Vs=Cn(0),Pt=0,Qi=null,rs=0,ma=0,Sc=0,Ji=null,or=null,Cc=0,Hs=1/0,pn=null,ga=!1,Nc=null,In=null,xa=!1,An=null,va=0,Yi=0,Ec=null,ya=-1,ba=0;function Xt(){return(Ye&6)!==0?D():ya!==-1?ya:ya=D()}function Rn(r){return(r.mode&1)===0?1:(Ye&2)!==0&&Dt!==0?Dt&-Dt:U0.transition!==null?(ba===0&&(ba=Nd()),ba):(r=Ze,r!==0||(r=window.event,r=r===void 0?16:Od(r.type)),r)}function $r(r,s,l,f){if(50<Yi)throw Yi=0,Ec=null,Error(n(185));wi(r,l,f),((Ye&2)===0||r!==Rt)&&(r===Rt&&((Ye&2)===0&&(ma|=l),Pt===4&&Mn(r,Dt)),ar(r,f),l===1&&Ye===0&&(s.mode&1)===0&&(Hs=D()+500,Ko&&En()))}function ar(r,s){var l=r.callbackNode;U1(r,s);var f=To(r,r===Rt?Dt:0);if(f===0)l!==null&&Kn(l),r.callbackNode=null,r.callbackPriority=0;else if(s=f&-f,r.callbackPriority!==s){if(l!=null&&Kn(l),s===1)r.tag===0?F0(zh.bind(null,r)):kf(zh.bind(null,r)),O0(function(){(Ye&6)===0&&En()}),l=null;else{switch(Ed(f)){case 1:l=C;break;case 4:l=V;break;case 16:l=Z;break;case 536870912:l=je;break;default:l=Z}l=Hh(l,Oh.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Oh(r,s){if(ya=-1,ba=0,(Ye&6)!==0)throw Error(n(327));var l=r.callbackNode;if(Ws()&&r.callbackNode!==l)return null;var f=To(r,r===Rt?Dt:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||s)s=wa(r,f);else{s=f;var m=Ye;Ye|=2;var v=$h();(Rt!==r||Dt!==s)&&(pn=null,Hs=D()+500,ss(r,s));do try{a2();break}catch(L){Dh(r,L)}while(!0);Wl(),pa.current=v,Ye=m,_t!==null?s=0:(Rt=null,Dt=0,s=Pt)}if(s!==0){if(s===2&&(m=ll(r),m!==0&&(f=m,s=Tc(r,m))),s===1)throw l=Qi,ss(r,0),Mn(r,f),ar(r,D()),l;if(s===6)Mn(r,f);else{if(m=r.current.alternate,(f&30)===0&&!i2(m)&&(s=wa(r,f),s===2&&(v=ll(r),v!==0&&(f=v,s=Tc(r,v))),s===1))throw l=Qi,ss(r,0),Mn(r,f),ar(r,D()),l;switch(r.finishedWork=m,r.finishedLanes=f,s){case 0:case 1:throw Error(n(345));case 2:is(r,or,pn);break;case 3:if(Mn(r,f),(f&130023424)===f&&(s=Cc+500-D(),10<s)){if(To(r,0)!==0)break;if(m=r.suspendedLanes,(m&f)!==f){Xt(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=Ml(is.bind(null,r,or,pn),s);break}is(r,or,pn);break;case 4:if(Mn(r,f),(f&4194240)===f)break;for(s=r.eventTimes,m=-1;0<f;){var k=31-nt(f);v=1<<k,k=s[k],k>m&&(m=k),f&=~v}if(f=m,f=D()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*s2(f/1960))-f,10<f){r.timeoutHandle=Ml(is.bind(null,r,or,pn),f);break}is(r,or,pn);break;case 5:is(r,or,pn);break;default:throw Error(n(329))}}}return ar(r,D()),r.callbackNode===l?Oh.bind(null,r):null}function Tc(r,s){var l=Ji;return r.current.memoizedState.isDehydrated&&(ss(r,s).flags|=256),r=wa(r,s),r!==2&&(s=or,or=l,s!==null&&Pc(s)),r}function Pc(r){or===null?or=r:or.push.apply(or,r)}function i2(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!Rr(v(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mn(r,s){for(s&=~Sc,s&=~ma,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-nt(s),f=1<<l;r[l]=-1,s&=~f}}function zh(r){if((Ye&6)!==0)throw Error(n(327));Ws();var s=To(r,0);if((s&1)===0)return ar(r,D()),null;var l=wa(r,s);if(r.tag!==0&&l===2){var f=ll(r);f!==0&&(s=f,l=Tc(r,f))}if(l===1)throw l=Qi,ss(r,0),Mn(r,s),ar(r,D()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,is(r,or,pn),ar(r,D()),null}function Lc(r,s){var l=Ye;Ye|=1;try{return r(s)}finally{Ye=l,Ye===0&&(Hs=D()+500,Ko&&En())}}function ns(r){An!==null&&An.tag===0&&(Ye&6)===0&&Ws();var s=Ye;Ye|=1;var l=Er.transition,f=Ze;try{if(Er.transition=null,Ze=1,r)return r()}finally{Ze=f,Er.transition=l,Ye=s,(Ye&6)===0&&En()}}function Ic(){yr=Vs.current,ut(Vs)}function ss(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,M0(l)),_t!==null)for(l=_t.return;l!==null;){var f=l;switch(Ul(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Wo();break;case 3:Us(),ut(nr),ut(Ut),ec();break;case 5:Xl(f);break;case 4:Us();break;case 13:ut(gt);break;case 19:ut(gt);break;case 10:Gl(f.type._context);break;case 22:case 23:Ic()}l=l.return}if(Rt=r,_t=r=On(r.current,null),Dt=yr=s,Pt=0,Qi=null,Sc=ma=rs=0,or=Ji=null,Zn!==null){for(s=0;s<Zn.length;s++)if(l=Zn[s],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,v=l.pending;if(v!==null){var k=v.next;v.next=m,f.next=k}l.pending=f}Zn=null}return r}function Dh(r,s){do{var l=_t;try{if(Wl(),sa.current=la,ia){for(var f=xt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}ia=!1}if(ts=0,At=Tt=xt=null,qi=!1,Vi=0,jc.current=null,l===null||l.return===null){Pt=1,Qi=s,_t=null;break}e:{var v=r,k=l.return,L=l,R=s;if(s=Dt,L.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var q=R,se=L,le=se.tag;if((se.mode&1)===0&&(le===0||le===11||le===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var _e=ch(k);if(_e!==null){_e.flags&=-257,uh(_e,k,L,v,s),_e.mode&1&&lh(v,q,s),s=_e,R=q;var Ee=s.updateQueue;if(Ee===null){var Le=new Set;Le.add(R),s.updateQueue=Le}else Ee.add(R);break e}else{if((s&1)===0){lh(v,q,s),Ac();break e}R=Error(n(426))}}else if(ht&&L.mode&1){var kt=ch(k);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),uh(kt,k,L,v,s),Vl(Bs(R,L));break e}}v=R=Bs(R,L),Pt!==4&&(Pt=2),Ji===null?Ji=[v]:Ji.push(v),v=k;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var F=oh(v,R,s);Af(v,F);break e;case 1:L=R;var O=v.type,U=v.stateNode;if((v.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(In===null||!In.has(U)))){v.flags|=65536,s&=-s,v.lanes|=s;var me=ah(v,L,s);Af(v,me);break e}}v=v.return}while(v!==null)}Uh(l)}catch(Ie){s=Ie,_t===l&&l!==null&&(_t=l=l.return);continue}break}while(!0)}function $h(){var r=pa.current;return pa.current=la,r===null?la:r}function Ac(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Rt===null||(rs&268435455)===0&&(ma&268435455)===0||Mn(Rt,Dt)}function wa(r,s){var l=Ye;Ye|=2;var f=$h();(Rt!==r||Dt!==s)&&(pn=null,ss(r,s));do try{o2();break}catch(m){Dh(r,m)}while(!0);if(Wl(),Ye=l,pa.current=f,_t!==null)throw Error(n(261));return Rt=null,Dt=0,Pt}function o2(){for(;_t!==null;)Fh(_t)}function a2(){for(;_t!==null&&!js();)Fh(_t)}function Fh(r){var s=Vh(r.alternate,r,yr);r.memoizedProps=r.pendingProps,s===null?Uh(r):_t=s,jc.current=null}function Uh(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=Z0(l,s,yr),l!==null){_t=l;return}}else{if(l=e2(l,s),l!==null){l.flags&=32767,_t=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Pt=6,_t=null;return}}if(s=s.sibling,s!==null){_t=s;return}_t=s=r}while(s!==null);Pt===0&&(Pt=5)}function is(r,s,l){var f=Ze,m=Er.transition;try{Er.transition=null,Ze=1,l2(r,s,l,f)}finally{Er.transition=m,Ze=f}return null}function l2(r,s,l,f){do Ws();while(An!==null);if((Ye&6)!==0)throw Error(n(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var v=l.lanes|l.childLanes;if(B1(r,v),r===Rt&&(_t=Rt=null,Dt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||xa||(xa=!0,Hh(Z,function(){return Ws(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Er.transition,Er.transition=null;var k=Ze;Ze=1;var L=Ye;Ye|=4,jc.current=null,r2(r,l),Lh(l,r),E0(Al),Io=!!Il,Al=Il=null,r.current=l,n2(l),yi(),Ye=L,Ze=k,Er.transition=v}else r.current=l;if(xa&&(xa=!1,An=r,va=m),v=r.pendingLanes,v===0&&(In=null),De(l.stateNode),ar(r,D()),s!==null)for(f=r.onRecoverableError,l=0;l<s.length;l++)m=s[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(ga)throw ga=!1,r=Nc,Nc=null,r;return(va&1)!==0&&r.tag!==0&&Ws(),v=r.pendingLanes,(v&1)!==0?r===Ec?Yi++:(Yi=0,Ec=r):Yi=0,En(),null}function Ws(){if(An!==null){var r=Ed(va),s=Er.transition,l=Ze;try{if(Er.transition=null,Ze=16>r?16:r,An===null)var f=!1;else{if(r=An,An=null,va=0,(Ye&6)!==0)throw Error(n(331));var m=Ye;for(Ye|=4,Ne=r.current;Ne!==null;){var v=Ne,k=v.child;if((Ne.flags&16)!==0){var L=v.deletions;if(L!==null){for(var R=0;R<L.length;R++){var q=L[R];for(Ne=q;Ne!==null;){var se=Ne;switch(se.tag){case 0:case 11:case 15:Ki(8,se,v)}var le=se.child;if(le!==null)le.return=se,Ne=le;else for(;Ne!==null;){se=Ne;var re=se.sibling,_e=se.return;if(Ch(se),se===q){Ne=null;break}if(re!==null){re.return=_e,Ne=re;break}Ne=_e}}}var Ee=v.alternate;if(Ee!==null){var Le=Ee.child;if(Le!==null){Ee.child=null;do{var kt=Le.sibling;Le.sibling=null,Le=kt}while(Le!==null)}}Ne=v}}if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,Ne=k;else e:for(;Ne!==null;){if(v=Ne,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ki(9,v,v.return)}var F=v.sibling;if(F!==null){F.return=v.return,Ne=F;break e}Ne=v.return}}var O=r.current;for(Ne=O;Ne!==null;){k=Ne;var U=k.child;if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,Ne=U;else e:for(k=O;Ne!==null;){if(L=Ne,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:ha(9,L)}}catch(Ie){bt(L,L.return,Ie)}if(L===k){Ne=null;break e}var me=L.sibling;if(me!==null){me.return=L.return,Ne=me;break e}Ne=L.return}}if(Ye=m,En(),oe&&typeof oe.onPostCommitFiberRoot=="function")try{oe.onPostCommitFiberRoot(ce,r)}catch{}f=!0}return f}finally{Ze=l,Er.transition=s}}return!1}function Bh(r,s,l){s=Bs(l,s),s=oh(r,s,1),r=Pn(r,s,1),s=Xt(),r!==null&&(wi(r,1,s),ar(r,s))}function bt(r,s,l){if(r.tag===3)Bh(r,r,l);else for(;s!==null;){if(s.tag===3){Bh(s,r,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(In===null||!In.has(f))){r=Bs(l,r),r=ah(s,r,1),s=Pn(s,r,1),r=Xt(),s!==null&&(wi(s,1,r),ar(s,r));break}}s=s.return}}function c2(r,s,l){var f=r.pingCache;f!==null&&f.delete(s),s=Xt(),r.pingedLanes|=r.suspendedLanes&l,Rt===r&&(Dt&l)===l&&(Pt===4||Pt===3&&(Dt&130023424)===Dt&&500>D()-Cc?ss(r,0):Sc|=l),ar(r,s)}function qh(r,s){s===0&&((r.mode&1)===0?s=1:(s=Eo,Eo<<=1,(Eo&130023424)===0&&(Eo=4194304)));var l=Xt();r=dn(r,s),r!==null&&(wi(r,s,l),ar(r,l))}function u2(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),qh(r,l)}function d2(r,s){var l=0;switch(r.tag){case 13:var f=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(s),qh(r,l)}var Vh;Vh=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||nr.current)ir=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return ir=!1,X0(r,s,l);ir=(r.flags&131072)!==0}else ir=!1,ht&&(s.flags&1048576)!==0&&_f(s,Jo,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;da(r,s),r=s.pendingProps;var m=Rs(s,Ut.current);Fs(s,l),m=nc(null,s,f,r,m,l);var v=sc();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,sr(f)?(v=!0,Go(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Jl(s),m.updater=ca,s.stateNode=m,m._reactInternals=s,uc(s,f,r,l),s=pc(null,s,f,!0,v,l)):(s.tag=0,ht&&v&&Fl(s),Yt(null,s,m,l),s=s.child),s;case 16:f=s.elementType;e:{switch(da(r,s),r=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=h2(f),r=Or(f,r),m){case 0:s=hc(null,s,f,r,l);break e;case 1:s=gh(null,s,f,r,l);break e;case 11:s=dh(null,s,f,r,l);break e;case 14:s=fh(null,s,f,Or(f.type,r),l);break e}throw Error(n(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Or(f,m),hc(r,s,f,m,l);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Or(f,m),gh(r,s,f,m,l);case 3:e:{if(xh(s),r===null)throw Error(n(387));f=s.pendingProps,v=s.memoizedState,m=v.element,If(r,s),ra(s,f,null,l);var k=s.memoizedState;if(f=k.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=Bs(Error(n(423)),s),s=vh(r,s,f,l,m);break e}else if(f!==m){m=Bs(Error(n(424)),s),s=vh(r,s,f,l,m);break e}else for(vr=Sn(s.stateNode.containerInfo.firstChild),xr=s,ht=!0,Mr=null,l=Pf(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zs(),f===m){s=hn(r,s,l);break e}Yt(r,s,f,l)}s=s.child}return s;case 5:return Mf(s),r===null&&ql(s),f=s.type,m=s.pendingProps,v=r!==null?r.memoizedProps:null,k=m.children,Rl(f,m)?k=null:v!==null&&Rl(f,v)&&(s.flags|=32),mh(r,s),Yt(r,s,k,l),s.child;case 6:return r===null&&ql(s),null;case 13:return yh(r,s,l);case 4:return Yl(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=Ds(s,null,f,l):Yt(r,s,f,l),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Or(f,m),dh(r,s,f,m,l);case 7:return Yt(r,s,s.pendingProps,l),s.child;case 8:return Yt(r,s,s.pendingProps.children,l),s.child;case 12:return Yt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,v=s.memoizedProps,k=m.value,it(Zo,f._currentValue),f._currentValue=k,v!==null)if(Rr(v.value,k)){if(v.children===m.children&&!nr.current){s=hn(r,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var L=v.dependencies;if(L!==null){k=v.child;for(var R=L.firstContext;R!==null;){if(R.context===f){if(v.tag===1){R=fn(-1,l&-l),R.tag=2;var q=v.updateQueue;if(q!==null){q=q.shared;var se=q.pending;se===null?R.next=R:(R.next=se.next,se.next=R),q.pending=R}}v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Kl(v.return,l,s),L.lanes|=l;break}R=R.next}}else if(v.tag===10)k=v.type===s.type?null:v.child;else if(v.tag===18){if(k=v.return,k===null)throw Error(n(341));k.lanes|=l,L=k.alternate,L!==null&&(L.lanes|=l),Kl(k,l,s),k=v.sibling}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===s){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}Yt(r,s,m.children,l),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,Fs(s,l),m=Cr(m),f=f(m),s.flags|=1,Yt(r,s,f,l),s.child;case 14:return f=s.type,m=Or(f,s.pendingProps),m=Or(f.type,m),fh(r,s,f,m,l);case 15:return hh(r,s,s.type,s.pendingProps,l);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Or(f,m),da(r,s),s.tag=1,sr(f)?(r=!0,Go(s)):r=!1,Fs(s,l),sh(s,f,m),uc(s,f,m,l),pc(null,s,f,!0,r,l);case 19:return wh(r,s,l);case 22:return ph(r,s,l)}throw Error(n(156,s.tag))};function Hh(r,s){return on(r,s)}function f2(r,s,l,f){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(r,s,l,f){return new f2(r,s,l,f)}function Rc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function h2(r){if(typeof r=="function")return Rc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ee)return 11;if(r===X)return 14}return 2}function On(r,s){var l=r.alternate;return l===null?(l=Tr(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function ka(r,s,l,f,m,v){var k=2;if(f=r,typeof r=="function")Rc(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case W:return os(l.children,m,v,s);case J:k=8,m|=8;break;case we:return r=Tr(12,l,s,m|2),r.elementType=we,r.lanes=v,r;case ue:return r=Tr(13,l,s,m),r.elementType=ue,r.lanes=v,r;case te:return r=Tr(19,l,s,m),r.elementType=te,r.lanes=v,r;case xe:return _a(l,m,v,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:k=10;break e;case $:k=9;break e;case ee:k=11;break e;case X:k=14;break e;case ye:k=16,f=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return s=Tr(k,l,s,m),s.elementType=r,s.type=f,s.lanes=v,s}function os(r,s,l,f){return r=Tr(7,r,f,s),r.lanes=l,r}function _a(r,s,l,f){return r=Tr(22,r,f,s),r.elementType=xe,r.lanes=l,r.stateNode={isHidden:!1},r}function Mc(r,s,l){return r=Tr(6,r,null,s),r.lanes=l,r}function Oc(r,s,l){return s=Tr(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function p2(r,s,l,f,m){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function zc(r,s,l,f,m,v,k,L,R){return r=new p2(r,s,l,L,R),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Tr(3,null,null,s),r.current=v,v.stateNode=r,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jl(v),r}function m2(r,s,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:f==null?null:""+f,children:r,containerInfo:s,implementation:l}}function Wh(r){if(!r)return Nn;r=r._reactInternals;e:{if(mr(r)!==r||r.tag!==1)throw Error(n(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(sr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(sr(l))return bf(r,l,s)}return s}function Gh(r,s,l,f,m,v,k,L,R){return r=zc(l,f,!0,r,m,v,k,L,R),r.context=Wh(null),l=r.current,f=Xt(),m=Rn(l),v=fn(f,m),v.callback=s??null,Pn(l,v,m),r.current.lanes=m,wi(r,m,f),ar(r,f),r}function ja(r,s,l,f){var m=s.current,v=Xt(),k=Rn(m);return l=Wh(l),s.context===null?s.context=l:s.pendingContext=l,s=fn(v,k),s.payload={element:r},f=f===void 0?null:f,f!==null&&(s.callback=f),r=Pn(m,s,k),r!==null&&($r(r,m,k,v),ta(r,m,k)),k}function Sa(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Kh(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Dc(r,s){Kh(r,s),(r=r.alternate)&&Kh(r,s)}function g2(){return null}var Qh=typeof reportError=="function"?reportError:function(r){console.error(r)};function $c(r){this._internalRoot=r}Ca.prototype.render=$c.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));ja(r,s,null,null)},Ca.prototype.unmount=$c.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ns(function(){ja(null,r,null,null)}),s[an]=null}};function Ca(r){this._internalRoot=r}Ca.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ld();r={blockedOn:null,target:r,priority:s};for(var l=0;l<kn.length&&s!==0&&s<kn[l].priority;l++);kn.splice(l,0,r),l===0&&Rd(r)}};function Fc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Na(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Jh(){}function x2(r,s,l,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var q=Sa(k);v.call(q)}}var k=Gh(s,f,r,0,null,!1,!1,"",Jh);return r._reactRootContainer=k,r[an]=k.current,Mi(r.nodeType===8?r.parentNode:r),ns(),k}for(;m=r.lastChild;)r.removeChild(m);if(typeof f=="function"){var L=f;f=function(){var q=Sa(R);L.call(q)}}var R=zc(r,0,!1,null,null,!1,!1,"",Jh);return r._reactRootContainer=R,r[an]=R.current,Mi(r.nodeType===8?r.parentNode:r),ns(function(){ja(s,R,l,f)}),R}function Ea(r,s,l,f,m){var v=l._reactRootContainer;if(v){var k=v;if(typeof m=="function"){var L=m;m=function(){var R=Sa(k);L.call(R)}}ja(s,k,r,m)}else k=x2(l,s,r,m,f);return Sa(k)}Td=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=bi(s.pendingLanes);l!==0&&(ul(s,l|1),ar(s,D()),(Ye&6)===0&&(Hs=D()+500,En()))}break;case 13:ns(function(){var f=dn(r,1);if(f!==null){var m=Xt();$r(f,r,1,m)}}),Dc(r,1)}},dl=function(r){if(r.tag===13){var s=dn(r,134217728);if(s!==null){var l=Xt();$r(s,r,134217728,l)}Dc(r,134217728)}},Pd=function(r){if(r.tag===13){var s=Rn(r),l=dn(r,s);if(l!==null){var f=Xt();$r(l,r,s,f)}Dc(r,s)}},Ld=function(){return Ze},Id=function(r,s){var l=Ze;try{return Ze=r,s()}finally{Ze=l}},kr=function(r,s,l){switch(s){case"input":if(pt(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==r&&f.form===r.form){var m=Ho(f);if(!m)throw Error(n(90));He(f),pt(f,m)}}}break;case"textarea":Qt(r,l);break;case"select":s=l.value,s!=null&&Kt(r,!!l.multiple,s,!1)}},qr=Lc,rn=ns;var v2={usingClientEntryPoint:!1,Events:[Di,Is,Ho,_r,Hn,Lc]},Xi={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y2={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=_s(r),r===null?null:r.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||g2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{ce=Ta.inject(y2),oe=Ta}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2,lr.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(s))throw Error(n(200));return m2(r,s,null,l)},lr.createRoot=function(r,s){if(!Fc(r))throw Error(n(299));var l=!1,f="",m=Qh;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=zc(r,1,!1,null,null,l,!1,f,m),r[an]=s.current,Mi(r.nodeType===8?r.parentNode:r),new $c(s)},lr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=_s(s),r=r===null?null:r.stateNode,r},lr.flushSync=function(r){return ns(r)},lr.hydrate=function(r,s,l){if(!Na(s))throw Error(n(200));return Ea(null,r,s,!0,l)},lr.hydrateRoot=function(r,s,l){if(!Fc(r))throw Error(n(405));var f=l!=null&&l.hydratedSources||null,m=!1,v="",k=Qh;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(k=l.onRecoverableError)),s=Gh(s,null,r,1,l??null,m,!1,v,k),r[an]=s.current,Mi(r),f)for(r=0;r<f.length;r++)l=f[r],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new Ca(s)},lr.render=function(r,s,l){if(!Na(s))throw Error(n(200));return Ea(null,r,s,!1,l)},lr.unmountComponentAtNode=function(r){if(!Na(r))throw Error(n(40));return r._reactRootContainer?(ns(function(){Ea(null,null,r,!1,function(){r._reactRootContainer=null,r[an]=null})}),!0):!1},lr.unstable_batchedUpdates=Lc,lr.unstable_renderSubtreeIntoContainer=function(r,s,l,f){if(!Na(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Ea(r,s,l,!1,f)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var sp;function Hm(){if(sp)return qc.exports;sp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qc.exports=P2(),qc.exports}var ip;function L2(){if(ip)return Pa;ip=1;var e=Hm();return Pa.createRoot=e.createRoot,Pa.hydrateRoot=e.hydrateRoot,Pa}var I2=L2();const A2="modulepreload",R2=function(e){return"/"+e},op={},gs=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=h(n.map(p=>{if(p=R2(p),p in op)return;op[p]=!0;const g=p.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":A2,g||(y.as="script"),y.crossOrigin="",y.href=p,d&&y.setAttribute("nonce",d),document.head.appendChild(y),g)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})},M2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>gs(async()=>{const{default:i}=await Promise.resolve().then(()=>pi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Yu extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class O2 extends Yu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ap extends Yu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lp extends Yu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yu||(yu={}));var z2=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class D2{constructor(t,{headers:n={},customFetch:i,region:o=yu.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=M2(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return z2(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:u}=n;let d={},{region:h}=n;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let g;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(d["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(d["Content-Type"]="application/json",g=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:g}).catch(N=>{throw new O2(N)}),y=x.headers.get("x-relay-error");if(y&&y==="true")throw new ap(x);if(!x.ok)throw new lp(x);let b=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield x.json():b==="application/octet-stream"?w=yield x.blob():b==="text/event-stream"?w=x:b==="multipart/form-data"?w=yield x.formData():w=yield x.text(),{data:w,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof lp||o instanceof ap?o.context:void 0}}})}}var Ot={},Gs={},Ks={},Qs={},Js={},Ys={},$2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ui=$2();const F2=ui.fetch,Wm=ui.fetch.bind(ui),Gm=ui.Headers,U2=ui.Request,B2=ui.Response,pi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gm,Request:U2,Response:B2,default:Wm,fetch:F2},Symbol.toStringTag,{value:"Module"})),q2=k2(pi);var La={},cp;function Km(){if(cp)return La;cp=1,Object.defineProperty(La,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return La.default=e,La}var up;function Qm(){if(up)return Ys;up=1;var e=Ys&&Ys.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ys,"__esModule",{value:!0});const t=e(q2),n=e(Km());class i{constructor(a){var u,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,x,y,b;let w=null,N=null,j=null,P=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const M=await p.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?N=M:N=JSON.parse(M))}const B=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),Q=(y=p.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");B&&Q&&Q.length>1&&(j=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(w={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,j=null,P=406,T="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const B=await p.text();try{w=JSON.parse(B),Array.isArray(w)&&p.status===404&&(N=[],w=null,P=200,T="OK")}catch{p.status===404&&B===""?(P=204,T="No Content"):w={message:B}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,P=200,T="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:N,count:j,status:P,statusText:T}});return this.shouldThrowOnError||(h=h.catch(p=>{var g,x,y;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(x=p?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(y=p?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,u)}returns(){return this}overrideTypes(){return this}}return Ys.default=i,Ys}var dp;function Jm(){if(dp)return Js;dp=1;var e=Js&&Js.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Js,"__esModule",{value:!0});const t=e(Qm());class n extends t.default{select(o){let a=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var g;const x=[o?"analyze":null,a?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${y}"; options=${x};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Js.default=n,Js}var fp;function Xu(){if(fp)return Qs;fp=1;var e=Qs&&Qs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Qs,"__esModule",{value:!0});const t=e(Jm());class n extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const u=Array.from(new Set(a)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:u,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${h}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,u])=>{this.url.searchParams.append(a,`eq.${u}`)}),this}not(o,a,u){return this.url.searchParams.append(o,`not.${a}.${u}`),this}or(o,{foreignTable:a,referencedTable:u=a}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,a,u){return this.url.searchParams.append(o,`${a}.${u}`),this}}return Qs.default=n,Qs}var hp;function Ym(){if(hp)return Ks;hp=1;var e=Ks&&Ks.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ks,"__esModule",{value:!0});const t=e(Xu());class n{constructor(o,{headers:a={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=d}select(o,{head:a=!1,count:u}={}){const d=a?"HEAD":"GET";let h=!1;const p=(o??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var d;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(p.length>0){const g=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const x=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(x.length>0){const y=[...new Set(x)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var u;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Ks.default=n,Ks}var pp;function V2(){if(pp)return Gs;pp=1;var e=Gs&&Gs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Gs,"__esModule",{value:!0});const t=e(Ym()),n=e(Xu());class i{constructor(a,{headers:u={},schema:d,fetch:h}={}){this.url=a,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(a){const u=new URL(`${this.url}/${a}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:d=!1,get:h=!1,count:p}={}){var g;let x;const y=new URL(`${this.url}/rpc/${a}`);let b;d||h?(x=d?"HEAD":"GET",Object.entries(u).filter(([N,j])=>j!==void 0).map(([N,j])=>[N,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([N,j])=>{y.searchParams.append(N,j)})):(x="POST",b=u);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new n.default({method:x,url:y,headers:w,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Gs.default=i,Gs}var mp;function H2(){if(mp)return Ot;mp=1;var e=Ot&&Ot.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const t=e(V2());Ot.PostgrestClient=t.default;const n=e(Ym());Ot.PostgrestQueryBuilder=n.default;const i=e(Xu());Ot.PostgrestFilterBuilder=i.default;const o=e(Jm());Ot.PostgrestTransformBuilder=o.default;const a=e(Qm());Ot.PostgrestBuilder=a.default;const u=e(Km());return Ot.PostgrestError=u.default,Ot.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:u.default},Ot}var W2=H2();const G2=Xa(W2),{PostgrestClient:K2,PostgrestQueryBuilder:_8,PostgrestFilterBuilder:j8,PostgrestTransformBuilder:S8,PostgrestBuilder:C8,PostgrestError:N8}=G2;class Q2{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const J2="2.15.5",Y2=`realtime-js/${J2}`,X2="1.0.0",bu=1e4,Z2=1e3,ex=100;var ao;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ao||(ao={}));var Lt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Lt||(Lt={}));var Ur;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ur||(Ur={}));var wu;(function(e){e.websocket="websocket"})(wu||(wu={}));var ds;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ds||(ds={}));class tx{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const o=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=i.decode(t.slice(u,u+o));u=u+o;const h=i.decode(t.slice(u,u+a));u=u+a;const p=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class Xm{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ot||(ot={}));const gp=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((a,u)=>(a[u]=rx(u,e,t,o),a),{})},rx=(e,t,n,i)=>{const o=t.find(d=>d.name===e),a=o?.type,u=n[e];return a&&!i.includes(a)?Zm(a,u):ku(u)},Zm=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return ox(t,n)}switch(e){case ot.bool:return nx(t);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return sx(t);case ot.json:case ot.jsonb:return ix(t);case ot.timestamp:return ax(t);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return ku(t);default:return ku(t)}},ku=e=>e,nx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ix=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ox=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let a;const u=e.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(d=>Zm(t,d))}return e},ax=e=>typeof e=="string"?e.replace(" ","T"):e,eg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Wc{constructor(t,n,i={},o=bu){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var xp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(xp||(xp={}));class lo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lo.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=lo.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=lo.syncDiff(this.state,o,a,u),d())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const a=this.cloneDeep(t),u=this.transformState(n),d={},h={};return this.map(a,(p,g)=>{u[p]||(h[p]=g)}),this.map(u,(p,g)=>{const x=a[p];if(x){const y=g.map(j=>j.presence_ref),b=x.map(j=>j.presence_ref),w=g.filter(j=>b.indexOf(j.presence_ref)<0),N=x.filter(j=>y.indexOf(j.presence_ref)<0);w.length>0&&(d[p]=w),N.length>0&&(h[p]=N)}else d[p]=g}),this.syncDiff(a,{joins:d,leaves:h},i,o)}static syncDiff(t,n,i,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(a,(d,h)=>{var p;const g=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(h),g.length>0){const x=t[d].map(b=>b.presence_ref),y=g.filter(b=>x.indexOf(b.presence_ref)<0);t[d].unshift(...y)}i(d,g,h)}),this.map(u,(d,h)=>{let p=t[d];if(!p)return;const g=h.map(x=>x.presence_ref);p=p.filter(x=>g.indexOf(x.presence_ref)<0),t[d]=p,o(d,p,h),p.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vp||(vp={}));var co;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(co||(co={}));var gn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gn||(gn={}));class Zu{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wc(this,Ur.join,this.params,this.timeout),this.rejoinTimer=new Xm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ur.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new lo(this),this.broadcastEndpointURL=eg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[co.PRESENCE]&&this.bindings[co.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,x={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(gn.CHANNEL_ERROR,b)),this._onClose(()=>t?.(gn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(gn.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,j=(w=N?.length)!==null&&w!==void 0?w:0,P=[];for(let T=0;T<j;T++){const A=N[T],{filter:{event:B,schema:Q,table:M,filter:W}}=A,J=b&&b[T];if(J&&J.event===B&&J.schema===Q&&J.table===M&&J.filter===W)P.push(Object.assign(Object.assign({},A),{id:J.id}));else{this.unsubscribe(),this.state=Lt.errored,t?.(gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,t&&t(gn.SUBSCRIBED);return}}).receive("error",b=>{this.state=Lt.errored,t?.(gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Lt.joined&&t===co.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:u}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,d,h;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Lt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ur.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Wc(this,Ur.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lt.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,a=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Wc(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ex){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,a;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:p,join:g}=Ur;if(i&&[d,h,p,g].indexOf(u)>=0&&i!==this._joinRef())return;let y=this._onMessage(u,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,N,j;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(N=b.filter)===null||N===void 0?void 0:N.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(b=>b.callback(y,i)):(a=this.bindings[u])===null||a===void 0||a.filter(b=>{var w,N,j,P,T,A;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const B=b.id,Q=(w=b.filter)===null||w===void 0?void 0:w.event;return B&&((N=n.ids)===null||N===void 0?void 0:N.includes(B))&&(Q==="*"||Q?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const B=(T=(P=b?.filter)===null||P===void 0?void 0:P.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return B==="*"||B===((A=n?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:N,table:j,commit_timestamp:P,type:T,errors:A}=w;y=Object.assign(Object.assign({},{schema:N,table:j,commit_timestamp:P,eventType:T,new:{},old:{},errors:A}),this._getPayloadRecords(w))}b.callback(y,i)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),a={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&Zu.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ur.close,{},t)}_onError(t){this._on(Ur.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=gp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=gp(t.columns,t.old_record)),n}}const Gc=()=>{},Ia={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lx=[1e3,2e3,5e3,1e4],cx=1e4,ux=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dx{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bu,this.transport=null,this.heartbeatIntervalMs=Ia.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gc,this.ref=0,this.reconnectTimer=null,this.logger=Gc,this.conn=null,this.sendBuffer=[],this.serializer=new tx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>gs(async()=>{const{default:d}=await Promise.resolve().then(()=>pi);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${wu.websocket}`,this.httpEndpoint=eg(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Q2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:X2}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ao.connecting:return ds.Connecting;case ao.open:return ds.Open;case ao.closing:return ds.Closing;default:return ds.Closed}}isConnected(){return this.connectionState()===ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===i);if(o)return o;{const a=new Zu(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:i,payload:o,ref:a}=t,u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${i} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Z2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ia.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:a,ref:u}=n,d=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${i} ${o} ${d}`.trim(),a),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ur.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([ux],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:Y2};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Ur.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Xm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ia.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,a,u,d,h,p,g;if(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:bu,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Ia.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:Gc,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(x=>lx[x-1]||cx),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((x,y)=>y(JSON.stringify(x))),this.decode=(g=t?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class ed extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function It(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class fx extends ed{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _u extends ed{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var hx=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const tg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>gs(async()=>{const{default:i}=await Promise.resolve().then(()=>pi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},px=()=>hx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gs(()=>Promise.resolve().then(()=>pi),void 0)).Response:Response}),ju=e=>{if(Array.isArray(e))return e.map(n=>ju(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=ju(i)}),t},mx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var xs=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const Kc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gx=(e,t,n)=>xs(void 0,void 0,void 0,function*(){const i=yield px();e instanceof i&&!n?.noResolveJson?e.json().then(o=>{const a=e.status||500,u=o?.statusCode||a+"";t(new fx(Kc(o),a,u))}).catch(o=>{t(new _u(Kc(o),o))}):t(new _u(Kc(e),e))}),xx=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!i?o:(mx(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function ko(e,t,n,i,o,a){return xs(this,void 0,void 0,function*(){return new Promise((u,d)=>{e(n,xx(t,i,o,a)).then(h=>{if(!h.ok)throw h;return i?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>gx(h,d,i))})})}function Va(e,t,n,i){return xs(this,void 0,void 0,function*(){return ko(e,"GET",t,n,i)})}function Qr(e,t,n,i,o){return xs(this,void 0,void 0,function*(){return ko(e,"POST",t,i,o,n)})}function Su(e,t,n,i,o){return xs(this,void 0,void 0,function*(){return ko(e,"PUT",t,i,o,n)})}function vx(e,t,n,i){return xs(this,void 0,void 0,function*(){return ko(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function rg(e,t,n,i,o){return xs(this,void 0,void 0,function*(){return ko(e,"DELETE",t,i,o,n)})}var Zt=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const yx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bx{constructor(t,n={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=tg(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,o){return Zt(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},yp),o);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),x=yield(t=="PUT"?Su:Qr)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(It(a))return{data:null,error:a};throw a}})}upload(t,n,i){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,o){return Zt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:yp.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",p.cacheControl)):(h=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const x=yield Su(this.fetch,d.toString(),h,{headers:g});return{data:{path:a,fullPath:x.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(It(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,n){return Zt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const a=yield Qr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+a.url),d=u.searchParams.get("token");if(!d)throw new ed("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}update(t,n,i){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return Zt(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(It(o))return{data:null,error:o};throw o}})}copy(t,n,i){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield Qr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(It(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,i){return Zt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield Qr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(It(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,i){return Zt(this,void 0,void 0,function*(){try{const o=yield Qr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(It(o))return{data:null,error:o};throw o}})}download(t,n){return Zt(this,void 0,void 0,function*(){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),u=a?`?${a}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield Va(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(It(d))return{data:null,error:d};throw d}})}info(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Va(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ju(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}exists(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield vx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i)&&i instanceof _u){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),o=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const d=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${p}`)}}}remove(t){return Zt(this,void 0,void 0,function*(){try{return{data:yield rg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}list(t,n,i){return Zt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},yx),n),{prefix:t||""});return{data:yield Qr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(It(o))return{data:null,error:o};throw o}})}listV2(t,n){return Zt(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Qr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const wx="2.12.1",kx={"X-Client-Info":`storage-js/${wx}`};var Xs=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class _x{constructor(t,n={},i,o){this.shouldThrowOnError=!1;const a=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},kx),n),this.fetch=tg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Xs(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(It(t))return{data:null,error:t};throw t}})}getBucket(t){return Xs(this,void 0,void 0,function*(){try{return{data:yield Va(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Xs(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Xs(this,void 0,void 0,function*(){try{return{data:yield Su(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(It(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Xs(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Xs(this,void 0,void 0,function*(){try{return{data:yield rg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}}class jx extends _x{constructor(t,n={},i,o){super(t,n,i,o)}from(t){return new bx(this.url,this.headers,t,this.fetch)}}const Sx="2.57.4";let oo="";typeof Deno<"u"?oo="deno":typeof document<"u"?oo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?oo="react-native":oo="node";const Cx={"X-Client-Info":`supabase-js-${oo}/${Sx}`},Nx={headers:Cx},Ex={schema:"public"},Tx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Px={};var Lx=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const Ix=e=>{let t;return e?t=e:typeof fetch>"u"?t=Wm:t=fetch,(...n)=>t(...n)},Ax=()=>typeof Headers>"u"?Gm:Headers,Rx=(e,t,n)=>{const i=Ix(n),o=Ax();return(a,u)=>Lx(void 0,void 0,void 0,function*(){var d;const h=(d=yield t())!==null&&d!==void 0?d:e;let p=new o(u?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),i(a,Object.assign(Object.assign({},u),{headers:p}))})};var Mx=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};function Ox(e){return e.endsWith("/")?e:e+"/"}function zx(e,t){var n,i;const{db:o,auth:a,realtime:u,global:d}=e,{db:h,auth:p,realtime:g,global:x}=t,y={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),d),{headers:Object.assign(Object.assign({},(n=x?.headers)!==null&&n!==void 0?n:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Mx(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Dx(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ox(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ng="2.71.1",ii=30*1e3,Cu=3,Qc=Cu*ii,$x="http://localhost:9999",Fx="supabase.auth.token",Ux={"X-Client-Info":`gotrue-js/${ng}`},Nu="X-Supabase-Api-Version",sg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qx=600*1e3;class td extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Vx extends td{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Hx(e){return Be(e)&&e.name==="AuthApiError"}class ig extends td{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class qn extends td{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}}class Fn extends qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wx(e){return Be(e)&&e.name==="AuthSessionMissingError"}class Aa extends qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ra extends qn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ma extends qn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gx(e){return Be(e)&&e.name==="AuthImplicitGrantRedirectError"}class bp extends qn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eu extends qn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Jc(e){return Be(e)&&e.name==="AuthRetryableFetchError"}class wp extends qn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Tu extends qn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kp=` 	
\r=`.split(""),Kx=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kp.length;t+=1)e[kp[t].charCodeAt(0)]=-2;for(let t=0;t<Ha.length;t+=1)e[Ha[t].charCodeAt(0)]=t;return e})();function _p(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ha[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ha[i]),t.queuedBits-=6}}function og(e,t,n){const i=Kx[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function jp(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{Yx(u,i,n)};for(let u=0;u<e.length;u+=1)og(e.charCodeAt(u),o,a);return t.join("")}function Qx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Jx(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}Qx(i,t)}}function Yx(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Xx(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)og(e.charCodeAt(o),n,i);return new Uint8Array(t)}function Zx(e){const t=[];return Jx(e,n=>t.push(n)),new Uint8Array(t)}function ev(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>_p(o,n,i)),_p(null,n,i),t.join("")}function tv(e){return Math.round(Date.now()/1e3)+e}function rv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fr=()=>typeof window<"u"&&typeof document<"u",as={tested:!1,writable:!1},ag=()=>{if(!Fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(as.tested)return as.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),as.tested=!0,as.writable=!0}catch{as.tested=!0,as.writable=!1}return as.writable};function nv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const lg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>gs(async()=>{const{default:i}=await Promise.resolve().then(()=>pi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},sv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",oi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ls=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dn=async(e,t)=>{await e.removeItem(t)};class Za{constructor(){this.promise=new Za.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Za.promiseConstructor=Promise;function Yc(e){const t=e.split(".");if(t.length!==3)throw new Tu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!Bx.test(t[i]))throw new Tu("JWT not in base64url format");return{header:JSON.parse(jp(t[0])),payload:JSON.parse(jp(t[1])),signature:Xx(t[2]),raw:{header:t[0],payload:t[1]}}}async function iv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ov(e,t){return new Promise((i,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){i(u);return}}catch(u){if(!t(a,u)){o(u);return}}})()})}function av(e){return("0"+e.toString(16)).substr(-2)}function lv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,av).join("")}async function cv(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function uv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await cv(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zs(e,t,n=!1){const i=lv();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await oi(e,`${t}-code-verifier`,o);const a=await uv(i);return[a,i===a?"plain":"s256"]}const dv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fv(e){const t=e.headers.get(Nu);if(!t||!t.match(dv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function hv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function pv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ei(e){if(!mv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sp(e){return JSON.parse(JSON.stringify(e))}var gv=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};const us=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xv=[502,503,504];async function Cp(e){var t;if(!sv(e))throw new Eu(us(e),0);if(xv.includes(e.status))throw new Eu(us(e),e.status);let n;try{n=await e.json()}catch(a){throw new ig(us(a),a)}let i;const o=fv(e);if(o&&o.getTime()>=sg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new wp(us(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new wp(us(n),e.status,n.weak_password.reasons);throw new Vx(us(n),e.status||500,i)}const vv=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ge(e,t,n,i){var o;const a=Object.assign({},i?.headers);a[Nu]||(a[Nu]=sg["2024-01-01"].name),i?.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await yv(e,t,n+d,{headers:a,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(h):{data:Object.assign({},h),error:null}}async function yv(e,t,n,i,o,a){const u=vv(t,i,o,a);let d;try{d=await e(n,Object.assign({},u))}catch(h){throw console.error(h),new Eu(us(h),0)}if(d.ok||await Cp(d),i?.noResolveJson)return d;try{return await d.json()}catch(h){await Cp(h)}}function mn(e){var t;let n=null;_v(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=tv(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Np(e){const t=mn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Un(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bv(e){return{data:e,error:null}}function wv(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a}=e,u=gv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function kv(e){return e}function _v(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zc=["global","local","others"];var jv=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};class Sv{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=lg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Zc[0]){if(Zc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zc.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Un})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=jv(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:wv,redirectTo:n?.redirectTo})}catch(n){if(Be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Un})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,a,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},g=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:kv});if(g.error)throw g.error;const x=await g.json(),y=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const N=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);p[`${j}Page`]=N}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(Be(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){ei(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Un})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ei(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Un})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){ei(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Un})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ei(t.userId);try{const{data:n,error:i}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ei(t.userId),ei(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}}function Ep(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Cv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ti={debug:!!(globalThis&&ag()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Nv extends cg{}async function Ev(e,t,n){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ti.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw ti.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Nv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ti.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Cv();const Tv={url:$x,storageKey:Fx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ux,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tp(e,t,n){return await n()}const ri={};class mo{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mo.nextInstanceID,mo.nextInstanceID+=1,this.instanceID>0&&Fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Tv),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Sv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=lg(o.fetch),this.lock=o.lock||Tp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Fr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Ev:this.lock=Tp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ag()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ep(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ep(this.memoryStorage)),Fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=ri[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ri[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ng}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=nv(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Fr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Gx(a)){const h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Be(n)?{error:n}:{error:new ig("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:mn}),{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,i,o;try{let a;if("email"in t){const{email:g,password:x,options:y}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Zs(this.storage,this.storageKey)),a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:x,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:w},xform:mn})}else if("phone"in t){const{phone:g,password:x,options:y}=t;a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:mn})}else throw new Ra("You must provide either an email or phone number and a password");const{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:u,options:d}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Np})}else if("phone"in t){const{phone:a,password:u,options:d}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Np})}else throw new Ra("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Aa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,i,o,a,u,d,h,p,g,x,y,b;let w,N;if("message"in t)w=t.message,N=t.signature;else{const{chain:j,wallet:P,statement:T,options:A}=t;let B;if(Fr())if(typeof P=="object")B=P;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))B=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=P}const Q=new URL((n=A?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const M=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),T?{statement:T}:null));let W;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")W=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)W=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)w=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),N=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${Q.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(o=(i=A?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=A?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((x=(g=A?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...A.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const M=await B.signMessage(new TextEncoder().encode(w),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=M}}try{const{data:j,error:P}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ev(N)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:mn});if(P)throw P;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Aa}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:P})}catch(j){if(Be(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const n=await ls(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:a,error:u}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:mn});if(await Dn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Aa}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(Be(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:a,nonce:u}=t,d=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:mn}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Aa}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,o,a,u;try{if("email"in t){const{email:d,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Zs(this.storage,this.storageKey));const{error:x}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in t){const{phone:d,options:h}=t,{data:p,error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new Ra("You must provide either an email or phone number.")}catch(d){if(Be(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var n,i;try{let o,a;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:mn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(Be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var n,i,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await Zs(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:bv})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Fn;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Be(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:a}=t,{error:u}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:o,options:a}=t,{data:u,error:d}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Ra("You must provide either an email or phone number and a type")}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Qc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await ls(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=Xc()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,g)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,g))})}return{data:{session:t},error:null}}const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Un}):await this._useSession(async n=>{var i,o,a;const{data:u,error:d}=n;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fn}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Un})})}catch(n){if(Be(n))return Wx(n)&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new Fn;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await Zs(this.storage,this.storageKey));const{data:p,error:g}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Un});if(g)throw g;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Be(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fn;const n=Date.now()/1e3;let i=n,o=!0,a=null;const{payload:u}=Yc(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{session:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;a={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:d}=n;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Fn;const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fr())throw new Ma("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ma(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new bp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ma("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bp("No code detected.");const{data:T,error:A}=await this._exchangeCodeForSession(t.code);if(A)throw A;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=t;if(!a||!d||!u||!p)throw new Ma("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(d);let y=g+x;h&&(y=parseInt(h));const b=y-g;b*1e3<=ii&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const w=y-x;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,g);const{data:N,error:j}=await this._getUser(a);if(j)throw j;const P={provider_token:i,provider_refresh_token:o,access_token:a,expires_in:x,expires_at:y,refresh_token:u,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(i){if(Be(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ls(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return{error:a};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(Hx(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=rv(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Zs(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Be(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:o}=await this._useSession(async a=>{var u,d,h,p,g;const{data:x,error:y}=a;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return Fr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(Be(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)throw u;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await ov(async o=>(o>0&&await iv(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:mn})),(o,a)=>{const u=200*Math.pow(2,o);return a&&Jc(a)&&Date.now()+u-i<ii})}catch(i){if(this._debug(n,"error",i),Be(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Fr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await ls(this.storage,this.storageKey);if(o&&this.userStorage){let u=await ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await oi(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:Xc()}else if(o&&!o.user&&!o.user){const u=await ls(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Dn(this.storage,this.storageKey+"-user"),await oi(this.storage,this.storageKey,o)):o.user=Xc()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qc;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Qc}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Jc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Za;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new Fn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={session:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),Be(a)){const u={session:null,error:a};return Jc(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await oi(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=Sp(o);await oi(this.storage,this.storageKey,a)}else{const o=Sp(n);await oi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Dn(this.storage,this.storageKey),await Dn(this.storage,this.storageKey+"-code-verifier"),await Dn(this.storage,this.storageKey+"-user"),this.userStorage&&await Dn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ii);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/ii);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ii}ms, refresh threshold is ${Cu} ticks`),o<=Cu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,u]=await Zs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;return a?{data:null,error:a}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:a,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:u,error:d}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:a}=n;return a?{data:null,error:a}:await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=t?.factors||[],o=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:o},error:a}=t;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Yc(o.access_token);let d=null;u.aal&&(d=u.aal);let h=d;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const g=u.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(d=>d.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+qx>o)return i;const{data:a,error:u}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,i=a.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};i=b.session.access_token}const{header:o,payload:a,signature:u,raw:{header:d,payload:h}}=Yc(i);n?.allowExpired||hv(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:a,header:o,signature:u},error:null}}const g=pv(o.alg),x=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,u,Zx(`${d}.${h}`)))throw new Tu("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}}}mo.nextInstanceID=0;const Pv=mo;class Lv extends Pv{constructor(t){super(t)}}var Iv=function(e,t,n,i){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(g){try{p(i.next(g))}catch(x){u(x)}}function h(g){try{p(i.throw(g))}catch(x){u(x)}}function p(g){g.done?a(g.value):o(g.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class Av{constructor(t,n,i){var o,a,u;this.supabaseUrl=t,this.supabaseKey=n;const d=Dx(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:Ex,realtime:Px,auth:Object.assign(Object.assign({},Tx),{storageKey:h}),global:Nx},g=zx(i??{},p);this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=Rx(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new K2(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new jx(this.storageUrl.href,this.headers,this.fetch,i?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new D2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Iv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:u,flowType:d,lock:h,debug:p},g,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lv({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:u,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:a,flowType:d,lock:h,debug:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rv=(e,t,n)=>new Av(e,t,n);function Mv(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Mv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ov=void 0,zv=void 0,H=Rv(Ov,zv),Dv=100*1024*1024,$v=async(e,t)=>ps(e,"statuses"),ps=async(e,t,n)=>{const i=(await H.auth.getUser())?.data.user;if(!i)return null;if(e.size>Dv)return alert("File too large. Max 100 MB."),null;const o=e.name.split(".").pop()?.toLowerCase()||"",a=["jpg","jpeg","png","gif","webp","svg","bmp"],u=["mp4","webm","mov","avi"],d=["mp3","weba","ogg","wav","m4a"],h=["pdf","doc","docx","txt","json","rtf","exe","zip"];let p;if(a.includes(o))p="image";else if(u.includes(o))o==="webm"&&e.type.startsWith("audio/")?p="audio":p="video";else if(d.includes(o))p="audio";else if(h.includes(o))p="document";else return alert("Unsupported file type"),null;if(t==="profiles"&&p!=="image")return alert("Images only for profiles"),null;const g=`${t}/${i.id}/${Date.now()}_${Math.random().toString(36).slice(2)}.${o}`,{data:x,error:y}=await H.storage.from("media").upload(g,e,{upsert:!0,contentType:e.type});if(y&&y.message!=="The resource already exists")return console.error("Upload error:",y),null;const{data:{publicUrl:b}}=H.storage.from("media").getPublicUrl(g);return{url:b,type:p}},ug=_.createContext(void 0),Fv=({children:e})=>{const[t,n]=_.useState(null),[i,o]=_.useState(null),[a,u]=_.useState(!0),d=async y=>{const{data:b}=await H.from("profiles").select("*").eq("id",y).maybeSingle();o(b),u(!1)},h=y=>{o(y)};_.useEffect(()=>{H.auth.getSession().then(({data:{session:b}})=>{n(b?.user??null),b?.user?d(b.user.id):u(!1)});const{data:{subscription:y}}=H.auth.onAuthStateChange((b,w)=>{n(w?.user??null),w?.user?d(w.user.id):(o(null),u(!1))});return()=>y.unsubscribe()},[]);const p=async(y,b,w,N)=>{const{data:j,error:P}=await H.auth.signUp({email:y,password:b});if(P)throw P;j.user&&await H.from("profiles").insert({id:j.user.id,username:w,display_name:N})},g=async(y,b)=>{const{error:w}=await H.auth.signInWithPassword({email:y,password:b});if(w)throw w},x=async()=>{await H.auth.signOut()};return c.jsx(ug.Provider,{value:{user:t,profile:i,loading:a,signUp:p,signIn:g,signOut:x,updateProfile:h},children:e})},St=()=>{const e=_.useContext(ug);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Se=(e,t)=>{const n=_.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:d="",children:h,...p},g)=>_.createElement("svg",{ref:g,...Uv,width:o,height:o,stroke:i,strokeWidth:u?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Bv(e)}`,d].join(" "),...p},[...t.map(([x,y])=>_.createElement(x,y)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Se("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Se("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Se("CornerUpLeft",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Se("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Se("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Se("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Se("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=Se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=Se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=Se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Se("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z",key:"16vlm8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Se("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Se("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Se("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Se("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Se("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Se("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=Se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Se("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Se("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Se("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=Se("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=Se("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=Se("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),py=({isOpen:e,title:t,slug:n,onClose:i})=>{if(!e)return null;const o=`/${n}`;return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col transform transition-all duration-300 scale-100 opacity-100",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-orange-200 bg-orange-50 rounded-t-3xl",children:[c.jsx("h2",{className:"text-2xl font-black text-gray-800",children:t}),c.jsx("button",{onClick:i,className:"p-3 text-red-600 hover:text-white hover:bg-red-600 rounded-full transition","aria-label":"Close modal",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-grow overflow-hidden p-0",children:c.jsx("iframe",{src:o,title:t,className:"w-full h-full border-0 rounded-b-3xl"})})]})})},Mp=()=>{const[e,t]=_.useState(!1),[n,i]=_.useState(""),[o,a]=_.useState(""),[u,d]=_.useState(""),[h,p]=_.useState(""),[g,x]=_.useState(""),[y,b]=_.useState(!1),[w,N]=_.useState(!1),{signUp:j,signIn:P}=St(),[T,A]=_.useState(!1),[B,Q]=_.useState(""),[M,W]=_.useState("");_.useEffect(()=>{x("")},[n,o,u,h]);const J=($,ee)=>{Q($),W(ee),A(!0)},we=()=>{A(!1),Q(""),W("")},z=async $=>{$.preventDefault(),x(""),b(!1),N(!0);try{if(e){if(!u.trim()){x("Username is required"),N(!1);return}if(!h.trim()){x("Display name is required"),N(!1);return}if(u.includes(" ")){x("Username cannot contain spaces"),N(!1);return}await j(n,o,u,h),b(!0),setTimeout(()=>{t(!1),i(""),a(""),d(""),p(""),b(!1)},1800)}else await P(n,o)}catch(ee){const ue=ee.message?.toLowerCase()||"";ue.includes("invalid login credentials")||ue.includes("invalid credentials")?x("Wrong email or password. Please try again."):ue.includes("email not confirmed")?x("Please check your email and click the confirmation link."):ue.includes("user already registered")||ue.includes("already exists")?x("An account with this email already exists. Try signing in."):ue.includes("password should be at least")?x("Password must be at least 6 characters long."):ue.includes("unable to validate email address")?x("Please enter a valid email address."):ue.includes("rate limit")||ue.includes("too many requests")?x("Too many attempts. Please wait a minute and try again."):ue.includes("network")||ue.includes("fetch")?x("Network error. Please check your connection."):x(ee.message||"Something went wrong. Please try again.")}finally{N(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 -z-10",children:[c.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 1440 1024",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff6b6b"}),c.jsx("stop",{offset:"50%",stopColor:"#ffa726"}),c.jsx("stop",{offset:"100%",stopColor:"#ff8a65"})]}),c.jsxs("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff5252"}),c.jsx("stop",{offset:"50%",stopColor:"#ff9800"}),c.jsx("stop",{offset:"100%",stopColor:"#ff6b6b"})]}),c.jsxs("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff3d00"}),c.jsx("stop",{offset:"50%",stopColor:"#ff6d00"}),c.jsx("stop",{offset:"100%",stopColor:"#ff9100"})]})]}),c.jsx("path",{fill:"url(#grad1)",fillOpacity:"0.6",d:"M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z",className:"animate-wave1",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z;\r
                M0,200 C380,50 1060,350 1440,180 L1440,1024 L0,1024 Z;\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z\r
              `,dur:"20s",repeatCount:"indefinite"})}),c.jsx("path",{fill:"url(#grad2)",fillOpacity:"0.5",d:"M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z",className:"animate-wave2",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z;\r
                M0,250 C350,450 1090,-50 1440,320 L1440,1024 L0,1024 Z;\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z\r
              `,dur:"25s",repeatCount:"indefinite"})}),c.jsx("path",{fill:"url(#grad3)",fillOpacity:"0.4",d:"M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z",className:"animate-wave3",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z;\r
                M0,500 C250,200 1190,700 1440,350 L1440,1024 L0,1024 Z;\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z\r
              `,dur:"30s",repeatCount:"indefinite"})})]}),c.jsx("style",{jsx:!0,children:`
          @keyframes wave1 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-40px); }
          }
          @keyframes wave2 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(60px); }
          }
          @keyframes wave3 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-80px); }
          }
          .animate-wave1 { animation: wave1 20s ease-in-out infinite; }
          .animate-wave2 { animation: wave2 25s ease-in-out infinite; }
          .animate-wave3 { animation: wave3 30s ease-in-out infinite; }
        `})]}),c.jsx("div",{className:"w-full max-w-md z-10",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl rounded-3xl shadow-2xl p-10 border border-white/40",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("img",{src:"https://mux8.com/assets/logo/liaotian-dragon.svg",alt:"LiaoTian logo",className:"mx-auto w-40 h-40 mb-1"}),c.jsx("p",{className:"text-gray-700 text-xl font-bold",children:"Liaoverse"})]}),c.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{class:"text-xs text-gray-500 text-center -mt-3",children:["By creating an account you agree to the ",c.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>J("Terms of Service","terms-of-service"),children:"Terms of Service"})," and ",c.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>J("Privacy Policy","privacy-policy"),children:"Privacy Policy"})]}),c.jsx("input",{type:"text",placeholder:"Username (no spaces)",value:u,onChange:$=>d($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsx("input",{type:"text",placeholder:"Display Name",value:h,onChange:$=>p($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"})]}),c.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:$=>i($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:$=>a($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsxs("div",{className:"min-h-8",children:[g&&c.jsxs("div",{className:"flex items-center gap-3 text-red-600 bg-red-50/90 px-5 py-4 rounded-2xl border-2 border-red-300 backdrop-blur",children:[c.jsx(dg,{size:22}),c.jsx("span",{className:"font-semibold",children:g})]}),y&&c.jsxs("div",{className:"flex items-center gap-3 text-green-600 bg-green-50/90 px-5 py-4 rounded-2xl border-2 border-green-300 backdrop-blur",children:[c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c.jsx("span",{className:"font-bold",children:"Account created! Switching to Sign In..."})]})]}),c.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 text-white py-5 rounded-2xl font-bold text-xl hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-70 disabled:cursor-not-allowed transition transform hover:scale-[1.02] active:scale-100 shadow-2xl flex items-center justify-center gap-4",children:[w?c.jsxs("svg",{className:"animate-spin h-7 w-7",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c.jsx(ry,{size:28}),w?"Loading...":e?"Join Liaoverse":"Enter Liaoverse"]})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx("button",{onClick:()=>{t(!e),x(""),b(!1)},disabled:w,className:"text-red-600 hover:text-red-700 font-bold text-lg hover:underline disabled:opacity-50",children:e?"Already have an account? Sign In":"Need an account? Sign Up"})}),c.jsxs("div",{className:"text-center text-gray-600 text-sm mt-12 font-bold",children:[" Mux ",new Date().getFullYear()]})]})}),c.jsx(py,{isOpen:T,title:B,slug:M,onClose:we})]})},Op="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",my="0 0 784 1168",gy=()=>{const[e,t]=_.useState([]),[n,i]=_.useState(!0),{user:o}=St(),a=_.useRef(null),u=_.useCallback(async $=>{if(!$.length)return{likeCounts:{},commentCounts:{}};const ee={},ue={};for(const te of $){const[{count:X},{count:ye}]=await Promise.all([H.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",te),H.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",te)]);ee[te]=X||0,ue[te]=ye||0}return{likeCounts:ee,commentCounts:ue}},[]),[d,h]=_.useState(new Set),[p,g]=_.useState(null),[x,y]=_.useState([]),[b,w]=_.useState(""),[N,j]=_.useState(null),[P,T]=_.useState([]),A=_.useCallback(async $=>{if(!o||$.length===0)return;const ee=$.map(te=>te.id),{data:ue}=await H.from("likes").select("entity_id").eq("user_id",o.id).eq("entity_type","post").in("entity_id",ee);ue&&h(te=>new Set([...te,...ue.map(X=>X.entity_id)]))},[o]),B=_.useCallback(async()=>{i(!0);let $=H.from("posts").select("*, profiles(*)").eq("media_type","video").order("created_at",{ascending:!1}).limit(20);const{data:ee}=await $,ue=ee||[],te=ue.map(G=>G.id),{likeCounts:X,commentCounts:ye}=await u(te),xe=ue.map(G=>({...G,like_count:X[G.id]||0,comment_count:ye[G.id]||0}));t(xe),A(xe),i(!1)},[o,A,u]);_.useEffect(()=>{B()},[B]),_.useEffect(()=>{const $={root:a.current,threshold:.6},ee=new IntersectionObserver(te=>{te.forEach(X=>{const ye=X.target.querySelector("video");ye&&(X.isIntersecting?ye.play().catch(()=>{}):(ye.pause(),ye.currentTime=0))})},$);return document.querySelectorAll(".shot-item").forEach(te=>ee.observe(te)),()=>ee.disconnect()},[e]);const Q=async $=>{if(o){if(!d.has($.id)){const ee=new Set(d);ee.add($.id),h(ee),t(ue=>ue.map(te=>te.id===$.id?{...te,like_count:te.like_count+1}:te)),await H.from("likes").insert({user_id:o.id,entity_id:$.id,entity_type:"post"})}W($.id)}},M=async $=>{if(!o)return;const ee=new Set(d);ee.delete($),h(ee),t(ue=>ue.map(te=>te.id===$?{...te,like_count:Math.max(0,te.like_count-1)}:te)),await H.from("likes").delete().match({user_id:o.id,entity_id:$,entity_type:"post"}),T(ue=>ue.filter(te=>te.user_id!==o.id))},W=async $=>{j($);const{data:ee}=await H.from("likes").select("user_id, profiles(*)").eq("entity_id",$).eq("entity_type","post");ee&&T(ee)},J=async $=>{g($);const{data:ee}=await H.from("comments").select("*, profiles(*)").eq("post_id",$).order("created_at",{ascending:!0});ee&&y(ee)},we=async $=>{if($.preventDefault(),!o||!p||!b.trim())return;const ee=p,{data:ue,error:te}=await H.from("comments").insert({post_id:ee,user_id:o.id,content:b.trim()}).select("*, profiles(*)").single();!te&&ue&&(y(X=>[...X,ue]),w(""),t(X=>X.map(ye=>ye.id===ee?{...ye,comment_count:(ye.comment_count||0)+1}:ye)))},z=$=>{window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:$}))};return n?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 w-full",children:[c.jsx("div",{className:"logo-loading-container w-[100px] h-auto relative mb-4",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:my,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Op,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Op,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Loading shots..."})]}):e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-[rgb(var(--color-text-secondary))] p-8 text-center",children:[c.jsx(Rp,{size:48,className:"mb-4 opacity-50"}),c.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Shots Yet"}),c.jsx("p",{children:"No video content available in your feed. Follow people who post video content, or post a video yourself to see them here!"})]}):c.jsxs("div",{className:"relative w-full h-[calc(100vh-180px)] bg-black rounded-xl overflow-hidden",children:[c.jsx("div",{ref:a,className:"w-full h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide",style:{scrollBehavior:"smooth"},children:e.map($=>c.jsxs("div",{className:"shot-item relative w-full h-full snap-start bg-black",children:[c.jsx("video",{src:$.media_url,className:"w-full h-full object-cover",playsInline:!0,loop:!0,muted:!1}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none"}),c.jsxs("div",{className:"absolute right-4 bottom-20 flex flex-col gap-6 items-center z-10",children:[c.jsx("div",{className:"flex flex-col items-center gap-1",children:c.jsx("button",{onClick:()=>z($.user_id),className:"relative",children:c.jsx("img",{src:$.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.profiles?.username}`,className:"w-12 h-12 rounded-full border-2 border-white"})})}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx("button",{onClick:()=>Q($),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(fi,{size:28,className:d.has($.id)?"fill-red-500 text-red-500":"text-white"})}),c.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:$.like_count})]}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx("button",{onClick:()=>J($.id),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(mi,{size:28,className:"text-white"})}),c.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:$.comment_count})]}),c.jsx("button",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(kg,{size:28,className:"text-white"})})]}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-16 z-10 text-white",children:[c.jsxs("button",{onClick:()=>z($.user_id),className:"font-bold text-lg hover:underline flex items-center gap-1 mb-2 shadow-black drop-shadow-md",children:["@",$.profiles?.username,$.profiles?.verified&&c.jsx(Xr,{size:16,className:"text-blue-400"})]}),c.jsx("p",{className:"text-sm line-clamp-2 opacity-90 mb-3 shadow-black drop-shadow-md",children:$.content}),c.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-70",children:[c.jsx(Rp,{size:14,className:"animate-spin-slow"}),c.jsxs("span",{children:["Original Sound - ",$.profiles?.display_name]})]})]})]},$.id))}),N&&c.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[60vh] rounded-t-2xl sm:rounded-2xl flex flex-col",onClick:$=>$.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Likes"}),c.jsx("button",{onClick:()=>j(null),children:c.jsx(et,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:P.map($=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:$.profiles.avatar_url,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:$.profiles.display_name}),c.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["@",$.profiles.username]})]})]}),$.user_id===o?.id&&c.jsx("button",{onClick:()=>M(N),className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100",title:"Remove like",children:c.jsx(fi,{size:16,className:"fill-current"})})]},$.user_id))})]})}),p&&c.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[70vh] rounded-t-2xl sm:rounded-2xl flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Comments"}),c.jsx("button",{onClick:()=>g(null),children:c.jsx(et,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:x.map($=>c.jsxs("div",{className:"flex gap-3",children:[c.jsx("img",{src:$.profiles.avatar_url,className:"w-8 h-8 rounded-full flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex gap-2 items-baseline",children:[c.jsx("span",{className:"font-bold text-xs text-[rgb(var(--color-text))]",children:$.profiles.display_name}),c.jsx("span",{className:"text-[10px] text-[rgb(var(--color-text-secondary))]",children:new Date($.created_at).toLocaleDateString()})]}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text))]",children:$.content})]})]},$.id))}),c.jsxs("form",{onSubmit:we,className:"p-3 border-t border-[rgb(var(--color-border))] flex gap-2",children:[c.jsx("input",{value:b,onChange:$=>w($.target.value),placeholder:"Say something...",className:"flex-1 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2 text-sm outline-none text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"submit",className:"text-[rgb(var(--color-accent))]",children:c.jsx(gi,{size:20})})]})]})})]})},xy=!1,zp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",vy="0 0 784 1168",yy=()=>{const{user:e,profile:t}=St(),[n,i]=_.useState([]),[o,a]=_.useState(null),[u,d]=_.useState(null);_.useEffect(()=>{const y=b=>{const N=b.detail.progress;N===100?setTimeout(()=>d(null),1e3):d(N)};return window.addEventListener("statusUploadProgress",y),()=>{window.removeEventListener("statusUploadProgress",y)}},[]),_.useEffect(()=>{if(!e||!t)return;const y=async()=>{try{let N=H.from("statuses").select("*, profiles!user_id(*)").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!0});const{data:j}=await N;if(!j)return;const P=new Map;for(const B of j){if(!B.profiles)continue;const Q=B.user_id,M={...B,viewed_by:B.viewed_by||[]};if(!P.has(Q))P.set(Q,{...B.profiles,statuses:[M],hasUnseen:!M.viewed_by.includes(e.id)});else{const W=P.get(Q);W.statuses.push(M),M.viewed_by.includes(e.id)||(W.hasUnseen=!0)}}const T=P.get(e.id)||{...t,statuses:[],hasUnseen:!1};T.statuses.length>0&&(T.hasUnseen=T.statuses.some(B=>!B.viewed_by.includes(e.id))),P.delete(e.id);const A=Array.from(P.values()).sort((B,Q)=>{if(B.hasUnseen!==Q.hasUnseen)return B.hasUnseen?-1:1;const M=new Date(B.statuses[B.statuses.length-1].created_at).getTime();return new Date(Q.statuses[Q.statuses.length-1].created_at).getTime()-M});a(T),i(A)}catch(N){console.error("Error fetching statuses:",N)}};y();const b=H.channel("status-tray-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"statuses"},y).subscribe(),w=setInterval(y,6e4);return()=>{clearInterval(w),H.removeChannel(b)}},[e,t]);const h=y=>{if(!o)return;const b=[o,...n];window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{initialUserId:y,users:b}}))},p=()=>{o&&o.statuses.length>0?h(e.id):window.dispatchEvent(new CustomEvent("openStatusCreator"))},g=y=>{y.stopPropagation(),window.dispatchEvent(new CustomEvent("openStatusCreator"))};if(!e)return null;const x=y=>{const b=y.statuses.length>0;return y.id===t?.id?u!==null&&u<100?c.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10",style:{background:`conic-gradient(rgb(var(--color-primary)) ${u}%, rgb(var(--color-border)) ${u}%)`}}):b?c.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10 bg-[rgb(var(--color-border))]"}):c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-[rgb(var(--color-border))] -z-10"}):c.jsx("div",{className:`absolute inset-0 rounded-full p-[2px] -z-10 ${y.hasUnseen?"bg-gradient-to-tr from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] group-hover:scale-105 transition-transform":"bg-[rgb(var(--color-border))]"}`})};return c.jsxs("div",{className:"flex space-x-4 p-4 overflow-x-auto scrollbar-hide bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))]",children:[o&&c.jsxs("div",{onClick:p,className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[c.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[c.jsx("img",{src:t?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t?.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:"Your avatar"}),x(o),c.jsx("div",{onClick:g,className:"absolute -bottom-1 -right-1 w-6 h-6 bg-[rgb(var(--color-primary))] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform cursor-pointer border-2 border-[rgb(var(--color-surface))]",children:c.jsx(el,{size:16,className:"text-[rgb(var(--color-text-on-primary))]"})})]}),c.jsx("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16",children:"Your Status"})]}),n.map(y=>c.jsxs("div",{onClick:()=>h(y.id),className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[c.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[c.jsx("img",{src:y.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${y.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:y.display_name}),x(y)]}),c.jsxs("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16 flex items-center justify-center gap-1",children:[c.jsx("span",{className:"truncate",children:y.display_name||y.username}),y.verified&&c.jsx(Xr,{size:12,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]})]},y.id))]})},by=({onClose:e})=>{const{user:t}=St(),[n,i]=_.useState(null),[o,a]=_.useState(null),[u,d]=_.useState(""),[h,p]=_.useState("image"),[g,x]=_.useState(""),[y,b]=_.useState(!1),[w,N]=_.useState("camera"),[j,P]=_.useState(!1),[T,A]=_.useState(""),[B,Q]=_.useState([]),M=async(de="")=>{};_.useEffect(()=>{w==="gif"&&M(T)},[w,T]);const W=_.useRef(null),J=_.useRef(null),we=_.useRef(null),z=_.useRef(null),$=_.useRef([]),[ee,ue]=_.useState("user"),te=_.useRef(null),X=()=>{we.current&&(we.current.getTracks().forEach(de=>de.stop()),we.current=null)};_.useEffect(()=>()=>{X(),u&&URL.revokeObjectURL(u)},[u]);const ye=_.useCallback(async()=>{if(X(),!navigator.mediaDevices?.getUserMedia){alert("Camera is not supported on your device."),N("upload");return}try{const de=await navigator.mediaDevices.getUserMedia({video:{facingMode:ee},audio:w==="video"});we.current=de,W.current&&(W.current.srcObject=de)}catch(de){console.error("Error accessing camera:",de),alert("Could not access camera. Please check permissions."),N("upload")}},[ee,w]);_.useEffect(()=>(w==="camera"||w==="video"?n||ye():X(),()=>X()),[w,ye,n]);const xe=de=>{const fe=de.target.files?.[0];if(fe){if(!fe.type.startsWith("image/")&&!fe.type.startsWith("video/")){alert("Only image and video files are allowed.");return}p(fe.type.startsWith("image/")?"image":"video"),i(fe),d(URL.createObjectURL(fe)),X()}},G=()=>{if(!W.current||!J.current)return;const de=W.current,fe=J.current;fe.width=de.videoWidth,fe.height=de.videoHeight;const Ae=fe.getContext("2d");Ae&&(Ae.drawImage(de,0,0,fe.width,fe.height),fe.toBlob(Ce=>{Ce&&(i(new File([Ce],"status.jpg",{type:"image/jpeg"})),d(URL.createObjectURL(Ce)),p("image"),X())},"image/jpeg"))},ne=()=>{if(!we.current)return;P(!0),$.current=[];const de=MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":"video/webm",fe=de.split("/")[1]||"webm";z.current=new MediaRecorder(we.current,{mimeType:de}),z.current.ondataavailable=Ae=>{$.current.push(Ae.data)},z.current.onstop=()=>{const Ae=new Blob($.current,{type:de});i(new File([Ae],`status.${fe}`,{type:de})),d(URL.createObjectURL(Ae)),p("video"),P(!1),X()},z.current.start()},S=()=>{z.current?.stop()},I=()=>{ue(de=>de==="user"?"environment":"user")},K=async()=>{if(!t||!n&&!o)return;b(!0),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:1}}));let de=1;const fe=()=>{de=Math.min(de+10,95),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:de}})),de<95&&setTimeout(fe,300)},Ae=setTimeout(fe,300);try{let Ce=o;if(n){const Te=await $v(n);if(!Te)throw new Error("Upload failed.");Ce=Te.url}if(!Ce)throw new Error("No media URL generated.");clearTimeout(Ae),de=99,window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:de}}));const ae=new Date(Date.now()+1440*60*1e3).toISOString();await H.from("statuses").insert({user_id:t.id,media_url:Ce,media_type:h,text_overlay:g?{text:g,x:50,y:85,color:"white",fontSize:12}:{},expires_at:ae}),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:100}})),e()}catch(Ce){console.error("Error posting status:",Ce),alert("Failed to post status."),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:null}}))}finally{b(!1)}},E=()=>{i(null),a(null),d(""),x(""),A(""),w==="gif"&&M(""),ye()},ke=!!(n||o);return c.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:[c.jsx("canvas",{ref:J,className:"hidden"}),c.jsxs("div",{className:"relative w-full h-full max-w-lg max-h-screen bg-black rounded-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 z-20 flex justify-between items-center bg-gradient-to-b from-black/50 to-transparent",children:[c.jsx("button",{onClick:ke?E:e,className:"p-2 bg-black/50 rounded-full text-white backdrop-blur-md",children:c.jsx(et,{size:24})}),ke&&c.jsxs("button",{onClick:K,disabled:y,className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-full font-bold text-sm flex items-center gap-2 disabled:opacity-50 shadow-lg",children:[y?"Posting...":"Share",!y&&c.jsx(gi,{size:16})]})]}),c.jsxs("div",{className:"flex-1 relative w-full h-full overflow-hidden bg-[#1a1a1a]",children:[ke&&c.jsxs("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center z-10 bg-black",children:[h==="image"&&c.jsx("img",{src:u,className:"w-full h-full object-contain",alt:"Preview"}),h==="video"&&c.jsx("video",{src:u,className:"w-full h-full object-contain",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),c.jsx("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-end pb-20",children:c.jsx("input",{type:"text",value:g,onChange:de=>x(de.target.value),placeholder:"Add a caption...",className:"w-full text-center bg-black/40 text-white text-xl font-medium p-3 outline-none border-none pointer-events-auto backdrop-blur-sm",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.8)"}})})]}),!ke&&c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center z-0 relative",children:[(w==="camera"||w==="video")&&c.jsx("video",{ref:W,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),w==="upload"&&c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-4 text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-[rgb(var(--color-surface-hover))] rounded-full flex items-center justify-center mb-2",children:c.jsx(mg,{size:40,className:"text-[rgb(var(--color-text-secondary))]"})}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),c.jsx("p",{className:"text-gray-400 max-w-xs",children:"Share photos and videos from your device."}),c.jsx("button",{onClick:()=>te.current?.click(),className:"mt-4 px-8 py-3 bg-[rgb(var(--color-primary))] text-white rounded-full font-bold shadow-lg transform active:scale-95 transition",children:"Select Media"})]}),w==="gif"&&c.jsxs("div",{className:"w-full h-full flex flex-col bg-[rgb(var(--color-surface))] pt-20 pb-32",children:[c.jsx("div",{className:"px-4 mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(Bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",value:T,onChange:de=>A(de.target.value),placeholder:"Search Tenor GIFs...",className:"w-full pl-10 pr-4 py-3 bg-[rgb(var(--color-background))] rounded-xl text-white outline-none focus:ring-2 focus:ring-[rgb(var(--color-primary))]",autoFocus:!0})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:c.jsx("div",{className:"grid grid-cols-2 gap-2 pb-4",children:B.map(de=>c.jsx("button",{onClick:()=>{a(de.media_formats.gif.url),d(de.media_formats.gif.url),p("image")},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800",children:c.jsx("img",{src:de.media_formats.tinygif.url,className:"w-full h-full object-cover",loading:"lazy"})},de.id))})})]})]})]}),!ke&&c.jsxs("div",{className:"absolute bottom-0 left-0 w-full z-20 flex flex-col items-center bg-gradient-to-t from-black/80 via-black/40 to-transparent pb-8 pt-12",children:[c.jsxs("div",{className:"flex items-center justify-center w-full mb-8 relative px-6",children:[c.jsx("div",{className:"flex-1 flex justify-start",children:(w==="camera"||w==="video")&&c.jsx("button",{onClick:I,className:"p-3 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition",children:c.jsx(ay,{size:24})})}),c.jsxs("div",{className:"flex-0 mx-4",children:[w==="camera"&&c.jsx("button",{onClick:G,className:"w-20 h-20 rounded-full bg-white border-4 border-white/30 shadow-[0_0_20px_rgba(255,255,255,0.3)] transform active:scale-90 transition-transform"}),w==="video"&&c.jsx("button",{onClick:j?S:ne,className:`w-20 h-20 rounded-full border-4 border-white/30 flex items-center justify-center transform active:scale-95 transition-all ${j?"bg-transparent border-red-500":"bg-red-500"}`,children:j?c.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-md animate-pulse"}):null}),(w==="upload"||w==="gif")&&c.jsx("div",{className:"w-20 h-20"})]}),c.jsx("div",{className:"flex-1"})]}),c.jsxs("div",{className:"flex gap-6 text-sm font-bold uppercase tracking-wider overflow-x-auto max-w-full px-4 no-scrollbar items-center justify-center pb-2",children:[c.jsx("button",{onClick:()=>N("upload"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="upload"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Gallery"}),c.jsx("button",{onClick:()=>N("gif"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="gif"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"GIF"}),c.jsx("button",{onClick:()=>N("camera"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="camera"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Photo"}),c.jsx("button",{onClick:()=>N("video"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="video"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Video"})]}),c.jsx("input",{ref:te,type:"file",accept:"image/*,video/*",onChange:xe,className:"hidden"})]}),y&&c.jsxs("div",{className:"absolute inset-0 z-30 bg-black/80 flex flex-col items-center justify-center gap-3 backdrop-blur-sm",children:[c.jsx("div",{className:"w-10 h-10 border-4 border-[rgb(var(--color-primary))] border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"text-white font-bold animate-pulse",children:"Sharing Status..."})]})]})]})},wy=e=>{const t=new Date,n=new Date(e),i=Math.floor((t.getTime()-n.getTime())/1e3);if(i<60)return`${i}s ago`;const o=Math.floor(i/60);if(o<60)return`${o}m ago`;const a=Math.floor(o/60);if(a<24){const d=o%60;return d>0?`${a}h ${d}m ago`:`${a}h ago`}return`${Math.floor(a/24)}d ago`},ky=({duration:e,isActive:t,isPaused:n,onFinished:i})=>{const[o,a]=_.useState(0),u=_.useRef(Date.now()),d=_.useRef(0),h=_.useRef(0);_.useEffect(()=>{t?(a(0),u.current=Date.now(),d.current=0,h.current=0):a(g=>g<100?0:100)},[t]),_.useEffect(()=>{t&&(n?h.current===0&&(h.current=Date.now()):h.current>0&&(d.current+=Date.now()-h.current,h.current=0))},[n,t]),_.useEffect(()=>{if(!t||n||e===0)return;let g;const x=()=>{const w=(Date.now()-u.current-d.current)/e*100;w>=100?(a(100),i()):(a(w),g=requestAnimationFrame(x))};return g=requestAnimationFrame(x),()=>{cancelAnimationFrame(g)}},[t,n,e,i]);const p=!t&&o<100?0:o;return c.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-white",style:{width:`${p}%`,transition:p>0&&p<100?"width 50ms linear":"none"}})})},_y=({statusId:e,onClose:t,onGoToProfile:n})=>{const[i,o]=_.useState([]),[a,u]=_.useState(!0);return _.useEffect(()=>{(async()=>{u(!0);try{const{data:h,error:p}=await H.from("statuses").select("viewed_by").eq("id",e).single();if(p||!h||!h.viewed_by||h.viewed_by.length===0){u(!1);return}const{data:g,error:x}=await H.from("profiles").select("*").in("id",h.viewed_by);if(x)throw x;o(g||[])}catch(h){console.error("Error fetching viewers:",h)}finally{u(!1)}})()},[e]),c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[1001] flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Viewed By"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(et,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsxs("div",{className:"overflow-y-auto p-4 space-y-4",children:[a&&c.jsx("div",{className:"text-center p-4 text-[rgb(var(--color-text-secondary))]",children:"Loading..."}),!a&&i.length===0&&c.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No views yet."}),i.map(d=>c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:d.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${d.username}`,className:"w-10 h-10 rounded-full cursor-pointer",alt:"Avatar",onClick:()=>n(d.id)}),c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>n(d.id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm block",children:[d.display_name,d.verified&&c.jsx(Xr,{size:14,className:"inline ml-1 text-[rgb(var(--color-accent))]"})]}),c.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",d.username]})]})]})},d.id))]})]})})},jy=({allStatusUsers:e,initialUserId:t,onClose:n})=>{const{user:i}=St(),[o,a]=_.useState(()=>Math.max(0,e.findIndex(S=>S.id===t))),[u,d]=_.useState(0),[h,p]=_.useState(!1),[g,x]=_.useState(!1),[y,b]=_.useState(!0),[w,N]=_.useState(""),[j,P]=_.useState(!1),[T,A]=_.useState(!1),[B,Q]=_.useState(0),M=_.useRef(null),W=e[o],J=W?.statuses?.[u],we=_.useCallback(()=>{o<e.length-1?(a(S=>S+1),d(0),b(!0)):n()},[o,e.length,n]),z=_.useCallback(()=>{W&&u<W.statuses.length-1?d(S=>S+1):we()},[u,W,we]),$=()=>{o>0&&(a(S=>S-1),d(0),b(!0))},ee=()=>{u>0?d(S=>S-1):$()};_.useEffect(()=>{if(!J||!i)return;b(!0),(async()=>{J.user_id===i.id||(J.viewed_by||[]).includes(i.id)||(J.viewed_by.push(i.id),await H.rpc("mark_status_viewed",{status_id:J.id,viewer_id:i.id}))})();const I=J.media_url;if(J.media_type==="image"){const K=new Image;K.src=I,K.onload=()=>b(!1),K.onerror=()=>z()}else J.media_type==="video"&&M.current&&(M.current.src=I,M.current.load(),Q(0))},[J,i,z]),_.useEffect(()=>{const S=M.current;S&&(h||y?S.pause():S.play().catch(()=>{}))},[h,y,J]);const ue=()=>p(!0),te=()=>p(!1),X=S=>{const I=S.currentTarget.getBoundingClientRect(),K=S.clientX-I.left,E=I.width*.3;K<E?ee():z()},ye=S=>{n(),A(!1),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:S}))},xe=async S=>{if(S.preventDefault(),!(!w.trim()||!i||!J||!W)){P(!0),p(!0);try{await H.from("messages").insert({sender_id:i.id,recipient_id:W.id,content:w,media_url:J.media_url,media_type:J.media_type}),N(""),setTimeout(()=>{P(!1),p(!1)},1e3)}catch(I){console.error("Error sending reply:",I),P(!1),p(!1)}}};if(!W||!J)return c.jsx("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})});const G=J.text_overlay,ne=W.id===i?.id;return c.jsxs(_.Fragment,{children:[c.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center select-none",onPointerDown:ue,onPointerUp:te,onPointerLeave:te,children:[c.jsx("div",{className:"absolute inset-0 z-20",onClick:X}),c.jsxs("div",{className:"absolute top-0 left-0 w-full p-3 z-30",children:[c.jsx("div",{className:"flex space-x-1 mb-2",children:W.statuses.map((S,I)=>c.jsx(ky,{duration:S.media_type==="image"?5e3:I===u?B:0,isActive:I===u,isPaused:h||y||g,onFinished:z},S.id))}),c.jsxs("button",{onClick:()=>ye(W.id),className:"flex items-center gap-3 group",children:[c.jsx("img",{src:W.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${W.username}`,className:"w-10 h-10 rounded-full group-hover:opacity-80 transition",alt:W.display_name}),c.jsxs("div",{className:"flex items-center gap-2",children:[" ",c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsxs("span",{className:"text-white font-bold text-sm group-hover:underline flex items-center gap-1",children:[W.display_name,W.verified&&c.jsx(Xr,{size:14,className:"text-white"})]}),c.jsxs("span",{className:"text-white/70 text-xs",children:["@",W.username]})]}),c.jsx("span",{className:"text-white/70 text-xs",children:wy(J.created_at)})]})]})]}),c.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-40 text-white p-2 bg-black/30 rounded-full",children:c.jsx(et,{size:24})}),c.jsxs("div",{className:"relative flex-1 w-full h-full max-w-lg max-h-screen flex items-center justify-center overflow-hidden bg-black",children:[y&&c.jsx("div",{className:"p-4 flex flex-col items-center justify-center border-b border-[rgb(var(--color-border))]",children:c.jsx("div",{className:"logo-loading-container w-[50px] h-auto relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:vy,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:zp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:zp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),c.jsx("img",{src:J.media_type==="image"?J.media_url:"",className:`w-full h-full object-contain mx-auto block transition-opacity ${J.media_type==="image"?"opacity-100":"opacity-0"}`,style:{display:J.media_type==="image"?"block":"none"},alt:"image not loaded"}),c.jsx("video",{ref:M,className:`w-full h-full object-contain mx-auto block transition-opacity ${J.media_type==="video"?"opacity-100":"opacity-0"}`,style:{display:J.media_type==="video"?"block":"none"},playsInline:!0,onEnded:z,onLoadedMetadata:S=>{b(!1),Q(S.currentTarget.duration*1e3)},onCanPlay:()=>{b(!1),M.current&&B===0&&Q(M.current.duration*1e3)},onError:()=>z()}),G.text&&c.jsx("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-end pb-20 z-30",children:c.jsx("div",{className:"w-full text-center bg-black/40 text-white text-xl font-medium p-3 backdrop-blur-sm",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.8)"},children:G.text})})]}),ne?c.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 z-30",children:c.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 bg-black/50 rounded-full text-white text-sm",children:[c.jsx(Jv,{size:16}),"Viewed by ",J.viewed_by?.length||0]})}):c.jsx("form",{onSubmit:xe,className:"absolute bottom-0 left-0 w-full p-4 z-30",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:w,onChange:S=>N(S.target.value),onFocus:()=>x(!0),onBlur:()=>x(!1),placeholder:`Reply to ${W.display_name}...`,className:"flex-1 p-3 rounded-full bg-white/20 border border-white/30 text-white placeholder-white/70 outline-none text-sm",onClick:S=>S.stopPropagation(),onPointerDown:S=>S.stopPropagation()}),c.jsx("button",{type:"submit",disabled:j||!w.trim(),className:"p-3 rounded-full text-white bg-white/20 disabled:opacity-50",children:j?c.jsx(di,{size:20}):c.jsx(gi,{size:20})})]})})]}),T&&ne&&c.jsx(_y,{statusId:J.id,onClose:()=>A(!1),onGoToProfile:ye})]})},Sy=()=>{const{user:e}=St(),[t,n]=_.useState([]),[i,o]=_.useState(null);_.useEffect(()=>{if(!e)return;(async()=>{try{const{data:d}=await H.from("statuses").select("*, profiles!user_id(*)").eq("user_id",e.id).order("created_at",{ascending:!1});n(d||[])}catch(d){console.error("Error fetching archive:",d)}})()},[e]);const a=u=>o(u);return t.length===0?c.jsxs("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))]",children:[c.jsx(fg,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No statuses in your archive yet."})]}):c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:"Status Archive"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(u=>c.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>a(u),children:[u.media_type==="image"?c.jsx("img",{src:u.media_url,className:"w-full aspect-square object-cover rounded",alt:"Archive"}):c.jsx("video",{src:u.media_url,className:"w-full aspect-square object-cover rounded",muted:!0}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-end p-2 rounded transition-opacity",children:c.jsx("span",{className:"text-white text-sm truncate",children:new Date(u.created_at).toLocaleDateString()})})]},u.id))}),i&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>o(null),children:c.jsxs("div",{className:"relative w-full max-w-md",onClick:u=>u.stopPropagation(),children:[i.media_type==="image"?c.jsx("img",{src:i.media_url,className:"w-full rounded",alt:"Full"}):c.jsx("video",{src:i.media_url,className:"w-full rounded",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),c.jsx("button",{onClick:()=>o(null),className:"absolute -top-10 right-0 text-white p-2",children:c.jsx(et,{size:24})})]})})]})},Cy=()=>{const[e,t]=_.useState(!1),[n,i]=_.useState(null);return _.useEffect(()=>{const o=()=>t(!0),a=u=>{const d=u.detail;d&&d.users&&d.initialUserId&&i({users:d.users,initialUserId:d.initialUserId})};return window.addEventListener("openStatusCreator",o),window.addEventListener("openStatusViewer",a),()=>{window.removeEventListener("openStatusCreator",o),window.removeEventListener("openStatusViewer",a)}},[]),c.jsxs(_.Fragment,{children:[e&&c.jsx(by,{onClose:()=>t(!1)}),n&&c.jsx(jy,{allStatusUsers:n.users,initialUserId:n.initialUserId,onClose:()=>i(null)})]})},jg=({url:e})=>{const[t,n]=_.useState(null),[i,o]=_.useState(!0),[a,u]=_.useState(!1);return _.useEffect(()=>{let d=!0;return o(!0),u(!1),fetch(`https://api.microlink.io/?url=${encodeURIComponent(e)}`).then(h=>h.json()).then(h=>{d&&(h.status==="success"?n(h.data):u(!0),o(!1))}).catch(()=>{d&&(u(!0),o(!1))}),()=>{d=!1}},[e]),i||a||!t?null:c.jsx("div",{className:"mt-2 w-full rounded-lg border border-[rgb(var(--color-border))] bg-[rgba(var(--color-surface-hover),0.5)] overflow-hidden transition hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"px-3 pt-3 flex items-center gap-2 text-[10px] uppercase font-bold text-[rgb(var(--color-text-secondary))]",children:[t.logo?.url&&c.jsx("img",{src:t.logo.url,alt:"",className:"w-3 h-3 rounded-sm"}),c.jsx("span",{children:t.publisher||new URL(e).hostname})]}),c.jsxs("div",{className:"flex gap-4 p-3",children:[c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[c.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-[rgb(var(--color-primary))] hover:underline line-clamp-2 leading-tight mb-1",children:t.title||e}),t.description&&c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] line-clamp-3",children:t.description})]}),t.image?.url&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("img",{src:t.image.url,alt:"Preview",className:"w-16 h-16 object-cover rounded-md border border-[rgb(var(--color-border))]"})})]})]})})},Ny=e=>{const t=e.match(/(https?:\/\/[^\s]+)/);return t?t[0]:null},Mu=({src:e})=>{const t=_.useRef(null),[n,i]=_.useState(!1),[o,a]=_.useState(0),[u,d]=_.useState(0),h="rgb(var(--color-accent))",p="rgb(var(--color-border))",g=b=>{const w=Math.floor(b/60),N=Math.floor(b%60);return`${w}:${N.toString().padStart(2,"0")}`};_.useEffect(()=>{const b=t.current;if(!b)return;const w=()=>{a(b.duration),d(b.currentTime)},N=()=>d(b.currentTime),j=()=>i(!b.paused);return b.addEventListener("loadedmetadata",w),b.addEventListener("timeupdate",N),b.addEventListener("play",j),b.addEventListener("pause",j),b.addEventListener("ended",()=>{i(!1),b.currentTime=0}),()=>{b.removeEventListener("loadedmetadata",w),b.removeEventListener("timeupdate",N),b.removeEventListener("play",j),b.removeEventListener("pause",j),b.removeEventListener("ended",()=>{})}},[]);const x=()=>{const b=t.current;b&&(n?b.pause():b.play())},y=b=>{const w=parseFloat(b.target.value),N=t.current;N&&(N.currentTime=w,d(w))};return c.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full p-2 bg-[rgb(var(--color-surface-hover))] rounded-xl",children:[c.jsx("audio",{ref:t,src:e,preload:"metadata",className:"hidden"}),c.jsx("button",{onClick:x,className:"flex-shrink-0 p-2 rounded-full transition-colors",style:{backgroundColor:h,color:"rgb(var(--color-text-on-primary))"},children:n?c.jsx(yg,{size:16,fill:"currentColor"}):c.jsx(rd,{size:16,fill:"currentColor"})}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:o,step:"0.01",value:u,onChange:y,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${h} 0%, ${h} ${u/o*100||0}%, ${p} ${u/o*100||0}%, ${p} 100%)`}}),c.jsxs("span",{className:"text-xs flex-shrink-0 text-[rgb(var(--color-text-secondary))]",children:[g(u),"/",g(o)]})]})]})},Ey=e=>{if(!e)return null;const t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?.*v=|embed\/|v\/|shorts\/))([\w-]{11})/i);return t&&t[1]?c.jsx("div",{className:"mt-3 rounded-2xl overflow-hidden bg-black",children:c.jsx("iframe",{title:"YouTube",className:"w-full aspect-video",src:`https://www.youtube.com/embed/${t[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):null},Ty=({url:e,type:t,onClose:n})=>c.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:n,children:[c.jsxs("div",{className:"max-w-full max-h-full",onClick:i=>i.stopPropagation(),children:[t==="image"&&c.jsx("img",{src:e,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size"}),t==="video"&&c.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[c.jsx("source",{src:e})," Your browser does not support the video tag."]})]}),c.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:c.jsx(et,{size:24})})]}),uo=({post:e,currentUserId:t,isLiked:n,onLikeToggle:i,onCommentUpdate:o,onDelete:a,onNavigateToProfile:u})=>{const[d,h]=_.useState(!1),[p,g]=_.useState(!1),[x,y]=_.useState(!1),[b,w]=_.useState(!1),[N,j]=_.useState(null),[P,T]=_.useState([]),[A,B]=_.useState([]),[Q,M]=_.useState(""),[W,J]=_.useState(!1),[we,z]=_.useState(!1),[$,ee]=_.useState(!1),[ue,te]=_.useState(!1),[X,ye]=_.useState(e.content),[xe,G]=_.useState(e.content),[ne,S]=_.useState(0),I=_.useRef(null),K=ve=>new Date(ve).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),E=ve=>ve?new Date().getTime()-new Date(ve).getTime()<3e5:!1;_.useEffect(()=>{G(e.content),ye(e.content)},[e.content]);const ke=()=>{const ve=`${window.location.origin}/?post=${e.id}`;navigator.clipboard.writeText(ve).then(()=>{ee(!0),z(!1),setTimeout(()=>ee(!1),2e3)})},de=async()=>{if(!X.trim()||X===e.content){te(!1);return}const{error:ve}=await H.from("posts").update({content:X}).eq("id",e.id);ve?alert("Failed to update post."):(G(X),te(!1))},fe=async()=>{const{data:ve}=await H.from("likes").select("user_id, profiles(*)").eq("entity_id",e.id).eq("entity_type","post");ve&&T(ve)},Ae=async()=>{t&&(i(e),n||await H.from("likes").insert({user_id:t,entity_id:e.id,entity_type:"post"}),h(!0),fe())},Ce=async()=>{t&&(i(e),T(ve=>ve.filter(Ve=>Ve.user_id!==t)),await H.from("likes").delete().match({user_id:t,entity_id:e.id,entity_type:"post"}))};_.useEffect(()=>{d&&fe()},[d]);const ae=async()=>{const{data:ve}=await H.from("comments").select("*, profiles(*)").eq("post_id",e.id).order("created_at",{ascending:!0});ve&&B(ve)},Te=async ve=>{if(ve.preventDefault(),!t||!Q.trim())return;J(!0);const{data:Ve,error:pt}=await H.from("comments").insert({post_id:e.id,user_id:t,content:Q.trim()}).select("*, profiles(*)").single();!pt&&Ve&&(B(Ct=>[...Ct,Ve]),M(""),o({...e,comment_count:(e.comment_count||0)+1})),J(!1)};_.useEffect(()=>{p&&ae()},[p]);const Pe=()=>{S(0);let ve=0;I.current=setInterval(()=>{if(ve+=2,ve>=100){clearInterval(I.current),a&&a(e),y(!1);return}S(ve)},50)},He=()=>{I.current&&clearInterval(I.current),S(0)},tt=t===e.user_id,vt=e.groups;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"border-b border-[rgb(var(--color-border))] p-4 hover:bg-[rgb(var(--color-surface-hover))] transition bg-[rgb(var(--color-surface))]",children:[Cd,c.jsxs("div",{className:"flex gap-4 items-start",children:[c.jsxs("button",{onClick:()=>u(e.user_id),className:"flex-shrink-0 relative",children:[c.jsx("img",{src:e.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.profiles?.username}`,className:"w-12 h-12 rounded-full hover:opacity-80 transition",alt:"Avatar"}),E(e.profiles?.last_seen)&&c.jsx("span",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[c.jsx("button",{onClick:()=>u(e.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))]",children:e.profiles?.display_name}),e.profiles?.verified&&c.jsx(Xr,{size:16,className:"text-[rgb(var(--color-accent))]"}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:["@",e.profiles?.username]}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:[" ",new Date(e.created_at).toLocaleDateString()," at ",K(e.created_at)]})]}),vt&&c.jsxs("div",{className:"flex items-center gap-2 mt-1 cursor-pointer group w-fit",children:[c.jsx("img",{src:vt.icon_url||`https://ui-avatars.com/api/?name=${vt.name}&background=random`,className:"w-5 h-5 rounded-md border border-[rgb(var(--color-border))]",alt:"Group"}),c.jsx("span",{className:"text-xs font-bold text-[rgb(var(--color-text-secondary))] group-hover:text-[rgb(var(--color-primary))] transition",children:vt.name})]}),ue?c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsx("textarea",{value:X,onChange:ve=>ye(ve.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))] outline-none resize-none focus:border-[rgb(var(--color-primary))]",rows:3,autoFocus:!0}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx("button",{onClick:()=>{te(!1),ye(xe)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:"Cancel"}),c.jsx("button",{onClick:de,className:"text-sm bg-[rgb(var(--color-primary))] text-white px-3 py-1 rounded-full font-bold",children:"Save"})]})]}):c.jsx(c.Fragment,{children:(()=>{let ve=xe,Ve=null;if(!e.media_url){const pt=Ny(xe);if(pt){ve=xe.replace(pt,"").trim();const Ct=Ey(pt);Ct?Ve=Ct:Ve=c.jsx(jg,{url:pt})}}return c.jsxs(c.Fragment,{children:[ve&&c.jsx("p",{className:"mt-1 whitespace-pre-wrap break-words text-[rgb(var(--color-text))]",children:ve}),Ve]})})()}),e.media_url&&c.jsxs("div",{className:"mt-3",children:[e.media_type==="image"&&c.jsx("img",{src:e.media_url,className:"rounded-2xl max-h-96 object-cover w-full cursor-pointer transition hover:opacity-90",alt:"Post",onClick:()=>{j("image"),w(!0)}}),e.media_type==="video"&&c.jsxs("div",{className:"relative cursor-pointer",onClick:()=>{j("video"),w(!0)},children:[c.jsx("video",{src:e.media_url,className:"rounded-2xl max-h-96 w-full object-cover"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/10 transition rounded-2xl",children:c.jsx(rd,{size:48,className:"text-white opacity-80"})})]}),e.media_type==="audio"&&c.jsx("div",{className:"rounded-2xl w-full",children:c.jsx(Mu,{src:e.media_url})}),e.media_type==="document"&&c.jsxs("a",{href:e.media_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg hover:bg-[rgb(var(--color-border))] transition inline-block text-[rgb(var(--color-text))]",children:[c.jsx(li,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})," Download File"]})]}),c.jsxs("div",{className:"flex items-center gap-6 mt-3",children:[c.jsxs("div",{className:"flex items-center gap-1 group",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),Ae()},className:`p-2 rounded-full transition ${n?"text-pink-500 bg-pink-500/10":"text-[rgb(var(--color-text-secondary))] hover:bg-pink-500/10 hover:text-pink-500"}`,children:c.jsx(fi,{size:18,fill:n?"currentColor":"none"})}),e.like_count>0&&c.jsx("button",{onClick:ve=>{ve.stopPropagation(),h(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.like_count})]}),c.jsxs("div",{className:"flex items-center gap-1 group",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),g(!0)},className:"p-2 rounded-full transition text-[rgb(var(--color-text-secondary))] hover:bg-blue-500/10 hover:text-blue-500",children:c.jsx(mi,{size:18})}),e.comment_count>0&&c.jsx("button",{onClick:ve=>{ve.stopPropagation(),g(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.comment_count})]})]})]}),c.jsxs("div",{className:"relative flex-shrink-0",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),z(!we)},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:$?c.jsx(di,{size:20,className:"text-green-500"}):c.jsx(Iu,{size:20})}),we&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>z(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-lg shadow-xl overflow-hidden z-10",children:[c.jsxs("button",{onClick:ke,className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[c.jsx(kg,{size:18})," Share Post"]}),tt&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{te(!0),z(!1)},className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[c.jsx(bg,{size:18})," Edit Post"]}),c.jsxs("button",{onClick:()=>{y(!0),z(!1)},className:"w-full text-left p-3 text-red-500 hover:bg-red-50 transition flex items-center gap-2",children:[c.jsx(vo,{size:18})," Delete Post"]})]})]})]})]})]})]}),b&&e.media_url&&c.jsx(Ty,{url:e.media_url,type:N||"image",onClose:()=>w(!1)}),d&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>h(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Likes"}),c.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(et,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4",children:P.length===0?c.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No likes yet."}):P.map((ve,Ve)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>u(ve.user_id),children:[c.jsx("img",{src:ve.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ve.profiles?.username}`,className:"w-10 h-10 rounded-full",alt:"Avatar"}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm flex items-center",children:[ve.profiles?.display_name," ",ve.profiles?.verified&&c.jsx(Xr,{size:14,className:"ml-1 text-[rgb(var(--color-accent))]"})]}),c.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",ve.profiles?.username]})]})]}),ve.user_id===t&&c.jsx("button",{onClick:Ce,className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100 transition",children:c.jsx(fi,{size:16,className:"fill-current"})})]},`${ve.user_id}-${Ve}`))})]})}),p&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>g(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-lg rounded-2xl h-[80vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Comments"}),c.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(et,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:A.length===0?c.jsx("div",{className:"h-full flex items-center justify-center text-[rgb(var(--color-text-secondary))]",children:"No comments yet."}):A.map(ve=>c.jsxs("div",{className:"flex gap-3",children:[c.jsx("img",{src:ve.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ve.profiles?.username}`,className:"w-9 h-9 rounded-full cursor-pointer flex-shrink-0",alt:"Avatar",onClick:()=>u(ve.user_id)}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("button",{onClick:()=>u(ve.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm",children:ve.profiles?.display_name}),c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:K(ve.created_at)})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] text-sm mt-0.5 whitespace-pre-wrap break-words bg-[rgb(var(--color-surface-hover))] p-2 rounded-r-xl rounded-bl-xl inline-block",children:ve.content})]})]},ve.id))}),c.jsx("form",{onSubmit:Te,className:"p-3 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-b-2xl",children:c.jsxs("div",{className:"flex items-center gap-2 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2",children:[c.jsx("input",{type:"text",value:Q,onChange:ve=>M(ve.target.value),placeholder:"Add a comment...",className:"flex-1 bg-transparent border-none outline-none text-sm text-[rgb(var(--color-text))]",autoFocus:!0}),c.jsx("button",{type:"submit",disabled:!Q.trim()||W,className:"text-[rgb(var(--color-accent))] disabled:opacity-50 hover:text-[rgb(var(--color-primary))] transition",children:c.jsx(gi,{size:18})})]})})]})}),x&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>{y(!1),He()},children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-sm flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(vo,{size:24,className:"text-red-500 flex-shrink-0"}),c.jsx("h3",{className:"font-bold text-xl",children:"Confirm Deletion"})]}),c.jsx("p",{className:"mb-6",children:"Are you sure? This action cannot be undone!"}),c.jsxs("button",{onMouseDown:Pe,onMouseUp:He,onMouseLeave:He,onTouchStart:Pe,onTouchEnd:He,className:"relative w-full py-3 rounded-xl font-bold text-lg text-white bg-red-500 overflow-hidden disabled:opacity-50 transition duration-100",children:[c.jsx("div",{className:"absolute inset-0 bg-red-700 transition-all duration-50",style:{width:`${ne}%`}}),c.jsx("span",{className:"relative z-10",children:(ne>0,"Hold to Delete")})]}),c.jsx("button",{onClick:()=>{y(!1),He()},className:"mt-3 w-full py-2 text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] rounded-xl transition",children:"Cancel"})]})})]})},Dp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Py="0 0 784 1168",to=10,Ly=()=>{const[e,t]=_.useState([]),[n,i]=_.useState(""),[o,a]=_.useState(null),[u,d]=_.useState(""),[h,p]=_.useState(0),[g,x]=_.useState(!1),[y,b]=_.useState(!1),[w,N]=_.useState(!1),{user:j}=St(),P=_.useRef(null),T=_.useRef(null),[A,B]=_.useState("posts"),[Q,M]=_.useState(!1),[W,J]=_.useState(""),[we,z]=_.useState([]),$=async(ae="")=>{};_.useEffect(()=>{Q&&$(W)},[Q,W]),_.useRef(null),_.useEffect(()=>{},[]);const[ee,ue]=_.useState(new Set),[te,X]=_.useState(0),[ye,xe]=_.useState(!0),[G,ne]=_.useState(!1),S=_.useCallback(async ae=>{if(!ae.length)return{likeCounts:{},commentCounts:{}};const Te={},Pe={};for(const He of ae){const[{count:tt},{count:vt}]=await Promise.all([H.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",He),H.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",He)]);Te[He]=tt||0,Pe[He]=vt||0}return{likeCounts:Te,commentCounts:Pe}},[]),I=_.useCallback(async ae=>{if(!j||ae.length===0)return;const Te=ae.map(He=>He.id),{data:Pe}=await H.from("likes").select("entity_id").eq("user_id",j.id).eq("entity_type","post").in("entity_id",Te);Pe&&ue(He=>new Set([...He,...Pe.map(tt=>tt.entity_id)]))},[j]),K=_.useCallback(async()=>{t([]),X(0),xe(!0);let ae=H.from("posts").select("*, profiles(*)").order("created_at",{ascending:!1});const{data:Te}=await ae.range(0,to-1),Pe=Te||[],He=Pe.map(Ve=>Ve.id),{likeCounts:tt,commentCounts:vt}=await S(He),ve=Pe.map(Ve=>({...Ve,like_count:tt[Ve.id]||0,comment_count:vt[Ve.id]||0}));t(ve),ve.length<to&&xe(!1),I(ve)},[j,I,S]),E=_.useCallback(async()=>{if(G||!ye)return;ne(!0);const ae=te+1,Te=ae*to,Pe=Te+to-1;let He=H.from("posts").select("*, profiles(*)").order("created_at",{ascending:!1});const{data:tt}=await He.range(Te,Pe),vt=tt||[],ve=vt.map(Nt=>Nt.id),{likeCounts:Ve,commentCounts:pt}=await S(ve),Ct=vt.map(Nt=>({...Nt,like_count:Ve[Nt.id]||0,comment_count:pt[Nt.id]||0}));t(Nt=>[...Nt,...Ct]),X(ae),vt.length<to&&xe(!1),I(Ct),ne(!1)},[G,ye,te,j,I,S]);_.useEffect(()=>{K();const ae=H.channel("feed-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async Te=>{const{data:Pe}=await H.from("posts").select("*, profiles(*)").eq("id",Te.new.id).single();Pe&&t(He=>[{...Pe,like_count:0,comment_count:0},...He])}).subscribe();return()=>{H.removeChannel(ae)}},[j,K]),_.useEffect(()=>{const ae=()=>{const Te=window.scrollY>100;Te&&y&&b(!1),N(Te),A==="posts"&&window.innerHeight+document.documentElement.scrollTop+200>=document.documentElement.offsetHeight&&ye&&!G&&E()};return window.addEventListener("scroll",ae),()=>{window.removeEventListener("scroll",ae)}},[y,ye,G,E,A]);const ke=async ae=>{if(ae.preventDefault(),!n.trim()&&!o&&!u.trim())return;x(!0),p(0);let Te=null,Pe=null;if(o){const He=await ps(o,"posts");if(!He){x(!1);return}Te=He.url,Pe=He.type}else u.trim()&&(Te=u.trim(),u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?Pe="image":u.match(/\.(mp4|webm|mov|avi)$/i)?Pe="video":u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?Pe="audio":Pe="document");await H.from("posts").insert({user_id:j.id,content:n,media_url:Te,media_type:Pe}),i(""),a(null),d(""),b(!1),x(!1),p(0)},de=async ae=>{const{data:Te}=await H.from("profiles").select("username").eq("id",ae).single();Te&&(window.history.replaceState({},"",`/?user=${Te.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:ae})))},fe=()=>{if(o){const ae=URL.createObjectURL(o);return o.type.startsWith("image/")?c.jsx("img",{src:ae,className:"max-h-48 rounded-lg object-cover",alt:"Preview"}):o.type.startsWith("video/")?c.jsx("video",{src:ae,className:"max-h-48 rounded-lg",controls:!0}):o.type.startsWith("audio/")?c.jsx(Mu,{src:ae}):c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx(li,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-sm text-[rgb(var(--color-text))]",children:o.name})]})}return u?u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?c.jsx("img",{src:u,className:"max-h-48 rounded-lg object-cover",alt:"Remote preview"}):u.match(/\.(mp4|webm|mov|avi)$/i)?c.jsx("video",{src:u,className:"max-h-48 rounded-lg",controls:!0}):u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?c.jsx(Mu,{src:u}):c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx(xo,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-sm truncate max-w-[200px] text-[rgb(var(--color-text))]",children:u})]}):null},Ae=ae=>{const Te=ee.has(ae.id),Pe=new Set(ee);Te?Pe.delete(ae.id):Pe.add(ae.id),ue(Pe),t(He=>He.map(tt=>tt.id===ae.id?{...tt,like_count:Math.max(0,tt.like_count+(Te?-1:1))}:tt))},Ce=ae=>{t(Te=>Te.map(Pe=>Pe.id===ae.id?ae:Pe))};return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[Cd,A==="posts"&&c.jsx(yy,{}),A==="posts"&&c.jsx("div",{ref:P,className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] shadow-sm",children:y?c.jsxs("form",{onSubmit:ke,className:"p-4 space-y-3",children:[c.jsx("textarea",{value:n,onChange:ae=>i(ae.target.value),placeholder:"What's happening?",rows:3,className:"w-full px-4 py-3 border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-2xl focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none text-[rgb(var(--color-text))]",autoFocus:!0}),(o||u)&&c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx("div",{className:"flex-1",children:fe()}),c.jsx("button",{type:"button",onClick:()=>{a(null),d("")},className:"ml-2 p-1 hover:bg-[rgb(var(--color-border))] rounded-full transition",children:c.jsx(et,{size:18,className:"text-[rgb(var(--color-text-secondary))]"})})]}),g&&c.jsx("div",{className:"w-full bg-[rgb(var(--color-border))] rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:"bg-[rgba(var(--color-accent),1)] h-full transition-all duration-300",style:{width:`${h}%`}})}),Q&&c.jsxs("div",{className:"relative border border-[rgb(var(--color-border))] rounded-xl overflow-hidden bg-[rgb(var(--color-background))] h-64 flex flex-col mb-3",children:[c.jsxs("div",{className:"p-2 border-b border-[rgb(var(--color-border))] flex gap-2",children:[c.jsx(Bn,{size:16,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search GIFs...",className:"flex-1 bg-transparent text-sm outline-none text-[rgb(var(--color-text))]",value:W,onChange:ae=>J(ae.target.value),autoFocus:!0}),c.jsx("button",{type:"button",onClick:()=>M(!1),children:c.jsx(et,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2",children:we.map(ae=>c.jsx("img",{src:ae.media_formats.tinygif.url,alt:"GIF",className:"w-full h-24 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>{d(ae.media_formats.gif.url),a(null),M(!1)}},ae.id))})]}),c.jsx("input",{ref:T,type:"file",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt",onChange:ae=>{a(ae.target.files?.[0]||null),d("")},className:"hidden"}),c.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[c.jsxs("button",{type:"button",onClick:()=>T.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] rounded-full text-sm hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2 text-[rgb(var(--color-text))]",children:[c.jsx(xo,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})," ",o?"Change File":"Attach"]}),c.jsxs("button",{type:"button",onClick:()=>M(!Q),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] rounded-full text-sm hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2 text-[rgb(var(--color-text))]",children:[c.jsx(hg,{size:16,className:"text-pink-500"})," GIF"]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"or"}),c.jsx("input",{type:"url",value:u,onChange:ae=>{d(ae.target.value),a(null)},placeholder:"Paste URL...",className:"flex-1 min-w-0 px-3 py-1.5 text-sm border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] text-[rgb(var(--color-text))]"})]}),c.jsxs("button",{type:"submit",disabled:g||!n.trim()&&!o&&!u.trim(),className:"ml-auto bg-[rgba(var(--color-accent),1)] disabled:bg-[rgb(var(--color-border))] text-[rgb(var(--color-text-on-primary))] px-6 py-2 rounded-full hover:bg-[rgba(var(--color-primary),1)] flex items-center gap-2 font-semibold transition",children:[c.jsx(gi,{size:16})," ",g?"Uploading...":"Post"]})]})]}):c.jsxs("button",{onClick:()=>b(!0),className:"w-full p-4 flex items-center gap-3 hover:bg-[rgb(var(--color-surface-hover))] transition",children:[c.jsx(bg,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Write a post..."})]})}),c.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-[0px] z-30",children:[c.jsxs("button",{onClick:()=>B("posts"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${A==="posts"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(gg,{size:18})," Posts"]}),c.jsxs("button",{onClick:()=>B("shots"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${A==="shots"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(ly,{size:18})," Shots"]})]}),c.jsx("div",{children:A==="shots"?c.jsx(gy,{}):c.jsxs(c.Fragment,{children:[e.length===0&&!G&&c.jsx("div",{className:"text-center py-12 text-[rgb(var(--color-text-secondary))]",children:"No posts yet. Be the first!"}),e.map(ae=>c.jsx(uo,{post:ae,currentUserId:j?.id,isLiked:ee.has(ae.id),onLikeToggle:Ae,onCommentUpdate:Ce,onNavigateToProfile:de},ae.id)),G&&c.jsx("div",{className:"flex justify-center p-4",children:c.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Py,className:"logo-svg",children:[c.jsx("path",{d:Dp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Dp,fill:"rgb(var(--color-primary))",className:"logo-fill-animated"})]})})}),!G&&!ye&&e.length>0&&c.jsx("div",{className:"text-center py-8 text-sm text-[rgb(var(--color-text-secondary))]",children:"You've reached the end of the feed."})]})})]})},Iy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Ay=({onSelect:e,onClose:t})=>c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-xs sm:max-w-md rounded-2xl shadow-2xl border border-[rgb(var(--color-border))] flex flex-col max-h-[60vh]",onClick:n=>n.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-[rgb(var(--color-border))]",children:[c.jsx("span",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:"Choose Reaction"}),c.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(et,{size:18,className:"text-[rgb(var(--color-text-secondary))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-2 grid grid-cols-6 sm:grid-cols-8 gap-2 custom-scrollbar",children:Iy.map(n=>c.jsx("button",{onClick:()=>e(n),className:"aspect-square flex items-center justify-center text-xl hover:bg-[rgb(var(--color-surface-hover))] rounded-lg transition",children:n},n))})]})}),$p=_.lazy(()=>gs(()=>import("./Calls-3v4aLndh.js"),__vite__mapDeps([0,1])).then(e=>({default:e.Calls}))),Ry=_.lazy(()=>gs(()=>import("./Gazebos-DpshQxYp.js"),__vite__mapDeps([2,1])).then(e=>({default:e.Gazebos}))),My=e=>{const t=/(https?:\/\/[^\s]+)/g,n=e.match(t);return n?n[0]:null},Fp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Oy="0 0 784 1168",Ou=["","","","","",""],zy=(e,t)=>{if(!e)return[];const n=new Map;for(const i of e){const{emoji:o,user_id:a,profiles:u}=i;n.has(o)||n.set(o,{emoji:o,count:0,hasReacted:!1,userProfiles:[]});const d=n.get(o);d.count++,a===t&&(d.hasReacted=!0),u&&!Array.isArray(u)&&d.userProfiles.push(u)}return Array.from(n.values()).sort((i,o)=>{const a=Ou.indexOf(i.emoji),u=Ou.indexOf(o.emoji);return a!==-1&&u!==-1?a-u:a!==-1?-1:u!==-1?1:o.count-i.count})},za=({src:e,isOutgoing:t})=>{const n=_.useRef(null),[i,o]=_.useState(!1),[a,u]=_.useState(0),[d,h]=_.useState(0),p=t?"rgb(var(--color-text-on-primary))":"rgb(var(--color-accent))",g=t?"rgba(var(--color-text-on-primary), 0.3)":"rgb(var(--color-border))",x=w=>{const N=Math.floor(w/60),j=Math.floor(w%60);return`${N}:${j.toString().padStart(2,"0")}`};_.useEffect(()=>{const w=n.current;if(!w)return;const N=()=>{u(w.duration),h(w.currentTime)},j=()=>h(w.currentTime),P=()=>o(!w.paused),T=()=>{o(!1),w.currentTime=0};return w.addEventListener("loadedmetadata",N),w.addEventListener("timeupdate",j),w.addEventListener("play",P),w.addEventListener("pause",P),w.addEventListener("ended",T),()=>{w.removeEventListener("loadedmetadata",N),w.removeEventListener("timeupdate",j),w.removeEventListener("play",P),w.removeEventListener("pause",P),w.removeEventListener("ended",T)}},[]);const y=()=>{const w=n.current;w&&(i?w.pause():w.play())},b=w=>{const N=parseFloat(w.target.value),j=n.current;j&&(j.currentTime=N,h(N))};return c.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full mb-1",children:[c.jsx("audio",{ref:n,src:e,preload:"metadata",className:"hidden"}),c.jsx("button",{onClick:y,className:"flex-shrink-0 p-1.5 rounded-full transition-colors",style:{backgroundColor:t?"rgba(var(--color-text-on-primary), 0.15)":"rgb(var(--color-surface-hover))",color:p},children:i?c.jsx(yg,{size:14,fill:p}):c.jsx(rd,{size:14,fill:p})}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:a,step:"0.01",value:d,onChange:b,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${p} 0%, ${p} ${d/a*100||0}%, ${g} ${d/a*100||0}%, ${g} 100%)`}}),c.jsxs("span",{className:"text-[10px] flex-shrink-0 opacity-80",style:{color:p},children:[x(d),"/",x(a)]})]})]})},Dy=({initialInviteCode:e,onInviteHandled:t,initialTab:n="chats",initialGazeboId:i})=>{const[o,a]=_.useState(n),[u,d]=_.useState([]),[h,p]=_.useState(null),[g,x]=_.useState([]),[y,b]=_.useState(""),[w,N]=_.useState(null),[j,P]=_.useState(null),[T,A]=_.useState(""),[B,Q]=_.useState(0),[M,W]=_.useState(!1),[J,we]=_.useState(""),[z,$]=_.useState(!0),[ee,ue]=_.useState(!1),[te,X]=_.useState(!1),[ye,xe]=_.useState(null),[G,ne]=_.useState(null),[S,I]=_.useState(null),[K,E]=_.useState(!1),ke=_.useRef(null),de=_.useRef(!1),[fe,Ae]=_.useState(null),[Ce,ae]=_.useState(!1),[Te,Pe]=_.useState(""),[He,tt]=_.useState([]),vt=C=>{navigator.clipboard.writeText(C),ne(null)},ve=async C=>{ne(null),x(Z=>Z.map(ge=>ge.id===C?{...ge,is_deleted:!0}:ge));const{error:V}=await H.from("messages").update({is_deleted:!0}).eq("id",C).select();V&&(console.error("Error deleting message:",V),ks(h.id))},Ve=C=>{Ae(C),b(C.content),ne(null),rn.current?.focus()},pt=async C=>{if(C.preventDefault(),!fe||!y.trim())return;const V=[...g];x(ge=>ge.map(je=>je.id===fe.id?{...je,content:y,is_edited:!0}:je)),Ae(null),b("");const{error:Z}=await H.from("messages").update({content:y,is_edited:!0}).eq("id",fe.id).select();Z&&(console.error("Error updating message:",Z),x(V),alert("Failed to update message"))},Ct=async(C="")=>{};_.useEffect(()=>{Ce&&Ct(Te)},[Ce,Te]),_.useEffect(()=>{const C=V=>{pr.current&&!pr.current.contains(V.target)&&ae(!1)};return Ce&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[Ce]);const Nt=async C=>{ae(!1),xe(null);const{data:V}=await H.from("messages").insert({sender_id:be.id,recipient_id:h.id,content:"",media_url:C,media_type:"image"}).select().single();V&&(x(Z=>[...Z,V]),Lr())},[Gt,Kt]=_.useState(!1),[lt,en]=_.useState("image"),[Qt,tn]=_.useState([]),[Y,ie]=_.useState(!1),Re=async()=>{if(!be||!h)return;ie(!0);const{data:C}=await H.from("messages").select("*").or(`and(sender_id.eq.${be.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${be.id})`).not("media_url","is",null).neq("media_url","").order("created_at",{ascending:!1});C&&tn(C),ie(!1)},Fe=(C,V)=>{if(C.length<=V)return C;const Z=C.slice(0,Math.floor(V/2)),ge=C.slice(-Math.floor(V/2));return`${Z}...${ge}`},{user:be}=St(),dt=_.useCallback(async(C,V)=>{if(!be)return;const ge=g.find(je=>je.id===C)?.reactions?.find(je=>je.user_id===be.id);ge?ge.emoji===V?await H.from("message_reactions").delete().eq("id",ge.id):await H.from("message_reactions").update({emoji:V}).eq("id",ge.id):await H.from("message_reactions").insert({message_id:C,user_id:be.id,emoji:V,message_type:"dm"}),ne(null)},[be,g]),wt=async C=>{await H.from("message_reactions").delete().eq("id",C)},[rt,dr]=_.useState(!1),fr=_.useRef(null),mt=_.useRef([]),[Qe,Ue]=_.useState(0),[ft,kr]=_.useState(!0),[Jt,hr]=_.useState(!1),$t=_.useRef(null),_r=10,Hn=_.useRef(null),qr=_.useRef(null),rn=_.useRef(null),pr=_.useRef(null),Ft=_.useRef(null),yt=_.useRef(null),Vr=async C=>{if(!be)return;const{error:V}=await H.from("messages").update({read:!0}).eq("recipient_id",be.id).eq("sender_id",C).eq("read",!1);V||window.dispatchEvent(new CustomEvent("messagesRead"))},tr=C=>{if(!C)return!1;const V=new Date(C);return new Date().getTime()-V.getTime()<6e4},Wn=C=>{if(!C)return null;const V=new Date(C),ge=new Date().getTime()-V.getTime();if(ge<6e4)return null;const ce=Math.floor(ge/1e3),oe=Math.floor(ce/(3600*24)),De=Math.floor(ce%(3600*24)/3600),nt=Math.floor(ce%3600/60);let rr=[];return oe>0?(rr.push(`${oe}d`),De>0&&rr.push(`${De}h`)):De>0?(rr.push(`${De}h`),nt>0&&rr.push(`${nt}m`)):nt>0&&rr.push(`${nt}m`),rr.length===0?null:`${rr.join(" ")} ago`},Lr=()=>{Hn.current?.scrollIntoView({behavior:"smooth"})},Ir=C=>{const V=document.getElementById(`msg-${C}`);V?(V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ring-2","ring-[rgb(var(--color-primary))]","ring-offset-2"),setTimeout(()=>{V.classList.remove("ring-2","ring-[rgb(var(--color-primary))]","ring-offset-2")},1e3)):console.log("Message not currently loaded in view")},nn=async C=>{const{data:V}=await H.from("profiles").select("username").eq("id",C).single();V&&window.history.replaceState({},"",`/?${V.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:C}))},sn=async()=>{const{data:C}=await H.from("messages").select(`
        id,
        sender_id,
        recipient_id,
        created_at,
        sender:profiles!sender_id(id, username, display_name, avatar_url, verified, last_seen),
        recipient:profiles!recipient_id(id, username, display_name, avatar_url, verified, last_seen)
      `).or(`sender_id.eq.${be.id},recipient_id.eq.${be.id}`).order("created_at",{ascending:!1}),V=new Map;C?.forEach(ge=>{const je=ge.sender_id===be.id?ge.recipient:ge.sender;if(je){const ce=V.get(je.id);(!ce||ge.created_at>ce.latest)&&V.set(je.id,{profile:je,latest:ge.created_at})}});const Z=Array.from(V.values()).sort((ge,je)=>je.latest.localeCompare(ge.latest)).map(ge=>ge.profile);d(Z)};_.useEffect(()=>{n&&a(n)},[n]),_.useEffect(()=>{const C=V=>{const Z=V.detail;Z&&Z.id!==be?.id&&(p(Z),$(!1),we(""))};return window.addEventListener("openDirectMessage",C),()=>window.removeEventListener("openDirectMessage",C)},[be]),_.useEffect(()=>{be&&sn()},[be]),_.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("user");V&&be&&(async()=>{const{data:ge}=await H.from("profiles").select("*").eq("username",V).single();ge&&ge.id!==be.id&&(p(ge),$(!1))})()},[be]);const[ys,bs]=_.useState([]);_.useEffect(()=>{if(!J.trim()){bs([]);return}const V=setTimeout(async()=>{const{data:Z}=await H.from("profiles").select("*").or(`username.ilike.%${J}%,display_name.ilike.%${J}%`).neq("id",be.id).limit(20);bs(Z||[])},300);return()=>clearTimeout(V)},[J]),_.useEffect(()=>{if(!h){Ft.current&&(Ft.current.unsubscribe(),Ft.current=null),yt.current&&(yt.current.unsubscribe(),yt.current=null);return}ks(h.id),Vr(h.id),$(!1);const C=H.channel(`messages:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"messages"},async ge=>{const je=ge.eventType,ce=ge.new;if(je==="INSERT"&&(ce.sender_id===be.id&&ce.recipient_id===h.id||ce.sender_id===h.id&&ce.recipient_id===be.id)){let oe=ce;if(oe.reply_to_id){const{data:De}=await H.from("messages").select("id, content, sender_id, media_type").eq("id",oe.reply_to_id).single();De&&(oe={...oe,reply_to:De})}ce.sender_id===h.id&&ce.recipient_id===be.id&&(Vr(h.id),oe.read=!0),x(De=>[...De,oe]),Lr(),sn()}je==="UPDATE"&&x(oe=>oe.map(De=>De.id===ce.id?{...De,content:ce.content,media_url:ce.media_url,media_type:ce.media_type,is_edited:ce.is_edited,is_deleted:ce.is_deleted,read:ce.read}:De))}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},async ge=>{if(ge.eventType==="DELETE"){const je=ge.old;x(ce=>ce.map(oe=>oe.reactions?.some(De=>De.id===je.id)?{...oe,reactions:oe.reactions.filter(De=>De.id!==je.id)}:oe)),I(ce=>ce&&ce.reactions?.some(oe=>oe.id===je.id)?{...ce,reactions:ce.reactions.filter(oe=>oe.id!==je.id)}:ce)}else if(ge.eventType==="INSERT"){const je=ge.new,ce=je.message_id,{data:oe}=await H.from("message_reactions").select("*, profiles(id, username, display_name, avatar_url)").eq("id",je.id).single();oe&&(x(De=>De.map(nt=>{if(nt.id===ce){const rr=nt.reactions||[];return rr.some(Et=>Et.id===oe.id)?nt:{...nt,reactions:[...rr,oe]}}return nt})),I(De=>De&&De.id===ce&&De.reactions?De.reactions.some(nt=>nt.id===oe.id)?De:{...De,reactions:[...De.reactions,oe]}:De))}else if(ge.eventType==="UPDATE"){const je=ge.new;x(ce=>ce.map(oe=>oe.reactions?.some(De=>De.id===je.id)?{...oe,reactions:oe.reactions.map(De=>De.id===je.id?{...De,emoji:je.emoji}:De)}:oe)),I(ce=>ce&&ce.reactions?.some(oe=>oe.id===je.id)?{...ce,reactions:ce.reactions.map(oe=>oe.id===je.id?{...oe,emoji:je.emoji}:oe)}:ce)}}).subscribe(),V=`typing:${h.id}:${be.id}`;Ft.current=H.channel(V),Ft.current.on("presence",{event:"sync"},()=>{const ge=Ft.current.presenceState(),je=Object.values(ge).flat().some(ce=>ce.typing===!0);ue(je)}).subscribe();const Z=`typing:${be.id}:${h.id}`;return yt.current=H.channel(Z),yt.current.subscribe(async ge=>{ge==="SUBSCRIBED"&&await yt.current.track({typing:!1})}),()=>{H.removeChannel(C),Ft.current&&(Ft.current.unsubscribe(),Ft.current=null),yt.current&&(yt.current.untrack(),yt.current.unsubscribe(),yt.current=null)}},[h,be]);const vn=async C=>{if(yt.current)try{await yt.current.track({typing:C})}catch{}},mr=C=>{const V=C.target.value;b(V),V.trim()?(vn(!0),qr.current&&clearTimeout(qr.current),qr.current=setTimeout(()=>{vn(!1)},1e3)):(vn(!1),qr.current&&clearTimeout(qr.current))},ws=C=>{if(C.clipboardData.files.length>0){const V=C.clipboardData.files[0];P(V),A(""),xe(null),C.preventDefault();return}},Gn=async C=>{if(C.preventDefault(),!y.trim()&&!j&&!T.trim()||!h)return;W(!0),Q(0);let V=null,Z=null;if(j){j.type.startsWith("audio/")&&(Z="audio");const je=await ps(j,"messages");if(!je){W(!1);return}V=je.url,Z=Z||je.type}else T.trim()&&(V=T.trim(),T.match(/\.(jpeg|jpg|gif|png|webp)$/i)?Z="image":T.match(/\.(mp4|webm|mov|avi)$/i)?Z="video":T.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?Z="audio":Z="document");vn(!1);const{data:ge}=await H.from("messages").insert({sender_id:be.id,recipient_id:h.id,content:y,media_url:V,media_type:Z,reply_to_id:w?w.id:null}).select().single();ge&&(b(""),P(null),A(""),N(null),W(!1),Q(0),xe(null))},ks=async C=>{x([]),Ue(0),kr(!0),hr(!1);const{data:V,count:Z}=await H.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${be.id},recipient_id.eq.${C}),and(sender_id.eq.${C},recipient_id.eq.${be.id})`).order("created_at",{ascending:!1}).range(0,_r-1);if(!V||V.length===0){kr(!1);return}const ge=V.map(oe=>oe.reply_to_id).filter(oe=>oe!=null);let je=new Map;if(ge.length>0){const{data:oe}=await H.from("messages").select("id, content, sender_id, media_type").in("id",ge);oe&&oe.forEach(De=>je.set(De.id,De))}const ce=V.map(oe=>({...oe,reply_to:oe.reply_to_id&&je.get(oe.reply_to_id)||null}));x(ce.reverse()),(V.length<_r||Z!==null&&Z<=_r)&&kr(!1),setTimeout(Lr,100)},_s=async()=>{if(Jt||!ft||!h)return;hr(!0);const C=Qe+1,V=C*_r,Z=V+_r-1,ge=$t.current,je=ge?.scrollHeight,{data:ce,count:oe}=await H.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${be.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${be.id})`).order("created_at",{ascending:!1}).range(V,Z);if(ce&&ce.length>0){const De=ce.map(Et=>Et.reply_to_id).filter(Et=>Et!=null);let nt=new Map;if(De.length>0){const{data:Et}=await H.from("messages").select("id, content, sender_id, media_type").in("id",De);Et&&Et.forEach(Co=>nt.set(Co.id,Co))}const rr=ce.map(Et=>({...Et,reply_to:Et.reply_to_id&&nt.get(Et.reply_to_id)||null}));x(Et=>[...rr.reverse(),...Et]),Ue(C),ge&&je&&setTimeout(()=>{const Et=ge.scrollHeight;ge.scrollTop=Et-je},0)}(!ce||ce.length<_r||oe!==null&&g.length+(ce?.length||0)>=oe)&&kr(!1),hr(!1)},Ar=()=>{if($t.current){const{scrollTop:C}=$t.current;C===0&&ft&&!Jt&&_s()}},on=(C,V)=>{window.dispatchEvent(new CustomEvent("startCall",{detail:{targetUser:C,type:V}}))},Kn=()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Audio recording is not supported by your browser.");return}navigator.mediaDevices.getUserMedia({audio:!0}).then(C=>{const V={mimeType:"audio/webm"};let Z;try{Z=new MediaRecorder(C,V)}catch{Z=new MediaRecorder(C)}fr.current=Z,mt.current=[],Z.ondataavailable=ge=>{mt.current.push(ge.data)},Z.onstop=()=>{const ge=Z.mimeType||"audio/webm",je=ge.split("/")[1]?.split(";")[0]||"weba",ce=new Blob(mt.current,{type:ge}),oe=new File([ce],`voice-message.${je}`,{type:ge});P(oe),dr(!1),C.getTracks().forEach(De=>De.stop())},Z.start(),dr(!0),P(null),A(""),xe(null)}).catch(C=>{console.error("Mic error:",C),alert("Mic not found or permission was denied. Please check your browser settings.")})},js=()=>{fr.current&&rt&&fr.current.stop()},yi=()=>{rt?js():Kn()},D=J?ys:u,he=()=>{if(j){const C=URL.createObjectURL(j);return j.type.startsWith("image/")?c.jsx("img",{src:C,className:"max-h-24 rounded-lg shadow-sm",alt:"Preview"}):j.type.startsWith("video/")?c.jsx("video",{src:C,className:"max-h-24 rounded-lg shadow-sm",controls:!0}):j.type.startsWith("audio/")?c.jsx(za,{src:C,isOutgoing:!0}):c.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text))] p-2 bg-[rgb(var(--color-background))] rounded-lg border border-[rgb(var(--color-border))]",children:[c.jsx(li,{size:16,className:"text-[rgb(var(--color-accent))]"}),c.jsx("span",{children:j.name})]})}return T?T.match(/\.(jpeg|jpg|gif|png|webp)$/i)?c.jsx("img",{src:T,className:"max-h-24 rounded-lg shadow-sm",alt:"Remote preview"}):T.match(/\.(mp4|webm|mov|avi)$/i)?c.jsx("video",{src:T,className:"max-h-24 rounded-lg shadow-sm",controls:!0}):T.match(/\.(mp3|wav|ogg|m4a)$/i)?c.jsx(za,{src:T,isOutgoing:!0}):c.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text))] p-2 bg-[rgb(var(--color-background))] rounded-lg border border-[rgb(var(--color-border))]",children:[c.jsx(Lu,{size:16,className:"text-[rgb(var(--color-accent))]"}),c.jsx("span",{className:"truncate max-w-[150px]",children:T})]}):null};return o==="gazebos"?c.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] flex-col md:flex-row text-[rgb(var(--color-text))]",children:[c.jsx(_.Suspense,{fallback:c.jsx("div",{className:"p-4",children:"Loading Calls..."}),children:c.jsx($p,{})}),c.jsxs("div",{className:"md:hidden flex-shrink-0 p-2 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] flex gap-2 z-50",children:[c.jsx("button",{onClick:()=>a("chats"),className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:"Chats"}),c.jsx("button",{className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))]",children:"Gazebos"})]}),c.jsxs("div",{className:"hidden md:flex flex-col w-16 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] items-center py-4 gap-4 z-50 flex-shrink-0",children:[c.jsx("button",{onClick:()=>a("chats"),title:"Direct Messages",className:"p-3 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:c.jsx(go,{size:24})}),c.jsx("button",{title:"Gazebos",className:"p-3 rounded-full bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] shadow-md transition",children:c.jsx(tl,{size:24})})]}),c.jsx("div",{className:"flex-1 min-w-0 h-full relative overflow-hidden",children:c.jsx(_.Suspense,{fallback:c.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading Gazebos..."}),children:c.jsx(Ry,{initialInviteCode:e,onInviteHandled:t,initialGazeboId:i})})})]}):c.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] overflow-hidden",children:[c.jsx(_.Suspense,{fallback:null,children:c.jsx($p,{})}),G&&c.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>ne(null),onContextMenu:C=>{C.preventDefault(),ne(null)},children:c.jsxs("div",{className:"absolute bg-[rgb(var(--color-surface))] rounded-2xl shadow-xl flex flex-col z-50 pointer-events-auto border border-[rgb(var(--color-border))] animate-in fade-in zoom-in-95 duration-200 origin-bottom overflow-hidden min-w-[180px]",style:{top:G.y-120,left:Math.min(window.innerWidth-200,Math.max(10,G.x-90))},onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface-hover))] justify-center",children:[Ou.slice(0,4).map(C=>c.jsx("button",{onClick:()=>dt(G.messageId,C),className:"text-xl p-1.5 hover:scale-125 transition",children:C},C)),c.jsx("button",{onClick:()=>E(!0),className:"p-1 text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",children:c.jsx(el,{size:18})})]}),c.jsxs("div",{className:"flex flex-col p-1",children:[c.jsxs("button",{onClick:()=>vt(g.find(C=>C.id===G.messageId)?.content||""),className:"flex items-center gap-3 px-3 py-2 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-lg text-left",children:[c.jsx(Gv,{size:16})," Copy Text"]}),G.isOutgoing&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>Ve(g.find(C=>C.id===G.messageId)),className:"flex items-center gap-3 px-3 py-2 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-lg text-left",children:[c.jsx(Au,{size:16})," Edit Message"]}),c.jsxs("button",{onClick:()=>ve(G.messageId),className:"flex items-center gap-3 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 rounded-lg text-left",children:[c.jsx(vo,{size:16})," Delete Message"]})]})]})]})}),K&&G&&c.jsx(Ay,{onSelect:C=>{dt(G.messageId,C),E(!1)},onClose:()=>E(!1)}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>I(null),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))] transform transition-all",onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center bg-[rgb(var(--color-background))]",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Reactions"}),c.jsx("button",{onClick:()=>I(null),className:"p-1.5 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:c.jsx(et,{size:18})})]}),c.jsxs("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:[c.jsx("div",{className:"p-3 bg-[rgb(var(--color-surface-hover))] text-xs text-[rgb(var(--color-text-secondary))] truncate mx-4 mt-4 rounded-xl border border-[rgb(var(--color-border))] opacity-70 italic",children:S.content||(S.media_type?`[${S.media_type}]`:"Message")}),c.jsx("div",{className:"p-2 space-y-1",children:S.reactions?.map(C=>c.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-[rgb(var(--color-surface-hover))] rounded-2xl transition group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:C.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${C.profiles?.username}`,alt:C.profiles?.username,className:"w-8 h-8 rounded-full object-cover bg-[rgb(var(--color-background))]"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 text-sm leading-none drop-shadow-sm",children:C.emoji})]}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"font-semibold text-sm text-[rgb(var(--color-text))] flex items-center gap-1",children:[C.profiles?.display_name||"Unknown",C.user_id===be?.id&&c.jsx("span",{className:"text-[10px] text-[rgb(var(--color-text-secondary))] font-normal bg-[rgb(var(--color-surface-hover))] px-1.5 py-0.5 rounded-full",children:"You"})]})}),C.user_id===be?.id&&c.jsx("button",{onClick:V=>{V.stopPropagation(),wt(C.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 text-[rgb(var(--color-text-secondary))] hover:text-red-500 hover:bg-[rgb(var(--color-surface-hover))] rounded-full transition",title:"Remove reaction",children:c.jsx(et,{size:14})})]},C.id))})]})]})}),Gt&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:()=>Kt(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-4xl h-[85vh] rounded-3xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))] flex flex-col",onClick:C=>C.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center bg-[rgb(var(--color-surface))]",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Shared Media"}),c.jsx("button",{onClick:()=>Kt(!1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:c.jsx(et,{size:20})})]}),c.jsx("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] text-xs md:text-sm font-medium",children:["image","video","audio","document"].map(C=>c.jsxs("button",{onClick:()=>en(C),className:`flex-1 py-3 flex items-center justify-center gap-2 transition uppercase tracking-wide ${lt===C?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))] bg-[rgba(var(--color-accent),0.05)]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[C==="image"&&c.jsx(mg,{size:16}),C==="video"&&c.jsx(Xv,{size:16}),C==="audio"&&c.jsx(iy,{size:16}),C==="document"&&c.jsx(Yv,{size:16}),c.jsxs("span",{className:"hidden sm:inline",children:[C,"s"]})]},C))}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-[rgb(var(--color-background))] custom-scrollbar",children:Y?c.jsx("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))] animate-pulse",children:"Loading media..."}):c.jsx(c.Fragment,{children:Qt.filter(C=>C.media_type===lt).length===0?c.jsxs("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))] flex-col gap-2 opacity-50",children:[c.jsx(Ip,{size:48,strokeWidth:1}),c.jsxs("span",{children:["No shared ",lt,"s"]})]}):c.jsxs(c.Fragment,{children:[(lt==="image"||lt==="video")&&c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1",children:Qt.filter(C=>C.media_type===lt).map(C=>c.jsx("div",{className:"aspect-square relative group bg-[rgb(var(--color-surface))] overflow-hidden rounded-md border border-[rgb(var(--color-border))]",children:lt==="image"?c.jsx("a",{href:C.media_url,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:c.jsx("img",{src:C.media_url,className:"w-full h-full object-cover hover:scale-105 transition duration-300",alt:"Shared"})}):c.jsx("video",{src:C.media_url,className:"w-full h-full object-cover",controls:!0})},C.id))}),(lt==="audio"||lt==="document")&&c.jsx("div",{className:"space-y-2",children:Qt.filter(C=>C.media_type===lt).map(C=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[rgb(var(--color-surface))] rounded-xl border border-[rgb(var(--color-border))] hover:border-[rgb(var(--color-accent))] transition",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgba(var(--color-accent),0.1)] flex items-center justify-center flex-shrink-0 text-[rgb(var(--color-accent))]",children:lt==="audio"?c.jsx(Ap,{size:20}):c.jsx(li,{size:20})}),c.jsx("div",{className:"flex-1 min-w-0",children:lt==="document"?c.jsxs("a",{href:C.media_url,target:"_blank",rel:"noopener noreferrer",className:"block group",children:[c.jsx("p",{className:"font-medium text-sm text-[rgb(var(--color-text))] truncate group-hover:text-[rgb(var(--color-accent))] transition",children:C.content||Fe(C.media_url.split("/").pop()||"File",30)}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(C.created_at).toLocaleDateString()})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mb-1",children:new Date(C.created_at).toLocaleDateString()}),c.jsx(za,{src:C.media_url,isOutgoing:!1})]})})]},C.id))})]})})})]})}),c.jsxs("div",{className:`w-full md:w-80 lg:w-96 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] flex-shrink-0 flex flex-col transition-transform duration-300 ease-in-out ${z?"translate-x-0":"-translate-x-full md:translate-x-0"} md:relative fixed inset-y-0 left-0 z-40 md:z-auto`,children:[c.jsxs("div",{className:"px-4 pt-16 md:pt-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] z-10",children:[c.jsxs("div",{className:"flex gap-2 mb-4 bg-[rgb(var(--color-surface-hover))] p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>a("chats"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition ${o==="chats"?"bg-[rgb(var(--color-background))] shadow-sm text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Chats"}),c.jsx("button",{onClick:()=>a("gazebos"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition ${o==="gazebos"?"bg-[rgb(var(--color-background))] shadow-sm text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Gazebos"})]}),c.jsx("h2",{className:"text-xl font-extrabold text-[rgb(var(--color-text))] mb-3 px-1",children:"Messages"}),c.jsxs("div",{className:"relative mb-3",children:[c.jsx(Bn,{size:16,className:"absolute left-3 top-3 text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search people...",value:J,onChange:C=>we(C.target.value),className:"w-full pl-9 pr-4 py-2.5 text-sm border border-[rgb(var(--color-border))] rounded-xl focus:outline-none focus:border-[rgb(var(--color-accent))] focus:ring-1 focus:ring-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] transition-all"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[D.length===0&&c.jsxs("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))] flex flex-col items-center gap-2",children:[c.jsx(Bn,{size:24,className:"opacity-20"}),c.jsx("span",{className:"text-sm",children:J?"No users found":"Start a new chat"})]}),D.map(C=>c.jsxs("button",{onClick:()=>{p(C),$(!1),we("")},className:`w-full flex items-center gap-3 p-3 transition border-b border-[rgb(var(--color-border))] border-opacity-40 hover:bg-[rgb(var(--color-surface-hover))] ${h?.id===C.id?"bg-[rgba(var(--color-accent),0.05)] border-l-4 border-l-[rgb(var(--color-accent))] pl-2":""}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:C.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${C.username}`,className:"w-12 h-12 rounded-full object-cover bg-[rgb(var(--color-background))]",alt:""}),tr(C.last_seen)&&c.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),c.jsxs("div",{className:"text-left flex-1 min-w-0",children:[c.jsxs("div",{className:"font-semibold text-sm flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[C.display_name,C.verified&&c.jsx(Xr,{size:14,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),c.jsx("div",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate mt-0.5",children:tr(C.last_seen)?c.jsx("span",{className:"text-green-500 font-medium",children:"Online"}):Wn(C.last_seen)||`@${C.username}`})]})]},C.id))]})]}),c.jsx("div",{className:`flex-1 flex flex-col bg-[rgb(var(--color-background))] transition-all duration-300 ease-in-out ${h?"":"hidden md:flex"}`,children:h?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-3 flex items-center gap-3 sticky top-0 z-20 shadow-sm",children:[c.jsx("button",{onClick:()=>$(!0),className:"md:hidden p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition active:scale-95",children:c.jsx(Wa,{size:20,className:"text-[rgb(var(--color-text))]"})}),c.jsxs("button",{onClick:()=>nn(h.id),className:"flex items-center gap-3 flex-1 min-w-0 group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:h.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${h.username}`,className:"w-10 h-10 rounded-full object-cover ring-2 ring-transparent group-hover:ring-[rgb(var(--color-accent))] transition",alt:""}),tr(h.last_seen)&&c.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),c.jsxs("div",{className:"text-left min-w-0",children:[c.jsxs("div",{className:"font-bold text-sm flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[h.display_name,h.verified&&c.jsx(Xr,{size:14,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),c.jsx("div",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate",children:tr(h.last_seen)?c.jsx("span",{className:"text-green-500 font-medium",children:"Active now"}):h.last_seen?`Last seen ${new Date(h.last_seen).toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:`@${h.username}`})]})]}),c.jsxs("div",{className:"flex gap-1 items-center",children:[c.jsx("button",{onClick:()=>on(h,"audio"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"Audio call",children:c.jsx(oy,{size:18})}),c.jsx("button",{onClick:()=>on(h,"video"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"Video call",children:c.jsx(fy,{size:18})}),c.jsx("button",{onClick:()=>{Kt(!0),Re()},className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"View Media",children:c.jsx(Iu,{size:18})})]})]}),c.jsxs("div",{ref:$t,onScroll:Ar,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4 space-y-1 bg-[rgb(var(--color-background))]",children:[Jt&&c.jsx("div",{className:"flex justify-center p-4 w-full",children:c.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Oy,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Fp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Fp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),g.map((C,V)=>{const Z=C.sender_id===be.id,ge=g[V+1],je=!ge||ge.sender_id!==C.sender_id;return c.jsxs("div",{id:`msg-${C.id}`,className:`flex w-full mb-1 group relative ${Z?"justify-end":"justify-start"}`,children:[Z&&c.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition duration-200 mr-2 self-center",children:[c.jsx("button",{onClick:ce=>{const oe=ce.currentTarget.getBoundingClientRect();ne({messageId:C.id,x:oe.left,y:oe.top,isOutgoing:!0})},className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(cy,{size:14})}),c.jsx("button",{onClick:()=>N(C),className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(Pp,{size:14})})]}),c.jsxs("div",{onContextMenu:ce=>{ce.preventDefault();const oe=ce.currentTarget.getBoundingClientRect();ne({messageId:C.id,x:oe.left+oe.width/2,y:oe.top,isOutgoing:Z})},onTouchStart:ce=>{de.current=!1,ke.current=setTimeout(()=>{de.current=!0;const oe=ce.currentTarget.getBoundingClientRect();navigator.vibrate&&navigator.vibrate(50),ne({messageId:C.id,x:oe.left+oe.width/2,y:oe.top,isOutgoing:Z})},500)},onTouchEnd:()=>{ke.current&&clearTimeout(ke.current)},onTouchMove:()=>{ke.current&&clearTimeout(ke.current)},className:`relative max-w-[85%] md:max-w-[70%] lg:max-w-[60%] min-w-0 px-3 py-1.5 shadow-sm break-words select-none cursor-pointer
                      ${Z?`bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-2xl rounded-tr-sm ${je?"":"mb-0.5"}`:`bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] rounded-2xl rounded-tl-sm ${je?"":"mb-0.5"}`}
                      ${C.is_deleted?"opacity-70 italic":""}
                    `,children:[C.is_deleted?c.jsxs("div",{className:"flex items-center gap-2 text-sm py-1",children:[c.jsx(vo,{size:14,className:"opacity-50"}),c.jsx("span",{children:"[Message Deleted]"})]}):c.jsxs(c.Fragment,{children:[C.reply_to_id&&C.reply_to&&(()=>{const ce=C.reply_to,oe=ce.sender_id===be.id;return c.jsxs("div",{onClick:De=>{De.stopPropagation(),Ir(C.reply_to_id)},className:`flex items-center gap-2 p-1.5 rounded-lg mb-1 cursor-pointer transition select-none ${Z?"bg-black/10 hover:bg-black/20":"bg-[rgb(var(--color-surface-hover))] hover:bg-black/5"}`,children:[c.jsx("div",{className:`w-0.5 h-6 rounded-full self-stretch ${Z?"bg-white/50":"bg-[rgb(var(--color-accent))]"}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:`text-[10px] font-bold ${Z?"text-white/90":"text-[rgb(var(--color-accent))]"}`,children:oe?"You":h?.display_name}),c.jsx("div",{className:`text-[10px] truncate ${Z?"text-white/70":"text-[rgb(var(--color-text-secondary))]"}`,children:ce.content?ce.content.length>20?ce.content.substring(0,20)+"...":ce.content:c.jsxs("span",{className:"italic",children:["[",ce.media_type||"...","]"]})})]})]})})(),C.media_url&&!C.is_deleted&&c.jsxs("div",{className:`mb-1 ${C.content?"pb-1":""}`,children:[C.media_type==="image"&&c.jsx("img",{src:C.media_url,className:"rounded-lg w-full h-auto max-h-80 object-cover",alt:"Image",loading:"lazy"}),C.media_type==="video"&&c.jsx("video",{controls:!0,className:"rounded-lg w-full max-h-80 bg-black",children:c.jsx("source",{src:C.media_url})}),C.media_type==="audio"&&c.jsx("div",{className:"pt-1",children:c.jsx(za,{src:C.media_url,isOutgoing:Z})}),C.media_type==="document"&&c.jsxs("a",{href:C.media_url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 p-2 rounded-lg transition ${Z?"bg-white/10 hover:bg-white/20":"bg-[rgb(var(--color-surface-hover))] hover:bg-[rgb(var(--color-border))]"}`,children:[c.jsx(li,{size:16}),c.jsx("span",{className:"underline decoration-dotted text-xs truncate",children:"Open File"})]})]}),(()=>{const ce=C.content&&!C.media_url?My(C.content):null,oe=ce?C.content.replace(ce,"").trim():C.content;return c.jsxs(c.Fragment,{children:[oe&&c.jsx("p",{className:`whitespace-pre-wrap leading-relaxed text-sm md:text-sm text-left ${$y(oe)?"text-2xl md:text-3xl":""}`,children:oe}),ce&&c.jsx("div",{className:"mt-2 rounded-lg overflow-hidden text-xs",children:c.jsx(jg,{url:ce})})]})})()]}),c.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 select-none ${Z?"text-white/70":"text-[rgb(var(--color-text-secondary))] opacity-60"}`,children:[C.is_edited&&!C.is_deleted&&c.jsx("span",{className:"text-[9px] italic opacity-80",children:"(Edited)"}),c.jsx("span",{className:"text-[9px] font-medium tracking-tight",children:new Date(C.created_at).toLocaleString([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"2-digit"})}),Z&&!C.is_deleted&&(C.read?c.jsx(Wv,{size:14,className:"text-sky-300 drop-shadow-[0_0_2px_rgba(125,211,252,0.5)]"}):c.jsx(di,{size:12}))]}),C.reactions&&C.reactions.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5 pt-1 border-t border-white/10",children:zy(C.reactions,be.id).map(ce=>c.jsxs("button",{onClick:oe=>{oe.stopPropagation(),I(C)},className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-medium transition active:scale-95 ${Z?"bg-white/20 text-white hover:bg-white/30":"bg-[rgb(var(--color-surface-hover))] border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))]"}`,children:[c.jsx("span",{children:ce.emoji}),c.jsx("span",{className:ce.count>1?"":"hidden",children:ce.count})]},ce.emoji))})]}),!Z&&!C.is_deleted&&c.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition duration-200 ml-2 self-center",children:[c.jsx("button",{onClick:ce=>{const oe=ce.currentTarget.getBoundingClientRect();ne({messageId:C.id,x:oe.right,y:oe.top,isOutgoing:!1})},className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(Iu,{size:14})}),c.jsx("button",{onClick:()=>N(C),className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(Pp,{size:14})})]})]},C.id)}),ee&&c.jsx("div",{className:"flex justify-start w-full mb-2",children:c.jsx("div",{className:"bg-[rgb(var(--color-surface))] px-3 py-2 rounded-2xl rounded-tl-sm shadow-sm border border-[rgb(var(--color-border))]",children:c.jsxs("div",{className:"flex gap-1 items-center h-4",children:[c.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),c.jsx("div",{ref:Hn,className:"h-2"})]}),c.jsx("div",{className:"p-2 sm:p-3 md:p-4 bg-[rgb(var(--color-background))]",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-3xl shadow-lg flex flex-col relative transition-all duration-200 focus-within:ring-1 focus-within:ring-[rgb(var(--color-accent))] focus-within:border-[rgb(var(--color-accent))]",children:[w&&c.jsx("div",{className:"px-4 pt-3 flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-[rgb(var(--color-surface-hover))] rounded-xl w-full border-l-4 border-[rgb(var(--color-accent))]",children:[c.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[" ",c.jsxs("div",{className:"text-xs font-bold text-[rgb(var(--color-accent))] mb-0.5 truncate",children:[" ","Replying to ",w.sender_id===be.id?"yourself":h?.display_name]}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] block whitespace-nowrap overflow-hidden",children:w.content?w.content.length>20?w.content.substring(0,20)+"...":w.content:c.jsxs("span",{className:"italic",children:["[",w.media_type||"Media","]"]})})]}),c.jsx("button",{onClick:()=>N(null),className:"p-1 rounded-full hover:bg-black/10 text-[rgb(var(--color-text-secondary))]",children:c.jsx(et,{size:14})})]})}),(j||T)&&c.jsx("div",{className:"px-4 pt-3",children:c.jsxs("div",{className:"relative inline-block",children:[he(),c.jsx("button",{onClick:()=>{P(null),A(""),xe(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600",children:c.jsx(et,{size:12})})]})}),ye==="url"&&!j&&!T&&c.jsxs("div",{className:"px-4 pt-3 pb-1 flex items-center gap-2",children:[c.jsx("input",{type:"url",autoFocus:!0,value:T,onChange:C=>A(C.target.value),placeholder:"https://...",className:"flex-1 text-sm bg-transparent border-none focus:ring-0 text-[rgb(var(--color-text))]"}),c.jsx("button",{onClick:()=>xe(null),className:"text-[rgb(var(--color-text-secondary))]",children:c.jsx(et,{size:16})})]}),fe&&c.jsxs("div",{className:"px-4 pt-3 flex items-center justify-between bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))]",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[c.jsx(Au,{size:16})," Editing Message"]}),c.jsx("button",{onClick:()=>{Ae(null),b("")},className:"p-1 hover:bg-white/20 rounded-full",children:c.jsx(et,{size:16})})]}),Ce&&c.jsxs("div",{ref:pr,className:"absolute bottom-full left-0 right-0 h-80 bg-[rgb(var(--color-surface))] border-t border-[rgb(var(--color-border))] rounded-t-2xl z-20 flex flex-col shadow-2xl",children:[c.jsxs("div",{className:"p-3 border-b border-[rgb(var(--color-border))] flex gap-2 items-center",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Bn,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search GIFs...",value:Te,onChange:C=>Pe(C.target.value),className:"w-full pl-9 pr-3 py-2 text-sm bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] rounded-xl border border-[rgb(var(--color-border))] focus:border-[rgb(var(--color-accent))] focus:outline-none",autoFocus:!0})]}),c.jsx("button",{onClick:()=>ae(!1),className:"p-2 hover:bg-[rgb(var(--color-surface-hover))] rounded-full text-[rgb(var(--color-text-secondary))]",children:c.jsx(et,{size:20})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[c.jsx("div",{className:"columns-2 md:columns-3 gap-2 space-y-2",children:He.map(C=>c.jsx("button",{onClick:()=>Nt(C.media_formats.gif.url),className:"w-full block rounded-lg overflow-hidden hover:opacity-90 hover:ring-2 hover:ring-[rgb(var(--color-accent))] transition-all break-inside-avoid",children:c.jsx("img",{src:C.media_formats.tinygif.url,alt:"GIF",className:"w-full h-auto object-cover",loading:"lazy"})},C.id))}),He.length===0&&c.jsx("div",{className:"flex items-center justify-center h-full text-[rgb(var(--color-text-secondary))] text-sm",children:"No GIFs found"})]})]}),c.jsxs("form",{onSubmit:fe?pt:Gn,className:"flex items-end gap-2 p-2 relative",children:[M&&c.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-[rgb(var(--color-surface-hover))]",children:c.jsx("div",{className:"h-full bg-[rgb(var(--color-accent))] transition-all duration-300",style:{width:`${B}%`}})}),!fe&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>X(!te),className:`p-2.5 rounded-full transition duration-200 ${te?"bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rotate-45":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:c.jsx(xo,{size:20})}),te&&c.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-56 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-2xl shadow-xl overflow-hidden z-30 animate-in slide-in-from-bottom-2 fade-in duration-200",children:[c.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{X(!1),rn.current?.click(),A(""),xe("file")},children:[c.jsx(Ip,{size:18,className:"text-[rgb(var(--color-accent))]"})," Upload File"]}),c.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{X(!1),P(null),A(""),xe("url")},children:[c.jsx(Lu,{size:18,className:"text-[rgb(var(--color-accent))]"})," Paste Link"]}),c.jsx("div",{className:"h-px bg-[rgb(var(--color-border))]"}),c.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{X(!1),ae(!0)},children:[c.jsx(hg,{size:18,className:"text-pink-500"})," Insert GIF"]})]})]}),c.jsx("input",{ref:rn,type:"file",accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:C=>{P(C.target.files?.[0]||null),A("")},className:"hidden"}),c.jsx("textarea",{value:y,onChange:C=>mr(C),onPaste:ws,placeholder:fe?"Edit your message...":rt?"Recording...":"Message...",disabled:rt,className:"flex-1 py-2.5 px-2 bg-transparent border-none focus:ring-0 resize-none text-sm text-[rgb(var(--color-text))] placeholder-[rgb(var(--color-text-secondary))] max-h-32 custom-scrollbar",rows:1,style:{minHeight:"44px"},onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),fe?pt(C):Gn(C))}}),c.jsx("div",{className:"flex items-center gap-1 pb-1",children:y.trim()||j||T?c.jsx("button",{type:"submit",disabled:M,className:`p-2.5 rounded-full hover:brightness-110 shadow-md transition-all active:scale-95 disabled:opacity-50 ${fe?"bg-green-500 text-white":"bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))]"}`,children:fe?c.jsx(di,{size:18}):c.jsx(gi,{size:18,className:M?"animate-pulse":""})}):!fe&&c.jsx("button",{type:"button",onClick:yi,className:`p-2.5 rounded-full transition-all duration-200 ${rt?"bg-red-500 text-white animate-pulse shadow-red-500/30 shadow-lg":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:rt?c.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}):c.jsx(Ap,{size:20})})})]})]})})]}):c.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[rgb(var(--color-background))] flex-col gap-6 p-8",children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-[rgb(var(--color-surface))] flex items-center justify-center shadow-inner",children:c.jsx(go,{size:40,className:"text-[rgb(var(--color-text-secondary))] opacity-50"})}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h2",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:"Welcome to Messages"}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] max-w-xs mx-auto",children:"Select a conversation from the sidebar to start chatting or search for a new connection."})]}),c.jsxs("button",{onClick:()=>$(!0),className:"md:hidden mt-4 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition flex items-center gap-2",children:[c.jsx(Wa,{size:18})," View Chats"]})]})}),z&&!h&&c.jsx("div",{onClick:()=>$(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 md:hidden animate-in fade-in duration-200"})]})};function $y(e){return/^(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])+$/.test(e)&&e.length<10}const Up="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Fy="0 0 784 1168",Uy=(e,t,n)=>new Promise(i=>{const o=new Image,a=new FileReader;a.onload=u=>{o.onload=()=>{const d=document.createElement("canvas"),h=d.getContext("2d");if(!h)return console.error("Canvas context not available."),i(null);const p=t==="avatar"?256:500,g=t==="avatar"?256:200;d.width=p,d.height=g;const x=o.width/o.height,y=d.width/d.height;let b,w,N,j;x>y?(j=o.height,N=o.height*y,b=(o.width-N)/2,w=0):(N=o.width,j=o.width/y,b=0,w=(o.height-j)/2);const P=1/n;N*=P,j*=P,b=o.width/2-N/2,w=o.height/2-j/2,b=Math.max(0,b),w=Math.max(0,w),h.drawImage(o,b,w,N,j,0,0,d.width,d.height),d.toBlob(T=>{i(T)},e.type,.95)},o.onerror=()=>{console.error("Error loading image for cropping."),i(null)},o.src=u.target?.result},a.onerror=()=>{console.error("Error reading file for cropping."),i(null)},a.readAsDataURL(e)}),Bp=({userId:e,initialPostId:t,onMessage:n,onSettings:i})=>{const[o,a]=_.useState(null),[u,d]=_.useState([]),[h,p]=_.useState(!1),[g,x]=_.useState(""),[y,b]=_.useState(""),[w,N]=_.useState(""),[j,P]=_.useState(""),[T,A]=_.useState(""),[B,Q]=_.useState(!1),[M,W]=_.useState(0),[J,we]=_.useState(0),[z,$]=_.useState(!1),[ee,ue]=_.useState(!1),[te,X]=_.useState([]),[ye,xe]=_.useState([]),[G,ne]=_.useState(!1),[S,I]=_.useState(""),[K,E]=_.useState(null),[ke,de]=_.useState(null),[fe,Ae]=_.useState(null),[Ce,ae]=_.useState(""),[Te,Pe]=_.useState(""),[He,tt]=_.useState(!1),[vt,ve]=_.useState(!1),[Ve,pt]=_.useState(!1),[Ct,Nt]=_.useState(1),[Gt,Kt]=_.useState(1),[lt,en]=_.useState(new Set),[Qt,tn]=_.useState("posts"),[Y,ie]=_.useState([]),[Re,Fe]=_.useState(!1),[be,dt]=_.useState(!1),[wt,rt]=_.useState(null),dr=(D,he)=>{I(D),E(he),ne(!0)},fr=D=>{if(!D)return"";let he=D.replace(/^(https?:\/\/)?(www\.)?/,"");return he.length>30?he.substring(0,20)+"...":he},mt=D=>D?/^(f|ht)tps?:\/\//i.test(D)?D:"https://"+D:"",{user:Qe}=St(),Ue=e||Qe?.id,ft=Ue===Qe?.id,kr=_.useRef(null),Jt=_.useRef(null),hr=D=>{if(!D)return!1;const he=new Date().getTime(),C=new Date(D).getTime();return he-C<3e5},$t=_.useCallback(async D=>{if(!D.length)return{likeCounts:{},commentCounts:{}};const he={},C={};for(const V of D){const[{count:Z},{count:ge}]=await Promise.all([H.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",V),H.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",V)]);he[V]=Z||0,C[V]=ge||0}return{likeCounts:he,commentCounts:C}},[]),_r=async(D,he)=>{pt(!0);try{const C=await ps(D,"profiles");C&&(he==="avatar"?P(C.url):A(C.url))}catch(C){console.error("Direct upload failed:",C)}finally{pt(!1)}},Hn=D=>{if(D){if(D.type==="image/gif"){_r(D,"avatar");return}const he=URL.createObjectURL(D);de(D),ae(he),Nt(1),tt(!0)}else de(null),ae("")},qr=D=>{if(D){if(D.type==="image/gif"){_r(D,"banner");return}const he=URL.createObjectURL(D);Ae(D),Pe(he),Kt(1),ve(!0)}else Ae(null),Pe("")},rn=async(D,he)=>{if(!D)return;pt(!0);const C=he==="avatar"?Ct:Gt;try{const V=await Uy(D,he,C);if(!V){console.error("Cropping failed, received null Blob.");return}const Z=new File([V],`cropped-${D.name}`,{type:V.type}),ge=await ps(Z,"profiles");ge?he==="avatar"?P(ge.url):A(ge.url):console.error("Media upload failed.")}catch(V){console.error("An error occurred during crop or upload:",V)}finally{pt(!1),he==="avatar"?(tt(!1),de(null),ae("")):(ve(!1),Ae(null),Pe(""))}},pr=_.useCallback(async D=>{if(!Qe||D.length===0)return;const he=D.map(V=>V.id),{data:C}=await H.from("likes").select("entity_id").eq("user_id",Qe.id).eq("entity_type","post").in("entity_id",he);C&&en(V=>{const Z=new Set(V);return C.forEach(ge=>Z.add(ge.entity_id)),Z})},[Qe]),Ft=D=>{en(he=>{const C=new Set(he);return C.has(D.id)?C.delete(D.id):C.add(D.id),C}),d(he=>he.map(C=>{if(C.id===D.id){const V=lt.has(C.id);return{...C,like_count:Math.max(0,C.like_count+(V?-1:1))}}return C})),ie(he=>he.map(C=>{if(C.id===D.id){const V=lt.has(C.id);return{...C,like_count:Math.max(0,C.like_count+(V?-1:1))}}return C})),wt&&wt.id===D.id&&rt(he=>{if(!he)return null;const C=lt.has(he.id);return{...he,like_count:Math.max(0,he.like_count+(C?-1:1))}})},yt=D=>{d(he=>he.map(C=>C.id===D.id?{...C,comment_count:D.comment_count}:C)),ie(he=>he.map(C=>C.id===D.id?{...C,comment_count:D.comment_count}:C)),wt&&wt.id===D.id&&rt(he=>he?{...he,comment_count:D.comment_count}:null)},Vr=async D=>{d(C=>C.filter(V=>V.id!==D.id)),ie(C=>C.filter(V=>V.id!==D.id)),wt&&wt.id===D.id&&rt(null);const{error:he}=await H.from("posts").delete().eq("id",D.id);he&&(console.error("Failed to delete post",he),Wn())},tr=_.useCallback(async()=>{if(!Ue)return;const{data:D}=await H.from("profiles").select("*").eq("id",Ue).single();a(D),D&&(x(D.display_name),b(D.bio||""),N(D.bio_link||""),P(D.avatar_url||""),A(D.banner_url||""))},[Ue]),Wn=_.useCallback(async()=>{if(!Ue)return;const{data:D}=await H.from("posts").select("*, profiles(*)").eq("user_id",Ue).order("created_at",{ascending:!1}),he=D||[],C=he.map(je=>je.id),{likeCounts:V,commentCounts:Z}=await $t(C),ge=he.map(je=>({...je,like_count:V[je.id]||0,comment_count:Z[je.id]||0}));d(ge),pr(ge)},[Ue,pr,$t]),Lr=_.useCallback(async()=>{if(!Ue)return;Fe(!0);const{data:D}=await H.from("likes").select("entity_id").eq("user_id",Ue).eq("entity_type","post");if(!D||D.length===0){ie([]),dt(!0),Fe(!1);return}const he=D.map(oe=>oe.entity_id),{data:C}=await H.from("posts").select("*, profiles(*)").in("id",he).order("created_at",{ascending:!1}),V=C||[],Z=V.map(oe=>oe.id),{likeCounts:ge,commentCounts:je}=await $t(Z),ce=V.map(oe=>({...oe,like_count:ge[oe.id]||0,comment_count:je[oe.id]||0}));ie(ce),pr(ce),dt(!0),Fe(!1)},[Ue,pr,$t]),Ir=_.useCallback(async()=>{if(!Ue)return;const{count:D}=await H.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",Ue),{count:he}=await H.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",Ue);W(D||0),we(he||0)},[Ue]),nn=_.useCallback(async()=>{if(!Qe||!Ue)return;const{data:D}=await H.from("follows").select("follower_id").eq("follower_id",Qe.id).eq("following_id",Ue).maybeSingle();Q(!!D)},[Qe,Ue]);_.useEffect(()=>{if(Ue){tn("posts"),dt(!1),ie([]),tr(),Wn(),Ir(),ft||nn();const D=H.channel(`profile-${Ue}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async he=>{if(he.new.user_id!==Ue)return;const{data:C}=await H.from("posts").select("*, profiles(*)").eq("id",he.new.id).single();if(C){const V=[C.id],{likeCounts:Z,commentCounts:ge}=await $t(V),je={...C,like_count:Z[C.id]||0,comment_count:ge[C.id]||0};d(ce=>[je,...ce])}}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},he=>{const C=he.old.id;d(V=>V.filter(Z=>Z.id!==C)),ie(V=>V.filter(Z=>Z.id!==C))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"likes",filter:"entity_type=eq.post"},async he=>{if(he.new.user_id===Ue){const{data:V}=await H.from("posts").select("*, profiles(*)").eq("id",he.new.entity_id).single();if(V){const Z=[V.id],{likeCounts:ge,commentCounts:je}=await $t(Z),ce={...V,like_count:ge[V.id]||0,comment_count:je[V.id]||0};ie(oe=>oe.some(De=>De.id===ce.id)?oe:[ce,...oe])}}const C=he.new.entity_id;d(V=>V.map(Z=>Z.id===C?{...Z,like_count:(Z.like_count||0)+1}:Z)),ie(V=>V.map(Z=>Z.id===C?{...Z,like_count:(Z.like_count||0)+1}:Z))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"likes",filter:"entity_type=eq.post"},he=>{he.old.user_id===Ue&&ie(V=>V.filter(Z=>Z.id!==he.old.entity_id));const C=he.old.entity_id;d(V=>V.map(Z=>Z.id===C?{...Z,like_count:Math.max(0,(Z.like_count||0)-1)}:Z)),ie(V=>V.map(Z=>Z.id===C?{...Z,like_count:Math.max(0,(Z.like_count||0)-1)}:Z))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},he=>{const C=he.new.post_id;d(V=>V.map(Z=>Z.id===C?{...Z,comment_count:(Z.comment_count||0)+1}:Z)),ie(V=>V.map(Z=>Z.id===C?{...Z,comment_count:(Z.comment_count||0)+1}:Z))}).subscribe();return()=>{H.removeChannel(D)}}},[Ue,ft,tr,Wn,Ir,nn,$t]),_.useEffect(()=>{t&&(async()=>{const{data:he}=await H.from("posts").select("*, profiles(*)").eq("id",t).maybeSingle();if(he){let C=0,V=0;try{const{likeCounts:ge,commentCounts:je}=await $t([he.id]);C=ge[he.id]||0,V=je[he.id]||0}catch(ge){console.error("Error loading counts",ge)}const Z={...he,like_count:C,comment_count:V};rt(Z),Qe&&pr([Z])}})()},[t]);const sn=async()=>{const{data:D}=await H.from("follows").select("follower:profiles!follower_id(*)").eq("following_id",Ue);X(D?.map(he=>he.follower)||[])},ys=async()=>{const{data:D}=await H.from("follows").select("following:profiles!following_id(*)").eq("follower_id",Ue);xe(D?.map(he=>he.following)||[])},bs=async()=>{await sn(),$(!0),ue(!1)},vn=async()=>{await ys(),ue(!0),$(!1)},mr=()=>{$(!1),ue(!1)},ws=async()=>{Qe&&(B?await H.from("follows").delete().eq("follower_id",Qe.id).eq("following_id",Ue):await H.from("follows").insert({follower_id:Qe.id,following_id:Ue}),Q(!B),Ir())},Gn=async D=>{if(!Qe)return;const{data:he}=await H.from("follows").select("follower_id").eq("follower_id",Qe.id).eq("following_id",D).maybeSingle();he?await H.from("follows").delete().eq("follower_id",Qe.id).eq("following_id",D):await H.from("follows").insert({follower_id:Qe.id,following_id:D}),z&&await sn(),ee&&await ys(),Ir()},ks=async D=>{const{error:he}=await H.rpc("remove_follower",{p_follower_id:D});he?console.error("Error removing follower:",he):(X(C=>C.filter(V=>V.id!==D)),W(C=>C-1))},_s=async()=>{await H.from("profiles").update({display_name:g,bio:y,bio_link:w,avatar_url:j,banner_url:T}).eq("id",Qe.id),p(!1),tr()},Ar=async D=>{mr(),rt(null);const{data:he}=await H.from("profiles").select("username").eq("id",D).single();he&&(window.history.replaceState({},"",`/?user=${he.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:D})))},on=D=>{tn(D),D==="likes"&&!be&&!Re&&Lr()},Kn=_.useCallback(()=>u.filter(D=>D.media_url&&(D.media_type==="image"||D.media_type==="video")),[u])();if(!o)return c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text))]",children:"Loading..."});const js=h&&Te?Te:T||o.banner_url,yi=h&&Ce?Ce:j||o.avatar_url;return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"bg-[rgb(var(--color-surface))]",children:[c.jsx("div",{className:"relative h-48 bg-[rgb(var(--color-border))]",children:js?c.jsxs("button",{onClick:()=>ft&&h&&Jt.current?.click(),className:`w-full h-full ${ft&&h?"cursor-pointer group":""}`,disabled:!ft||!h,children:[c.jsx("img",{src:js,className:"w-full h-full object-cover",alt:"Banner"}),ft&&h&&c.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Oa,{size:48,className:"text-white"})})]}):c.jsx("button",{onClick:()=>ft&&h&&Jt.current?.click(),className:`w-full h-full ${ft&&h?"cursor-pointer group":""}`,disabled:!ft||!h,children:c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgba(var(--color-accent),1)] to-[rgba(var(--color-primary),1)] flex items-center justify-center",children:ft&&h&&c.jsx(Oa,{size:48,className:"text-white"})})})}),c.jsxs("div",{className:"relative px-4 pb-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end -mt-16",children:[c.jsxs("button",{onClick:()=>{ft&&h?kr.current?.click():ft||Ar(o.id)},className:`relative ${ft&&h?"group cursor-pointer":""}`,children:[c.jsx("img",{src:yi||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.username}`,className:"w-32 h-32 rounded-full border-4 border-[rgb(var(--color-surface))] shadow-lg ring-4 ring-[rgb(var(--color-surface))] hover:opacity-90 transition object-cover",alt:"Avatar"}),hr(o.last_seen)&&c.jsx("span",{className:"absolute bottom-2 right-2 w-5 h-5 bg-green-500 border-4 border-[rgb(var(--color-surface))] rounded-full"}),ft&&h&&c.jsx("div",{className:"absolute inset-0 w-32 h-32 rounded-full bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Oa,{size:32,className:"text-white"})})]}),c.jsx("div",{className:"mt-4 sm:mt-0 flex gap-2",children:ft?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>h?_s():p(!0),className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[h?c.jsx(di,{size:18}):c.jsx(Au,{size:18}),h?"Save":"Edit Profile"]}),i&&c.jsxs("button",{onClick:i,className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[c.jsx(wg,{size:18}),"Settings"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{o?.username&&(window.history.replaceState({},"",`/message?${o.username}`),n?.(o))},className:"flex items-center gap-2 px-5 py-2.5 bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-full hover:bg-[rgb(var(--color-primary))] transition font-medium",children:[c.jsx(mi,{size:18}),"Message"]}),c.jsx("button",{onClick:ws,className:`px-6 py-2.5 rounded-full font-semibold transition ${B?"bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:B?"Following":"Follow"})]})})]}),h?c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsx("input",{type:"text",value:g,onChange:D=>x(D.target.value),placeholder:"Display Name",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("textarea",{value:y,onChange:D=>b(D.target.value),placeholder:"Bio",rows:3,className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("input",{type:"url",value:w,onChange:D=>N(D.target.value),placeholder:"Bio Link (e.g., yourwebsite.com)",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"url",value:j,onChange:D=>P(D.target.value),placeholder:"Avatar URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"button",onClick:()=>kr.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:c.jsx(xo,{size:16})}),c.jsx("input",{ref:kr,type:"file",accept:"image/*",onChange:D=>Hn(D.target.files?.[0]||null),className:"hidden"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"url",value:T,onChange:D=>A(D.target.value),placeholder:"Banner URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"button",onClick:()=>Jt.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:c.jsx(xo,{size:16})}),c.jsx("input",{ref:Jt,type:"file",accept:"image/*",onChange:D=>qr(D.target.files?.[0]||null),className:"hidden"})]})]}):c.jsxs("div",{className:"mt-5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>!ft&&Ar(o.id),className:"font-bold text-2xl text-[rgb(var(--color-text))] hover:underline",children:o.display_name}),o.verified&&c.jsx(Xr,{size:22,className:"text-[rgb(var(--color-accent))]"})]}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",o.username]}),o.bio&&c.jsx("p",{className:"mt-3 text-[rgb(var(--color-text))]",children:o.bio}),c.jsxs("div",{className:"mt-4 flex gap-8 items-center text-sm",children:[" ",c.jsxs("button",{onClick:vn,className:"hover:underline text-[rgb(var(--color-text))]",children:[c.jsx("strong",{className:"text-lg",children:J})," ",c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Following"})]}),c.jsxs("button",{onClick:bs,className:"hover:underline text-[rgb(var(--color-text))]",children:[c.jsx("strong",{className:"text-lg",children:M})," ",c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Followers"})]}),o.bio_link&&c.jsxs("a",{href:mt(o.bio_link),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[rgb(var(--color-accent))] hover:underline hover:text-[rgb(var(--color-primary))] transition",children:[c.jsx(Lu,{size:16}),c.jsx("span",{className:"truncate max-w-[150px]",children:fr(o.bio_link)})]})]})]})]})]}),c.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-0 z-30",children:[c.jsxs("button",{onClick:()=>on("posts"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="posts"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(gg,{size:18}),"Posts"]}),c.jsxs("button",{onClick:()=>on("media"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="media"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(ey,{size:18}),"Media"]}),c.jsxs("button",{onClick:()=>on("likes"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="likes"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(uy,{size:18}),"Likes"]})]}),c.jsxs("div",{children:[Qt==="posts"&&c.jsxs("div",{children:[u.length===0&&c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted anything yet."}),u.map(D=>c.jsx(uo,{post:D,currentUserId:Qe?.id,isLiked:lt.has(D.id),onLikeToggle:Ft,onCommentUpdate:yt,onNavigateToProfile:Ar,onDelete:Vr},D.id))]}),Qt==="media"&&c.jsx("div",{children:Kn.length===0?c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted any media."}):c.jsx("div",{className:"grid grid-cols-3 gap-1",children:Kn.map(D=>c.jsxs("button",{className:"aspect-square relative bg-[rgb(var(--color-border))] hover:opacity-80 transition",onClick:()=>dr(D.media_url,D.media_type==="video"?"video":"image"),children:[D.media_type==="image"&&c.jsx("img",{src:D.media_url,alt:"Media",className:"w-full h-full object-cover"}),D.media_type==="video"&&c.jsxs(c.Fragment,{children:[c.jsx("video",{src:D.media_url,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 right-2 p-1.5 bg-black/50 rounded-full",children:c.jsx(Oa,{size:16,className:"text-white"})})]})]},D.id))})}),Qt==="likes"&&c.jsxs("div",{children:[Re&&c.jsx("div",{className:"flex justify-center p-8",children:c.jsx("div",{className:"logo-loading-container w-8 h-8 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Fy,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Up,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Up,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),!Re&&be&&Y.length===0&&c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't liked any posts yet."}),!Re&&be&&Y.map(D=>c.jsx(uo,{post:D,currentUserId:Qe?.id,isLiked:lt.has(D.id),onLikeToggle:Ft,onCommentUpdate:yt,onNavigateToProfile:Ar,onDelete:Vr},D.id))]})]}),wt&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:()=>{rt(null),window.history.replaceState({},"","/")},children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-2xl overflow-y-auto border border-[rgb(var(--color-border))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"sticky top-0 z-10 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Post"}),c.jsx("button",{onClick:()=>{rt(null),window.history.replaceState({},"","/")},className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(et,{size:24})})]}),c.jsx(uo,{post:wt,currentUserId:Qe?.id,isLiked:lt.has(wt.id),onLikeToggle:Ft,onCommentUpdate:yt,onNavigateToProfile:Ar,onDelete:Vr})]})}),He&&ke&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!Ve&&tt(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-lg flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[c.jsx(Lp,{size:20})," Crop Avatar"]}),c.jsx("button",{onClick:()=>tt(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:Ve,children:c.jsx(et,{size:20})})]}),c.jsxs("div",{className:"flex justify-center items-center h-80 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[c.jsx("img",{src:Ce,className:"max-w-full max-h-full object-contain",alt:"Avatar Crop Preview",style:{transform:`scale(${Ct})`}}),c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"w-64 h-64 border-4 border-dashed border-white/80 rounded-full shadow-lg"}),c.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"circle(128px at center)",mixBlendMode:"saturation"}}),Ve&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",Ct.toFixed(1),"x)"]}),c.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:Ct,onChange:D=>Nt(parseFloat(D.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:Ve}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),c.jsx("button",{onClick:()=>rn(ke,"avatar"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:Ve,children:Ve?"Cropping & Uploading...":"Crop & Save Avatar"})]})}),vt&&fe&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!Ve&&ve(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-2xl flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[c.jsx(Lp,{size:20})," Crop Banner"]}),c.jsx("button",{onClick:()=>ve(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:Ve,children:c.jsx(et,{size:20})})]}),c.jsxs("div",{className:"flex justify-center items-center h-48 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[c.jsx("img",{src:Te,className:"w-full h-full object-cover",alt:"Banner Crop Preview",style:{transform:`scale(${Gt})`}}),c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"w-11/12 h-3/5 border-4 border-dashed border-white/80 shadow-lg"}),c.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"polygon(0% 0%, 0% 100%, 5% 100%, 5% 20%, 95% 20%, 95% 80%, 5% 80%, 5% 100%, 100% 100%, 100% 0%)",mixBlendMode:"saturation"}}),Ve&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",Gt.toFixed(1),"x)"]}),c.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:Gt,onChange:D=>Kt(parseFloat(D.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:Ve}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),c.jsx("button",{onClick:()=>rn(fe,"banner"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:Ve,children:Ve?"Cropping & Uploading...":"Crop & Save Banner"})]})}),(z||ee)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:mr,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-md max-h-[80vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[rgb(var(--color-border))]",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:z?"Followers":"Following"}),c.jsx("button",{onClick:mr,className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(et,{size:20})})]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:(z?te:ye).map(D=>{const he=ye.some(V=>V.id===D.id),C=D.id===Qe?.id;return c.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-[rgb(var(--color-surface-hover))] border-b border-[rgb(var(--color-border))]",children:[c.jsxs("button",{onClick:()=>Ar(D.id),className:"flex items-center gap-3 flex-1 text-left",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[c.jsx("img",{src:D.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${D.username}`,className:"w-10 h-10 rounded-full",alt:""}),hr(D.last_seen)&&c.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))]",children:D.display_name}),c.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",D.username]})]})]}),ft&&!C&&c.jsxs("div",{className:"flex gap-2",children:[z&&c.jsxs("button",{onClick:V=>{V.stopPropagation(),ks(D.id)},className:"px-3 py-1.5 text-sm font-medium rounded-full border border-red-300 text-red-600 hover:bg-red-50 transition",children:[c.jsx(dy,{size:16,className:"inline mr-1"}),"Remove"]}),ee&&c.jsx("button",{onClick:V=>{V.stopPropagation(),Gn(D.id)},className:`px-4 py-1.5 text-sm font-medium rounded-full border transition ${he?"border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:he?"Following":"Follow"})]})]},D.id)})})]})}),G&&S&&c.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:()=>ne(!1),children:[c.jsxs("div",{className:"max-w-full max-h-full",onClick:D=>D.stopPropagation(),children:[K==="image"&&c.jsx("img",{src:S,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size view"}),K==="video"&&c.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[c.jsx("source",{src:S}),"Your browser does not support the video tag."]})]}),c.jsx("button",{onClick:()=>ne(!1),className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:c.jsx(et,{size:24})})]})]})},qp=async e=>{const{data:t}=await H.from("profiles").select("username").eq("id",e).single();t&&(window.history.replaceState({},"",`/?${t.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:e})))},By=({onClose:e})=>{const[t,n]=_.useState(""),[i,o]=_.useState([]),[a,u]=_.useState([]),[d,h]=_.useState(!1);return _.useEffect(()=>{if(!t.trim()){o([]),u([]);return}const p=setTimeout(async()=>{h(!0);const g=t.toLowerCase(),{data:x}=await H.from("profiles").select("*").or(`username.ilike.%${g}%,display_name.ilike.%${g}%`).limit(5),{data:y}=await H.from("posts").select("*, profiles(*)").ilike("content",`%${g}%`).limit(10);o(x||[]),u(y||[]),h(!1)},300);return()=>clearTimeout(p)},[t]),c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center p-4 pt-10",onClick:e,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-xl max-h-[80vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center p-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] rounded-t-2xl z-10",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Bn,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search users and posts...",value:t,onChange:p=>n(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-[rgb(var(--color-border))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]",autoFocus:!0})]}),c.jsx("button",{onClick:e,className:"p-2 ml-3 hover:bg-[rgb(var(--color-surface-hover))] rounded-full text-[rgb(var(--color-text))]",children:c.jsx(et,{size:24})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&t&&c.jsxs("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:['Loading results for "',t,'"...']}),t&&!d&&c.jsxs(c.Fragment,{children:[i.length>0&&c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))]",children:[c.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[c.jsx(nd,{size:20,className:"text-[rgb(var(--color-primary))]"})," Users"]}),i.map(p=>c.jsxs("button",{onClick:()=>{e(),qp(p.id)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left",children:[c.jsx("img",{src:p.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))] truncate",children:p.display_name}),c.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] truncate",children:["@",p.username]})]})]},p.id))]}),a.length>0&&c.jsxs("div",{className:"p-4",children:[c.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[c.jsx(mi,{size:20,className:"text-[rgb(var(--color-primary))]"})," Posts"]}),a.map(p=>c.jsxs("button",{onClick:()=>{e(),qp(p.user_id)},className:"w-full flex gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left border-b border-[rgb(var(--color-border))] last:border-b-0",children:[c.jsx("img",{src:p.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.profiles?.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx("span",{className:"font-bold text-[rgb(var(--color-text))]",children:p.profiles?.display_name}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",p.profiles?.username]})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] mt-1 line-clamp-2",children:p.content}),p.media_url&&c.jsx("img",{src:p.media_url,className:"mt-2 rounded-xl max-h-48 object-cover w-full",alt:""})]})]},p.id))]}),!i.length&&!a.length&&c.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:['No results found for "',t,'"']})]}),!t&&c.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:[c.jsx(Bn,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"Type to search users and posts"})]})]})]})})},qy=[{value:"lt-classic",name:"LT Classic",desc:"Default theme. Fiery orange and reds."},{value:"lt-dark",name:"LT Dark",desc:"Dark mode. Fiery orange and reds."},{value:"muxday",name:"MuxDay",desc:"Alternate theme in honor of the previous MuxDay platform. Analogous shades of blue."},{value:"amrella",name:"Amrella",desc:"Alternate theme in honor of the previous Amrella platform. Analogous shades of green."},{value:"cooper-black",name:"Cooper Black",desc:"Special theme for Cooper Black fans and enthusiasts. Futuristic cyberpunk vibes."},{value:"knightspeak",name:"Knightspeak",desc:"Special theme for Knightspeak fans and enthusiasts. Medieval vibes."},{value:"wildest-dimensions",name:"Wildest Dimensions",desc:"Special theme for Radiyana, in the Wildest Dimensions. Feel the high life."},{value:"mahir-beats",name:"Mahir Beats",desc:"Special theme for Mahir. Deep dark blues. Enjoy the cruise."},{value:"dewan-mukto",name:"Dewan Mukto",desc:"Low contrast within pure black and white. Timeless."},{value:"marlizo",name:"Marlizo",desc:"Special theme for Marlizo. Dante from Devil May Cry will love this."},{value:"invincible",name:"Invincible",desc:"Not invisible, yet invincible. This is a theme for people like A.A.A. who are the role models of IT. Pure OLED darkness."}],Vy=({currentTheme:e,onChange:t,loading:n})=>c.jsx("div",{className:"space-y-2",children:qy.map(i=>c.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all border ${e===i.value?"bg-[rgba(var(--color-primary),0.1)] border-[rgb(var(--color-primary))]":"bg-[rgb(var(--color-surface-hover))] border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-border))]"}`,onClick:()=>!n&&t(i.value),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[rgb(var(--color-text))]",children:i.name}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:i.desc})]}),e===i.value&&c.jsx(Pu,{size:16,className:"text-[rgb(var(--color-primary))]"})]})},i.value))}),Hy=()=>{const{user:e,profile:t,updateProfile:n}=St(),[i,o]=_.useState(""),[a,u]=_.useState(""),[d,h]=_.useState(""),[p,g]=_.useState(""),[x,y]=_.useState(""),[b,w]=_.useState(!1),[N,j]=_.useState(!1),[P,T]=_.useState(null),A=async J=>{if(!e?.id||!t)return;j(!0);const{error:we}=await H.from("profiles").update({theme:J}).eq("id",e.id);j(!1),we?T({type:"error",text:"Failed to update theme."}):(n({...t,theme:J}),T({type:"success",text:"Theme updated!"})),setTimeout(()=>T(null),3e3)},B=async()=>{if(!e?.id||!t||i===t.username||!i.trim())return;j(!0);const{data:J}=await H.from("profiles").select("id").eq("username",i.toLowerCase()).maybeSingle();if(J){T({type:"error",text:"Username already taken."}),j(!1);return}const{error:we}=await H.from("profiles").update({username:i.toLowerCase()}).eq("id",e.id);j(!1),we?T({type:"error",text:"Failed to update username."}):(n({...t,username:i.toLowerCase()}),T({type:"success",text:"Username updated!"}),o("")),setTimeout(()=>T(null),3e3)},Q=async()=>{if(!e?.id||!a.trim())return;j(!0);const{error:J}=await H.auth.updateUser({email:a});j(!1),J?T({type:"error",text:J.message||"Failed to update email."}):(T({type:"success",text:"Email updated! Check your inbox for confirmation."}),u("")),setTimeout(()=>T(null),3e3)},M=async()=>{if(!e?.id||d!==p||d.length<6)return;j(!0);const{error:J}=await H.auth.updateUser({password:d});j(!1),J?T({type:"error",text:J.message||"Failed to update password."}):(T({type:"success",text:"Password updated!"}),h(""),g("")),setTimeout(()=>T(null),3e3)},W=async()=>{if(!e?.id||!t||!x.trim())return;j(!0);const{error:J}=await H.from("profiles").update({verification_request:x}).eq("id",e.id);j(!1),J?T({type:"error",text:"Failed to submit request."}):(n({...t,verification_request:x}),T({type:"success",text:"Verification request submitted!"}),y(""),w(!1)),setTimeout(()=>T(null),3e3)};return!t||!e?c.jsx("div",{className:"text-center p-8",children:"Loading..."}):c.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wg,{size:24,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})]}),P&&c.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${P.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[P.type==="success"?c.jsx(Pu,{size:20}):c.jsx(dg,{size:20}),P.text]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Theme"}),c.jsx(Vy,{currentTheme:t.theme,onChange:A,loading:N})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Username"}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: @",t.username]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:J=>o(J.target.value),placeholder:"New username",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsx("button",{onClick:B,disabled:N||!i.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition",children:N?"...":"Change"})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Email"}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: ",e.email]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"email",value:a,onChange:J=>u(J.target.value),placeholder:"New email",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsxs("button",{onClick:Q,disabled:N||!a.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:[c.jsx(sy,{size:16}),N?"...":"Change"]})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Password"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"password",value:d,onChange:J=>h(J.target.value),placeholder:"New password (min 6 chars)",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsx("input",{type:"password",value:p,onChange:J=>g(J.target.value),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsxs("button",{onClick:M,disabled:N||d!==p||d.length<6,className:"w-full py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center justify-center gap-2",children:[c.jsx(xg,{size:16}),N?"...":"Change Password"]})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Verification"}),t.verified?c.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[c.jsx(Pu,{size:20}),c.jsx("span",{children:"Verified"}),c.jsx(di,{size:20,className:"text-[rgb(var(--color-primary))]"})]}):t.verification_request?c.jsxs("div",{className:"text-yellow-600",children:["Pending: ",t.verification_request]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mb-4",children:" Apply for verification badge."}),c.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] transition",children:"Apply for Verification"}),b&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("textarea",{value:x,onChange:J=>y(J.target.value),placeholder:"Reason for verification (e.g., public figure, brand, etc.)",rows:3,className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:W,disabled:N||!x.trim(),className:"flex-1 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-[rgb(var(--color-border))] transition",children:N?"...":"Submit"}),c.jsx("button",{onClick:()=>{w(!1),y("")},className:"px-4 py-2 bg-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition",children:"Cancel"})]})]})]})]})]})};function Wy(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Gy=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ky=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Qy={};function Vp(e,t){return(Qy.jsx?Ky:Gy).test(e)}const Jy=/[ \t\n\f\r]/g;function Yy(e){return typeof e=="object"?e.type==="text"?Hp(e.value):!1:Hp(e)}function Hp(e){return e.replace(Jy,"")===""}class _o{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}_o.prototype.normal={};_o.prototype.property={};_o.prototype.space=void 0;function Sg(e,t){const n={},i={};for(const o of e)Object.assign(n,o.property),Object.assign(i,o.normal);return new _o(n,i,t)}function zu(e){return e.toLowerCase()}class ur{constructor(t,n){this.attribute=n,this.property=t}}ur.prototype.attribute="";ur.prototype.booleanish=!1;ur.prototype.boolean=!1;ur.prototype.commaOrSpaceSeparated=!1;ur.prototype.commaSeparated=!1;ur.prototype.defined=!1;ur.prototype.mustUseProperty=!1;ur.prototype.number=!1;ur.prototype.overloadedBoolean=!1;ur.prototype.property="";ur.prototype.spaceSeparated=!1;ur.prototype.space=void 0;let Xy=0;const qe=vs(),jt=vs(),Du=vs(),pe=vs(),at=vs(),ci=vs(),br=vs();function vs(){return 2**++Xy}const $u=Object.freeze(Object.defineProperty({__proto__:null,boolean:qe,booleanish:jt,commaOrSpaceSeparated:br,commaSeparated:ci,number:pe,overloadedBoolean:Du,spaceSeparated:at},Symbol.toStringTag,{value:"Module"})),eu=Object.keys($u);class sd extends ur{constructor(t,n,i,o){let a=-1;if(super(t,n),Wp(this,"space",o),typeof i=="number")for(;++a<eu.length;){const u=eu[a];Wp(this,eu[a],(i&$u[u])===$u[u])}}}sd.prototype.defined=!0;function Wp(e,t,n){n&&(e[t]=n)}function xi(e){const t={},n={};for(const[i,o]of Object.entries(e.properties)){const a=new sd(i,e.transform(e.attributes||{},i),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(a.mustUseProperty=!0),t[i]=a,n[zu(i)]=i,n[zu(a.attribute)]=i}return new _o(t,n,e.space)}const Cg=xi({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:at,ariaCurrent:null,ariaDescribedBy:at,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:at,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:at,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:at,ariaLevel:pe,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:at,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:at,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:jt,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ng(e,t){return t in e?e[t]:t}function Eg(e,t){return Ng(e,t.toLowerCase())}const Zy=xi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ci,acceptCharset:at,accessKey:at,action:null,allow:null,allowFullScreen:qe,allowPaymentRequest:qe,allowUserMedia:qe,alt:null,as:null,async:qe,autoCapitalize:null,autoComplete:at,autoFocus:qe,autoPlay:qe,blocking:at,capture:null,charSet:null,checked:qe,cite:null,className:at,cols:pe,colSpan:null,content:null,contentEditable:jt,controls:qe,controlsList:at,coords:pe|ci,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qe,defer:qe,dir:null,dirName:null,disabled:qe,download:Du,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qe,formTarget:null,headers:at,height:pe,hidden:Du,high:pe,href:null,hrefLang:null,htmlFor:at,httpEquiv:at,id:null,imageSizes:null,imageSrcSet:null,inert:qe,inputMode:null,integrity:null,is:null,isMap:qe,itemId:null,itemProp:at,itemRef:at,itemScope:qe,itemType:at,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qe,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:qe,muted:qe,name:null,nonce:null,noModule:qe,noValidate:qe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qe,optimum:pe,pattern:null,ping:at,placeholder:null,playsInline:qe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qe,referrerPolicy:null,rel:at,required:qe,reversed:qe,rows:pe,rowSpan:pe,sandbox:at,scope:null,scoped:qe,seamless:qe,selected:qe,shadowRootClonable:qe,shadowRootDelegatesFocus:qe,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:qe,useMap:null,value:jt,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:at,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qe,declare:qe,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:qe,noHref:qe,noShade:qe,noWrap:qe,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qe,disableRemotePlayback:qe,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:Eg}),eb=xi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:br,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:at,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:qe,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ci,g2:ci,glyphName:ci,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:br,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:at,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:br,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:br,rev:br,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:br,requiredFeatures:br,requiredFonts:br,requiredFormats:br,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:br,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:br,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:br,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ng}),Tg=xi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Pg=xi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Eg}),Lg=xi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),tb={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},rb=/[A-Z]/g,Gp=/-[a-z]/g,nb=/^data[-\w.:]+$/i;function sb(e,t){const n=zu(t);let i=t,o=ur;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&nb.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Gp,ob);i="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Gp.test(a)){let u=a.replace(rb,ib);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}o=sd}return new o(i,t)}function ib(e){return"-"+e.toLowerCase()}function ob(e){return e.charAt(1).toUpperCase()}const ab=Sg([Cg,Zy,Tg,Pg,Lg],"html"),id=Sg([Cg,eb,Tg,Pg,Lg],"svg");function lb(e){return e.join(" ").trim()}var ni={},tu,Kp;function cb(){if(Kp)return tu;Kp=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,d=/^\s+|\s+$/g,h=`
`,p="/",g="*",x="",y="comment",b="declaration";function w(j,P){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];P=P||{};var T=1,A=1;function B(te){var X=te.match(t);X&&(T+=X.length);var ye=te.lastIndexOf(h);A=~ye?te.length-ye:A+te.length}function Q(){var te={line:T,column:A};return function(X){return X.position=new M(te),we(),X}}function M(te){this.start=te,this.end={line:T,column:A},this.source=P.source}M.prototype.content=j;function W(te){var X=new Error(P.source+":"+T+":"+A+": "+te);if(X.reason=te,X.filename=P.source,X.line=T,X.column=A,X.source=j,!P.silent)throw X}function J(te){var X=te.exec(j);if(X){var ye=X[0];return B(ye),j=j.slice(ye.length),X}}function we(){J(n)}function z(te){var X;for(te=te||[];X=$();)X!==!1&&te.push(X);return te}function $(){var te=Q();if(!(p!=j.charAt(0)||g!=j.charAt(1))){for(var X=2;x!=j.charAt(X)&&(g!=j.charAt(X)||p!=j.charAt(X+1));)++X;if(X+=2,x===j.charAt(X-1))return W("End of comment missing");var ye=j.slice(2,X-2);return A+=2,B(ye),j=j.slice(X),A+=2,te({type:y,comment:ye})}}function ee(){var te=Q(),X=J(i);if(X){if($(),!J(o))return W("property missing ':'");var ye=J(a),xe=te({type:b,property:N(X[0].replace(e,x)),value:ye?N(ye[0].replace(e,x)):x});return J(u),xe}}function ue(){var te=[];z(te);for(var X;X=ee();)X!==!1&&(te.push(X),z(te));return te}return we(),ue()}function N(j){return j?j.replace(d,x):x}return tu=w,tu}var Qp;function ub(){if(Qp)return ni;Qp=1;var e=ni&&ni.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=n;const t=e(cb());function n(i,o){let a=null;if(!i||typeof i!="string")return a;const u=(0,t.default)(i),d=typeof o=="function";return u.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:g}=h;d?o(p,g,h):g&&(a=a||{},a[p]=g)}),a}return ni}var ro={},Jp;function db(){if(Jp)return ro;Jp=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(p){return!p||n.test(p)||e.test(p)},u=function(p,g){return g.toUpperCase()},d=function(p,g){return"".concat(g,"-")},h=function(p,g){return g===void 0&&(g={}),a(p)?p:(p=p.toLowerCase(),g.reactCompat?p=p.replace(o,d):p=p.replace(i,d),p.replace(t,u))};return ro.camelCase=h,ro}var no,Yp;function fb(){if(Yp)return no;Yp=1;var e=no&&no.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(ub()),n=db();function i(o,a){var u={};return!o||typeof o!="string"||(0,t.default)(o,function(d,h){d&&h&&(u[(0,n.camelCase)(d,a)]=h)}),u}return i.default=i,no=i,no}var hb=fb();const pb=Xa(hb),Ig=Ag("end"),od=Ag("start");function Ag(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function mb(e){const t=od(e),n=Ig(e);if(t&&n)return{start:t,end:n}}function fo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Xp(e.position):"start"in e||"end"in e?Xp(e):"line"in e||"column"in e?Fu(e):""}function Fu(e){return Zp(e&&e.line)+":"+Zp(e&&e.column)}function Xp(e){return Fu(e&&e.start)+"-"+Fu(e&&e.end)}function Zp(e){return e&&typeof e=="number"?e:1}class Wt extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",a={},u=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?o=t:!a.cause&&t&&(u=!0,o=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof i=="string"){const h=i.indexOf(":");h===-1?a.ruleId=i:(a.source=i.slice(0,h),a.ruleId=i.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const d=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=d?d.line:void 0,this.name=fo(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=u&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wt.prototype.file="";Wt.prototype.name="";Wt.prototype.reason="";Wt.prototype.message="";Wt.prototype.stack="";Wt.prototype.column=void 0;Wt.prototype.line=void 0;Wt.prototype.ancestors=void 0;Wt.prototype.cause=void 0;Wt.prototype.fatal=void 0;Wt.prototype.place=void 0;Wt.prototype.ruleId=void 0;Wt.prototype.source=void 0;const ad={}.hasOwnProperty,gb=new Map,xb=/[A-Z]/g,vb=new Set(["table","tbody","thead","tfoot","tr"]),yb=new Set(["td","th"]),Rg="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function bb(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Eb(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=Nb(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?id:ab,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=Mg(o,e,void 0);return a&&typeof a!="string"?a:o.create(e,o.Fragment,{children:a||void 0},void 0)}function Mg(e,t,n){if(t.type==="element")return wb(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return kb(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return jb(e,t,n);if(t.type==="mdxjsEsm")return _b(e,t);if(t.type==="root")return Sb(e,t,n);if(t.type==="text")return Cb(e,t)}function wb(e,t,n){const i=e.schema;let o=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=id,e.schema=o),e.ancestors.push(t);const a=zg(e,t.tagName,!1),u=Tb(e,t);let d=cd(e,t);return vb.has(t.tagName)&&(d=d.filter(function(h){return typeof h=="string"?!Yy(h):!0})),Og(e,u,a,t),ld(u,d),e.ancestors.pop(),e.schema=i,e.create(t,a,u,n)}function kb(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}yo(e,t.position)}function _b(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);yo(e,t.position)}function jb(e,t,n){const i=e.schema;let o=i;t.name==="svg"&&i.space==="html"&&(o=id,e.schema=o),e.ancestors.push(t);const a=t.name===null?e.Fragment:zg(e,t.name,!0),u=Pb(e,t),d=cd(e,t);return Og(e,u,a,t),ld(u,d),e.ancestors.pop(),e.schema=i,e.create(t,a,u,n)}function Sb(e,t,n){const i={};return ld(i,cd(e,t)),e.create(t,e.Fragment,i,n)}function Cb(e,t){return t.value}function Og(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function ld(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Nb(e,t,n){return i;function i(o,a,u,d){const p=Array.isArray(u.children)?n:t;return d?p(a,u,d):p(a,u)}}function Eb(e,t){return n;function n(i,o,a,u){const d=Array.isArray(a.children),h=od(i);return t(o,a,u,d,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function Tb(e,t){const n={};let i,o;for(o in t.properties)if(o!=="children"&&ad.call(t.properties,o)){const a=Lb(e,o,t.properties[o]);if(a){const[u,d]=a;e.tableCellAlignToStyle&&u==="align"&&typeof d=="string"&&yb.has(t.tagName)?i=d:n[u]=d}}if(i){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function Pb(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const a=i.data.estree.body[0];a.type;const u=a.expression;u.type;const d=u.properties[0];d.type,Object.assign(n,e.evaluater.evaluateExpression(d.argument))}else yo(e,t.position);else{const o=i.name;let a;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const d=i.value.data.estree.body[0];d.type,a=e.evaluater.evaluateExpression(d.expression)}else yo(e,t.position);else a=i.value===null?!0:i.value;n[o]=a}return n}function cd(e,t){const n=[];let i=-1;const o=e.passKeys?new Map:gb;for(;++i<t.children.length;){const a=t.children[i];let u;if(e.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const p=o.get(h)||0;u=h+"-"+p,o.set(h,p+1)}}const d=Mg(e,a,u);d!==void 0&&n.push(d)}return n}function Lb(e,t,n){const i=sb(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?Wy(n):lb(n)),i.property==="style"){let o=typeof n=="object"?n:Ib(e,String(n));return e.stylePropertyNameCase==="css"&&(o=Ab(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&i.space?tb[i.property]||i.property:i.attribute,n]}}function Ib(e,t){try{return pb(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,o=new Wt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Rg+"#cannot-parse-style-attribute",o}}function zg(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let a=-1,u;for(;++a<o.length;){const d=Vp(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};u=u?{type:"MemberExpression",object:u,property:d,computed:!!(a&&d.type==="Literal"),optional:!1}:d}i=u}else i=Vp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const o=i.value;return ad.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(i);yo(e)}function yo(e,t){const n=new Wt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Rg+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Ab(e){const t={};let n;for(n in e)ad.call(e,n)&&(t[Rb(n)]=e[n]);return t}function Rb(e){let t=e.replace(xb,Mb);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Mb(e){return"-"+e.toLowerCase()}const ru={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ob={};function ud(e,t){const n=Ob,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Dg(e,i,o)}function Dg(e,t,n){if(zb(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return em(e.children,t,n)}return Array.isArray(e)?em(e,t,n):""}function em(e,t,n){const i=[];let o=-1;for(;++o<e.length;)i[o]=Dg(e[o],t,n);return i.join("")}function zb(e){return!!(e&&typeof e=="object")}const tm=document.createElement("i");function dd(e){const t="&"+e+";";tm.innerHTML=t;const n=tm.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function wr(e,t,n,i){const o=e.length;let a=0,u;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,i.length<1e4)u=Array.from(i),u.unshift(t,n),e.splice(...u);else for(n&&e.splice(t,n);a<i.length;)u=i.slice(a,a+1e4),u.unshift(t,0),e.splice(...u),a+=1e4,t+=1e4}function Pr(e,t){return e.length>0?(wr(e,e.length,0,t),e):t}const rm={}.hasOwnProperty;function $g(e){const t={};let n=-1;for(;++n<e.length;)Db(t,e[n]);return t}function Db(e,t){let n;for(n in t){const o=(rm.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let u;if(a)for(u in a){rm.call(o,u)||(o[u]=[]);const d=a[u];$b(o[u],Array.isArray(d)?d:d?[d]:[])}}}function $b(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);wr(e,0,0,i)}function Fg(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Br(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const er=Vn(/[A-Za-z]/),Ht=Vn(/[\dA-Za-z]/),Fb=Vn(/[#-'*+\--9=?A-Z^-~]/);function Ga(e){return e!==null&&(e<32||e===127)}const Uu=Vn(/\d/),Ub=Vn(/[\dA-Fa-f]/),Bb=Vn(/[!-/:-@[-`{-~]/);function ze(e){return e!==null&&e<-2}function st(e){return e!==null&&(e<0||e===32)}function Ke(e){return e===-2||e===-1||e===32}const rl=Vn(new RegExp("\\p{P}|\\p{S}","u")),ms=Vn(/\s/);function Vn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function vi(e){const t=[];let n=-1,i=0,o=0;for(;++n<e.length;){const a=e.charCodeAt(n);let u="";if(a===37&&Ht(e.charCodeAt(n+1))&&Ht(e.charCodeAt(n+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(u=String.fromCharCode(a));else if(a>55295&&a<57344){const d=e.charCodeAt(n+1);a<56320&&d>56319&&d<57344?(u=String.fromCharCode(a,d),o=1):u=""}else u=String.fromCharCode(a);u&&(t.push(e.slice(i,n),encodeURIComponent(u)),i=n+o+1,u=""),o&&(n+=o,o=0)}return t.join("")+e.slice(i)}function Je(e,t,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let a=0;return u;function u(h){return Ke(h)?(e.enter(n),d(h)):t(h)}function d(h){return Ke(h)&&a++<o?(e.consume(h),d):(e.exit(n),t(h))}}const qb={tokenize:Vb};function Vb(e){const t=e.attempt(this.parser.constructs.contentInitial,i,o);let n;return t;function i(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Je(e,t,"linePrefix")}function o(d){return e.enter("paragraph"),a(d)}function a(d){const h=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,u(d)}function u(d){if(d===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(d);return}return ze(d)?(e.consume(d),e.exit("chunkText"),a):(e.consume(d),u)}}const Hb={tokenize:Wb},nm={tokenize:Gb};function Wb(e){const t=this,n=[];let i=0,o,a,u;return d;function d(A){if(i<n.length){const B=n[i];return t.containerState=B[1],e.attempt(B[0].continuation,h,p)(A)}return p(A)}function h(A){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&T();const B=t.events.length;let Q=B,M;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){M=t.events[Q][1].end;break}P(i);let W=B;for(;W<t.events.length;)t.events[W][1].end={...M},W++;return wr(t.events,Q+1,0,t.events.slice(B)),t.events.length=W,p(A)}return d(A)}function p(A){if(i===n.length){if(!o)return y(A);if(o.currentConstruct&&o.currentConstruct.concrete)return w(A);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(nm,g,x)(A)}function g(A){return o&&T(),P(i),y(A)}function x(A){return t.parser.lazy[t.now().line]=i!==n.length,u=t.now().offset,w(A)}function y(A){return t.containerState={},e.attempt(nm,b,w)(A)}function b(A){return i++,n.push([t.currentConstruct,t.containerState]),y(A)}function w(A){if(A===null){o&&T(),P(0),e.consume(A);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),N(A)}function N(A){if(A===null){j(e.exit("chunkFlow"),!0),P(0),e.consume(A);return}return ze(A)?(e.consume(A),j(e.exit("chunkFlow")),i=0,t.interrupt=void 0,d):(e.consume(A),N)}function j(A,B){const Q=t.sliceStream(A);if(B&&Q.push(null),A.previous=a,a&&(a.next=A),a=A,o.defineSkip(A.start),o.write(Q),t.parser.lazy[A.start.line]){let M=o.events.length;for(;M--;)if(o.events[M][1].start.offset<u&&(!o.events[M][1].end||o.events[M][1].end.offset>u))return;const W=t.events.length;let J=W,we,z;for(;J--;)if(t.events[J][0]==="exit"&&t.events[J][1].type==="chunkFlow"){if(we){z=t.events[J][1].end;break}we=!0}for(P(i),M=W;M<t.events.length;)t.events[M][1].end={...z},M++;wr(t.events,J+1,0,t.events.slice(W)),t.events.length=M}}function P(A){let B=n.length;for(;B-- >A;){const Q=n[B];t.containerState=Q[1],Q[0].exit.call(t,e)}n.length=A}function T(){o.write([null]),a=void 0,o=void 0,t.containerState._closeFlow=void 0}}function Gb(e,t,n){return Je(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function hi(e){if(e===null||st(e)||ms(e))return 1;if(rl(e))return 2}function nl(e,t,n){const i=[];let o=-1;for(;++o<e.length;){const a=e[o].resolveAll;a&&!i.includes(a)&&(t=a(t,n),i.push(a))}return t}const Bu={name:"attention",resolveAll:Kb,tokenize:Qb};function Kb(e,t){let n=-1,i,o,a,u,d,h,p,g;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;h=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const x={...e[i][1].end},y={...e[n][1].start};sm(x,-h),sm(y,h),u={type:h>1?"strongSequence":"emphasisSequence",start:x,end:{...e[i][1].end}},d={type:h>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},a={type:h>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},o={type:h>1?"strong":"emphasis",start:{...u.start},end:{...d.end}},e[i][1].end={...u.start},e[n][1].start={...d.end},p=[],e[i][1].end.offset-e[i][1].start.offset&&(p=Pr(p,[["enter",e[i][1],t],["exit",e[i][1],t]])),p=Pr(p,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",a,t]]),p=Pr(p,nl(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),p=Pr(p,[["exit",a,t],["enter",d,t],["exit",d,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(g=2,p=Pr(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):g=0,wr(e,i-1,n-i+3,p),n=i+p.length-g-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Qb(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=hi(i);let a;return u;function u(h){return a=h,e.enter("attentionSequence"),d(h)}function d(h){if(h===a)return e.consume(h),d;const p=e.exit("attentionSequence"),g=hi(h),x=!g||g===2&&o||n.includes(h),y=!o||o===2&&g||n.includes(i);return p._open=!!(a===42?x:x&&(o||!y)),p._close=!!(a===42?y:y&&(g||!x)),t(h)}}function sm(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Jb={name:"autolink",tokenize:Yb};function Yb(e,t,n){let i=0;return o;function o(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(b){return er(b)?(e.consume(b),u):b===64?n(b):p(b)}function u(b){return b===43||b===45||b===46||Ht(b)?(i=1,d(b)):p(b)}function d(b){return b===58?(e.consume(b),i=0,h):(b===43||b===45||b===46||Ht(b))&&i++<32?(e.consume(b),d):(i=0,p(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Ga(b)?n(b):(e.consume(b),h)}function p(b){return b===64?(e.consume(b),g):Fb(b)?(e.consume(b),p):n(b)}function g(b){return Ht(b)?x(b):n(b)}function x(b){return b===46?(e.consume(b),i=0,g):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):y(b)}function y(b){if((b===45||Ht(b))&&i++<63){const w=b===45?y:x;return e.consume(b),w}return n(b)}}const jo={partial:!0,tokenize:Xb};function Xb(e,t,n){return i;function i(a){return Ke(a)?Je(e,o,"linePrefix")(a):o(a)}function o(a){return a===null||ze(a)?t(a):n(a)}}const Ug={continuation:{tokenize:ew},exit:tw,name:"blockQuote",tokenize:Zb};function Zb(e,t,n){const i=this;return o;function o(u){if(u===62){const d=i.containerState;return d.open||(e.enter("blockQuote",{_container:!0}),d.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),a}return n(u)}function a(u){return Ke(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function ew(e,t,n){const i=this;return o;function o(u){return Ke(u)?Je(e,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):a(u)}function a(u){return e.attempt(Ug,t,n)(u)}}function tw(e){e.exit("blockQuote")}const Bg={name:"characterEscape",tokenize:rw};function rw(e,t,n){return i;function i(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),o}function o(a){return Bb(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const qg={name:"characterReference",tokenize:nw};function nw(e,t,n){const i=this;let o=0,a,u;return d;function d(x){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(x),e.exit("characterReferenceMarker"),h}function h(x){return x===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(x),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),a=31,u=Ht,g(x))}function p(x){return x===88||x===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(x),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,u=Ub,g):(e.enter("characterReferenceValue"),a=7,u=Uu,g(x))}function g(x){if(x===59&&o){const y=e.exit("characterReferenceValue");return u===Ht&&!dd(i.sliceSerialize(y))?n(x):(e.enter("characterReferenceMarker"),e.consume(x),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(x)&&o++<a?(e.consume(x),g):n(x)}}const im={partial:!0,tokenize:iw},om={concrete:!0,name:"codeFenced",tokenize:sw};function sw(e,t,n){const i=this,o={partial:!0,tokenize:Q};let a=0,u=0,d;return h;function h(M){return p(M)}function p(M){const W=i.events[i.events.length-1];return a=W&&W[1].type==="linePrefix"?W[2].sliceSerialize(W[1],!0).length:0,d=M,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),g(M)}function g(M){return M===d?(u++,e.consume(M),g):u<3?n(M):(e.exit("codeFencedFenceSequence"),Ke(M)?Je(e,x,"whitespace")(M):x(M))}function x(M){return M===null||ze(M)?(e.exit("codeFencedFence"),i.interrupt?t(M):e.check(im,N,B)(M)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(M))}function y(M){return M===null||ze(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),x(M)):Ke(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Je(e,b,"whitespace")(M)):M===96&&M===d?n(M):(e.consume(M),y)}function b(M){return M===null||ze(M)?x(M):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(M))}function w(M){return M===null||ze(M)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),x(M)):M===96&&M===d?n(M):(e.consume(M),w)}function N(M){return e.attempt(o,B,j)(M)}function j(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),P}function P(M){return a>0&&Ke(M)?Je(e,T,"linePrefix",a+1)(M):T(M)}function T(M){return M===null||ze(M)?e.check(im,N,B)(M):(e.enter("codeFlowValue"),A(M))}function A(M){return M===null||ze(M)?(e.exit("codeFlowValue"),T(M)):(e.consume(M),A)}function B(M){return e.exit("codeFenced"),t(M)}function Q(M,W,J){let we=0;return z;function z(X){return M.enter("lineEnding"),M.consume(X),M.exit("lineEnding"),$}function $(X){return M.enter("codeFencedFence"),Ke(X)?Je(M,ee,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):ee(X)}function ee(X){return X===d?(M.enter("codeFencedFenceSequence"),ue(X)):J(X)}function ue(X){return X===d?(we++,M.consume(X),ue):we>=u?(M.exit("codeFencedFenceSequence"),Ke(X)?Je(M,te,"whitespace")(X):te(X)):J(X)}function te(X){return X===null||ze(X)?(M.exit("codeFencedFence"),W(X)):J(X)}}}function iw(e,t,n){const i=this;return o;function o(u){return u===null?n(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a)}function a(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}const nu={name:"codeIndented",tokenize:aw},ow={partial:!0,tokenize:lw};function aw(e,t,n){const i=this;return o;function o(p){return e.enter("codeIndented"),Je(e,a,"linePrefix",5)(p)}function a(p){const g=i.events[i.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?u(p):n(p)}function u(p){return p===null?h(p):ze(p)?e.attempt(ow,u,h)(p):(e.enter("codeFlowValue"),d(p))}function d(p){return p===null||ze(p)?(e.exit("codeFlowValue"),u(p)):(e.consume(p),d)}function h(p){return e.exit("codeIndented"),t(p)}}function lw(e,t,n){const i=this;return o;function o(u){return i.parser.lazy[i.now().line]?n(u):ze(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),o):Je(e,a,"linePrefix",5)(u)}function a(u){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):ze(u)?o(u):n(u)}}const cw={name:"codeText",previous:dw,resolve:uw,tokenize:fw};function uw(e){let t=e.length-4,n=3,i,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)o===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(o=i):(i===t||e[i][1].type==="lineEnding")&&(e[o][1].type="codeTextData",i!==o+2&&(e[o][1].end=e[i-1][1].end,e.splice(o+2,i-o-2),t-=i-o-2,i=o+2),o=void 0);return e}function dw(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fw(e,t,n){let i=0,o,a;return u;function u(x){return e.enter("codeText"),e.enter("codeTextSequence"),d(x)}function d(x){return x===96?(e.consume(x),i++,d):(e.exit("codeTextSequence"),h(x))}function h(x){return x===null?n(x):x===32?(e.enter("space"),e.consume(x),e.exit("space"),h):x===96?(a=e.enter("codeTextSequence"),o=0,g(x)):ze(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(x))}function p(x){return x===null||x===32||x===96||ze(x)?(e.exit("codeTextData"),h(x)):(e.consume(x),p)}function g(x){return x===96?(e.consume(x),o++,g):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(x)):(a.type="codeTextData",p(x))}}class hw{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const o=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&so(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),so(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),so(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);so(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);so(this.left,n.reverse())}}}function so(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Vg(e){const t={};let n=-1,i,o,a,u,d,h,p;const g=new hw(e);for(;++n<g.length;){for(;n in t;)n=t[n];if(i=g.get(n),n&&i[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(h=i[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,pw(g,n)),n=t[n],p=!0);else if(i[1]._container){for(a=n,o=void 0;a--;)if(u=g.get(a),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(o&&(g.get(o)[1].type="lineEndingBlank"),u[1].type="lineEnding",o=a);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;o&&(i[1].end={...g.get(o)[1].start},d=g.slice(o,n),d.unshift(i),g.splice(o,n-o+1,d))}}return wr(e,0,Number.POSITIVE_INFINITY,g.slice(0)),!p}function pw(e,t){const n=e.get(t)[1],i=e.get(t)[2];let o=t-1;const a=[];let u=n._tokenizer;u||(u=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const d=u.events,h=[],p={};let g,x,y=-1,b=n,w=0,N=0;const j=[N];for(;b;){for(;e.get(++o)[1]!==b;);a.push(o),b._tokenizer||(g=i.sliceStream(b),b.next||g.push(null),x&&u.defineSkip(b.start),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(g),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),x=b,b=b.next}for(b=n;++y<d.length;)d[y][0]==="exit"&&d[y-1][0]==="enter"&&d[y][1].type===d[y-1][1].type&&d[y][1].start.line!==d[y][1].end.line&&(N=y+1,j.push(N),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(u.events=[],b?(b._tokenizer=void 0,b.previous=void 0):j.pop(),y=j.length;y--;){const P=d.slice(j[y],j[y+1]),T=a.pop();h.push([T,T+P.length-1]),e.splice(T,2,P)}for(h.reverse(),y=-1;++y<h.length;)p[w+h[y][0]]=w+h[y][1],w+=h[y][1]-h[y][0]-1;return p}const mw={resolve:xw,tokenize:vw},gw={partial:!0,tokenize:yw};function xw(e){return Vg(e),e}function vw(e,t){let n;return i;function i(d){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(d)}function o(d){return d===null?a(d):ze(d)?e.check(gw,u,a)(d):(e.consume(d),o)}function a(d){return e.exit("chunkContent"),e.exit("content"),t(d)}function u(d){return e.consume(d),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function yw(e,t,n){const i=this;return o;function o(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Je(e,a,"linePrefix")}function a(u){if(u===null||ze(u))return n(u);const d=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):e.interrupt(i.parser.constructs.flow,n,t)(u)}}function Hg(e,t,n,i,o,a,u,d,h){const p=h||Number.POSITIVE_INFINITY;let g=0;return x;function x(P){return P===60?(e.enter(i),e.enter(o),e.enter(a),e.consume(P),e.exit(a),y):P===null||P===32||P===41||Ga(P)?n(P):(e.enter(i),e.enter(u),e.enter(d),e.enter("chunkString",{contentType:"string"}),N(P))}function y(P){return P===62?(e.enter(a),e.consume(P),e.exit(a),e.exit(o),e.exit(i),t):(e.enter(d),e.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===62?(e.exit("chunkString"),e.exit(d),y(P)):P===null||P===60||ze(P)?n(P):(e.consume(P),P===92?w:b)}function w(P){return P===60||P===62||P===92?(e.consume(P),b):b(P)}function N(P){return!g&&(P===null||P===41||st(P))?(e.exit("chunkString"),e.exit(d),e.exit(u),e.exit(i),t(P)):g<p&&P===40?(e.consume(P),g++,N):P===41?(e.consume(P),g--,N):P===null||P===32||P===40||Ga(P)?n(P):(e.consume(P),P===92?j:N)}function j(P){return P===40||P===41||P===92?(e.consume(P),N):N(P)}}function Wg(e,t,n,i,o,a){const u=this;let d=0,h;return p;function p(b){return e.enter(i),e.enter(o),e.consume(b),e.exit(o),e.enter(a),g}function g(b){return d>999||b===null||b===91||b===93&&!h||b===94&&!d&&"_hiddenFootnoteSupport"in u.parser.constructs?n(b):b===93?(e.exit(a),e.enter(o),e.consume(b),e.exit(o),e.exit(i),t):ze(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),g):(e.enter("chunkString",{contentType:"string"}),x(b))}function x(b){return b===null||b===91||b===93||ze(b)||d++>999?(e.exit("chunkString"),g(b)):(e.consume(b),h||(h=!Ke(b)),b===92?y:x)}function y(b){return b===91||b===92||b===93?(e.consume(b),d++,x):x(b)}}function Gg(e,t,n,i,o,a){let u;return d;function d(y){return y===34||y===39||y===40?(e.enter(i),e.enter(o),e.consume(y),e.exit(o),u=y===40?41:y,h):n(y)}function h(y){return y===u?(e.enter(o),e.consume(y),e.exit(o),e.exit(i),t):(e.enter(a),p(y))}function p(y){return y===u?(e.exit(a),h(u)):y===null?n(y):ze(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),Je(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===u||y===null||ze(y)?(e.exit("chunkString"),p(y)):(e.consume(y),y===92?x:g)}function x(y){return y===u||y===92?(e.consume(y),g):g(y)}}function ho(e,t){let n;return i;function i(o){return ze(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,i):Ke(o)?Je(e,i,n?"linePrefix":"lineSuffix")(o):t(o)}}const bw={name:"definition",tokenize:kw},ww={partial:!0,tokenize:_w};function kw(e,t,n){const i=this;let o;return a;function a(b){return e.enter("definition"),u(b)}function u(b){return Wg.call(i,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function d(b){return o=Br(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):n(b)}function h(b){return st(b)?ho(e,p)(b):p(b)}function p(b){return Hg(e,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function g(b){return e.attempt(ww,x,x)(b)}function x(b){return Ke(b)?Je(e,y,"whitespace")(b):y(b)}function y(b){return b===null||ze(b)?(e.exit("definition"),i.parser.defined.push(o),t(b)):n(b)}}function _w(e,t,n){return i;function i(d){return st(d)?ho(e,o)(d):n(d)}function o(d){return Gg(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function a(d){return Ke(d)?Je(e,u,"whitespace")(d):u(d)}function u(d){return d===null||ze(d)?t(d):n(d)}}const jw={name:"hardBreakEscape",tokenize:Sw};function Sw(e,t,n){return i;function i(a){return e.enter("hardBreakEscape"),e.consume(a),o}function o(a){return ze(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const Cw={name:"headingAtx",resolve:Nw,tokenize:Ew};function Nw(e,t){let n=e.length-2,i=3,o,a;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},a={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},wr(e,i,n-i+1,[["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t]])),e}function Ew(e,t,n){let i=0;return o;function o(g){return e.enter("atxHeading"),a(g)}function a(g){return e.enter("atxHeadingSequence"),u(g)}function u(g){return g===35&&i++<6?(e.consume(g),u):g===null||st(g)?(e.exit("atxHeadingSequence"),d(g)):n(g)}function d(g){return g===35?(e.enter("atxHeadingSequence"),h(g)):g===null||ze(g)?(e.exit("atxHeading"),t(g)):Ke(g)?Je(e,d,"whitespace")(g):(e.enter("atxHeadingText"),p(g))}function h(g){return g===35?(e.consume(g),h):(e.exit("atxHeadingSequence"),d(g))}function p(g){return g===null||g===35||st(g)?(e.exit("atxHeadingText"),d(g)):(e.consume(g),p)}}const Tw=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],am=["pre","script","style","textarea"],Pw={concrete:!0,name:"htmlFlow",resolveTo:Aw,tokenize:Rw},Lw={partial:!0,tokenize:Ow},Iw={partial:!0,tokenize:Mw};function Aw(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Rw(e,t,n){const i=this;let o,a,u,d,h;return p;function p(E){return g(E)}function g(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),x}function x(E){return E===33?(e.consume(E),y):E===47?(e.consume(E),a=!0,N):E===63?(e.consume(E),o=3,i.interrupt?t:S):er(E)?(e.consume(E),u=String.fromCharCode(E),j):n(E)}function y(E){return E===45?(e.consume(E),o=2,b):E===91?(e.consume(E),o=5,d=0,w):er(E)?(e.consume(E),o=4,i.interrupt?t:S):n(E)}function b(E){return E===45?(e.consume(E),i.interrupt?t:S):n(E)}function w(E){const ke="CDATA[";return E===ke.charCodeAt(d++)?(e.consume(E),d===ke.length?i.interrupt?t:ee:w):n(E)}function N(E){return er(E)?(e.consume(E),u=String.fromCharCode(E),j):n(E)}function j(E){if(E===null||E===47||E===62||st(E)){const ke=E===47,de=u.toLowerCase();return!ke&&!a&&am.includes(de)?(o=1,i.interrupt?t(E):ee(E)):Tw.includes(u.toLowerCase())?(o=6,ke?(e.consume(E),P):i.interrupt?t(E):ee(E)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(E):a?T(E):A(E))}return E===45||Ht(E)?(e.consume(E),u+=String.fromCharCode(E),j):n(E)}function P(E){return E===62?(e.consume(E),i.interrupt?t:ee):n(E)}function T(E){return Ke(E)?(e.consume(E),T):z(E)}function A(E){return E===47?(e.consume(E),z):E===58||E===95||er(E)?(e.consume(E),B):Ke(E)?(e.consume(E),A):z(E)}function B(E){return E===45||E===46||E===58||E===95||Ht(E)?(e.consume(E),B):Q(E)}function Q(E){return E===61?(e.consume(E),M):Ke(E)?(e.consume(E),Q):A(E)}function M(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),h=E,W):Ke(E)?(e.consume(E),M):J(E)}function W(E){return E===h?(e.consume(E),h=null,we):E===null||ze(E)?n(E):(e.consume(E),W)}function J(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||st(E)?Q(E):(e.consume(E),J)}function we(E){return E===47||E===62||Ke(E)?A(E):n(E)}function z(E){return E===62?(e.consume(E),$):n(E)}function $(E){return E===null||ze(E)?ee(E):Ke(E)?(e.consume(E),$):n(E)}function ee(E){return E===45&&o===2?(e.consume(E),ye):E===60&&o===1?(e.consume(E),xe):E===62&&o===4?(e.consume(E),I):E===63&&o===3?(e.consume(E),S):E===93&&o===5?(e.consume(E),ne):ze(E)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(Lw,K,ue)(E)):E===null||ze(E)?(e.exit("htmlFlowData"),ue(E)):(e.consume(E),ee)}function ue(E){return e.check(Iw,te,K)(E)}function te(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),X}function X(E){return E===null||ze(E)?ue(E):(e.enter("htmlFlowData"),ee(E))}function ye(E){return E===45?(e.consume(E),S):ee(E)}function xe(E){return E===47?(e.consume(E),u="",G):ee(E)}function G(E){if(E===62){const ke=u.toLowerCase();return am.includes(ke)?(e.consume(E),I):ee(E)}return er(E)&&u.length<8?(e.consume(E),u+=String.fromCharCode(E),G):ee(E)}function ne(E){return E===93?(e.consume(E),S):ee(E)}function S(E){return E===62?(e.consume(E),I):E===45&&o===2?(e.consume(E),S):ee(E)}function I(E){return E===null||ze(E)?(e.exit("htmlFlowData"),K(E)):(e.consume(E),I)}function K(E){return e.exit("htmlFlow"),t(E)}}function Mw(e,t,n){const i=this;return o;function o(u){return ze(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a):n(u)}function a(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}function Ow(e,t,n){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(jo,t,n)}}const zw={name:"htmlText",tokenize:Dw};function Dw(e,t,n){const i=this;let o,a,u;return d;function d(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),h}function h(S){return S===33?(e.consume(S),p):S===47?(e.consume(S),Q):S===63?(e.consume(S),A):er(S)?(e.consume(S),J):n(S)}function p(S){return S===45?(e.consume(S),g):S===91?(e.consume(S),a=0,w):er(S)?(e.consume(S),T):n(S)}function g(S){return S===45?(e.consume(S),b):n(S)}function x(S){return S===null?n(S):S===45?(e.consume(S),y):ze(S)?(u=x,xe(S)):(e.consume(S),x)}function y(S){return S===45?(e.consume(S),b):x(S)}function b(S){return S===62?ye(S):S===45?y(S):x(S)}function w(S){const I="CDATA[";return S===I.charCodeAt(a++)?(e.consume(S),a===I.length?N:w):n(S)}function N(S){return S===null?n(S):S===93?(e.consume(S),j):ze(S)?(u=N,xe(S)):(e.consume(S),N)}function j(S){return S===93?(e.consume(S),P):N(S)}function P(S){return S===62?ye(S):S===93?(e.consume(S),P):N(S)}function T(S){return S===null||S===62?ye(S):ze(S)?(u=T,xe(S)):(e.consume(S),T)}function A(S){return S===null?n(S):S===63?(e.consume(S),B):ze(S)?(u=A,xe(S)):(e.consume(S),A)}function B(S){return S===62?ye(S):A(S)}function Q(S){return er(S)?(e.consume(S),M):n(S)}function M(S){return S===45||Ht(S)?(e.consume(S),M):W(S)}function W(S){return ze(S)?(u=W,xe(S)):Ke(S)?(e.consume(S),W):ye(S)}function J(S){return S===45||Ht(S)?(e.consume(S),J):S===47||S===62||st(S)?we(S):n(S)}function we(S){return S===47?(e.consume(S),ye):S===58||S===95||er(S)?(e.consume(S),z):ze(S)?(u=we,xe(S)):Ke(S)?(e.consume(S),we):ye(S)}function z(S){return S===45||S===46||S===58||S===95||Ht(S)?(e.consume(S),z):$(S)}function $(S){return S===61?(e.consume(S),ee):ze(S)?(u=$,xe(S)):Ke(S)?(e.consume(S),$):we(S)}function ee(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),o=S,ue):ze(S)?(u=ee,xe(S)):Ke(S)?(e.consume(S),ee):(e.consume(S),te)}function ue(S){return S===o?(e.consume(S),o=void 0,X):S===null?n(S):ze(S)?(u=ue,xe(S)):(e.consume(S),ue)}function te(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||st(S)?we(S):(e.consume(S),te)}function X(S){return S===47||S===62||st(S)?we(S):n(S)}function ye(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):n(S)}function xe(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),G}function G(S){return Ke(S)?Je(e,ne,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):ne(S)}function ne(S){return e.enter("htmlTextData"),u(S)}}const fd={name:"labelEnd",resolveAll:Bw,resolveTo:qw,tokenize:Vw},$w={tokenize:Hw},Fw={tokenize:Ww},Uw={tokenize:Gw};function Bw(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",t+=o}}return e.length!==n.length&&wr(e,0,e.length,n),e}function qw(e,t){let n=e.length,i=0,o,a,u,d;for(;n--;)if(o=e[n][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(u){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(u=n);const h={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[a][1].start},end:{...e[u][1].end}},g={type:"labelText",start:{...e[a+i+2][1].end},end:{...e[u-2][1].start}};return d=[["enter",h,t],["enter",p,t]],d=Pr(d,e.slice(a+1,a+i+3)),d=Pr(d,[["enter",g,t]]),d=Pr(d,nl(t.parser.constructs.insideSpan.null,e.slice(a+i+4,u-3),t)),d=Pr(d,[["exit",g,t],e[u-2],e[u-1],["exit",p,t]]),d=Pr(d,e.slice(u+1)),d=Pr(d,[["exit",h,t]]),wr(e,a,e.length,d),e}function Vw(e,t,n){const i=this;let o=i.events.length,a,u;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){a=i.events[o][1];break}return d;function d(y){return a?a._inactive?x(y):(u=i.parser.defined.includes(Br(i.sliceSerialize({start:a.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),h):n(y)}function h(y){return y===40?e.attempt($w,g,u?g:x)(y):y===91?e.attempt(Fw,g,u?p:x)(y):u?g(y):x(y)}function p(y){return e.attempt(Uw,g,x)(y)}function g(y){return t(y)}function x(y){return a._balanced=!0,n(y)}}function Hw(e,t,n){return i;function i(x){return e.enter("resource"),e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),o}function o(x){return st(x)?ho(e,a)(x):a(x)}function a(x){return x===41?g(x):Hg(e,u,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function u(x){return st(x)?ho(e,h)(x):g(x)}function d(x){return n(x)}function h(x){return x===34||x===39||x===40?Gg(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):g(x)}function p(x){return st(x)?ho(e,g)(x):g(x)}function g(x){return x===41?(e.enter("resourceMarker"),e.consume(x),e.exit("resourceMarker"),e.exit("resource"),t):n(x)}}function Ww(e,t,n){const i=this;return o;function o(d){return Wg.call(i,e,a,u,"reference","referenceMarker","referenceString")(d)}function a(d){return i.parser.defined.includes(Br(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(d):n(d)}function u(d){return n(d)}}function Gw(e,t,n){return i;function i(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),o}function o(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const Kw={name:"labelStartImage",resolveAll:fd.resolveAll,tokenize:Qw};function Qw(e,t,n){const i=this;return o;function o(d){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(d),e.exit("labelImageMarker"),a}function a(d){return d===91?(e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelImage"),u):n(d)}function u(d){return d===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):t(d)}}const Jw={name:"labelStartLink",resolveAll:fd.resolveAll,tokenize:Yw};function Yw(e,t,n){const i=this;return o;function o(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),a}function a(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):t(u)}}const su={name:"lineEnding",tokenize:Xw};function Xw(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Je(e,t,"linePrefix")}}const qa={name:"thematicBreak",tokenize:Zw};function Zw(e,t,n){let i=0,o;return a;function a(p){return e.enter("thematicBreak"),u(p)}function u(p){return o=p,d(p)}function d(p){return p===o?(e.enter("thematicBreakSequence"),h(p)):i>=3&&(p===null||ze(p))?(e.exit("thematicBreak"),t(p)):n(p)}function h(p){return p===o?(e.consume(p),i++,h):(e.exit("thematicBreakSequence"),Ke(p)?Je(e,d,"whitespace")(p):d(p))}}const cr={continuation:{tokenize:n3},exit:i3,name:"list",tokenize:r3},e3={partial:!0,tokenize:o3},t3={partial:!0,tokenize:s3};function r3(e,t,n){const i=this,o=i.events[i.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,u=0;return d;function d(b){const w=i.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||b===i.containerState.marker:Uu(b)){if(i.containerState.type||(i.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(qa,n,p)(b):p(b);if(!i.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return n(b)}function h(b){return Uu(b)&&++u<10?(e.consume(b),h):(!i.interrupt||u<2)&&(i.containerState.marker?b===i.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):n(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||b,e.check(jo,i.interrupt?n:g,e.attempt(e3,y,x))}function g(b){return i.containerState.initialBlankLine=!0,a++,y(b)}function x(b){return Ke(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),y):n(b)}function y(b){return i.containerState.size=a+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function n3(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(jo,o,a);function o(d){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Je(e,t,"listItemIndent",i.containerState.size+1)(d)}function a(d){return i.containerState.furtherBlankLines||!Ke(d)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,u(d)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(t3,t,u)(d))}function u(d){return i.containerState._closeFlow=!0,i.interrupt=void 0,Je(e,e.attempt(cr,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function s3(e,t,n){const i=this;return Je(e,o,"listItemIndent",i.containerState.size+1);function o(a){const u=i.events[i.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===i.containerState.size?t(a):n(a)}}function i3(e){e.exit(this.containerState.type)}function o3(e,t,n){const i=this;return Je(e,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const u=i.events[i.events.length-1];return!Ke(a)&&u&&u[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const lm={name:"setextUnderline",resolveTo:a3,tokenize:l3};function a3(e,t){let n=e.length,i,o,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const u={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",a?(e.splice(o,0,["enter",u,t]),e.splice(a+1,0,["exit",e[i][1],t]),e[i][1].end={...e[a][1].end}):e[i][1]=u,e.push(["exit",u,t]),e}function l3(e,t,n){const i=this;let o;return a;function a(p){let g=i.events.length,x;for(;g--;)if(i.events[g][1].type!=="lineEnding"&&i.events[g][1].type!=="linePrefix"&&i.events[g][1].type!=="content"){x=i.events[g][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||x)?(e.enter("setextHeadingLine"),o=p,u(p)):n(p)}function u(p){return e.enter("setextHeadingLineSequence"),d(p)}function d(p){return p===o?(e.consume(p),d):(e.exit("setextHeadingLineSequence"),Ke(p)?Je(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||ze(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const c3={tokenize:u3};function u3(e){const t=this,n=e.attempt(jo,i,e.attempt(this.parser.constructs.flowInitial,o,Je(e,e.attempt(this.parser.constructs.flow,o,e.attempt(mw,o)),"linePrefix")));return n;function i(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const d3={resolveAll:Qg()},f3=Kg("string"),h3=Kg("text");function Kg(e){return{resolveAll:Qg(e==="text"?p3:void 0),tokenize:t};function t(n){const i=this,o=this.parser.constructs[e],a=n.attempt(o,u,d);return u;function u(g){return p(g)?a(g):d(g)}function d(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),h}function h(g){return p(g)?(n.exit("data"),a(g)):(n.consume(g),h)}function p(g){if(g===null)return!0;const x=o[g];let y=-1;if(x)for(;++y<x.length;){const b=x[y];if(!b.previous||b.previous.call(i,i.previous))return!0}return!1}}}function Qg(e){return t;function t(n,i){let o=-1,a;for(;++o<=n.length;)a===void 0?n[o]&&n[o][1].type==="data"&&(a=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==a+2&&(n[a][1].end=n[o-1][1].end,n.splice(a+2,o-a-2),o=a+2),a=void 0);return e?e(n,i):n}}function p3(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],o=t.sliceStream(i);let a=o.length,u=-1,d=0,h;for(;a--;){const p=o[a];if(typeof p=="string"){for(u=p.length;p.charCodeAt(u-1)===32;)d++,u--;if(u)break;u=-1}else if(p===-2)h=!0,d++;else if(p!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(d=0),d){const p={type:n===e.length||h||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?u:i.start._bufferIndex+u,_index:i.start._index+a,line:i.end.line,column:i.end.column-d,offset:i.end.offset-d},end:{...i.end}};i.end={...p.start},i.start.offset===i.end.offset?Object.assign(i,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const m3={42:cr,43:cr,45:cr,48:cr,49:cr,50:cr,51:cr,52:cr,53:cr,54:cr,55:cr,56:cr,57:cr,62:Ug},g3={91:bw},x3={[-2]:nu,[-1]:nu,32:nu},v3={35:Cw,42:qa,45:[lm,qa],60:Pw,61:lm,95:qa,96:om,126:om},y3={38:qg,92:Bg},b3={[-5]:su,[-4]:su,[-3]:su,33:Kw,38:qg,42:Bu,60:[Jb,zw],91:Jw,92:[jw,Bg],93:fd,95:Bu,96:cw},w3={null:[Bu,d3]},k3={null:[42,95]},_3={null:[]},j3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:k3,contentInitial:g3,disable:_3,document:m3,flow:v3,flowInitial:x3,insideSpan:w3,string:y3,text:b3},Symbol.toStringTag,{value:"Module"}));function S3(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},a=[];let u=[],d=[];const h={attempt:W(Q),check:W(M),consume:T,enter:A,exit:B,interrupt:W(M,{interrupt:!0})},p={code:null,containerState:{},defineSkip:N,events:[],now:w,parser:e,previous:null,sliceSerialize:y,sliceStream:b,write:x};let g=t.tokenize.call(p,h);return t.resolveAll&&a.push(t),p;function x($){return u=Pr(u,$),j(),u[u.length-1]!==null?[]:(J(t,0),p.events=nl(a,p.events,p),p.events)}function y($,ee){return N3(b($),ee)}function b($){return C3(u,$)}function w(){const{_bufferIndex:$,_index:ee,line:ue,column:te,offset:X}=i;return{_bufferIndex:$,_index:ee,line:ue,column:te,offset:X}}function N($){o[$.line]=$.column,z()}function j(){let $;for(;i._index<u.length;){const ee=u[i._index];if(typeof ee=="string")for($=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===$&&i._bufferIndex<ee.length;)P(ee.charCodeAt(i._bufferIndex));else P(ee)}}function P($){g=g($)}function T($){ze($)?(i.line++,i.column=1,i.offset+=$===-3?2:1,z()):$!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===u[i._index].length&&(i._bufferIndex=-1,i._index++)),p.previous=$}function A($,ee){const ue=ee||{};return ue.type=$,ue.start=w(),p.events.push(["enter",ue,p]),d.push(ue),ue}function B($){const ee=d.pop();return ee.end=w(),p.events.push(["exit",ee,p]),ee}function Q($,ee){J($,ee.from)}function M($,ee){ee.restore()}function W($,ee){return ue;function ue(te,X,ye){let xe,G,ne,S;return Array.isArray(te)?K(te):"tokenize"in te?K([te]):I(te);function I(fe){return Ae;function Ae(Ce){const ae=Ce!==null&&fe[Ce],Te=Ce!==null&&fe.null,Pe=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return K(Pe)(Ce)}}function K(fe){return xe=fe,G=0,fe.length===0?ye:E(fe[G])}function E(fe){return Ae;function Ae(Ce){return S=we(),ne=fe,fe.partial||(p.currentConstruct=fe),fe.name&&p.parser.constructs.disable.null.includes(fe.name)?de():fe.tokenize.call(ee?Object.assign(Object.create(p),ee):p,h,ke,de)(Ce)}}function ke(fe){return $(ne,S),X}function de(fe){return S.restore(),++G<xe.length?E(xe[G]):ye}}}function J($,ee){$.resolveAll&&!a.includes($)&&a.push($),$.resolve&&wr(p.events,ee,p.events.length-ee,$.resolve(p.events.slice(ee),p)),$.resolveTo&&(p.events=$.resolveTo(p.events,p))}function we(){const $=w(),ee=p.previous,ue=p.currentConstruct,te=p.events.length,X=Array.from(d);return{from:te,restore:ye};function ye(){i=$,p.previous=ee,p.currentConstruct=ue,p.events.length=te,d=X,z()}}function z(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function C3(e,t){const n=t.start._index,i=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;let u;if(n===o)u=[e[n].slice(i,a)];else{if(u=e.slice(n,o),i>-1){const d=u[0];typeof d=="string"?u[0]=d.slice(i):u.shift()}a>0&&u.push(e[o].slice(0,a))}return u}function N3(e,t){let n=-1;const i=[];let o;for(;++n<e.length;){const a=e[n];let u;if(typeof a=="string")u=a;else switch(a){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&o)continue;u=" ";break}default:u=String.fromCharCode(a)}o=a===-2,i.push(u)}return i.join("")}function E3(e){const i={constructs:$g([j3,...(e||{}).extensions||[]]),content:o(qb),defined:[],document:o(Hb),flow:o(c3),lazy:{},string:o(f3),text:o(h3)};return i;function o(a){return u;function u(d){return S3(i,a,d)}}}function T3(e){for(;!Vg(e););return e}const cm=/[\0\t\n\r]/g;function P3(){let e=1,t="",n=!0,i;return o;function o(a,u,d){const h=[];let p,g,x,y,b;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(u||void 0).decode(a)),x=0,t="",n&&(a.charCodeAt(0)===65279&&x++,n=void 0);x<a.length;){if(cm.lastIndex=x,p=cm.exec(a),y=p&&p.index!==void 0?p.index:a.length,b=a.charCodeAt(y),!p){t=a.slice(x);break}if(b===10&&x===y&&i)h.push(-3),i=void 0;else switch(i&&(h.push(-5),i=void 0),x<y&&(h.push(a.slice(x,y)),e+=y-x),b){case 0:{h.push(65533),e++;break}case 9:{for(g=Math.ceil(e/4)*4,h.push(-2);e++<g;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:i=!0,e=1}x=y+1}return d&&(i&&h.push(-5),t&&h.push(t),h.push(null)),h}}const L3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function I3(e){return e.replace(L3,A3)}function A3(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),a=o===120||o===88;return Fg(n.slice(a?2:1),a?16:10)}return dd(n)||e}const Jg={}.hasOwnProperty;function R3(e,t,n){return typeof t!="string"&&(n=t,t=void 0),M3(n)(T3(E3(n).document().write(P3()(e,t,!0))))}function M3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Nt),autolinkProtocol:we,autolinkEmail:we,atxHeading:a(ve),blockQuote:a(Te),characterEscape:we,characterReference:we,codeFenced:a(Pe),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(Pe,u),codeText:a(He,u),codeTextData:we,data:we,codeFlowValue:we,definition:a(tt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(vt),hardBreakEscape:a(Ve),hardBreakTrailing:a(Ve),htmlFlow:a(pt,u),htmlFlowData:we,htmlText:a(pt,u),htmlTextData:we,image:a(Ct),label:u,link:a(Nt),listItem:a(Kt),listItemValue:y,listOrdered:a(Gt,x),listUnordered:a(Gt),paragraph:a(lt),reference:E,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(ve),strong:a(en),thematicBreak:a(tn)},exit:{atxHeading:h(),atxHeadingSequence:Q,autolink:h(),autolinkEmail:ae,autolinkProtocol:Ce,blockQuote:h(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:fe,characterReference:Ae,codeFenced:h(j),codeFencedFence:N,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:z,codeIndented:h(P),codeText:h(X),codeTextData:z,data:z,definition:h(),definitionDestinationString:B,definitionLabelString:T,definitionTitleString:A,emphasis:h(),hardBreakEscape:h(ee),hardBreakTrailing:h(ee),htmlFlow:h(ue),htmlFlowData:z,htmlText:h(te),htmlTextData:z,image:h(xe),label:ne,labelText:G,lineEnding:$,link:h(ye),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ke,resourceDestinationString:S,resourceTitleString:I,resource:K,setextHeading:h(J),setextHeadingLineSequence:W,setextHeadingText:M,strong:h(),thematicBreak:h()}};Yg(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(Y){let ie={type:"root",children:[]};const Re={stack:[ie],tokenStack:[],config:t,enter:d,exit:p,buffer:u,resume:g,data:n},Fe=[];let be=-1;for(;++be<Y.length;)if(Y[be][1].type==="listOrdered"||Y[be][1].type==="listUnordered")if(Y[be][0]==="enter")Fe.push(be);else{const dt=Fe.pop();be=o(Y,dt,be)}for(be=-1;++be<Y.length;){const dt=t[Y[be][0]];Jg.call(dt,Y[be][1].type)&&dt[Y[be][1].type].call(Object.assign({sliceSerialize:Y[be][2].sliceSerialize},Re),Y[be][1])}if(Re.tokenStack.length>0){const dt=Re.tokenStack[Re.tokenStack.length-1];(dt[1]||um).call(Re,void 0,dt[0])}for(ie.position={start:$n(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:$n(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},be=-1;++be<t.transforms.length;)ie=t.transforms[be](ie)||ie;return ie}function o(Y,ie,Re){let Fe=ie-1,be=-1,dt=!1,wt,rt,dr,fr;for(;++Fe<=Re;){const mt=Y[Fe];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?be++:be--,fr=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(wt&&!fr&&!be&&!dr&&(dr=Fe),fr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fr=void 0}if(!be&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||be===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(wt){let Qe=Fe;for(rt=void 0;Qe--;){const Ue=Y[Qe];if(Ue[1].type==="lineEnding"||Ue[1].type==="lineEndingBlank"){if(Ue[0]==="exit")continue;rt&&(Y[rt][1].type="lineEndingBlank",dt=!0),Ue[1].type="lineEnding",rt=Qe}else if(!(Ue[1].type==="linePrefix"||Ue[1].type==="blockQuotePrefix"||Ue[1].type==="blockQuotePrefixWhitespace"||Ue[1].type==="blockQuoteMarker"||Ue[1].type==="listItemIndent"))break}dr&&(!rt||dr<rt)&&(wt._spread=!0),wt.end=Object.assign({},rt?Y[rt][1].start:mt[1].end),Y.splice(rt||Fe,0,["exit",wt,mt[2]]),Fe++,Re++}if(mt[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};wt=Qe,Y.splice(Fe,0,["enter",Qe,mt[2]]),Fe++,Re++,dr=void 0,fr=!0}}}return Y[ie][1]._spread=dt,Re}function a(Y,ie){return Re;function Re(Fe){d.call(this,Y(Fe),Fe),ie&&ie.call(this,Fe)}}function u(){this.stack.push({type:"fragment",children:[]})}function d(Y,ie,Re){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([ie,Re||void 0]),Y.position={start:$n(ie.start),end:void 0}}function h(Y){return ie;function ie(Re){Y&&Y.call(this,Re),p.call(this,Re)}}function p(Y,ie){const Re=this.stack.pop(),Fe=this.tokenStack.pop();if(Fe)Fe[0].type!==Y.type&&(ie?ie.call(this,Y,Fe[0]):(Fe[1]||um).call(this,Y,Fe[0]));else throw new Error("Cannot close `"+Y.type+"` ("+fo({start:Y.start,end:Y.end})+"): its not open");Re.position.end=$n(Y.end)}function g(){return ud(this.stack.pop())}function x(){this.data.expectingFirstListItemValue=!0}function y(Y){if(this.data.expectingFirstListItemValue){const ie=this.stack[this.stack.length-2];ie.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function b(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.lang=Y}function w(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.meta=Y}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function j(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function P(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y.replace(/(\r?\n|\r)$/g,"")}function T(Y){const ie=this.resume(),Re=this.stack[this.stack.length-1];Re.label=ie,Re.identifier=Br(this.sliceSerialize(Y)).toLowerCase()}function A(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.title=Y}function B(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.url=Y}function Q(Y){const ie=this.stack[this.stack.length-1];if(!ie.depth){const Re=this.sliceSerialize(Y).length;ie.depth=Re}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function W(Y){const ie=this.stack[this.stack.length-1];ie.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function J(){this.data.setextHeadingSlurpLineEnding=void 0}function we(Y){const Re=this.stack[this.stack.length-1].children;let Fe=Re[Re.length-1];(!Fe||Fe.type!=="text")&&(Fe=Qt(),Fe.position={start:$n(Y.start),end:void 0},Re.push(Fe)),this.stack.push(Fe)}function z(Y){const ie=this.stack.pop();ie.value+=this.sliceSerialize(Y),ie.position.end=$n(Y.end)}function $(Y){const ie=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=ie.children[ie.children.length-1];Re.position.end=$n(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ie.type)&&(we.call(this,Y),z.call(this,Y))}function ee(){this.data.atHardBreak=!0}function ue(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function te(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function X(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function ye(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ie=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ie,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function xe(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ie=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ie,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function G(Y){const ie=this.sliceSerialize(Y),Re=this.stack[this.stack.length-2];Re.label=I3(ie),Re.identifier=Br(ie).toLowerCase()}function ne(){const Y=this.stack[this.stack.length-1],ie=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const Fe=Y.children;Re.children=Fe}else Re.alt=ie}function S(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.url=Y}function I(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.title=Y}function K(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function ke(Y){const ie=this.resume(),Re=this.stack[this.stack.length-1];Re.label=ie,Re.identifier=Br(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function de(Y){this.data.characterReferenceType=Y.type}function fe(Y){const ie=this.sliceSerialize(Y),Re=this.data.characterReferenceType;let Fe;Re?(Fe=Fg(ie,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Fe=dd(ie);const be=this.stack[this.stack.length-1];be.value+=Fe}function Ae(Y){const ie=this.stack.pop();ie.position.end=$n(Y.end)}function Ce(Y){z.call(this,Y);const ie=this.stack[this.stack.length-1];ie.url=this.sliceSerialize(Y)}function ae(Y){z.call(this,Y);const ie=this.stack[this.stack.length-1];ie.url="mailto:"+this.sliceSerialize(Y)}function Te(){return{type:"blockquote",children:[]}}function Pe(){return{type:"code",lang:null,meta:null,value:""}}function He(){return{type:"inlineCode",value:""}}function tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function vt(){return{type:"emphasis",children:[]}}function ve(){return{type:"heading",depth:0,children:[]}}function Ve(){return{type:"break"}}function pt(){return{type:"html",value:""}}function Ct(){return{type:"image",title:null,url:"",alt:null}}function Nt(){return{type:"link",title:null,url:"",children:[]}}function Gt(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function Kt(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function lt(){return{type:"paragraph",children:[]}}function en(){return{type:"strong",children:[]}}function Qt(){return{type:"text",value:""}}function tn(){return{type:"thematicBreak"}}}function $n(e){return{line:e.line,column:e.column,offset:e.offset}}function Yg(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Yg(e,i):O3(e,i)}}function O3(e,t){let n;for(n in t)if(Jg.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function um(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+fo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+fo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+fo({start:t.start,end:t.end})+") is still open")}function z3(e){const t=this;t.parser=n;function n(i){return R3(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function D3(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function $3(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function F3(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function U3(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function B3(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function q3(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),o=vi(i.toLowerCase()),a=e.footnoteOrder.indexOf(i);let u,d=e.footnoteCounts.get(i);d===void 0?(d=0,e.footnoteOrder.push(i),u=e.footnoteOrder.length):u=a+1,d+=1,e.footnoteCounts.set(i,d);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function V3(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function H3(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Xg(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const o=e.all(t),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const u=o[o.length-1];return u&&u.type==="text"?u.value+=i:o.push({type:"text",value:i}),o}function W3(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Xg(e,t);const o={src:vi(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const a={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,a),e.applyData(t,a)}function G3(e,t){const n={src:vi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function K3(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function Q3(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Xg(e,t);const o={href:vi(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const a={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function J3(e,t){const n={href:vi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Y3(e,t,n){const i=e.all(t),o=n?X3(n):Zg(t),a={},u=[];if(typeof t.checked=="boolean"){const g=i[0];let x;g&&g.type==="element"&&g.tagName==="p"?x=g:(x={type:"element",tagName:"p",properties:{},children:[]},i.unshift(x)),x.children.length>0&&x.children.unshift({type:"text",value:" "}),x.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let d=-1;for(;++d<i.length;){const g=i[d];(o||d!==0||g.type!=="element"||g.tagName!=="p")&&u.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!o?u.push(...g.children):u.push(g)}const h=i[i.length-1];h&&(o||h.type!=="element"||h.tagName!=="p")&&u.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:a,children:u};return e.patch(t,p),e.applyData(t,p)}function X3(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=Zg(n[i])}return t}function Zg(e){const t=e.spread;return t??e.children.length>1}function Z3(e,t){const n={},i=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<i.length;){const u=i[o];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function e4(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function t4(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function r4(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function n4(e,t){const n=e.all(t),i=n.shift(),o=[];if(i){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],u),o.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},d=od(t.children[1]),h=Ig(t.children[t.children.length-1]);d&&h&&(u.position={start:d,end:h}),o.push(u)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)}function s4(e,t,n){const i=n?n.children:void 0,a=(i?i.indexOf(t):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,d=u?u.length:t.children.length;let h=-1;const p=[];for(;++h<d;){const x=t.children[h],y={},b=u?u[h]:void 0;b&&(y.align=b);let w={type:"element",tagName:a,properties:y,children:[]};x&&(w.children=e.all(x),e.patch(x,w),w=e.applyData(x,w)),p.push(w)}const g={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,g),e.applyData(t,g)}function i4(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const dm=9,fm=32;function o4(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),o=0;const a=[];for(;i;)a.push(hm(t.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(t);return a.push(hm(t.slice(o),o>0,!1)),a.join("")}function hm(e,t,n){let i=0,o=e.length;if(t){let a=e.codePointAt(i);for(;a===dm||a===fm;)i++,a=e.codePointAt(i)}if(n){let a=e.codePointAt(o-1);for(;a===dm||a===fm;)o--,a=e.codePointAt(o-1)}return o>i?e.slice(i,o):""}function a4(e,t){const n={type:"text",value:o4(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function l4(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const c4={blockquote:D3,break:$3,code:F3,delete:U3,emphasis:B3,footnoteReference:q3,heading:V3,html:H3,imageReference:W3,image:G3,inlineCode:K3,linkReference:Q3,link:J3,listItem:Y3,list:Z3,paragraph:e4,root:t4,strong:r4,table:n4,tableCell:i4,tableRow:s4,text:a4,thematicBreak:l4,toml:Da,yaml:Da,definition:Da,footnoteDefinition:Da};function Da(){}const e1=-1,sl=0,po=1,Ka=2,hd=3,pd=4,md=5,gd=6,t1=7,r1=8,pm=typeof self=="object"?self:globalThis,u4=(e,t)=>{const n=(o,a)=>(e.set(a,o),o),i=o=>{if(e.has(o))return e.get(o);const[a,u]=t[o];switch(a){case sl:case e1:return n(u,o);case po:{const d=n([],o);for(const h of u)d.push(i(h));return d}case Ka:{const d=n({},o);for(const[h,p]of u)d[i(h)]=i(p);return d}case hd:return n(new Date(u),o);case pd:{const{source:d,flags:h}=u;return n(new RegExp(d,h),o)}case md:{const d=n(new Map,o);for(const[h,p]of u)d.set(i(h),i(p));return d}case gd:{const d=n(new Set,o);for(const h of u)d.add(i(h));return d}case t1:{const{name:d,message:h}=u;return n(new pm[d](h),o)}case r1:return n(BigInt(u),o);case"BigInt":return n(Object(BigInt(u)),o);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:d}=new Uint8Array(u);return n(new DataView(d),u)}}return n(new pm[a](u),o)};return i},mm=e=>u4(new Map,e)(0),si="",{toString:d4}={},{keys:f4}=Object,io=e=>{const t=typeof e;if(t!=="object"||!e)return[sl,t];const n=d4.call(e).slice(8,-1);switch(n){case"Array":return[po,si];case"Object":return[Ka,si];case"Date":return[hd,si];case"RegExp":return[pd,si];case"Map":return[md,si];case"Set":return[gd,si];case"DataView":return[po,n]}return n.includes("Array")?[po,n]:n.includes("Error")?[t1,n]:[Ka,n]},$a=([e,t])=>e===sl&&(t==="function"||t==="symbol"),h4=(e,t,n,i)=>{const o=(u,d)=>{const h=i.push(u)-1;return n.set(d,h),h},a=u=>{if(n.has(u))return n.get(u);let[d,h]=io(u);switch(d){case sl:{let g=u;switch(h){case"bigint":d=r1,g=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return o([e1],u)}return o([d,g],u)}case po:{if(h){let y=u;return h==="DataView"?y=new Uint8Array(u.buffer):h==="ArrayBuffer"&&(y=new Uint8Array(u)),o([h,[...y]],u)}const g=[],x=o([d,g],u);for(const y of u)g.push(a(y));return x}case Ka:{if(h)switch(h){case"BigInt":return o([h,u.toString()],u);case"Boolean":case"Number":case"String":return o([h,u.valueOf()],u)}if(t&&"toJSON"in u)return a(u.toJSON());const g=[],x=o([d,g],u);for(const y of f4(u))(e||!$a(io(u[y])))&&g.push([a(y),a(u[y])]);return x}case hd:return o([d,u.toISOString()],u);case pd:{const{source:g,flags:x}=u;return o([d,{source:g,flags:x}],u)}case md:{const g=[],x=o([d,g],u);for(const[y,b]of u)(e||!($a(io(y))||$a(io(b))))&&g.push([a(y),a(b)]);return x}case gd:{const g=[],x=o([d,g],u);for(const y of u)(e||!$a(io(y)))&&g.push(a(y));return x}}const{message:p}=u;return o([d,{name:h,message:p}],u)};return a},gm=(e,{json:t,lossy:n}={})=>{const i=[];return h4(!(t||n),!!t,new Map,i)(e),i},Qa=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mm(gm(e,t)):structuredClone(e):(e,t)=>mm(gm(e,t));function p4(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function m4(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function g4(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||p4,i=e.options.footnoteBackLabel||m4,o=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const g=e.all(p),x=String(p.identifier).toUpperCase(),y=vi(x.toLowerCase());let b=0;const w=[],N=e.footnoteCounts.get(x);for(;N!==void 0&&++b<=N;){w.length>0&&w.push({type:"text",value:" "});let T=typeof n=="string"?n:n(h,b);typeof T=="string"&&(T={type:"text",value:T}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(h,b),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const j=g[g.length-1];if(j&&j.type==="element"&&j.tagName==="p"){const T=j.children[j.children.length-1];T&&T.type==="text"?T.value+=" ":j.children.push({type:"text",value:" "}),j.children.push(...w)}else g.push(...w);const P={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(g,!0)};e.patch(p,P),d.push(P)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Qa(u),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(d,!0)},{type:"text",value:`
`}]}}const il=(function(e){if(e==null)return b4;if(typeof e=="function")return ol(e);if(typeof e=="object")return Array.isArray(e)?x4(e):v4(e);if(typeof e=="string")return y4(e);throw new Error("Expected function, string, or object as test")});function x4(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=il(e[n]);return ol(i);function i(...o){let a=-1;for(;++a<t.length;)if(t[a].apply(this,o))return!0;return!1}}function v4(e){const t=e;return ol(n);function n(i){const o=i;let a;for(a in e)if(o[a]!==t[a])return!1;return!0}}function y4(e){return ol(t);function t(n){return n&&n.type===e}}function ol(e){return t;function t(n,i,o){return!!(w4(n)&&e.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function b4(){return!0}function w4(e){return e!==null&&typeof e=="object"&&"type"in e}const n1=[],k4=!0,qu=!1,_4="skip";function s1(e,t,n,i){let o;typeof t=="function"&&typeof n!="function"?(i=n,n=t):o=t;const a=il(o),u=i?-1:1;d(e,void 0,[])();function d(h,p,g){const x=h&&typeof h=="object"?h:{};if(typeof x.type=="string"){const b=typeof x.tagName=="string"?x.tagName:typeof x.name=="string"?x.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return y;function y(){let b=n1,w,N,j;if((!t||a(h,p,g[g.length-1]||void 0))&&(b=j4(n(h,g)),b[0]===qu))return b;if("children"in h&&h.children){const P=h;if(P.children&&b[0]!==_4)for(N=(i?P.children.length:-1)+u,j=g.concat(P);N>-1&&N<P.children.length;){const T=P.children[N];if(w=d(T,N,j)(),w[0]===qu)return w;N=typeof w[1]=="number"?w[1]:N+u}}return b}}}function j4(e){return Array.isArray(e)?e:typeof e=="number"?[k4,e]:e==null?n1:[e]}function xd(e,t,n,i){let o,a,u;typeof t=="function"&&typeof n!="function"?(a=void 0,u=t,o=n):(a=t,u=n,o=i),s1(e,a,d,o);function d(h,p){const g=p[p.length-1],x=g?g.children.indexOf(h):void 0;return u(h,x,g)}}const Vu={}.hasOwnProperty,S4={};function C4(e,t){const n=t||S4,i=new Map,o=new Map,a=new Map,u={...c4,...n.handlers},d={all:p,applyData:E4,definitionById:i,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:u,one:h,options:n,patch:N4,wrap:P4};return xd(e,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const x=g.type==="definition"?i:o,y=String(g.identifier).toUpperCase();x.has(y)||x.set(y,g)}}),d;function h(g,x){const y=g.type,b=d.handlers[y];if(Vu.call(d.handlers,y)&&b)return b(d,g,x);if(d.options.passThrough&&d.options.passThrough.includes(y)){if("children"in g){const{children:N,...j}=g,P=Qa(j);return P.children=d.all(g),P}return Qa(g)}return(d.options.unknownHandler||T4)(d,g,x)}function p(g){const x=[];if("children"in g){const y=g.children;let b=-1;for(;++b<y.length;){const w=d.one(y[b],g);if(w){if(b&&y[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=xm(w.value)),!Array.isArray(w)&&w.type==="element")){const N=w.children[0];N&&N.type==="text"&&(N.value=xm(N.value))}Array.isArray(w)?x.push(...w):x.push(w)}}}return x}}function N4(e,t){e.position&&(t.position=mb(e))}function E4(e,t){let n=t;if(e&&e.data){const i=e.data.hName,o=e.data.hChildren,a=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const u="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:u}}n.type==="element"&&a&&Object.assign(n.properties,Qa(a)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function T4(e,t){const n=t.data||{},i="value"in t&&!(Vu.call(n,"hProperties")||Vu.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function P4(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function xm(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function vm(e,t){const n=C4(e,t),i=n.one(e,void 0),o=g4(n),a=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function L4(e,t){return e&&"run"in e?async function(n,i){const o=vm(n,{file:i,...t});await e.run(o,i)}:function(n,i){return vm(n,{file:i,...e||t})}}function ym(e){if(e)throw e}var iu,bm;function I4(){if(bm)return iu;bm=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},a=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var g=e.call(p,"constructor"),x=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!x)return!1;var y;for(y in p);return typeof y>"u"||e.call(p,y)},u=function(p,g){n&&g.name==="__proto__"?n(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},d=function(p,g){if(g==="__proto__")if(e.call(p,g)){if(i)return i(p,g).value}else return;return p[g]};return iu=function h(){var p,g,x,y,b,w,N=arguments[0],j=1,P=arguments.length,T=!1;for(typeof N=="boolean"&&(T=N,N=arguments[1]||{},j=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});j<P;++j)if(p=arguments[j],p!=null)for(g in p)x=d(N,g),y=d(p,g),N!==y&&(T&&y&&(a(y)||(b=o(y)))?(b?(b=!1,w=x&&o(x)?x:[]):w=x&&a(x)?x:{},u(N,{name:g,newValue:h(T,w,y)})):typeof y<"u"&&u(N,{name:g,newValue:y}));return N},iu}var A4=I4();const ou=Xa(A4);function Hu(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function R4(){const e=[],t={run:n,use:i};return t;function n(...o){let a=-1;const u=o.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);d(null,...o);function d(h,...p){const g=e[++a];let x=-1;if(h){u(h);return}for(;++x<o.length;)(p[x]===null||p[x]===void 0)&&(p[x]=o[x]);o=p,g?M4(g,d)(...p):u(null,...p)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function M4(e,t){let n;return i;function i(...u){const d=e.length>u.length;let h;d&&u.push(o);try{h=e.apply(this,u)}catch(p){const g=p;if(d&&n)throw g;return o(g)}d||(h&&h.then&&typeof h.then=="function"?h.then(a,o):h instanceof Error?o(h):a(h))}function o(u,...d){n||(n=!0,t(u,...d))}function a(u){o(null,u)}}const Jr={basename:O4,dirname:z4,extname:D4,join:$4,sep:"/"};function O4(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');So(e);let n=0,i=-1,o=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(a){n=o+1;break}}else i<0&&(a=!0,i=o+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let u=-1,d=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(a){n=o+1;break}}else u<0&&(a=!0,u=o+1),d>-1&&(e.codePointAt(o)===t.codePointAt(d--)?d<0&&(i=o):(d=-1,i=u));return n===i?i=u:i<0&&(i=e.length),e.slice(n,i)}function z4(e){if(So(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function D4(e){So(e);let t=e.length,n=-1,i=0,o=-1,a=0,u;for(;t--;){const d=e.codePointAt(t);if(d===47){if(u){i=t+1;break}continue}n<0&&(u=!0,n=t+1),d===46?o<0?o=t:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||n<0||a===0||a===1&&o===n-1&&o===i+1?"":e.slice(o,n)}function $4(...e){let t=-1,n;for(;++t<e.length;)So(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":F4(n)}function F4(e){So(e);const t=e.codePointAt(0)===47;let n=U4(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function U4(e,t){let n="",i=0,o=-1,a=0,u=-1,d,h;for(;++u<=e.length;){if(u<e.length)d=e.codePointAt(u);else{if(d===47)break;d=47}if(d===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",i=0):(n=n.slice(0,h),i=n.length-1-n.lastIndexOf("/")),o=u,a=0;continue}}else if(n.length>0){n="",i=0,o=u,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(o+1,u):n=e.slice(o+1,u),i=u-o-1;o=u,a=0}else d===46&&a>-1?a++:a=-1}return n}function So(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const B4={cwd:q4};function q4(){return"/"}function Wu(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function V4(e){if(typeof e=="string")e=new URL(e);else if(!Wu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return H4(e)}function H4(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const au=["history","path","basename","stem","extname","dirname"];class i1{constructor(t){let n;t?Wu(t)?n={path:t}:typeof t=="string"||W4(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":B4.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<au.length;){const a=au[i];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let o;for(o in n)au.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Jr.basename(this.path):void 0}set basename(t){cu(t,"basename"),lu(t,"basename"),this.path=Jr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Jr.dirname(this.path):void 0}set dirname(t){wm(this.basename,"dirname"),this.path=Jr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Jr.extname(this.path):void 0}set extname(t){if(lu(t,"extname"),wm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Jr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Wu(t)&&(t=V4(t)),cu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Jr.basename(this.path,this.extname):void 0}set stem(t){cu(t,"stem"),lu(t,"stem"),this.path=Jr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const o=this.message(t,n,i);throw o.fatal=!0,o}info(t,n,i){const o=this.message(t,n,i);return o.fatal=void 0,o}message(t,n,i){const o=new Wt(t,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function lu(e,t){if(e&&e.includes(Jr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Jr.sep+"`")}function cu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function wm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function W4(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const G4=(function(e){const i=this.constructor.prototype,o=i[e],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,i),a}),K4={}.hasOwnProperty;class vd extends G4{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=R4()}copy(){const t=new vd;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(ou(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(fu("data",this.frozen),this.namespace[t]=n,this):K4.call(this.namespace,t)&&this.namespace[t]||void 0:t?(fu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(t,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Fa(t),i=this.parser||this.Parser;return uu("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),uu("process",this.parser||this.Parser),du("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(a,u){const d=Fa(t),h=i.parse(d);i.run(h,d,function(g,x,y){if(g||!x||!y)return p(g);const b=x,w=i.stringify(b,y);Y4(w)?y.value=w:y.result=w,p(g,y)});function p(g,x){g||!x?u(g):a?a(x):n(void 0,x)}}}processSync(t){let n=!1,i;return this.freeze(),uu("processSync",this.parser||this.Parser),du("processSync",this.compiler||this.Compiler),this.process(t,o),_m("processSync","process",n),i;function o(a,u){n=!0,ym(a),i=u}}run(t,n,i){km(t),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?a(void 0,i):new Promise(a);function a(u,d){const h=Fa(n);o.run(t,h,p);function p(g,x,y){const b=x||t;g?d(g):u?u(b):i(void 0,b,y)}}}runSync(t,n){let i=!1,o;return this.run(t,n,a),_m("runSync","run",i),o;function a(u,d){ym(u),o=d,i=!0}}stringify(t,n){this.freeze();const i=Fa(n),o=this.compiler||this.Compiler;return du("stringify",o),km(t),o(t,i)}use(t,...n){const i=this.attachers,o=this.namespace;if(fu("use",this.frozen),t!=null)if(typeof t=="function")h(t,n);else if(typeof t=="object")Array.isArray(t)?d(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[g,...x]=p;h(g,x)}else u(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function u(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(p.plugins),p.settings&&(o.settings=ou(!0,o.settings,p.settings))}function d(p){let g=-1;if(p!=null)if(Array.isArray(p))for(;++g<p.length;){const x=p[g];a(x)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,g){let x=-1,y=-1;for(;++x<i.length;)if(i[x][0]===p){y=x;break}if(y===-1)i.push([p,...g]);else if(g.length>0){let[b,...w]=g;const N=i[y][1];Hu(N)&&Hu(b)&&(b=ou(!0,N,b)),i[y]=[p,b,...w]}}}}const Q4=new vd().freeze();function uu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function du(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function fu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function km(e){if(!Hu(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _m(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Fa(e){return J4(e)?e:new i1(e)}function J4(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Y4(e){return typeof e=="string"||X4(e)}function X4(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Z4="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",jm=[],Sm={allowDangerousHtml:!0},e5=/^(https?|ircs?|mailto|xmpp)$/i,t5=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function r5(e){const t=n5(e),n=s5(e);return i5(t.runSync(t.parse(n),n),e)}function n5(e){const t=e.rehypePlugins||jm,n=e.remarkPlugins||jm,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Sm}:Sm;return Q4().use(z3).use(n).use(L4,i).use(t)}function s5(e){const t=e.children||"",n=new i1;return typeof t=="string"&&(n.value=t),n}function i5(e,t){const n=t.allowedElements,i=t.allowElement,o=t.components,a=t.disallowedElements,u=t.skipHtml,d=t.unwrapDisallowed,h=t.urlTransform||o5;for(const g of t5)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+Z4+g.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),xd(e,p),bb(e,{Fragment:c.Fragment,components:o,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function p(g,x,y){if(g.type==="raw"&&y&&typeof x=="number")return u?y.children.splice(x,1):y.children[x]={type:"text",value:g.value},x;if(g.type==="element"){let b;for(b in ru)if(Object.hasOwn(ru,b)&&Object.hasOwn(g.properties,b)){const w=g.properties[b],N=ru[b];(N===null||N.includes(g.tagName))&&(g.properties[b]=h(String(w||""),b,g))}}if(g.type==="element"){let b=n?!n.includes(g.tagName):a?a.includes(g.tagName):!1;if(!b&&i&&typeof x=="number"&&(b=!i(g,x,y)),b&&y&&typeof x=="number")return d&&g.children?y.children.splice(x,1,...g.children):y.children.splice(x,1),x}}}function o5(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||i!==-1&&t>i||e5.test(e.slice(0,t))?e:""}function Cm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(t);for(;o!==-1;)i++,o=n.indexOf(t,o+t.length);return i}function a5(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function l5(e,t,n){const o=il((n||{}).ignore||[]),a=c5(t);let u=-1;for(;++u<a.length;)s1(e,"text",d);function d(p,g){let x=-1,y;for(;++x<g.length;){const b=g[x],w=y?y.children:void 0;if(o(b,w?w.indexOf(b):void 0,y))return;y=b}if(y)return h(p,g)}function h(p,g){const x=g[g.length-1],y=a[u][0],b=a[u][1];let w=0;const j=x.children.indexOf(p);let P=!1,T=[];y.lastIndex=0;let A=y.exec(p.value);for(;A;){const B=A.index,Q={index:A.index,input:A.input,stack:[...g,p]};let M=b(...A,Q);if(typeof M=="string"&&(M=M.length>0?{type:"text",value:M}:void 0),M===!1?y.lastIndex=B+1:(w!==B&&T.push({type:"text",value:p.value.slice(w,B)}),Array.isArray(M)?T.push(...M):M&&T.push(M),w=B+A[0].length,P=!0),!y.global)break;A=y.exec(p.value)}return P?(w<p.value.length&&T.push({type:"text",value:p.value.slice(w)}),x.children.splice(j,1,...T)):T=[p],j+T.length}}function c5(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const o=n[i];t.push([u5(o[0]),d5(o[1])])}return t}function u5(e){return typeof e=="string"?new RegExp(a5(e),"g"):e}function d5(e){return typeof e=="function"?e:function(){return e}}const hu="phrasing",pu=["autolink","link","image","label"];function f5(){return{transforms:[y5],enter:{literalAutolink:p5,literalAutolinkEmail:mu,literalAutolinkHttp:mu,literalAutolinkWww:mu},exit:{literalAutolink:v5,literalAutolinkEmail:x5,literalAutolinkHttp:m5,literalAutolinkWww:g5}}}function h5(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:hu,notInConstruct:pu},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:hu,notInConstruct:pu},{character:":",before:"[ps]",after:"\\/",inConstruct:hu,notInConstruct:pu}]}}function p5(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function mu(e){this.config.enter.autolinkProtocol.call(this,e)}function m5(e){this.config.exit.autolinkProtocol.call(this,e)}function g5(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function x5(e){this.config.exit.autolinkEmail.call(this,e)}function v5(e){this.exit(e)}function y5(e){l5(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,b5],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),w5]],{ignore:["link","linkReference"]})}function b5(e,t,n,i,o){let a="";if(!o1(o)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!k5(n)))return!1;const u=_5(n+i);if(!u[0])return!1;const d={type:"link",title:null,url:a+t+u[0],children:[{type:"text",value:t+u[0]}]};return u[1]?[d,{type:"text",value:u[1]}]:d}function w5(e,t,n,i){return!o1(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function k5(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function _5(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const o=Cm(e,"(");let a=Cm(e,")");for(;i!==-1&&o>a;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),a++;return[e,n]}function o1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ms(n)||rl(n))&&(!t||n!==47)}a1.peek=I5;function j5(){this.buffer()}function S5(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function C5(){this.buffer()}function N5(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function E5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function T5(e){this.exit(e)}function P5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function L5(e){this.exit(e)}function I5(){return"["}function a1(e,t,n,i){const o=n.createTracker(i);let a=o.move("[^");const u=n.enter("footnoteReference"),d=n.enter("reference");return a+=o.move(n.safe(n.associationId(e),{after:"]",before:a})),d(),u(),a+=o.move("]"),a}function A5(){return{enter:{gfmFootnoteCallString:j5,gfmFootnoteCall:S5,gfmFootnoteDefinitionLabelString:C5,gfmFootnoteDefinition:N5},exit:{gfmFootnoteCallString:E5,gfmFootnoteCall:T5,gfmFootnoteDefinitionLabelString:P5,gfmFootnoteDefinition:L5}}}function R5(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:a1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,o,a,u){const d=a.createTracker(u);let h=d.move("[^");const p=a.enter("footnoteDefinition"),g=a.enter("label");return h+=d.move(a.safe(a.associationId(i),{before:h,after:"]"})),g(),h+=d.move("]:"),i.children&&i.children.length>0&&(d.shift(4),h+=d.move((t?`
`:" ")+a.indentLines(a.containerFlow(i,d.current()),t?l1:M5))),p(),h}}function M5(e,t,n){return t===0?e:l1(e,t,n)}function l1(e,t,n){return(n?"":"    ")+e}const O5=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];c1.peek=U5;function z5(){return{canContainEols:["delete"],enter:{strikethrough:$5},exit:{strikethrough:F5}}}function D5(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:O5}],handlers:{delete:c1}}}function $5(e){this.enter({type:"delete",children:[]},e)}function F5(e){this.exit(e)}function c1(e,t,n,i){const o=n.createTracker(i),a=n.enter("strikethrough");let u=o.move("~~");return u+=n.containerPhrasing(e,{...o.current(),before:u,after:"~"}),u+=o.move("~~"),a(),u}function U5(){return"~"}function B5(e){return e.length}function q5(e,t){const n=t||{},i=(n.align||[]).concat(),o=n.stringLength||B5,a=[],u=[],d=[],h=[];let p=0,g=-1;for(;++g<e.length;){const N=[],j=[];let P=-1;for(e[g].length>p&&(p=e[g].length);++P<e[g].length;){const T=V5(e[g][P]);if(n.alignDelimiters!==!1){const A=o(T);j[P]=A,(h[P]===void 0||A>h[P])&&(h[P]=A)}N.push(T)}u[g]=N,d[g]=j}let x=-1;if(typeof i=="object"&&"length"in i)for(;++x<p;)a[x]=Nm(i[x]);else{const N=Nm(i);for(;++x<p;)a[x]=N}x=-1;const y=[],b=[];for(;++x<p;){const N=a[x];let j="",P="";N===99?(j=":",P=":"):N===108?j=":":N===114&&(P=":");let T=n.alignDelimiters===!1?1:Math.max(1,h[x]-j.length-P.length);const A=j+"-".repeat(T)+P;n.alignDelimiters!==!1&&(T=j.length+T+P.length,T>h[x]&&(h[x]=T),b[x]=T),y[x]=A}u.splice(1,0,y),d.splice(1,0,b),g=-1;const w=[];for(;++g<u.length;){const N=u[g],j=d[g];x=-1;const P=[];for(;++x<p;){const T=N[x]||"";let A="",B="";if(n.alignDelimiters!==!1){const Q=h[x]-(j[x]||0),M=a[x];M===114?A=" ".repeat(Q):M===99?Q%2?(A=" ".repeat(Q/2+.5),B=" ".repeat(Q/2-.5)):(A=" ".repeat(Q/2),B=A):B=" ".repeat(Q)}n.delimiterStart!==!1&&!x&&P.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||x)&&P.push(" "),n.alignDelimiters!==!1&&P.push(A),P.push(T),n.alignDelimiters!==!1&&P.push(B),n.padding!==!1&&P.push(" "),(n.delimiterEnd!==!1||x!==p-1)&&P.push("|")}w.push(n.delimiterEnd===!1?P.join("").replace(/ +$/,""):P.join(""))}return w.join(`
`)}function V5(e){return e==null?"":String(e)}function Nm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function H5(e,t,n,i){const o=n.enter("blockquote"),a=n.createTracker(i);a.move("> "),a.shift(2);const u=n.indentLines(n.containerFlow(e,a.current()),W5);return o(),u}function W5(e,t,n){return">"+(n?"":" ")+e}function G5(e,t){return Em(e,t.inConstruct,!0)&&!Em(e,t.notInConstruct,!1)}function Em(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Tm(e,t,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&G5(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function K5(e,t){const n=String(e);let i=n.indexOf(t),o=i,a=0,u=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++a>u&&(u=a):a=1,o=i+t.length,i=n.indexOf(t,o);return u}function Q5(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function J5(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Y5(e,t,n,i){const o=J5(n),a=e.value||"",u=o==="`"?"GraveAccent":"Tilde";if(Q5(e,n)){const x=n.enter("codeIndented"),y=n.indentLines(a,X5);return x(),y}const d=n.createTracker(i),h=o.repeat(Math.max(K5(a,o)+1,3)),p=n.enter("codeFenced");let g=d.move(h);if(e.lang){const x=n.enter(`codeFencedLang${u}`);g+=d.move(n.safe(e.lang,{before:g,after:" ",encode:["`"],...d.current()})),x()}if(e.lang&&e.meta){const x=n.enter(`codeFencedMeta${u}`);g+=d.move(" "),g+=d.move(n.safe(e.meta,{before:g,after:`
`,encode:["`"],...d.current()})),x()}return g+=d.move(`
`),a&&(g+=d.move(a+`
`)),g+=d.move(h),p(),g}function X5(e,t,n){return(n?"":"    ")+e}function yd(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Z5(e,t,n,i){const o=yd(n),a=o==='"'?"Quote":"Apostrophe",u=n.enter("definition");let d=n.enter("label");const h=n.createTracker(i);let p=h.move("[");return p+=h.move(n.safe(n.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),d(),!e.url||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),d(),e.title&&(d=n.enter(`title${a}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),u(),p}function ek(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function bo(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ja(e,t,n){const i=hi(e),o=hi(t);return i===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}u1.peek=tk;function u1(e,t,n,i){const o=ek(n),a=n.enter("emphasis"),u=n.createTracker(i),d=u.move(o);let h=u.move(n.containerPhrasing(e,{after:o,before:d,...u.current()}));const p=h.charCodeAt(0),g=Ja(i.before.charCodeAt(i.before.length-1),p,o);g.inside&&(h=bo(p)+h.slice(1));const x=h.charCodeAt(h.length-1),y=Ja(i.after.charCodeAt(0),x,o);y.inside&&(h=h.slice(0,-1)+bo(x));const b=u.move(o);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:g.outside},d+h+b}function tk(e,t,n){return n.options.emphasis||"*"}function rk(e,t){let n=!1;return xd(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,qu}),!!((!e.depth||e.depth<3)&&ud(e)&&(t.options.setext||n))}function nk(e,t,n,i){const o=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(i);if(rk(e,n)){const g=n.enter("headingSetext"),x=n.enter("phrasing"),y=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return x(),g(),y+`
`+(o===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const u="#".repeat(o),d=n.enter("headingAtx"),h=n.enter("phrasing");a.move(u+" ");let p=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(p)&&(p=bo(p.charCodeAt(0))+p.slice(1)),p=p?u+" "+p:u,n.options.closeAtx&&(p+=" "+u),h(),d(),p}d1.peek=sk;function d1(e){return e.value||""}function sk(){return"<"}f1.peek=ik;function f1(e,t,n,i){const o=yd(n),a=o==='"'?"Quote":"Apostrophe",u=n.enter("image");let d=n.enter("label");const h=n.createTracker(i);let p=h.move("![");return p+=h.move(n.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),d(),e.title&&(d=n.enter(`title${a}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),p+=h.move(")"),u(),p}function ik(){return"!"}h1.peek=ok;function h1(e,t,n,i){const o=e.referenceType,a=n.enter("imageReference");let u=n.enter("label");const d=n.createTracker(i);let h=d.move("![");const p=n.safe(e.alt,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),u();const g=n.stack;n.stack=[],u=n.enter("reference");const x=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return u(),n.stack=g,a(),o==="full"||!p||p!==x?h+=d.move(x+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function ok(){return"!"}p1.peek=ak;function p1(e,t,n){let i=e.value||"",o="`",a=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<n.unsafe.length;){const u=n.unsafe[a],d=n.compilePattern(u);let h;if(u.atBreak)for(;h=d.exec(i);){let p=h.index;i.charCodeAt(p)===10&&i.charCodeAt(p-1)===13&&p--,i=i.slice(0,p)+" "+i.slice(h.index+1)}}return o+i+o}function ak(){return"`"}function m1(e,t){const n=ud(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}g1.peek=lk;function g1(e,t,n,i){const o=yd(n),a=o==='"'?"Quote":"Apostrophe",u=n.createTracker(i);let d,h;if(m1(e,n)){const g=n.stack;n.stack=[],d=n.enter("autolink");let x=u.move("<");return x+=u.move(n.containerPhrasing(e,{before:x,after:">",...u.current()})),x+=u.move(">"),d(),n.stack=g,x}d=n.enter("link"),h=n.enter("label");let p=u.move("[");return p+=u.move(n.containerPhrasing(e,{before:p,after:"](",...u.current()})),p+=u.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=n.enter("destinationLiteral"),p+=u.move("<"),p+=u.move(n.safe(e.url,{before:p,after:">",...u.current()})),p+=u.move(">")):(h=n.enter("destinationRaw"),p+=u.move(n.safe(e.url,{before:p,after:e.title?" ":")",...u.current()}))),h(),e.title&&(h=n.enter(`title${a}`),p+=u.move(" "+o),p+=u.move(n.safe(e.title,{before:p,after:o,...u.current()})),p+=u.move(o),h()),p+=u.move(")"),d(),p}function lk(e,t,n){return m1(e,n)?"<":"["}x1.peek=ck;function x1(e,t,n,i){const o=e.referenceType,a=n.enter("linkReference");let u=n.enter("label");const d=n.createTracker(i);let h=d.move("[");const p=n.containerPhrasing(e,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),u();const g=n.stack;n.stack=[],u=n.enter("reference");const x=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return u(),n.stack=g,a(),o==="full"||!p||p!==x?h+=d.move(x+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function ck(){return"["}function bd(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function uk(e){const t=bd(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function dk(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function v1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function fk(e,t,n,i){const o=n.enter("list"),a=n.bulletCurrent;let u=e.ordered?dk(n):bd(n);const d=e.ordered?u==="."?")":".":uk(n);let h=t&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!e.ordered){const g=e.children?e.children[0]:void 0;if((u==="*"||u==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),v1(n)===u&&g){let x=-1;for(;++x<e.children.length;){const y=e.children[x];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(u=d),n.bulletCurrent=u;const p=n.containerFlow(e,i);return n.bulletLastUsed=u,n.bulletCurrent=a,o(),p}function hk(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function pk(e,t,n,i){const o=hk(n);let a=n.bulletCurrent||bd(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let u=a.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(u=Math.ceil(u/4)*4);const d=n.createTracker(i);d.move(a+" ".repeat(u-a.length)),d.shift(u);const h=n.enter("listItem"),p=n.indentLines(n.containerFlow(e,d.current()),g);return h(),p;function g(x,y,b){return y?(b?"":" ".repeat(u))+x:(b?a:a+" ".repeat(u-a.length))+x}}function mk(e,t,n,i){const o=n.enter("paragraph"),a=n.enter("phrasing"),u=n.containerPhrasing(e,i);return a(),o(),u}const gk=il(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function xk(e,t,n,i){return(e.children.some(function(u){return gk(u)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function vk(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}y1.peek=yk;function y1(e,t,n,i){const o=vk(n),a=n.enter("strong"),u=n.createTracker(i),d=u.move(o+o);let h=u.move(n.containerPhrasing(e,{after:o,before:d,...u.current()}));const p=h.charCodeAt(0),g=Ja(i.before.charCodeAt(i.before.length-1),p,o);g.inside&&(h=bo(p)+h.slice(1));const x=h.charCodeAt(h.length-1),y=Ja(i.after.charCodeAt(0),x,o);y.inside&&(h=h.slice(0,-1)+bo(x));const b=u.move(o+o);return a(),n.attentionEncodeSurroundingInfo={after:y.outside,before:g.outside},d+h+b}function yk(e,t,n){return n.options.strong||"*"}function bk(e,t,n,i){return n.safe(e.value,i)}function wk(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function kk(e,t,n){const i=(v1(n)+(n.options.ruleSpaces?" ":"")).repeat(wk(n));return n.options.ruleSpaces?i.slice(0,-1):i}const b1={blockquote:H5,break:Tm,code:Y5,definition:Z5,emphasis:u1,hardBreak:Tm,heading:nk,html:d1,image:f1,imageReference:h1,inlineCode:p1,link:g1,linkReference:x1,list:fk,listItem:pk,paragraph:mk,root:xk,strong:y1,text:bk,thematicBreak:kk};function _k(){return{enter:{table:jk,tableData:Pm,tableHeader:Pm,tableRow:Ck},exit:{codeText:Nk,table:Sk,tableData:gu,tableHeader:gu,tableRow:gu}}}function jk(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Sk(e){this.exit(e),this.data.inTable=void 0}function Ck(e){this.enter({type:"tableRow",children:[]},e)}function gu(e){this.exit(e)}function Pm(e){this.enter({type:"tableCell",children:[]},e)}function Nk(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ek));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ek(e,t){return t==="|"?t:e}function Tk(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,o=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:u,tableCell:h,tableRow:d}};function u(b,w,N,j){return p(g(b,N,j),b.align)}function d(b,w,N,j){const P=x(b,N,j),T=p([P]);return T.slice(0,T.indexOf(`
`))}function h(b,w,N,j){const P=N.enter("tableCell"),T=N.enter("phrasing"),A=N.containerPhrasing(b,{...j,before:a,after:a});return T(),P(),A}function p(b,w){return q5(b,{align:w,alignDelimiters:i,padding:n,stringLength:o})}function g(b,w,N){const j=b.children;let P=-1;const T=[],A=w.enter("table");for(;++P<j.length;)T[P]=x(j[P],w,N);return A(),T}function x(b,w,N){const j=b.children;let P=-1;const T=[],A=w.enter("tableRow");for(;++P<j.length;)T[P]=h(j[P],b,w,N);return A(),T}function y(b,w,N){let j=b1.inlineCode(b,w,N);return N.stack.includes("tableCell")&&(j=j.replace(/\|/g,"\\$&")),j}}function Pk(){return{exit:{taskListCheckValueChecked:Lm,taskListCheckValueUnchecked:Lm,paragraph:Ik}}}function Lk(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ak}}}function Lm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Ik(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=t.children;let a=-1,u;for(;++a<o.length;){const d=o[a];if(d.type==="paragraph"){u=d;break}}u===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function Ak(e,t,n,i){const o=e.children[0],a=typeof e.checked=="boolean"&&o&&o.type==="paragraph",u="["+(e.checked?"x":" ")+"] ",d=n.createTracker(i);a&&d.move(u);let h=b1.listItem(e,t,n,{...i,...d.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(g){return g+u}}function Rk(){return[f5(),A5(),z5(),_k(),Pk()]}function Mk(e){return{extensions:[h5(),R5(e),D5(),Tk(e),Lk()]}}const Ok={tokenize:Bk,partial:!0},w1={tokenize:qk,partial:!0},k1={tokenize:Vk,partial:!0},_1={tokenize:Hk,partial:!0},zk={tokenize:Wk,partial:!0},j1={name:"wwwAutolink",tokenize:Fk,previous:C1},S1={name:"protocolAutolink",tokenize:Uk,previous:N1},xn={name:"emailAutolink",tokenize:$k,previous:E1},Zr={};function Dk(){return{text:Zr}}let cs=48;for(;cs<123;)Zr[cs]=xn,cs++,cs===58?cs=65:cs===91&&(cs=97);Zr[43]=xn;Zr[45]=xn;Zr[46]=xn;Zr[95]=xn;Zr[72]=[xn,S1];Zr[104]=[xn,S1];Zr[87]=[xn,j1];Zr[119]=[xn,j1];function $k(e,t,n){const i=this;let o,a;return u;function u(x){return!Gu(x)||!E1.call(i,i.previous)||wd(i.events)?n(x):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),d(x))}function d(x){return Gu(x)?(e.consume(x),d):x===64?(e.consume(x),h):n(x)}function h(x){return x===46?e.check(zk,g,p)(x):x===45||x===95||Ht(x)?(a=!0,e.consume(x),h):g(x)}function p(x){return e.consume(x),o=!0,h}function g(x){return a&&o&&er(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(x)):n(x)}}function Fk(e,t,n){const i=this;return o;function o(u){return u!==87&&u!==119||!C1.call(i,i.previous)||wd(i.events)?n(u):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Ok,e.attempt(w1,e.attempt(k1,a),n),n)(u))}function a(u){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(u)}}function Uk(e,t,n){const i=this;let o="",a=!1;return u;function u(x){return(x===72||x===104)&&N1.call(i,i.previous)&&!wd(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(x),e.consume(x),d):n(x)}function d(x){if(er(x)&&o.length<5)return o+=String.fromCodePoint(x),e.consume(x),d;if(x===58){const y=o.toLowerCase();if(y==="http"||y==="https")return e.consume(x),h}return n(x)}function h(x){return x===47?(e.consume(x),a?p:(a=!0,h)):n(x)}function p(x){return x===null||Ga(x)||st(x)||ms(x)||rl(x)?n(x):e.attempt(w1,e.attempt(k1,g),n)(x)}function g(x){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(x)}}function Bk(e,t,n){let i=0;return o;function o(u){return(u===87||u===119)&&i<3?(i++,e.consume(u),o):u===46&&i===3?(e.consume(u),a):n(u)}function a(u){return u===null?n(u):t(u)}}function qk(e,t,n){let i,o,a;return u;function u(p){return p===46||p===95?e.check(_1,h,d)(p):p===null||st(p)||ms(p)||p!==45&&rl(p)?h(p):(a=!0,e.consume(p),u)}function d(p){return p===95?i=!0:(o=i,i=void 0),e.consume(p),u}function h(p){return o||i||!a?n(p):t(p)}}function Vk(e,t){let n=0,i=0;return o;function o(u){return u===40?(n++,e.consume(u),o):u===41&&i<n?a(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?e.check(_1,t,a)(u):u===null||st(u)||ms(u)?t(u):(e.consume(u),o)}function a(u){return u===41&&i++,e.consume(u),o}}function Hk(e,t,n){return i;function i(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(e.consume(d),i):d===38?(e.consume(d),a):d===93?(e.consume(d),o):d===60||d===null||st(d)||ms(d)?t(d):n(d)}function o(d){return d===null||d===40||d===91||st(d)||ms(d)?t(d):i(d)}function a(d){return er(d)?u(d):n(d)}function u(d){return d===59?(e.consume(d),i):er(d)?(e.consume(d),u):n(d)}}function Wk(e,t,n){return i;function i(a){return e.consume(a),o}function o(a){return Ht(a)?n(a):t(a)}}function C1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||st(e)}function N1(e){return!er(e)}function E1(e){return!(e===47||Gu(e))}function Gu(e){return e===43||e===45||e===46||e===95||Ht(e)}function wd(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Gk={tokenize:t6,partial:!0};function Kk(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Xk,continuation:{tokenize:Zk},exit:e6}},text:{91:{name:"gfmFootnoteCall",tokenize:Yk},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Qk,resolveTo:Jk}}}}function Qk(e,t,n){const i=this;let o=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let u;for(;o--;){const h=i.events[o][1];if(h.type==="labelImage"){u=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return d;function d(h){if(!u||!u._balanced)return n(h);const p=Br(i.sliceSerialize({start:u.end,end:i.now()}));return p.codePointAt(0)!==94||!a.includes(p.slice(1))?n(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function Jk(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},d=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...d),e}function Yk(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,u;return d;function d(x){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(x),e.exit("gfmFootnoteCallLabelMarker"),h}function h(x){return x!==94?n(x):(e.enter("gfmFootnoteCallMarker"),e.consume(x),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(x){if(a>999||x===93&&!u||x===null||x===91||st(x))return n(x);if(x===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return o.includes(Br(i.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(x),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(x)}return st(x)||(u=!0),a++,e.consume(x),x===92?g:p}function g(x){return x===91||x===92||x===93?(e.consume(x),a++,p):p(x)}}function Xk(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,u=0,d;return h;function h(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",g):n(w)}function g(w){if(u>999||w===93&&!d||w===null||w===91||st(w))return n(w);if(w===93){e.exit("chunkString");const N=e.exit("gfmFootnoteDefinitionLabelString");return a=Br(i.sliceSerialize(N)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return st(w)||(d=!0),u++,e.consume(w),w===92?x:g}function x(w){return w===91||w===92||w===93?(e.consume(w),u++,g):g(w)}function y(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),o.includes(a)||o.push(a),Je(e,b,"gfmFootnoteDefinitionWhitespace")):n(w)}function b(w){return t(w)}}function Zk(e,t,n){return e.check(jo,t,e.attempt(Gk,t,n))}function e6(e){e.exit("gfmFootnoteDefinition")}function t6(e,t,n){const i=this;return Je(e,o,"gfmFootnoteDefinitionIndent",5);function o(a){const u=i.events[i.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?t(a):n(a)}}function r6(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(u,d){let h=-1;for(;++h<u.length;)if(u[h][0]==="enter"&&u[h][1].type==="strikethroughSequenceTemporary"&&u[h][1]._close){let p=h;for(;p--;)if(u[p][0]==="exit"&&u[p][1].type==="strikethroughSequenceTemporary"&&u[p][1]._open&&u[h][1].end.offset-u[h][1].start.offset===u[p][1].end.offset-u[p][1].start.offset){u[h][1].type="strikethroughSequence",u[p][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},u[p][1].start),end:Object.assign({},u[h][1].end)},x={type:"strikethroughText",start:Object.assign({},u[p][1].end),end:Object.assign({},u[h][1].start)},y=[["enter",g,d],["enter",u[p][1],d],["exit",u[p][1],d],["enter",x,d]],b=d.parser.constructs.insideSpan.null;b&&wr(y,y.length,0,nl(b,u.slice(p+1,h),d)),wr(y,y.length,0,[["exit",x,d],["enter",u[h][1],d],["exit",u[h][1],d],["exit",g,d]]),wr(u,p-1,h-p+3,y),h=p+y.length-2;break}}for(h=-1;++h<u.length;)u[h][1].type==="strikethroughSequenceTemporary"&&(u[h][1].type="data");return u}function a(u,d,h){const p=this.previous,g=this.events;let x=0;return y;function y(w){return p===126&&g[g.length-1][1].type!=="characterEscape"?h(w):(u.enter("strikethroughSequenceTemporary"),b(w))}function b(w){const N=hi(p);if(w===126)return x>1?h(w):(u.consume(w),x++,b);if(x<2&&!n)return h(w);const j=u.exit("strikethroughSequenceTemporary"),P=hi(w);return j._open=!P||P===2&&!!N,j._close=!N||N===2&&!!P,d(w)}}}class n6{constructor(){this.map=[]}add(t,n,i){s6(this,t,n,i)}consume(t){if(this.map.sort(function(a,u){return a[0]-u[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let o=i.pop();for(;o;){for(const a of o)t.push(a);o=i.pop()}this.map.length=0}}function s6(e,t,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...i);return}o+=1}e.map.push([t,n,i])}}function i6(e,t){let n=!1;const i=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function o6(){return{flow:{null:{name:"table",tokenize:a6,resolveAll:l6}}}}function a6(e,t,n){const i=this;let o=0,a=0,u;return d;function d(z){let $=i.events.length-1;for(;$>-1;){const te=i.events[$][1].type;if(te==="lineEnding"||te==="linePrefix")$--;else break}const ee=$>-1?i.events[$][1].type:null,ue=ee==="tableHead"||ee==="tableRow"?M:h;return ue===M&&i.parser.lazy[i.now().line]?n(z):ue(z)}function h(z){return e.enter("tableHead"),e.enter("tableRow"),p(z)}function p(z){return z===124||(u=!0,a+=1),g(z)}function g(z){return z===null?n(z):ze(z)?a>1?(a=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),b):n(z):Ke(z)?Je(e,g,"whitespace")(z):(a+=1,u&&(u=!1,o+=1),z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),u=!0,g):(e.enter("data"),x(z)))}function x(z){return z===null||z===124||st(z)?(e.exit("data"),g(z)):(e.consume(z),z===92?y:x)}function y(z){return z===92||z===124?(e.consume(z),x):x(z)}function b(z){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(z):(e.enter("tableDelimiterRow"),u=!1,Ke(z)?Je(e,w,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):w(z))}function w(z){return z===45||z===58?j(z):z===124?(u=!0,e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),N):Q(z)}function N(z){return Ke(z)?Je(e,j,"whitespace")(z):j(z)}function j(z){return z===58?(a+=1,u=!0,e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),P):z===45?(a+=1,P(z)):z===null||ze(z)?B(z):Q(z)}function P(z){return z===45?(e.enter("tableDelimiterFiller"),T(z)):Q(z)}function T(z){return z===45?(e.consume(z),T):z===58?(u=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),A):(e.exit("tableDelimiterFiller"),A(z))}function A(z){return Ke(z)?Je(e,B,"whitespace")(z):B(z)}function B(z){return z===124?w(z):z===null||ze(z)?!u||o!==a?Q(z):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(z)):Q(z)}function Q(z){return n(z)}function M(z){return e.enter("tableRow"),W(z)}function W(z){return z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),W):z===null||ze(z)?(e.exit("tableRow"),t(z)):Ke(z)?Je(e,W,"whitespace")(z):(e.enter("data"),J(z))}function J(z){return z===null||z===124||st(z)?(e.exit("data"),W(z)):(e.consume(z),z===92?we:J)}function we(z){return z===92||z===124?(e.consume(z),J):J(z)}}function l6(e,t){let n=-1,i=!0,o=0,a=[0,0,0,0],u=[0,0,0,0],d=!1,h=0,p,g,x;const y=new n6;for(;++n<e.length;){const b=e[n],w=b[1];b[0]==="enter"?w.type==="tableHead"?(d=!1,h!==0&&(Im(y,t,h,p,g),g=void 0,h=0),p={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},y.add(n,0,[["enter",p,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(i=!0,x=void 0,a=[0,0,0,0],u=[0,n+1,0,0],d&&(d=!1,g={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},y.add(n,0,[["enter",g,t]])),o=w.type==="tableDelimiterRow"?2:g?3:1):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(i=!1,u[2]===0&&(a[1]!==0&&(u[0]=u[1],x=Ua(y,t,a,o,void 0,x),a=[0,0,0,0]),u[2]=n)):w.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(u[0]=u[1],x=Ua(y,t,a,o,void 0,x)),a=u,u=[a[1],n,0,0])):w.type==="tableHead"?(d=!0,h=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(h=n,a[1]!==0?(u[0]=u[1],x=Ua(y,t,a,o,n,x)):u[1]!==0&&(x=Ua(y,t,u,o,n,x)),o=0):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(u[3]=n)}for(h!==0&&Im(y,t,h,p,g),y.consume(t.events),n=-1;++n<t.events.length;){const b=t.events[n];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=i6(t.events,n))}return e}function Ua(e,t,n,i,o,a){const u=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",d="tableContent";n[0]!==0&&(a.end=Object.assign({},ai(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const h=ai(t.events,n[1]);if(a={type:u,start:Object.assign({},h),end:Object.assign({},h)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const p=ai(t.events,n[2]),g=ai(t.events,n[3]),x={type:d,start:Object.assign({},p),end:Object.assign({},g)};if(e.add(n[2],0,[["enter",x,t]]),i!==2){const y=t.events[n[2]],b=t.events[n[3]];if(y[1].end=Object.assign({},b[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,N=n[3]-n[2]-1;e.add(w,N,[])}}e.add(n[3]+1,0,[["exit",x,t]])}return o!==void 0&&(a.end=Object.assign({},ai(t.events,o)),e.add(o,0,[["exit",a,t]]),a=void 0),a}function Im(e,t,n,i,o){const a=[],u=ai(t.events,n);o&&(o.end=Object.assign({},u),a.push(["exit",o,t])),i.end=Object.assign({},u),a.push(["exit",i,t]),e.add(n+1,0,a)}function ai(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const c6={name:"tasklistCheck",tokenize:d6};function u6(){return{text:{91:c6}}}function d6(e,t,n){const i=this;return o;function o(h){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),a)}function a(h){return st(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),u):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),u):n(h)}function u(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),d):n(h)}function d(h){return ze(h)?t(h):Ke(h)?e.check({tokenize:f6},t,n)(h):n(h)}}function f6(e,t,n){return Je(e,i,"whitespace");function i(o){return o===null?n(o):t(o)}}function h6(e){return $g([Dk(),Kk(),r6(e),o6(),u6()])}const p6={};function m6(e){const t=this,n=e||p6,i=t.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),u=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(h6(n)),a.push(Rk()),u.push(Mk(n))}const g6=({slug:e})=>{const[t,n]=_.useState(""),[i,o]=_.useState(!0),[a,u]=_.useState(null);return _.useEffect(()=>{const d=async()=>{const p=await fetch(`/pages/${e}.md`,{cache:"no-store"});if(p.ok){const g=await p.text();n(g)}else n(`# Page Not Found

This page does not exist.`);o(!1)},h=async()=>{const{data:p}=await H.from("profiles").select("*").eq("username","liaotian").single();p&&u(p)};d(),h()},[e]),i?c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex items-center justify-center",children:c.jsx("div",{className:"text-2xl",children:"Loading..."})}):c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] pt-20 pb-10",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[c.jsx("article",{className:"prose max-w-none bg-[rgb(var(--color-surface))] p-8 mb-8 rounded-2xl border border-[rgb(var(--color-border))]",children:c.jsx(r5,{remarkPlugins:[m6],children:t})}),c.jsx("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl p-6 border border-[rgb(var(--color-border))] shadow-sm",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:a?.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=liaotian",alt:"liaotian",className:"w-16 h-16 rounded-full border-2 border-[rgb(var(--color-primary))]"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-xl font-bold",children:a?.display_name||"LiaoTian"}),a?.verified&&c.jsx(Xr,{size:20,className:"text-[rgb(var(--color-accent))]"})]}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",a?.username||"liaotian"]}),c.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-1",children:[c.jsx("a",{href:"/",className:"text-[rgb(var(--color-accent))]",children:"Sign Up"})," for LiaoTian"]})]})]})}),c.jsxs("div",{className:"mt-10 text-center text-sm text-[rgb(var(--color-text-secondary))]",children:[" Mux ",new Date().getFullYear()]})]})})},x6="2025-11-07T12:51:03.751Z",v6=[{key:"profiles",icon:tl,description:"Total User Accounts",type:"count",table:"profiles"},{key:"posts",icon:li,description:"Total Content Posts",type:"count",table:"posts"},{key:"messages",icon:go,description:"(Your) Total Messages",type:"count",table:"messages"},{key:"likes",icon:fi,description:"Total Likes/Reactions",type:"count",table:"likes"},{key:"comments",icon:go,description:"Total Comments",type:"count",table:"comments"}],y6=[{key:"online_now",icon:fs,description:"Currently Online (Last 5 min)",type:"activity",minutes:5},{key:"online_24h",icon:fs,description:"Online in last 24 hours",type:"activity",minutes:1440},{key:"online_7d",icon:fs,description:"Online in last 7 days",type:"activity",minutes:10080},{key:"online_30d",icon:fs,description:"Online in last 30 days",type:"activity",minutes:720*60},{key:"online_1y",icon:fs,description:"Online in last year",type:"activity",minutes:365*24*60}],T1=5,b6=e=>{const t=new Date;return t.setMinutes(t.getMinutes()-e),t.toISOString()},Am=e=>{if(!e)return"Never";const t=new Date(e),i=Math.floor((new Date().getTime()-t.getTime())/1e3);if(i<60)return`${i}s ago`;const o=Math.floor(i/60);if(o<60)return`${o}m ago`;const a=Math.floor(o/60);if(a<24)return`${a}h ago`;const u=Math.floor(a/24);return u<30?`${u}d ago`:`${Math.floor(u/30)}mo ago`},w6=e=>{const t=new Date(e).getTime();let i=new Date().getTime()-t;if(i<0)return"Platform launching soon!";const o=1e3*60*60,a=o*24;let u=i;const d=[],h=Math.floor(u/(a*365.25));h>0&&(d.push(`${h} year(s)`),u%=a*365.25);const p=Math.floor(u/(a*30.44));p>0&&(d.push(`${p} month(s)`),u%=a*30.44);const g=Math.floor(u/a);u%=a;const x=Math.floor(u/o);return h>0||p>0?(g>0&&d.push(`${g} day(s)`),x>0&&d.push(`${x} hour(s)`),d.join(" ")):`${g} day(s) and ${x} hour(s)`},k6=async()=>{const e=v6.map(async t=>{try{const{count:n,error:i}=await H.from(t.table).select("*",{count:"exact",head:!0});if(i){const o=i.code==="42P01"?`(Table "${t.table}" not found)`:`(DB Error: ${i.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:o,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:n||0,error:!1,type:t.type}}catch(n){const i=n instanceof Error?n.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${i})`,type:t.type}}});return Promise.all(e)},_6=async()=>{const e=y6.map(async t=>{try{const n=b6(t.minutes),{count:i,error:o}=await H.from("profiles").select("*",{count:"exact",head:!0}).gte("last_seen",n);if(o){const a=`(DB Error: ${o.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:a,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:i||0,error:!1,type:t.type}}catch(n){const i=n instanceof Error?n.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${i})`,type:t.type}}});return Promise.all(e)},j6=async()=>{const e="highest_followers",t="Highest Followers",n=Ru;try{const{data:i,error:o}=await H.from("profiles").select("id, username, display_name, avatar_url");if(o)throw o;const{data:a,error:u}=await H.from("follows").select("following_id");if(u)throw u;const d={};for(const y of a){const b=y.following_id;d[b]=(d[b]||0)+1}let h=null,p=-1;for(const[y,b]of Object.entries(d))b>p&&(p=b,h=y);const g=i.find(y=>y.id===h);let x;return g&&h?x={id:h,username:g.username,display_name:g.display_name,avatar_url:g.avatar_url,follower_count:p}:x={id:"N/A",username:"system",display_name:"No Followers Yet",avatar_url:"https://placehold.co/64x64/60A5FA/FFFFFF?text=NA",follower_count:0},{key:e,label:t,icon:n,value:{profile:x},error:!1,type:"highest_follower"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to calculate top profile: ${o})`,type:"highest_follower"}}},S6=async()=>{const e="time_since_launch",t="Time Since Launch",n=fs;try{const i=w6(x6);return{key:e,label:t,icon:n,value:i,error:!1,type:"time_since_launch"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to calculate time: ${o})`,type:"time_since_launch"}}},C6=async()=>{const e="recently_joined",t="5 Most Recently Joined Users",n=_g;try{const{data:i,error:o}=await H.from("profiles").select("id, username, display_name, avatar_url, created_at").order("created_at",{ascending:!1}).limit(T1);if(o)throw o;return{key:e,label:t,icon:n,value:{list:i},error:!1,type:"recent_users"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to fetch recent users: ${o})`,type:"recent_users"}}},N6=async()=>{const e="recently_online",t="5 Most Recently Online Users",n=qv;try{const{data:i,error:o}=await H.from("profiles").select("id, username, display_name, avatar_url, last_seen").not("last_seen","is",null).order("last_seen",{ascending:!1}).limit(T1);if(o)throw o;return{key:e,label:t,icon:n,value:{list:i},error:!1,type:"recent_online"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to fetch recent online users: ${o})`,type:"recent_online"}}},Rm=()=>{const[e,t]=_.useState([]),[n,i]=_.useState(!0),[o,a]=_.useState(null);if(_.useEffect(()=>{(async()=>{i(!0),a(null);try{const[P,T,A,B,Q,M]=await Promise.all([k6(),_6(),j6(),S6(),C6(),N6()]),W=[...P,...T,A,B,Q,M];t(W)}catch{a("Failed to fetch statistics due to a critical, unexpected error.")}finally{i(!1)}})()},[]),o)return c.jsxs("div",{className:"max-w-4xl mx-auto mt-10 p-6 bg-red-100 border border-red-400 rounded-xl shadow-xl",children:[c.jsxs("h2",{className:"flex items-center text-xl font-bold text-red-800 mb-4",children:[c.jsx(eo,{className:"mr-2 h-6 w-6"})," Statistics Load Error"]}),c.jsx("p",{className:"text-red-700",children:o})]});const u=j=>{const P=j.icon,T=j.error||j.value==="Error";return c.jsxs("div",{className:`p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl
              ${T?"bg-red-50 border border-red-200":"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]"}
            `,children:[c.jsx("div",{className:"flex items-start justify-between",children:c.jsx("div",{className:`p-3 rounded-full ${T?"bg-red-500":"bg-[rgba(var(--color-primary),0.1)]"}`,children:c.jsx(P,{className:`h-6 w-6 ${T?"text-white":"text-[rgb(var(--color-primary))]"}`})})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("p",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider",children:j.label}),T?c.jsxs("div",{className:"flex items-center mt-1 text-2xl font-bold text-red-600",children:[c.jsx(eo,{className:"h-5 w-5 mr-1"}),"ERROR"]}):c.jsx("p",{className:"mt-1 text-4xl font-extrabold text-[rgb(var(--color-text))]",children:j.value.toLocaleString()}),T&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:j.errorMessage})]})]},j.key)},d=j=>{const P=j.icon,T=j.error||j.value==="Error",A=!T&&typeof j.value!="number"&&typeof j.value!="string"&&"list"in j.value?j.value.list:[],B=j.key==="recently_online";return c.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full",children:[c.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-4 border-b pb-2 border-[rgb(var(--color-border))]",children:[c.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),T?c.jsxs("div",{className:"text-red-500 flex items-center",children:[c.jsx(eo,{className:"h-4 w-4 mr-1"})," ",j.errorMessage||"Error fetching list."]}):A.length===0?c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"No users found."}):c.jsx("ul",{className:"space-y-3",children:A.map((Q,M)=>c.jsxs("li",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:Q.avatar_url||`https://placehold.co/40x40/60A5FA/FFFFFF?text=${Q.display_name.charAt(0)}`,alt:`${Q.username}'s avatar`,className:"w-8 h-8 rounded-full object-cover flex-shrink-0",onError:W=>{W.target.onerror=null,W.target.src=`https://placehold.co/40x40/60A5FA/FFFFFF?text=${Q.display_name.charAt(0)}`}}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-[rgb(var(--color-text))] truncate",children:Q.display_name}),c.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate",children:["@",Q.username]})]})]}),c.jsx("p",{className:"text-xs font-semibold text-[rgb(var(--color-primary))] flex-shrink-0 ml-2",children:Am(B?Q.last_seen:Q.created_at)})]},Q.id))})]},j.key)},h=j=>{const P=j.icon,T=j.error||j.value==="Error",B=!T&&typeof j.value!="number"&&typeof j.value!="string"&&"profile"in j.value?j.value.profile:null;return T?c.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-red-50 border border-red-200",children:[c.jsxs("h3",{className:"text-sm font-medium text-red-800 uppercase tracking-wider flex items-center mb-4",children:[c.jsx(eo,{className:"h-4 w-4 mr-2"})," ",j.label]}),c.jsx("p",{className:"text-red-600",children:j.errorMessage||"Failed to fetch top profile."})]},j.key):B?c.jsxs("div",{className:"p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center",children:[c.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),c.jsx(Ru,{className:"h-6 w-6 text-[rgb(var(--color-primary))]"})]}),c.jsxs("div",{className:"flex items-center space-x-6 p-4 rounded-lg bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))]",children:[c.jsx("img",{src:B.avatar_url,alt:`${B.username}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-4 border-[rgb(var(--color-accent))]",onError:Q=>{Q.target.onerror=null,Q.target.src=`https://placehold.co/64x64/60A5FA/FFFFFF?text=${B.display_name.charAt(0)}`}}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:B.display_name}),c.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",B.username]}),c.jsxs("p",{className:"mt-1 text-3xl font-extrabold text-[rgb(var(--color-text))]",children:[B.follower_count?B.follower_count.toLocaleString():"N/A",c.jsx("span",{className:"ml-2 text-base font-normal text-[rgb(var(--color-primary))]",children:"Followers"})]})]})]})]},j.key):null},p=j=>{const P=j.icon;return j.error||j.value==="Error"?c.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-red-50 border border-red-200 h-full",children:[c.jsxs("h4",{className:"text-xs font-medium text-red-800 uppercase tracking-wider flex items-center mb-1",children:[c.jsx(eo,{className:"h-3 w-3 mr-1"})," ",j.label]}),c.jsx("p",{className:"text-red-600 text-sm",children:j.errorMessage||"Failed to fetch time."})]},j.key):c.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full flex flex-col justify-center",children:[c.jsxs("h4",{className:"text-xs font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-1",children:[c.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),c.jsx("p",{className:"text-base font-bold text-[rgb(var(--color-text))] break-words",children:j.value})]},j.key)},g=e.filter(j=>j.type==="count"),x=e.filter(j=>j.type==="activity"),y=e.find(j=>j.type==="highest_follower"),b=e.find(j=>j.type==="time_since_launch"),w=e.find(j=>j.type==="recent_users"),N=e.find(j=>j.type==="recent_online");return c.jsxs("div",{className:"max-w-6xl bg-[rgb(var(--color-background))] mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex items-center mb-10",children:[c.jsx("h2",{className:"text-4xl font-extrabold text-[rgb(var(--color-text))] tracking-tight",children:"Platform Statistics"}),c.jsx("p",{className:"ml-3 mt-1 text-lg text-[rgb(var(--color-text-secondary))]",children:"Database counts and user activity."})]}),n?c.jsxs("div",{className:"col-span-full flex justify-center items-center py-20",children:[c.jsx(ty,{className:"h-8 w-8 animate-spin text-[rgb(var(--color-primary))]"}),c.jsx("span",{className:"ml-3 text-lg text-[rgb(var(--color-text-secondary))]",children:"Loading Platform Stats..."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(Ru,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Community & Recent Activity"]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[c.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6",children:[y&&h(y),b&&p(b)]}),w&&c.jsx("div",{className:"lg:col-span-1",children:d(w)}),N&&c.jsx("div",{className:"lg:col-span-1",children:d(N)})]}),c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(fs,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," User Activity Counts"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-10",children:x.map(u)}),c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(Kv,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Core Database Entries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:g.map(u)})]})]})},E6=({show:e,onClose:t,setView:n,view:i})=>{const o=[{icon:c.jsx(pg,{size:20}),label:"Home",view:"feed",onClick:()=>{n("feed"),t()}},{icon:c.jsx(tl,{size:20}),label:"Groups",view:"groups",onClick:()=>{n("groups"),t()}},{icon:c.jsx(vg,{size:20}),label:"Forums",view:"forums",onClick:()=>{n("forums"),t()}},{icon:c.jsx(fg,{size:20}),label:"Status Archive",view:"archive",onClick:()=>{n("archive"),t()}}];return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`fixed inset-0 bg-black/50 z-[98] transition-opacity ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),c.jsx("div",{className:`fixed left-0 top-0 h-full w-64 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] z-[99] ${e?"translate-x-0":"-translate-x-full"} transition-transform duration-300 shadow-lg flex-shrink-0`,children:c.jsx("nav",{className:"p-4 space-y-2 h-full flex flex-col",children:o.map((a,u)=>c.jsxs("button",{onClick:a.onClick,className:`w-full flex items-center space-x-3 p-3 rounded-lg transition ${i===a.view?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))] font-bold":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.icon,c.jsx("span",{children:a.label})]},u))})})]})};Hm();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wo.apply(this,arguments)}var hs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hs||(hs={}));const Mm="popstate";function T6(e){e===void 0&&(e={});function t(i,o){let{pathname:a,search:u,hash:d}=i.location;return Ku("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:P1(o)}return I6(t,n,null,e)}function Yr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function P6(e,t){{typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L6(){return Math.random().toString(36).substr(2,8)}function Om(e,t){return{usr:e.state,key:e.key,idx:t}}function Ku(e,t,n,i){return n===void 0&&(n=null),wo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?al(t):t,{state:n,key:t&&t.key||i||L6()})}function P1(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function al(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function I6(e,t,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d=hs.Pop,h=null,p=g();p==null&&(p=0,u.replaceState(wo({},u.state,{idx:p}),""));function g(){return(u.state||{idx:null}).idx}function x(){d=hs.Pop;let j=g(),P=j==null?null:j-p;p=j,h&&h({action:d,location:N.location,delta:P})}function y(j,P){d=hs.Push;let T=Ku(N.location,j,P);p=g()+1;let A=Om(T,p),B=N.createHref(T);try{u.pushState(A,"",B)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(B)}a&&h&&h({action:d,location:N.location,delta:1})}function b(j,P){d=hs.Replace;let T=Ku(N.location,j,P);p=g();let A=Om(T,p),B=N.createHref(T);u.replaceState(A,"",B),a&&h&&h({action:d,location:N.location,delta:0})}function w(j){let P=o.location.origin!=="null"?o.location.origin:o.location.href,T=typeof j=="string"?j:P1(j);return T=T.replace(/ $/,"%20"),Yr(P,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,P)}let N={get action(){return d},get location(){return e(o,u)},listen(j){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Mm,x),h=j,()=>{o.removeEventListener(Mm,x),h=null}},createHref(j){return t(o,j)},createURL:w,encodeLocation(j){let P=w(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:y,replace:b,go(j){return u.go(j)}};return N}var zm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(zm||(zm={}));function A6(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const R6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M6=e=>R6.test(e);function O6(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:o=""}=typeof e=="string"?al(e):e,a;if(n)if(M6(n))a=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),P6(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?a=Dm(n.substring(1),"/"):a=Dm(n,t)}else a=t;return{pathname:a,search:U6(i),hash:B6(o)}}function Dm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function xu(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z6(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function D6(e,t){let n=z6(e);return t?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function $6(e,t,n,i){i===void 0&&(i=!1);let o;typeof e=="string"?o=al(e):(o=wo({},e),Yr(!o.pathname||!o.pathname.includes("?"),xu("?","pathname","search",o)),Yr(!o.pathname||!o.pathname.includes("#"),xu("#","pathname","hash",o)),Yr(!o.search||!o.search.includes("#"),xu("#","search","hash",o)));let a=e===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=n;else{let x=t.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),x-=1;o.pathname=y.join("/")}d=x>=0?t[x]:"/"}let h=O6(o,d),p=u&&u!=="/"&&u.endsWith("/"),g=(a||u===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const F6=e=>e.join("/").replace(/\/\/+/g,"/"),U6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,L1=["post","put","patch","delete"];new Set(L1);const q6=["get",...L1];new Set(q6);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ya.apply(this,arguments)}const I1=_.createContext(null),kd=_.createContext(null),_d=_.createContext(null),jd=_.createContext({outlet:null,matches:[],isDataRoute:!1});function Sd(){return _.useContext(_d)!=null}function A1(){return Sd()||Yr(!1),_.useContext(_d).location}function R1(e){_.useContext(kd).static||_.useLayoutEffect(e)}function M1(){let{isDataRoute:e}=_.useContext(jd);return e?K6():V6()}function V6(){Sd()||Yr(!1);let e=_.useContext(I1),{basename:t,future:n,navigator:i}=_.useContext(kd),{matches:o}=_.useContext(jd),{pathname:a}=A1(),u=JSON.stringify(D6(o,n.v7_relativeSplatPath)),d=_.useRef(!1);return R1(()=>{d.current=!0}),_.useCallback(function(p,g){if(g===void 0&&(g={}),!d.current)return;if(typeof p=="number"){i.go(p);return}let x=$6(p,JSON.parse(u),a,g.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:F6([t,x.pathname])),(g.replace?i.replace:i.push)(x,g.state,g)},[t,i,u,a,e])}var O1=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(O1||{}),z1=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(z1||{});function H6(e){let t=_.useContext(I1);return t||Yr(!1),t}function W6(e){let t=_.useContext(jd);return t||Yr(!1),t}function G6(e){let t=W6(),n=t.matches[t.matches.length-1];return n.route.id||Yr(!1),n.route.id}function K6(){let{router:e}=H6(O1.UseNavigateStable),t=G6(z1.UseNavigateStable),n=_.useRef(!1);return R1(()=>{n.current=!0}),_.useCallback(function(o,a){a===void 0&&(a={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Ya({fromRouteId:t},a)))},[e,t])}function Q6(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function J6(e){let{basename:t="/",children:n=null,location:i,navigationType:o=hs.Pop,navigator:a,static:u=!1,future:d}=e;Sd()&&Yr(!1);let h=t.replace(/^\/*/,"/"),p=_.useMemo(()=>({basename:h,navigator:a,static:u,future:Ya({v7_relativeSplatPath:!1},d)}),[h,d,a,u]);typeof i=="string"&&(i=al(i));let{pathname:g="/",search:x="",hash:y="",state:b=null,key:w="default"}=i,N=_.useMemo(()=>{let j=A6(g,h);return j==null?null:{location:{pathname:j,search:x,hash:y,state:b,key:w},navigationType:o}},[h,g,x,y,b,w,o]);return N==null?null:_.createElement(kd.Provider,{value:p},_.createElement(_d.Provider,{children:n,value:N}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Y6="6";try{window.__reactRouterVersion=Y6}catch{}const X6="startTransition",$m=N2[X6];function Z6(e){let{basename:t,children:n,future:i,window:o}=e,a=_.useRef();a.current==null&&(a.current=T6({window:o,v5Compat:!0}));let u=a.current,[d,h]=_.useState({action:u.action,location:u.location}),{v7_startTransition:p}=i||{},g=_.useCallback(x=>{p&&$m?$m(()=>h(x)):h(x)},[h,p]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.useEffect(()=>Q6(i),[i]),_.createElement(J6,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:u,future:i})}var Fm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fm||(Fm={}));var Um;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Um||(Um={}));const e8=e=>{switch(e){case"like":return c.jsx(fi,{size:16,className:"text-red-500 fill-red-500"});case"comment":return c.jsx(mi,{size:16,className:"text-blue-500 fill-blue-500"});case"follow":return c.jsx(_g,{size:16,className:"text-green-500"});default:return c.jsx(hy,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})}},t8=e=>{switch(e.type){case"like":return"liked your post.";case"comment":return"commented on your post.";case"follow":return"started following you.";default:return"sent you a notification."}},r8=({onClose:e})=>{const{user:t}=St(),n=M1(),[i,o]=_.useState([]),[a,u]=_.useState(!1),[d,h]=_.useState(!1);_.useEffect(()=>{if(!t)return;u(!0);const x=async()=>{const{data:b,error:w}=await H.from("notifications").select(`
          *,
          actor:profiles!notifications_actor_id_fkey (username, display_name, avatar_url)
        `).eq("recipient_id",t.id).order("created_at",{ascending:!1}).limit(50);w?console.error("Error fetching notifications:",w):o(b||[]),u(!1)};x();const y=H.channel(`notifications-${t.id}`);return y.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},()=>{x()}),y.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(w=>w.map(N=>N.id===b.new.id?{...N,is_read:b.new.is_read}:N))}),y.on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(w=>w.filter(N=>N.id!==b.old.id))}),y.subscribe(),()=>{H.removeChannel(y)}},[t]);const p=async()=>{if(!t||d)return;h(!0);const{error:x}=await H.from("notifications").delete().eq("recipient_id",t.id).eq("is_read",!0);x?console.error("Error clearing notifications:",x):o(y=>y.filter(b=>!b.is_read)),h(!1)},g=x=>{x.is_read||o(y=>y.map(b=>b.id===x.id?{...b,is_read:!0}:b)),e(),x.type==="follow"&&x.actor?.username&&n(`/?${x.actor.username}`)};return c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm h-full bg-[rgb(var(--color-background))] shadow-xl overflow-y-auto",onClick:x=>x.stopPropagation(),children:[c.jsxs("div",{className:"sticky top-0 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center z-10",children:[c.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"Notifications"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:p,disabled:d||!i.some(x=>x.is_read),className:"text-sm p-1 px-3 rounded-full text-red-600 border border-red-600 hover:bg-red-600 hover:text-[rgb(var(--color-text-on-primary))] transition disabled:opacity-50",title:"Clear all seen notifications",children:[c.jsx(vo,{size:16,className:"inline mr-1"}),d?"Clearing...":"Clear All Seen"]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text))]",children:c.jsx(et,{size:24})})]})]}),c.jsxs("div",{className:"flex flex-col",children:[a&&c.jsx("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:"Loading notifications..."}),!a&&i.length===0&&c.jsx("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:"You're all caught up! No notifications."}),!a&&i.length>0&&c.jsx("div",{children:i.map(x=>c.jsxs("div",{onClick:()=>g(x),className:`flex items-start gap-4 p-3 border-b border-[rgb(var(--color-border))] cursor-pointer hover:bg-[rgb(var(--color-surface-hover))] transition ${x.is_read?"":"bg-[rgba(var(--color-primary),0.05)]"}`,children:[c.jsx("div",{className:"w-6 h-6 flex items-center justify-center pt-1",children:e8(x.type)}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-start gap-3",children:[c.jsx("img",{src:x.actor?.avatar_url||"/default-avatar.png",alt:x.actor?.username||"user",className:"w-10 h-10 rounded-full object-cover",onClick:y=>{y.stopPropagation(),x.actor?.username&&(e(),n(`/?${x.actor.username}`))}}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-[rgb(var(--color-text))] break-words",children:[c.jsxs("span",{className:"font-bold cursor-pointer hover:underline",onClick:y=>{y.stopPropagation(),x.actor?.username&&(e(),n(`/?${x.actor.username}`))},children:[x.actor?.display_name||"User"," "]})," ",t8(x)]}),c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]\\",children:new Date(x.created_at).toLocaleDateString()})]})]})]},x.id))})]})]})})},Bm=["Gaming","Hobbies","Study","Trade","Reviews","Other"],n8=({setView:e})=>{const{user:t}=St(),[n,i]=_.useState("list"),[o,a]=_.useState(null),[u,d]=_.useState([]),[h,p]=_.useState(!1),[g,x]=_.useState(!0),y=async()=>{if(x(!0),!t)return;const{data:w}=await H.from("groups").select("*").order("created_at",{ascending:!1}),{data:N}=await H.from("group_members").select("group_id").eq("user_id",t.id),j=new Set(N?.map(T=>T.group_id)),P=(w||[]).filter(T=>T.type!=="secret"||j.has(T.id)||T.owner_id===t.id).map(T=>({...T,is_member:j.has(T.id)}));d(P),x(!1)};_.useEffect(()=>{y()},[t]);const b=w=>{a(w),i("detail")};return n==="detail"&&o?c.jsx(s8,{group:o,onBack:()=>{i("list"),a(null),y()}}):c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))] flex items-center gap-2",children:[c.jsx(tl,{className:"text-[rgb(var(--color-primary))]"})," Groups"]}),c.jsxs("button",{onClick:()=>p(!0),className:"bg-[rgb(var(--color-primary))] text-white px-4 py-2 rounded-full font-bold flex items-center gap-2 hover:opacity-90 transition",children:[c.jsx(el,{size:18})," Create Group"]})]}),g?c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"Loading groups..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.length===0&&c.jsx("div",{className:"col-span-full text-center text-[rgb(var(--color-text-secondary))]",children:"No groups found. Create one!"}),u.map(w=>c.jsxs("div",{onClick:()=>b(w),className:"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-xl overflow-hidden cursor-pointer hover:border-[rgb(var(--color-primary))] transition group-card",children:[c.jsxs("div",{className:"h-24 bg-[rgb(var(--color-surface-hover))] relative",children:[w.banner_url&&c.jsx("img",{src:w.banner_url,className:"w-full h-full object-cover",alt:"Banner"}),c.jsx("div",{className:"absolute -bottom-6 left-4",children:c.jsx("img",{src:w.icon_url||`https://ui-avatars.com/api/?name=${w.name}&background=random`,className:"w-12 h-12 rounded-xl border-4 border-[rgb(var(--color-surface))]",alt:"Icon"})})]}),c.jsxs("div",{className:"pt-8 p-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:w.name}),c.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))] font-medium",children:w.tag})]}),w.type==="private"&&c.jsx(xg,{size:16,className:"text-[rgb(var(--color-text-secondary))]"}),w.type==="secret"&&c.jsx(Qv,{size:16,className:"text-[rgb(var(--color-text-secondary))]"}),w.type==="public"&&c.jsx(Zv,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})]}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-2 line-clamp-2",children:w.description}),c.jsx("div",{className:"mt-4",children:w.is_member?c.jsx("span",{className:"text-sm text-green-500 font-bold flex items-center gap-1",children:"Member"}):c.jsx("span",{className:"text-sm text-[rgb(var(--color-primary))] font-bold",children:"View Group"})})]})]},w.id))]}),h&&c.jsx(i8,{onClose:()=>p(!1),onCreated:y})]})},s8=({group:e,onBack:t})=>{const{user:n}=St(),[i,o]=_.useState(e.is_member),[a,u]=_.useState([]),[d,h]=_.useState(!0),[p,g]=_.useState(""),[x,y]=_.useState(!1),b=async()=>{n&&(i?(await H.from("group_members").delete().match({group_id:e.id,user_id:n.id}),o(!1)):(await H.from("group_members").insert({group_id:e.id,user_id:n.id}),o(!0)))},w=async()=>{const{data:j}=await H.from("posts").select("*, profiles(*), groups(id, name, icon_url)").eq("group_id",e.id).order("created_at",{ascending:!1});u(j||[]),h(!1)};_.useEffect(()=>{w()},[e.id]);const N=async()=>{!n||!p.trim()||(y(!0),await H.from("posts").insert({user_id:n.id,content:p,group_id:e.id}),g(""),y(!1),w())};return c.jsxs("div",{className:"pb-20",children:[c.jsxs("div",{className:"relative bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))]",children:[c.jsxs("div",{className:"h-48 bg-[rgb(var(--color-surface-hover))] relative",children:[e.banner_url&&c.jsx("img",{src:e.banner_url,className:"w-full h-full object-cover",alt:"Banner"}),c.jsx("button",{onClick:t,className:"absolute top-4 left-4 bg-black/50 p-2 rounded-full text-white hover:bg-black/70",children:c.jsx(et,{size:20})})]}),c.jsxs("div",{className:"px-4 pb-4",children:[c.jsxs("div",{className:"relative -mt-12 mb-4 flex justify-between items-end",children:[c.jsx("img",{src:e.icon_url||`https://ui-avatars.com/api/?name=${e.name}&background=random`,className:"w-24 h-24 rounded-2xl border-4 border-[rgb(var(--color-surface))]",alt:"Icon"}),c.jsx("button",{onClick:b,className:`px-6 py-2 rounded-full font-bold transition ${i?"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))]":"bg-[rgb(var(--color-primary))] text-white"}`,children:i?"Joined":"Join Group"})]}),c.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:e.name}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mt-1",children:e.description}),c.jsxs("div",{className:"flex gap-2 mt-2 text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase",children:[c.jsxs("span",{children:[e.type," Group"]}),"  ",c.jsx("span",{children:e.tag})]})]})]}),c.jsxs("div",{className:"max-w-2xl mx-auto mt-4",children:[i&&c.jsxs("div",{className:"p-4 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-xl mb-4 mx-4 md:mx-0",children:[c.jsx("textarea",{value:p,onChange:j=>g(j.target.value),placeholder:`Post something in ${e.name}...`,className:"w-full bg-transparent outline-none text-[rgb(var(--color-text))]"}),c.jsx("div",{className:"flex justify-end mt-2",children:c.jsx("button",{onClick:N,disabled:x,className:"bg-[rgb(var(--color-primary))] text-white px-4 py-1.5 rounded-full text-sm font-bold",children:"Post"})})]}),d?c.jsx("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))]",children:"Loading posts..."}):a.length===0?c.jsx("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))]",children:"No posts yet. Be the first!"}):a.map(j=>c.jsx(uo,{post:j,currentUserId:n?.id,isLiked:!1,onLikeToggle:()=>{},onCommentUpdate:()=>{},onNavigateToProfile:()=>{}},j.id))]})]})},i8=({onClose:e,onCreated:t})=>{const{user:n}=St(),[i,o]=_.useState(""),[a,u]=_.useState(""),[d,h]=_.useState(Bm[0]),[p,g]=_.useState("public"),[x,y]=_.useState(null),[b,w]=_.useState(null),[N,j]=_.useState(!1),P=async T=>{if(T.preventDefault(),!n)return;j(!0);let A="",B="";if(x){const W=await ps(x,"posts");W&&(A=W.url)}if(b){const W=await ps(b,"posts");W&&(B=W.url)}const{data:Q,error:M}=await H.from("groups").insert({name:i,description:a,tag:d,type:p,owner_id:n.id,icon_url:A,banner_url:B}).select().single();Q?(await H.from("group_members").insert({group_id:Q.id,user_id:n.id,role:"admin"}),t(),e()):(console.error(M),alert("Failed to create group")),j(!1)};return c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h2",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Create New Group"}),c.jsx("button",{onClick:e,children:c.jsx(et,{className:"text-[rgb(var(--color-text))]"})})]}),c.jsxs("form",{onSubmit:P,className:"p-4 space-y-4 max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Group Name"}),c.jsx("input",{required:!0,value:i,onChange:T=>o(T.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Description"}),c.jsx("textarea",{required:!0,value:a,onChange:T=>u(T.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Category"}),c.jsx("select",{value:d,onChange:T=>h(T.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]",children:Bm.map(T=>c.jsx("option",{value:T,children:T},T))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Type"}),c.jsxs("select",{value:p,onChange:T=>g(T.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]",children:[c.jsx("option",{value:"public",children:"Public"}),c.jsx("option",{value:"private",children:"Private"}),c.jsx("option",{value:"secret",children:"Secret"})]})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Icon (Optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:T=>y(T.target.files?.[0]||null),className:"w-full text-xs text-[rgb(var(--color-text-secondary))]"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Banner (Optional)"}),c.jsx("input",{type:"file",accept:"image/*",onChange:T=>w(T.target.files?.[0]||null),className:"w-full text-xs text-[rgb(var(--color-text-secondary))]"})]})]}),c.jsx("button",{disabled:N,type:"submit",className:"w-full py-3 bg-[rgb(var(--color-primary))] text-white font-bold rounded-lg mt-4 disabled:opacity-50",children:N?"Creating...":"Create Group"})]})]})})},qm=["Gaming","Hobbies","Study","Trade","Reviews","Other"],o8=()=>{const{user:e}=St(),[t,n]=_.useState([]),[i,o]=_.useState("list"),[a,u]=_.useState(null),[d,h]=_.useState(null),[p,g]=_.useState(!1),x=async()=>{const{data:N}=await H.from("forums").select("*").order("created_at",{ascending:!1});n(N||[])};_.useEffect(()=>{x()},[]);const y=N=>{u(N),o("threads")},b=N=>{h(N),o("thread_detail")},w=()=>{o(i==="thread_detail"?"threads":"list")};return i==="list"?c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))] flex items-center gap-2",children:[c.jsx(vg,{className:"text-[rgb(var(--color-primary))]"})," Forums"]}),c.jsxs("button",{onClick:()=>g(!0),className:"bg-[rgb(var(--color-primary))] text-white px-4 py-2 rounded-full font-bold flex items-center gap-2",children:[c.jsx(el,{size:18})," New Forum"]})]}),c.jsx("div",{className:"space-y-4",children:t.map(N=>c.jsxs("div",{onClick:()=>y(N),className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))] hover:border-[rgb(var(--color-primary))] cursor-pointer transition",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("h3",{className:"font-bold text-xl text-[rgb(var(--color-text))]",children:N.name}),c.jsx("span",{className:"text-xs bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))] px-2 py-1 rounded-full h-fit",children:N.tag})]}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mt-2",children:N.description})]},N.id))}),p&&c.jsx(c8,{onClose:()=>g(!1),onCreated:x})]}):i==="threads"&&a?c.jsx(a8,{forum:a,onBack:w,onOpenThread:b}):i==="thread_detail"&&d?c.jsx(l8,{post:d,onBack:w}):null},a8=({forum:e,onBack:t,onOpenThread:n})=>{const{user:i}=St(),[o,a]=_.useState([]),[u,d]=_.useState(!1),h=async()=>{const{data:p}=await H.from("forum_posts").select("*, profiles(*)").eq("forum_id",e.id).order("created_at",{ascending:!1});a(p||[])};return _.useEffect(()=>{h()},[e.id]),c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[c.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))] mb-4",children:[c.jsx(Wa,{size:18})," Back to Forums"]}),c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border-b border-[rgb(var(--color-border))] mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:e.name}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:e.description})]}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Threads"}),c.jsx("button",{onClick:()=>d(!0),className:"bg-[rgb(var(--color-primary))] text-white px-4 py-2 rounded-full font-bold text-sm",children:"New Thread"})]}),c.jsxs("div",{className:"space-y-2",children:[o.length===0&&c.jsx("div",{className:"text-center py-8 text-[rgb(var(--color-text-secondary))]",children:"No threads yet."}),o.map(p=>c.jsxs("div",{onClick:()=>n(p),className:"bg-[rgb(var(--color-surface))] p-4 rounded-lg border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-surface-hover))] cursor-pointer transition",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:p.title}),c.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-[rgb(var(--color-text-secondary))]",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(nd,{size:12})," ",p.profiles.display_name]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Hv,{size:12})," ",new Date(p.created_at).toLocaleDateString()]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(mi,{size:12})," ",p.comment_count||0," comments"]})]})]},p.id))]}),u&&c.jsx(u8,{forumId:e.id,onClose:()=>d(!1),onCreated:h})]})},l8=({post:e,onBack:t})=>{const{user:n}=St(),[i,o]=_.useState([]),[a,u]=_.useState(""),d=async()=>{const{data:p}=await H.from("forum_comments").select("*, profiles(*)").eq("post_id",e.id).order("created_at");o(p||[])};_.useEffect(()=>{d()},[e.id]);const h=async()=>{!n||!a.trim()||(await H.from("forum_comments").insert({post_id:e.id,user_id:n.id,content:a}),await H.rpc("increment_forum_comment_count",{post_id:e.id}),u(""),d())};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-20",children:[c.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))] mb-4",children:[c.jsx(Wa,{size:18})," Back to Threads"]}),c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))] mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))] mb-4",children:e.title}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("img",{src:e.profiles.avatar_url||`https://ui-avatars.com/api/?name=${e.profiles.username}`,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-[rgb(var(--color-text))]",children:e.profiles.display_name}),c.jsx("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(e.created_at).toLocaleString()})]})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] whitespace-pre-wrap",children:e.content}),e.media_url&&c.jsx("img",{src:e.media_url,className:"mt-4 rounded-lg max-h-96"})]}),c.jsx("div",{className:"space-y-4 mb-20",children:i.map(p=>c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-4 rounded-lg border border-[rgb(var(--color-border))] flex gap-3",children:[c.jsx("img",{src:p.profiles.avatar_url,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("span",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:p.profiles.display_name}),c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(p.created_at).toLocaleString()})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] mt-1 text-sm",children:p.content})]})]},p.id))}),c.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-[rgb(var(--color-surface))] border-t border-[rgb(var(--color-border))]",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex gap-2",children:[c.jsx("input",{value:a,onChange:p=>u(p.target.value),placeholder:"Write a comment...",className:"flex-1 p-3 bg-[rgb(var(--color-background))] rounded-lg border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))]"}),c.jsx("button",{onClick:h,className:"bg-[rgb(var(--color-primary))] text-white px-6 rounded-lg font-bold",children:"Post"})]})})]})},c8=({onClose:e,onCreated:t})=>{const{user:n}=St(),[i,o]=_.useState(""),[a,u]=_.useState(""),[d,h]=_.useState(qm[0]),p=async g=>{g.preventDefault(),n&&(await H.from("forums").insert({name:i,description:a,tag:d,owner_id:n.id}),t(),e())};return c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-[100]",children:c.jsxs("form",{onSubmit:p,className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl w-full max-w-md space-y-4",children:[c.jsx("h2",{className:"font-bold text-[rgb(var(--color-text))]",children:"Create Forum"}),c.jsx("input",{required:!0,value:i,onChange:g=>o(g.target.value),placeholder:"Name",className:"w-full p-2 bg-[rgb(var(--color-background))] rounded border border-[rgb(var(--color-border))]"}),c.jsx("textarea",{required:!0,value:a,onChange:g=>u(g.target.value),placeholder:"Description",className:"w-full p-2 bg-[rgb(var(--color-background))] rounded border border-[rgb(var(--color-border))]"}),c.jsx("select",{value:d,onChange:g=>h(g.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] rounded border border-[rgb(var(--color-border))]",children:qm.map(g=>c.jsx("option",{value:g,children:g},g))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]",children:"Cancel"}),c.jsx("button",{type:"submit",className:"flex-1 py-2 bg-[rgb(var(--color-primary))] text-white rounded font-bold",children:"Create"})]})]})})},u8=({forumId:e,onClose:t,onCreated:n})=>{const{user:i}=St(),[o,a]=_.useState(""),[u,d]=_.useState(""),h=async p=>{p.preventDefault(),i&&(await H.from("forum_posts").insert({forum_id:e,user_id:i.id,title:o,content:u}),n(),t())};return c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-[100]",children:c.jsxs("form",{onSubmit:h,className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl w-full max-w-md space-y-4",children:[c.jsx("h2",{className:"font-bold text-[rgb(var(--color-text))]",children:"New Thread"}),c.jsx("input",{required:!0,value:o,onChange:p=>a(p.target.value),placeholder:"Title",className:"w-full p-2 bg-[rgb(var(--color-background))] rounded border border-[rgb(var(--color-border))]"}),c.jsx("textarea",{required:!0,value:u,onChange:p=>d(p.target.value),placeholder:"Content",className:"w-full p-2 bg-[rgb(var(--color-background))] rounded border border-[rgb(var(--color-border))] h-32"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2 border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]",children:"Cancel"}),c.jsx("button",{type:"submit",className:"flex-1 py-2 bg-[rgb(var(--color-primary))] text-white rounded font-bold",children:"Post"})]})]})})};var Vm={},d8="@vercel/analytics",f8="1.5.0",h8=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function D1(){return typeof window<"u"}function $1(){try{const e="production"}catch{}return"production"}function p8(e="auto"){if(e==="auto"){window.vam=$1();return}window.vam=e}function m8(){return(D1()?window.vam:$1())||"production"}function Qu(){return m8()==="development"}function g8(e){return e.scriptSrc?e.scriptSrc:Qu()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function x8(e={debug:!0}){var t;if(!D1())return;p8(e.mode),h8(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=g8(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const i=document.createElement("script");i.src=n,i.defer=!0,i.dataset.sdkn=d8+(e.framework?`/${e.framework}`:""),i.dataset.sdkv=f8,e.disableAutoTrack&&(i.dataset.disableAutoTrack="1"),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(i.dataset.dsn=e.dsn),i.onerror=()=>{const o=Qu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${o}`)},Qu()&&e.debug===!1&&(i.dataset.debug="false"),document.head.appendChild(i)}function v8({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function y8(){if(!(typeof process>"u"||typeof Vm>"u"))return Vm.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function b8(e){return _.useEffect(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),_.useEffect(()=>{x8({framework:e.framework||"react",basePath:e.basePath??y8(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),_.useEffect(()=>{e.route&&e.path&&v8({route:e.route,path:e.path})},[e.route,e.path]),null}const Ba="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",vu="0 0 784 1168",Cd=!1,w8=()=>{const[e,t]=_.useState("feed"),[n,i]=_.useState(!1),[o,a]=_.useState(""),[u,d]=_.useState(),[h,p]=_.useState(!1),[g,x]=_.useState(),[y,b]=_.useState(null),[w,N]=_.useState(null),[j,P]=_.useState("chats"),{user:T,profile:A,loading:B,signOut:Q}=St(),M=A1(),W=M1();_.useEffect(()=>{},[]);const[J,we]=_.useState(0),[z,$]=_.useState(0),[ee,ue]=_.useState(!1);if(_.useEffect(()=>{(async()=>{const G=M.pathname,ne=new URLSearchParams(M.search),S=G.match(/^\/invite\/([a-zA-Z0-9-]{3,20})$/),I=ne.get("invite"),K=S?S[1]:I;if(K&&T){b(K),t("messages"),P("gazebos"),S&&W("/message",{replace:!0});return}const E=G.match(/^\/gazebo\/?([a-zA-Z0-9-]{0,})?$/),ke=ne.get("gazebo"),de=E?E[1]:ke;if((de||E)&&T){P("gazebos"),de&&N(de),t("messages"),E&&window.history.replaceState({},"","/message");return}const fe=ne.get("user");if(G==="/message"&&fe&&T){const{data:Pe}=await H.from("profiles").select("*").eq("username",fe).single();Pe&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:Pe}))},500),t("messages");return}const Ae=ne.get("status");if(Ae&&T){const{data:Pe}=await H.from("statuses").select("*, profiles!user_id(*)").eq("id",Ae).single();if(Pe){const He={...Pe.profiles,statuses:[Pe],hasUnseen:!1};window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{users:[He],initialUserId:Pe.user_id}})),t("feed")}return}const Ce=ne.get("post");if(Ce){const{data:Pe}=await H.from("posts").select("user_id").eq("id",Ce).maybeSingle();if(Pe){d(Pe.user_id),x(Ce),t("profile");return}}const ae=ne.get("user");if(G==="/"&&ae){const{data:Pe}=await H.from("profiles").select("id").eq("username",ae.toLowerCase()).single();if(Pe){d(Pe.id),t("profile");return}}if(G==="/message"){t("messages");return}if(G==="/stats"){t("stats");return}const Te=G.match(/^\/([a-zA-Z0-9-]+)$/);if(Te){const Pe=Te[1];if(!["user","invite","gazebo","message","stats"].includes(Pe)){t("page"),a(Pe);return}}G==="/"&&(t("feed"),d(void 0),x(void 0))})()},[M.pathname,M.search,T,W]),_.useEffect(()=>{A?.theme&&(document.body.className=`theme-${A.theme}`)},[A?.theme]),_.useEffect(()=>{if(!T)return;const xe=async()=>{const{count:S}=await H.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",T.id).eq("read",!1);we(S||0);try{const{count:I}=await H.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",T.id).eq("is_read",!1);$(I||0)}catch{console.warn("Could not fetch notifications.")}};xe();const G=()=>{xe()};window.addEventListener("messagesRead",G);const ne=H.channel(`user-notifications:${T.id}`);return ne.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${T.id}`},S=>{S.new.read===!1&&we(I=>I+1)}),ne.on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`recipient_id=eq.${T.id}`},S=>{xe()}),ne.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${T.id}`},()=>{$(S=>S+1)}),ne.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${T.id}`},S=>{S.old.is_read===!1&&S.new.is_read===!0&&$(I=>Math.max(0,I-1))}),ne.subscribe(),()=>{H.removeChannel(ne),window.removeEventListener("messagesRead",G)}},[T]),_.useEffect(()=>{const xe=G=>{const ne=G.detail;H.from("profiles").select("username").eq("id",ne).single().then(({data:S})=>{S&&(W(`/?user=${S.username}`),d(ne),t("profile"))})};return window.addEventListener("navigateToProfile",xe),()=>window.removeEventListener("navigateToProfile",xe)},[W]),_.useEffect(()=>{if(!T)return;const xe=async()=>{await H.from("profiles").update({last_seen:new Date().toISOString()}).eq("id",T.id)};xe();const G=setInterval(xe,3e4);return()=>clearInterval(G)},[T]),B)return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex flex-col items-center justify-center text-2xl font-bold text-[rgb(var(--color-text))]",style:{background:"linear-gradient(to bottom right, rgba(var(--color-surface),0.05), rgba(var(--color-primary),0.05))"},children:[c.jsx("div",{className:"logo-loading-container w-[150px] h-auto relative mb-4",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:vu,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Ba,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Ba,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),"Loading..."]});if(e==="page"&&o)return c.jsx(g6,{slug:o});if(e==="stats")return c.jsx(Rm,{});if(!T||!A)return e==="profile"&&u?c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[c.jsx("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:vu,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>W("/"),children:c.jsx("path",{d:Ba,fill:"rgb(var(--color-primary))"})}),c.jsx("a",{href:"/",className:"text-[rgb(var(--color-primary))] hover:text-[rgba(var(--color-primary),0.8)] font-bold",children:" Back to Home"})]})}),c.jsx(Bp,{userId:u,initialPostId:g})]}):e==="messages"?c.jsx(Mp,{}):c.jsx(Mp,{});const te=xe=>{t("messages"),d(void 0),W(`/message?user=${xe.username}`),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:xe}))},100)},X=()=>{t("settings"),d(void 0)},ye=async()=>{ue(!0);try{await H.from("notifications").update({is_read:!0}).eq("recipient_id",T.id).eq("is_read",!1),$(0)}catch{console.warn("Could not mark notifications as read.")}};return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[c.jsx(E6,{show:n,onClose:()=>i(!1),setView:t,view:e}),c.jsx("nav",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:vu,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>i(!0),children:c.jsx("path",{d:Ba,fill:"rgb(var(--color-primary))"})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:c.jsx(Bn,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})}),c.jsx("button",{onClick:()=>{t("feed"),d(void 0),x(void 0),W("/")},className:`p-3 rounded-full transition ${e==="feed"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:c.jsx(pg,{size:20})}),c.jsxs("button",{onClick:()=>{t("messages"),d(void 0),x(void 0),W("/message")},className:`relative p-3 rounded-full transition ${e==="messages"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:[c.jsx(go,{size:20}),J>0&&c.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),c.jsxs("button",{onClick:ye,className:"relative p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:[c.jsx(Vv,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),z>0&&c.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),c.jsx("button",{onClick:()=>{A?.username&&(W(`/?user=${A.username}`),d(void 0),t("profile"))},className:`p-3 rounded-full transition ${e==="profile"&&!u?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:c.jsx(nd,{size:20})}),c.jsx("button",{onClick:Q,className:"p-3 rounded-full hover:bg-[rgba(239,68,68,0.1)] text-red-600 transition",children:c.jsx(ny,{size:20})})]})]})}),c.jsxs("main",{className:"h-[90vh] overflow-auto",children:[e==="feed"&&c.jsx(Ly,{}),e==="messages"&&c.jsx(Dy,{initialInviteCode:y,onInviteHandled:()=>b(null),initialTab:j,initialGazeboId:w}),e==="profile"&&c.jsx(Bp,{userId:u,initialPostId:g,onMessage:te,onSettings:!u||u===T.id?X:void 0},u||"own-profile"),e==="settings"&&c.jsx(Hy,{}),ee&&c.jsx(r8,{onClose:()=>ue(!1)}),h&&c.jsx(By,{onClose:()=>p(!1)}),e==="stats"&&T&&c.jsx(Rm,{}),e==="groups"&&c.jsx(n8,{setView:t}),e==="forums"&&c.jsx(o8,{}),e==="archive"&&c.jsx(Sy,{})]}),e!=="messages"&&c.jsxs("footer",{className:"text-center text-[rgb(var(--color-text-secondary))] text-xs py-4 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))]",children:[" Mux ",new Date().getFullYear()]}),Cd]})};function k8(){return c.jsx(Fv,{children:c.jsxs(Z6,{children:[c.jsx(w8,{}),c.jsx(Cy,{}),c.jsx(b8,{})]})})}I2.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(k8,{})}));export{dg as A,Xr as B,Pp as C,Ip as F,mg as I,ny as L,Ap as M,oy as P,C2 as R,wg as S,vo as T,tl as U,fy as V,et as X,M1 as a,el as b,Se as c,jg as d,cy as e,bg as f,Lu as g,gi as h,Gv as i,c as j,Xv as k,iy as l,li as m,yg as n,rd as o,ps as p,dy as q,_ as r,H as s,Xa as t,St as u};
