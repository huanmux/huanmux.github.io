const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calls-lVRuv2Sc.js","assets/bundler-D6m_h1tR.js","assets/Gazebos-xaSxw7KS.js"])))=>i.map(i=>d[i]);
function Cx(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ex(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var Vc={exports:{}},Xi={},Hc={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Px(){if(sp)return He;sp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function j(L,H,E){this.props=L,this.context=H,this.refs=C,this.updater=E||b}j.prototype.isReactComponent={},j.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function P(){}P.prototype=j.prototype;function A(L,H,E){this.props=L,this.context=H,this.refs=C,this.updater=E||b}var I=A.prototype=new P;I.constructor=A,w(I,j.prototype),I.isPureReactComponent=!0;var D=Array.isArray,G=Object.prototype.hasOwnProperty,z={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function K(L,H,E){var ke,fe={},pe=null,Pe=null;if(H!=null)for(ke in H.ref!==void 0&&(Pe=H.ref),H.key!==void 0&&(pe=""+H.key),H)G.call(H,ke)&&!J.hasOwnProperty(ke)&&(fe[ke]=H[ke]);var _e=arguments.length-2;if(_e===1)fe.children=E;else if(1<_e){for(var ne=Array(_e),Ne=0;Ne<_e;Ne++)ne[Ne]=arguments[Ne+2];fe.children=ne}if(L&&L.defaultProps)for(ke in _e=L.defaultProps,_e)fe[ke]===void 0&&(fe[ke]=_e[ke]);return{$$typeof:e,type:L,key:pe,ref:Pe,props:fe,_owner:z.current}}function oe(L,H){return{$$typeof:e,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function $(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(E){return H[E]})}var Z=/\/+/g;function ue(L,H){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):H.toString(36)}function re(L,H,E,ke,fe){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var Pe=!1;if(L===null)Pe=!0;else switch(pe){case"string":case"number":Pe=!0;break;case"object":switch(L.$$typeof){case e:case t:Pe=!0}}if(Pe)return Pe=L,fe=fe(Pe),L=ke===""?"."+ue(Pe,0):ke,D(fe)?(E="",L!=null&&(E=L.replace(Z,"$&/")+"/"),re(fe,H,E,"",function(Ne){return Ne})):fe!=null&&(O(fe)&&(fe=oe(fe,E+(!fe.key||Pe&&Pe.key===fe.key?"":(""+fe.key).replace(Z,"$&/")+"/")+L)),H.push(fe)),1;if(Pe=0,ke=ke===""?".":ke+":",D(L))for(var _e=0;_e<L.length;_e++){pe=L[_e];var ne=ke+ue(pe,_e);Pe+=re(pe,H,E,ne,fe)}else if(ne=y(L),typeof ne=="function")for(L=ne.call(L),_e=0;!(pe=L.next()).done;)pe=pe.value,ne=ke+ue(pe,_e++),Pe+=re(pe,H,E,ne,fe);else if(pe==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Pe}function ee(L,H,E){if(L==null)return L;var ke=[],fe=0;return re(L,ke,"","",function(pe){return H.call(E,pe,fe++)}),ke}function ve(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(E){(L._status===0||L._status===-1)&&(L._status=1,L._result=E)},function(E){(L._status===0||L._status===-1)&&(L._status=2,L._result=E)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var Se={current:null},X={transition:null},ae={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:X,ReactCurrentOwner:z};function S(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:ee,forEach:function(L,H,E){ee(L,function(){H.apply(this,arguments)},E)},count:function(L){var H=0;return ee(L,function(){H++}),H},toArray:function(L){return ee(L,function(H){return H})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},He.Component=j,He.Fragment=n,He.Profiler=o,He.PureComponent=A,He.StrictMode=i,He.Suspense=h,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,He.act=S,He.cloneElement=function(L,H,E){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=w({},L.props),fe=L.key,pe=L.ref,Pe=L._owner;if(H!=null){if(H.ref!==void 0&&(pe=H.ref,Pe=z.current),H.key!==void 0&&(fe=""+H.key),L.type&&L.type.defaultProps)var _e=L.type.defaultProps;for(ne in H)G.call(H,ne)&&!J.hasOwnProperty(ne)&&(ke[ne]=H[ne]===void 0&&_e!==void 0?_e[ne]:H[ne])}var ne=arguments.length-2;if(ne===1)ke.children=E;else if(1<ne){_e=Array(ne);for(var Ne=0;Ne<ne;Ne++)_e[Ne]=arguments[Ne+2];ke.children=_e}return{$$typeof:e,type:L.type,key:fe,ref:pe,props:ke,_owner:Pe}},He.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},He.createElement=K,He.createFactory=function(L){var H=K.bind(null,L);return H.type=L,H},He.createRef=function(){return{current:null}},He.forwardRef=function(L){return{$$typeof:d,render:L}},He.isValidElement=O,He.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:ve}},He.memo=function(L,H){return{$$typeof:p,type:L,compare:H===void 0?null:H}},He.startTransition=function(L){var H=X.transition;X.transition={};try{L()}finally{X.transition=H}},He.unstable_act=S,He.useCallback=function(L,H){return Se.current.useCallback(L,H)},He.useContext=function(L){return Se.current.useContext(L)},He.useDebugValue=function(){},He.useDeferredValue=function(L){return Se.current.useDeferredValue(L)},He.useEffect=function(L,H){return Se.current.useEffect(L,H)},He.useId=function(){return Se.current.useId()},He.useImperativeHandle=function(L,H,E){return Se.current.useImperativeHandle(L,H,E)},He.useInsertionEffect=function(L,H){return Se.current.useInsertionEffect(L,H)},He.useLayoutEffect=function(L,H){return Se.current.useLayoutEffect(L,H)},He.useMemo=function(L,H){return Se.current.useMemo(L,H)},He.useReducer=function(L,H,E){return Se.current.useReducer(L,H,E)},He.useRef=function(L){return Se.current.useRef(L)},He.useState=function(L){return Se.current.useState(L)},He.useSyncExternalStore=function(L,H,E){return Se.current.useSyncExternalStore(L,H,E)},He.useTransition=function(){return Se.current.useTransition()},He.version="18.3.1",He}var ip;function Zu(){return ip||(ip=1,Hc.exports=Px()),Hc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op;function Tx(){if(op)return Xi;op=1;var e=Zu(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,p){var m,g={},y=null,b=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(m in h)i.call(h,m)&&!l.hasOwnProperty(m)&&(g[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:t,type:d,key:y,ref:b,props:g,_owner:o.current}}return Xi.Fragment=n,Xi.jsx=u,Xi.jsxs=u,Xi}var ap;function Lx(){return ap||(ap=1,Vc.exports=Tx()),Vc.exports}var a=Lx(),k=Zu();const Ix=tl(k),Ax=Cx({__proto__:null,default:Ix},[k]);var La={},Wc={exports:{}},fr={},Gc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function Rx(){return lp||(lp=1,(function(e){function t(X,ae){var S=X.length;X.push(ae);e:for(;0<S;){var L=S-1>>>1,H=X[L];if(0<o(H,ae))X[L]=ae,X[S]=H,S=L;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ae=X[0],S=X.pop();if(S!==ae){X[0]=S;e:for(var L=0,H=X.length,E=H>>>1;L<E;){var ke=2*(L+1)-1,fe=X[ke],pe=ke+1,Pe=X[pe];if(0>o(fe,S))pe<H&&0>o(Pe,fe)?(X[L]=Pe,X[pe]=S,L=pe):(X[L]=fe,X[ke]=S,L=ke);else if(pe<H&&0>o(Pe,S))X[L]=Pe,X[pe]=S,L=pe;else break e}}return ae}function o(X,ae){var S=X.sortIndex-ae.sortIndex;return S!==0?S:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],p=[],m=1,g=null,y=3,b=!1,w=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(X){for(var ae=n(p);ae!==null;){if(ae.callback===null)i(p);else if(ae.startTime<=X)i(p),ae.sortIndex=ae.expirationTime,t(h,ae);else break;ae=n(p)}}function D(X){if(C=!1,I(X),!w)if(n(h)!==null)w=!0,ve(G);else{var ae=n(p);ae!==null&&Se(D,ae.startTime-X)}}function G(X,ae){w=!1,C&&(C=!1,P(K),K=-1),b=!0;var S=y;try{for(I(ae),g=n(h);g!==null&&(!(g.expirationTime>ae)||X&&!$());){var L=g.callback;if(typeof L=="function"){g.callback=null,y=g.priorityLevel;var H=L(g.expirationTime<=ae);ae=e.unstable_now(),typeof H=="function"?g.callback=H:g===n(h)&&i(h),I(ae)}else i(h);g=n(h)}if(g!==null)var E=!0;else{var ke=n(p);ke!==null&&Se(D,ke.startTime-ae),E=!1}return E}finally{g=null,y=S,b=!1}}var z=!1,J=null,K=-1,oe=5,O=-1;function $(){return!(e.unstable_now()-O<oe)}function Z(){if(J!==null){var X=e.unstable_now();O=X;var ae=!0;try{ae=J(!0,X)}finally{ae?ue():(z=!1,J=null)}}else z=!1}var ue;if(typeof A=="function")ue=function(){A(Z)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ee=re.port2;re.port1.onmessage=Z,ue=function(){ee.postMessage(null)}}else ue=function(){j(Z,0)};function ve(X){J=X,z||(z=!0,ue())}function Se(X,ae){K=j(function(){X(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,ve(G))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(X){switch(y){case 1:case 2:case 3:var ae=3;break;default:ae=y}var S=y;y=ae;try{return X()}finally{y=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var S=y;y=X;try{return ae()}finally{y=S}},e.unstable_scheduleCallback=function(X,ae,S){var L=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?L+S:L):S=L,X){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=S+H,X={id:m++,callback:ae,priorityLevel:X,startTime:S,expirationTime:H,sortIndex:-1},S>L?(X.sortIndex=S,t(p,X),n(h)===null&&X===n(p)&&(C?(P(K),K=-1):C=!0,Se(D,S-L))):(X.sortIndex=H,t(h,X),w||b||(w=!0,ve(G))),X},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(X){var ae=y;return function(){var S=y;y=ae;try{return X.apply(this,arguments)}finally{y=S}}}})(Kc)),Kc}var cp;function zx(){return cp||(cp=1,Gc.exports=Rx()),Gc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function Mx(){if(up)return fr;up=1;var e=Zu(),t=zx();function n(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(r){return h.call(g,r)?!0:h.call(m,r)?!1:p.test(r)?g[r]=!0:(m[r]=!0,!1)}function b(r,s,c,f){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function w(r,s,c,f){if(s===null||typeof s>"u"||b(r,s,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(r,s,c,f,x,v,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=x,this.mustUseProperty=c,this.propertyName=r,this.type=s,this.sanitizeURL=v,this.removeEmptyString=_}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){j[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];j[s]=new C(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){j[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){j[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){j[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){j[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){j[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){j[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){j[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function A(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(P,A);j[s]=new C(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(P,A);j[s]=new C(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(P,A);j[s]=new C(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){j[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),j.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){j[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function I(r,s,c,f){var x=j.hasOwnProperty(s)?j[s]:null;(x!==null?x.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,c,x,f)&&(c=null),f||x===null?y(s)&&(c===null?r.removeAttribute(s):r.setAttribute(s,""+c)):x.mustUseProperty?r[x.propertyName]=c===null?x.type===3?!1:"":c:(s=x.attributeName,f=x.attributeNamespace,c===null?r.removeAttribute(s):(x=x.type,c=x===3||x===4&&c===!0?"":""+c,f?r.setAttributeNS(f,s,c):r.setAttribute(s,c))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),z=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),$=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),X=Symbol.iterator;function ae(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var S=Object.assign,L;function H(r){if(L===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+r}var E=!1;function ke(r,s){if(!r||E)return"";E=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var f=W}Reflect.construct(r,[],s)}else{try{s.call()}catch(W){f=W}r.call(s.prototype)}else{try{throw Error()}catch(W){f=W}r()}}catch(W){if(W&&f&&typeof W.stack=="string"){for(var x=W.stack.split(`
`),v=f.stack.split(`
`),_=x.length-1,T=v.length-1;1<=_&&0<=T&&x[_]!==v[T];)T--;for(;1<=_&&0<=T;_--,T--)if(x[_]!==v[T]){if(_!==1||T!==1)do if(_--,T--,0>T||x[_]!==v[T]){var R=`
`+x[_].replace(" at new "," at ");return r.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",r.displayName)),R}while(1<=_&&0<=T);break}}}finally{E=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?H(r):""}function fe(r){switch(r.tag){case 5:return H(r.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return r=ke(r.type,!1),r;case 11:return r=ke(r.type.render,!1),r;case 1:return r=ke(r.type,!0),r;default:return""}}function pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case J:return"Fragment";case z:return"Portal";case oe:return"Profiler";case K:return"StrictMode";case ue:return"Suspense";case re:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case $:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case Z:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ee:return s=r.displayName||null,s!==null?s:pe(r.type)||"Memo";case ve:s=r._payload,r=r._init;try{return pe(r(s))}catch{}}return null}function Pe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(s);case 8:return s===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function _e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ne(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ne(r){var s=ne(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),f=""+r[s];if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,v=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return x.call(this)},set:function(_){f=""+_,v.call(this,_)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(_){f=""+_},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Re(r){r._valueTracker||(r._valueTracker=Ne(r))}function qe(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return r&&(f=ne(r)?r.checked?"true":"false":r.value),r=f,r!==c?(s.setValue(r),!0):!1}function De(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function rt(r,s){var c=s.checked;return S({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function mt(r,s){var c=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;c=_e(s.value!=null?s.value:c),r._wrapperState={initialChecked:f,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ye(r,s){s=s.checked,s!=null&&I(r,"checked",s,!1)}function Ct(r,s){Ye(r,s);var c=_e(s.value),f=s.type;if(c!=null)f==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?nt(r,s.type,c):s.hasOwnProperty("defaultValue")&&nt(r,s.type,_e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Tt(r,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,c||s===r.value||(r.value=s),r.defaultValue=s}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function nt(r,s,c){(s!=="number"||De(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var Lt=Array.isArray;function yt(r,s,c,f){if(r=r.options,s){s={};for(var x=0;x<c.length;x++)s["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=s.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&f&&(r[c].defaultSelected=!0)}else{for(c=""+_e(c),s=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,f&&(r[x].defaultSelected=!0);return}s!==null||r[x].disabled||(s=r[x])}s!==null&&(s.selected=!0)}}function de(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return S({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function bt(r,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(n(92));if(Lt(c)){if(1<c.length)throw Error(n(93));c=c[0]}s=c}s==null&&(s=""),c=s}r._wrapperState={initialValue:_e(c)}}function wt(r,s){var c=_e(s.value),f=_e(s.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),s.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),f!=null&&(r.defaultValue=""+f)}function sr(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Y(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Y(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ae,Fe=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,f,x){MSApp.execUnsafeLocalFunction(function(){return r(s,c,f,x)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ae.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ye(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(r){jt.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ht[s]=ht[r]})});function st(r,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||ht.hasOwnProperty(r)&&ht[r]?(""+s).trim():s+"px"}function mr(r,s){r=r.style;for(var c in s)if(s.hasOwnProperty(c)){var f=c.indexOf("--")===0,x=st(c,s[c],f);c==="float"&&(c="cssFloat"),f?r.setProperty(c,x):r[c]=x}}var gr=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(r,s){if(s){if(gr[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Ot(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ve=null;function Ke(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ot=null,ir=null,Zt=null;function qr(r){if(r=Oi(r)){if(typeof ot!="function")throw Error(n(280));var s=r.stateNode;s&&(s=Wo(s),ot(r.stateNode,r.type,s))}}function Dt(r){ir?Zt?Zt.push(r):Zt=[r]:ir=r}function gn(){if(ir){var r=ir,s=Zt;if(Zt=ir=null,qr(r),s)for(r=0;r<s.length;r++)qr(s[r])}}function Vr(r,s){return r(s)}function xn(){}var Hr=!1;function $t(r,s,c){if(Hr)return r(s,c);Hr=!0;try{return Vr(r,s,c)}finally{Hr=!1,(ir!==null||Zt!==null)&&(xn(),gn())}}function kt(r,s){var c=r.stateNode;if(c===null)return null;var f=Wo(c);if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,s,typeof c));return c}var Wr=!1;if(d)try{var or={};Object.defineProperty(or,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Wr=!1}function Kn(r,s,c,f,x,v,_,T,R){var W=Array.prototype.slice.call(arguments,3);try{s.apply(c,W)}catch(ie){this.onError(ie)}}var xr=!1,vn=null,Ir=!1,rn=null,ws={onError:function(r){xr=!0,vn=r}};function Qn(r,s,c,f,x,v,_,T,R){xr=!1,vn=null,Kn.apply(ws,arguments)}function yn(r,s,c,f,x,v,_,T,R){if(Qn.apply(this,arguments),xr){if(xr){var W=vn;xr=!1,vn=null}else throw Error(n(198));Ir||(Ir=!0,rn=W)}}function Ar(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function bn(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Jn(r){if(Ar(r)!==r)throw Error(n(188))}function ks(r){var s=r.alternate;if(!s){if(s=Ar(r),s===null)throw Error(n(188));return s!==r?null:r}for(var c=r,f=s;;){var x=c.return;if(x===null)break;var v=x.alternate;if(v===null){if(f=x.return,f!==null){c=f;continue}break}if(x.child===v.child){for(v=x.child;v;){if(v===c)return Jn(x),r;if(v===f)return Jn(x),s;v=v.sibling}throw Error(n(188))}if(c.return!==f.return)c=x,f=v;else{for(var _=!1,T=x.child;T;){if(T===c){_=!0,c=x,f=v;break}if(T===f){_=!0,f=x,c=v;break}T=T.sibling}if(!_){for(T=v.child;T;){if(T===c){_=!0,c=v,f=x;break}if(T===f){_=!0,f=v,c=x;break}T=T.sibling}if(!_)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:s}function _s(r){return r=ks(r),r!==null?js(r):null}function js(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=js(r);if(s!==null)return s;r=r.sibling}return null}var jr=t.unstable_scheduleCallback,wn=t.unstable_cancelCallback,Ss=t.unstable_shouldYield,Ns=t.unstable_requestPaint,at=t.unstable_now,U=t.unstable_getCurrentPriorityLevel,N=t.unstable_ImmediatePriority,q=t.unstable_UserBlockingPriority,Q=t.unstable_NormalPriority,te=t.unstable_LowPriority,be=t.unstable_IdlePriority,ce=null,me=null;function Ie(r){if(me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(ce,r,void 0,(r.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:Co,Wt=Math.log,It=Math.LN2;function Co(r){return r>>>=0,r===0?32:31-(Wt(r)/It|0)|0}var Eo=64,Po=4194304;function yi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function To(r,s){var c=r.pendingLanes;if(c===0)return 0;var f=0,x=r.suspendedLanes,v=r.pingedLanes,_=c&268435455;if(_!==0){var T=_&~x;T!==0?f=yi(T):(v&=_,v!==0&&(f=yi(v)))}else _=c&~x,_!==0?f=yi(_):v!==0&&(f=yi(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&x)===0&&(x=f&-f,v=s&-s,x>=v||x===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=c&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=f;0<s;)c=31-et(s),x=1<<c,f|=r[c],s&=~x;return f}function W1(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G1(r,s){for(var c=r.suspendedLanes,f=r.pingedLanes,x=r.expirationTimes,v=r.pendingLanes;0<v;){var _=31-et(v),T=1<<_,R=x[_];R===-1?((T&c)===0||(T&f)!==0)&&(x[_]=W1(T,s)):R<=s&&(r.expiredLanes|=T),v&=~T}}function dl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Rd(){var r=Eo;return Eo<<=1,(Eo&4194240)===0&&(Eo=64),r}function fl(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function bi(r,s,c){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-et(s),r[s]=c}function K1(r,s){var c=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<c;){var x=31-et(c),v=1<<x;s[x]=0,f[x]=-1,r[x]=-1,c&=~v}}function hl(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var f=31-et(c),x=1<<f;x&s|r[f]&s&&(r[f]|=s),c&=~x}}var tt=0;function zd(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Md,pl,Od,Dd,$d,ml=!1,Lo=[],kn=null,_n=null,jn=null,wi=new Map,ki=new Map,Sn=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(r,s){switch(r){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":wi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(s.pointerId)}}function _i(r,s,c,f,x,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[x]},s!==null&&(s=Oi(s),s!==null&&pl(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),r)}function J1(r,s,c,f,x){switch(s){case"focusin":return kn=_i(kn,r,s,c,f,x),!0;case"dragenter":return _n=_i(_n,r,s,c,f,x),!0;case"mouseover":return jn=_i(jn,r,s,c,f,x),!0;case"pointerover":var v=x.pointerId;return wi.set(v,_i(wi.get(v)||null,r,s,c,f,x)),!0;case"gotpointercapture":return v=x.pointerId,ki.set(v,_i(ki.get(v)||null,r,s,c,f,x)),!0}return!1}function Ud(r){var s=Yn(r.target);if(s!==null){var c=Ar(s);if(c!==null){if(s=c.tag,s===13){if(s=bn(c),s!==null){r.blockedOn=s,$d(r.priority,function(){Od(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Io(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=xl(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);Ve=f,c.target.dispatchEvent(f),Ve=null}else return s=Oi(c),s!==null&&pl(s),r.blockedOn=c,!1;s.shift()}return!0}function Bd(r,s,c){Io(r)&&c.delete(s)}function Y1(){ml=!1,kn!==null&&Io(kn)&&(kn=null),_n!==null&&Io(_n)&&(_n=null),jn!==null&&Io(jn)&&(jn=null),wi.forEach(Bd),ki.forEach(Bd)}function ji(r,s){r.blockedOn===s&&(r.blockedOn=null,ml||(ml=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y1)))}function Si(r){function s(x){return ji(x,r)}if(0<Lo.length){ji(Lo[0],r);for(var c=1;c<Lo.length;c++){var f=Lo[c];f.blockedOn===r&&(f.blockedOn=null)}}for(kn!==null&&ji(kn,r),_n!==null&&ji(_n,r),jn!==null&&ji(jn,r),wi.forEach(s),ki.forEach(s),c=0;c<Sn.length;c++)f=Sn[c],f.blockedOn===r&&(f.blockedOn=null);for(;0<Sn.length&&(c=Sn[0],c.blockedOn===null);)Ud(c),c.blockedOn===null&&Sn.shift()}var Cs=D.ReactCurrentBatchConfig,Ao=!0;function X1(r,s,c,f){var x=tt,v=Cs.transition;Cs.transition=null;try{tt=1,gl(r,s,c,f)}finally{tt=x,Cs.transition=v}}function Z1(r,s,c,f){var x=tt,v=Cs.transition;Cs.transition=null;try{tt=4,gl(r,s,c,f)}finally{tt=x,Cs.transition=v}}function gl(r,s,c,f){if(Ao){var x=xl(r,s,c,f);if(x===null)Rl(r,s,f,Ro,c),Fd(r,f);else if(J1(x,r,s,c,f))f.stopPropagation();else if(Fd(r,f),s&4&&-1<Q1.indexOf(r)){for(;x!==null;){var v=Oi(x);if(v!==null&&Md(v),v=xl(r,s,c,f),v===null&&Rl(r,s,f,Ro,c),v===x)break;x=v}x!==null&&f.stopPropagation()}else Rl(r,s,f,null,c)}}var Ro=null;function xl(r,s,c,f){if(Ro=null,r=Ke(f),r=Yn(r),r!==null)if(s=Ar(r),s===null)r=null;else if(c=s.tag,c===13){if(r=bn(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ro=r,null}function qd(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U()){case N:return 1;case q:return 4;case Q:case te:return 16;case be:return 536870912;default:return 16}default:return 16}}var Nn=null,vl=null,zo=null;function Vd(){if(zo)return zo;var r,s=vl,c=s.length,f,x="value"in Nn?Nn.value:Nn.textContent,v=x.length;for(r=0;r<c&&s[r]===x[r];r++);var _=c-r;for(f=1;f<=_&&s[c-f]===x[v-f];f++);return zo=x.slice(r,1<f?1-f:void 0)}function Mo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Oo(){return!0}function Hd(){return!1}function vr(r){function s(c,f,x,v,_){this._reactName=c,this._targetInst=x,this.type=f,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(c=r[T],this[T]=c?c(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Oo:Hd,this.isPropagationStopped=Hd,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),s}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yl=vr(Es),Ni=S({},Es,{view:0,detail:0}),e0=vr(Ni),bl,wl,Ci,Do=S({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ci&&(Ci&&r.type==="mousemove"?(bl=r.screenX-Ci.screenX,wl=r.screenY-Ci.screenY):wl=bl=0,Ci=r),bl)},movementY:function(r){return"movementY"in r?r.movementY:wl}}),Wd=vr(Do),t0=S({},Do,{dataTransfer:0}),r0=vr(t0),n0=S({},Ni,{relatedTarget:0}),kl=vr(n0),s0=S({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=vr(s0),o0=S({},Es,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),a0=vr(o0),l0=S({},Es,{data:0}),Gd=vr(l0),c0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f0(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=d0[r])?!!s[r]:!1}function _l(){return f0}var h0=S({},Ni,{key:function(r){if(r.key){var s=c0[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Mo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?u0[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(r){return r.type==="keypress"?Mo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Mo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),p0=vr(h0),m0=S({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kd=vr(m0),g0=S({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),x0=vr(g0),v0=S({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),y0=vr(v0),b0=S({},Do,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),w0=vr(b0),k0=[9,13,27,32],jl=d&&"CompositionEvent"in window,Ei=null;d&&"documentMode"in document&&(Ei=document.documentMode);var _0=d&&"TextEvent"in window&&!Ei,Qd=d&&(!jl||Ei&&8<Ei&&11>=Ei),Jd=" ",Yd=!1;function Xd(r,s){switch(r){case"keyup":return k0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ps=!1;function j0(r,s){switch(r){case"compositionend":return Zd(s);case"keypress":return s.which!==32?null:(Yd=!0,Jd);case"textInput":return r=s.data,r===Jd&&Yd?null:r;default:return null}}function S0(r,s){if(Ps)return r==="compositionend"||!jl&&Xd(r,s)?(r=Vd(),zo=vl=Nn=null,Ps=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qd&&s.locale!=="ko"?null:s.data;default:return null}}var N0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ef(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!N0[r.type]:s==="textarea"}function tf(r,s,c,f){Dt(f),s=qo(s,"onChange"),0<s.length&&(c=new yl("onChange","change",null,c,f),r.push({event:c,listeners:s}))}var Pi=null,Ti=null;function C0(r){bf(r,0)}function $o(r){var s=Rs(r);if(qe(s))return r}function E0(r,s){if(r==="change")return s}var rf=!1;if(d){var Sl;if(d){var Nl="oninput"in document;if(!Nl){var nf=document.createElement("div");nf.setAttribute("oninput","return;"),Nl=typeof nf.oninput=="function"}Sl=Nl}else Sl=!1;rf=Sl&&(!document.documentMode||9<document.documentMode)}function sf(){Pi&&(Pi.detachEvent("onpropertychange",of),Ti=Pi=null)}function of(r){if(r.propertyName==="value"&&$o(Ti)){var s=[];tf(s,Ti,r,Ke(r)),$t(C0,s)}}function P0(r,s,c){r==="focusin"?(sf(),Pi=s,Ti=c,Pi.attachEvent("onpropertychange",of)):r==="focusout"&&sf()}function T0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return $o(Ti)}function L0(r,s){if(r==="click")return $o(s)}function I0(r,s){if(r==="input"||r==="change")return $o(s)}function A0(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rr=typeof Object.is=="function"?Object.is:A0;function Li(r,s){if(Rr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var x=c[f];if(!h.call(s,x)||!Rr(r[x],s[x]))return!1}return!0}function af(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function lf(r,s){var c=af(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=s&&f>=s)return{node:c,offset:s-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=af(c)}}function cf(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?cf(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function uf(){for(var r=window,s=De();s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=De(r.document)}return s}function Cl(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function R0(r){var s=uf(),c=r.focusedElem,f=r.selectionRange;if(s!==c&&c&&c.ownerDocument&&cf(c.ownerDocument.documentElement,c)){if(f!==null&&Cl(c)){if(s=f.start,r=f.end,r===void 0&&(r=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(r,c.value.length);else if(r=(s=c.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var x=c.textContent.length,v=Math.min(f.start,x);f=f.end===void 0?v:Math.min(f.end,x),!r.extend&&v>f&&(x=f,f=v,v=x),x=lf(c,v);var _=lf(c,f);x&&_&&(r.rangeCount!==1||r.anchorNode!==x.node||r.anchorOffset!==x.offset||r.focusNode!==_.node||r.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(x.node,x.offset),r.removeAllRanges(),v>f?(r.addRange(s),r.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),r.addRange(s)))}}for(s=[],r=c;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)r=s[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var z0=d&&"documentMode"in document&&11>=document.documentMode,Ts=null,El=null,Ii=null,Pl=!1;function df(r,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Pl||Ts==null||Ts!==De(f)||(f=Ts,"selectionStart"in f&&Cl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ii&&Li(Ii,f)||(Ii=f,f=qo(El,"onSelect"),0<f.length&&(s=new yl("onSelect","select",null,s,c),r.push({event:s,listeners:f}),s.target=Ts)))}function Fo(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var Ls={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},Tl={},ff={};d&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Uo(r){if(Tl[r])return Tl[r];if(!Ls[r])return r;var s=Ls[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in ff)return Tl[r]=s[c];return r}var hf=Uo("animationend"),pf=Uo("animationiteration"),mf=Uo("animationstart"),gf=Uo("transitionend"),xf=new Map,vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(r,s){xf.set(r,s),l(s,[r])}for(var Ll=0;Ll<vf.length;Ll++){var Il=vf[Ll],M0=Il.toLowerCase(),O0=Il[0].toUpperCase()+Il.slice(1);Cn(M0,"on"+O0)}Cn(hf,"onAnimationEnd"),Cn(pf,"onAnimationIteration"),Cn(mf,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(gf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function yf(r,s,c){var f=r.type||"unknown-event";r.currentTarget=c,yn(f,s,void 0,r),r.currentTarget=null}function bf(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],x=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var _=f.length-1;0<=_;_--){var T=f[_],R=T.instance,W=T.currentTarget;if(T=T.listener,R!==v&&x.isPropagationStopped())break e;yf(x,T,W),v=R}else for(_=0;_<f.length;_++){if(T=f[_],R=T.instance,W=T.currentTarget,T=T.listener,R!==v&&x.isPropagationStopped())break e;yf(x,T,W),v=R}}}if(Ir)throw r=rn,Ir=!1,rn=null,r}function dt(r,s){var c=s[Fl];c===void 0&&(c=s[Fl]=new Set);var f=r+"__bubble";c.has(f)||(wf(s,r,2,!1),c.add(f))}function Al(r,s,c){var f=0;s&&(f|=4),wf(c,r,f,s)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Ri(r){if(!r[Bo]){r[Bo]=!0,i.forEach(function(c){c!=="selectionchange"&&(D0.has(c)||Al(c,!1,r),Al(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Bo]||(s[Bo]=!0,Al("selectionchange",!1,s))}}function wf(r,s,c,f){switch(qd(s)){case 1:var x=X1;break;case 4:x=Z1;break;default:x=gl}c=x.bind(null,s,c,r),x=void 0,!Wr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),f?x!==void 0?r.addEventListener(s,c,{capture:!0,passive:x}):r.addEventListener(s,c,!0):x!==void 0?r.addEventListener(s,c,{passive:x}):r.addEventListener(s,c,!1)}function Rl(r,s,c,f,x){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var T=f.stateNode.containerInfo;if(T===x||T.nodeType===8&&T.parentNode===x)break;if(_===4)for(_=f.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===x||R.nodeType===8&&R.parentNode===x))return;_=_.return}for(;T!==null;){if(_=Yn(T),_===null)return;if(R=_.tag,R===5||R===6){f=v=_;continue e}T=T.parentNode}}f=f.return}$t(function(){var W=v,ie=Ke(c),he=[];e:{var se=xf.get(r);if(se!==void 0){var je=yl,Ee=r;switch(r){case"keypress":if(Mo(c)===0)break e;case"keydown":case"keyup":je=p0;break;case"focusin":Ee="focus",je=kl;break;case"focusout":Ee="blur",je=kl;break;case"beforeblur":case"afterblur":je=kl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=r0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=x0;break;case hf:case pf:case mf:je=i0;break;case gf:je=y0;break;case"scroll":je=e0;break;case"wheel":je=w0;break;case"copy":case"cut":case"paste":je=a0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Kd}var Te=(s&4)!==0,St=!Te&&r==="scroll",F=Te?se!==null?se+"Capture":null:se;Te=[];for(var M=W,B;M!==null;){B=M;var xe=B.stateNode;if(B.tag===5&&xe!==null&&(B=xe,F!==null&&(xe=kt(M,F),xe!=null&&Te.push(zi(M,xe,B)))),St)break;M=M.return}0<Te.length&&(se=new je(se,Ee,null,c,ie),he.push({event:se,listeners:Te}))}}if((s&7)===0){e:{if(se=r==="mouseover"||r==="pointerover",je=r==="mouseout"||r==="pointerout",se&&c!==Ve&&(Ee=c.relatedTarget||c.fromElement)&&(Yn(Ee)||Ee[nn]))break e;if((je||se)&&(se=ie.window===ie?ie:(se=ie.ownerDocument)?se.defaultView||se.parentWindow:window,je?(Ee=c.relatedTarget||c.toElement,je=W,Ee=Ee?Yn(Ee):null,Ee!==null&&(St=Ar(Ee),Ee!==St||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(je=null,Ee=W),je!==Ee)){if(Te=Wd,xe="onMouseLeave",F="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Kd,xe="onPointerLeave",F="onPointerEnter",M="pointer"),St=je==null?se:Rs(je),B=Ee==null?se:Rs(Ee),se=new Te(xe,M+"leave",je,c,ie),se.target=St,se.relatedTarget=B,xe=null,Yn(ie)===W&&(Te=new Te(F,M+"enter",Ee,c,ie),Te.target=B,Te.relatedTarget=St,xe=Te),St=xe,je&&Ee)t:{for(Te=je,F=Ee,M=0,B=Te;B;B=Is(B))M++;for(B=0,xe=F;xe;xe=Is(xe))B++;for(;0<M-B;)Te=Is(Te),M--;for(;0<B-M;)F=Is(F),B--;for(;M--;){if(Te===F||F!==null&&Te===F.alternate)break t;Te=Is(Te),F=Is(F)}Te=null}else Te=null;je!==null&&kf(he,se,je,Te,!1),Ee!==null&&St!==null&&kf(he,St,Ee,Te,!0)}}e:{if(se=W?Rs(W):window,je=se.nodeName&&se.nodeName.toLowerCase(),je==="select"||je==="input"&&se.type==="file")var Le=E0;else if(ef(se))if(rf)Le=I0;else{Le=T0;var ze=P0}else(je=se.nodeName)&&je.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Le=L0);if(Le&&(Le=Le(r,W))){tf(he,Le,c,ie);break e}ze&&ze(r,se,W),r==="focusout"&&(ze=se._wrapperState)&&ze.controlled&&se.type==="number"&&nt(se,"number",se.value)}switch(ze=W?Rs(W):window,r){case"focusin":(ef(ze)||ze.contentEditable==="true")&&(Ts=ze,El=W,Ii=null);break;case"focusout":Ii=El=Ts=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,df(he,c,ie);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":df(he,c,ie)}var Me;if(jl)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Ps?Xd(r,c)&&($e="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(Qd&&c.locale!=="ko"&&(Ps||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Ps&&(Me=Vd()):(Nn=ie,vl="value"in Nn?Nn.value:Nn.textContent,Ps=!0)),ze=qo(W,$e),0<ze.length&&($e=new Gd($e,r,null,c,ie),he.push({event:$e,listeners:ze}),Me?$e.data=Me:(Me=Zd(c),Me!==null&&($e.data=Me)))),(Me=_0?j0(r,c):S0(r,c))&&(W=qo(W,"onBeforeInput"),0<W.length&&(ie=new Gd("onBeforeInput","beforeinput",null,c,ie),he.push({event:ie,listeners:W}),ie.data=Me))}bf(he,s)})}function zi(r,s,c){return{instance:r,listener:s,currentTarget:c}}function qo(r,s){for(var c=s+"Capture",f=[];r!==null;){var x=r,v=x.stateNode;x.tag===5&&v!==null&&(x=v,v=kt(r,c),v!=null&&f.unshift(zi(r,v,x)),v=kt(r,s),v!=null&&f.push(zi(r,v,x))),r=r.return}return f}function Is(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function kf(r,s,c,f,x){for(var v=s._reactName,_=[];c!==null&&c!==f;){var T=c,R=T.alternate,W=T.stateNode;if(R!==null&&R===f)break;T.tag===5&&W!==null&&(T=W,x?(R=kt(c,v),R!=null&&_.unshift(zi(c,R,T))):x||(R=kt(c,v),R!=null&&_.push(zi(c,R,T)))),c=c.return}_.length!==0&&r.push({event:s,listeners:_})}var $0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function _f(r){return(typeof r=="string"?r:""+r).replace($0,`
`).replace(F0,"")}function Vo(r,s,c){if(s=_f(s),_f(r)!==s&&c)throw Error(n(425))}function Ho(){}var zl=null,Ml=null;function Ol(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dl=typeof setTimeout=="function"?setTimeout:void 0,U0=typeof clearTimeout=="function"?clearTimeout:void 0,jf=typeof Promise=="function"?Promise:void 0,B0=typeof queueMicrotask=="function"?queueMicrotask:typeof jf<"u"?function(r){return jf.resolve(null).then(r).catch(q0)}:Dl;function q0(r){setTimeout(function(){throw r})}function $l(r,s){var c=s,f=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(f===0){r.removeChild(x),Si(s);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=x}while(c);Si(s)}function En(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Sf(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return r;s--}else c==="/$"&&s++}r=r.previousSibling}return null}var As=Math.random().toString(36).slice(2),Gr="__reactFiber$"+As,Mi="__reactProps$"+As,nn="__reactContainer$"+As,Fl="__reactEvents$"+As,V0="__reactListeners$"+As,H0="__reactHandles$"+As;function Yn(r){var s=r[Gr];if(s)return s;for(var c=r.parentNode;c;){if(s=c[nn]||c[Gr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=Sf(r);r!==null;){if(c=r[Gr])return c;r=Sf(r)}return s}r=c,c=r.parentNode}return null}function Oi(r){return r=r[Gr]||r[nn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Rs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Wo(r){return r[Mi]||null}var Ul=[],zs=-1;function Pn(r){return{current:r}}function ft(r){0>zs||(r.current=Ul[zs],Ul[zs]=null,zs--)}function lt(r,s){zs++,Ul[zs]=r.current,r.current=s}var Tn={},Gt=Pn(Tn),ar=Pn(!1),Xn=Tn;function Ms(r,s){var c=r.type.contextTypes;if(!c)return Tn;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var x={},v;for(v in c)x[v]=s[v];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=x),x}function lr(r){return r=r.childContextTypes,r!=null}function Go(){ft(ar),ft(Gt)}function Nf(r,s,c){if(Gt.current!==Tn)throw Error(n(168));lt(Gt,s),lt(ar,c)}function Cf(r,s,c){var f=r.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var x in f)if(!(x in s))throw Error(n(108,Pe(r)||"Unknown",x));return S({},c,f)}function Ko(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Tn,Xn=Gt.current,lt(Gt,r),lt(ar,ar.current),!0}function Ef(r,s,c){var f=r.stateNode;if(!f)throw Error(n(169));c?(r=Cf(r,s,Xn),f.__reactInternalMemoizedMergedChildContext=r,ft(ar),ft(Gt),lt(Gt,r)):ft(ar),lt(ar,c)}var sn=null,Qo=!1,Bl=!1;function Pf(r){sn===null?sn=[r]:sn.push(r)}function W0(r){Qo=!0,Pf(r)}function Ln(){if(!Bl&&sn!==null){Bl=!0;var r=0,s=tt;try{var c=sn;for(tt=1;r<c.length;r++){var f=c[r];do f=f(!0);while(f!==null)}sn=null,Qo=!1}catch(x){throw sn!==null&&(sn=sn.slice(r+1)),jr(N,Ln),x}finally{tt=s,Bl=!1}}return null}var Os=[],Ds=0,Jo=null,Yo=0,Sr=[],Nr=0,Zn=null,on=1,an="";function es(r,s){Os[Ds++]=Yo,Os[Ds++]=Jo,Jo=r,Yo=s}function Tf(r,s,c){Sr[Nr++]=on,Sr[Nr++]=an,Sr[Nr++]=Zn,Zn=r;var f=on;r=an;var x=32-et(f)-1;f&=~(1<<x),c+=1;var v=32-et(s)+x;if(30<v){var _=x-x%5;v=(f&(1<<_)-1).toString(32),f>>=_,x-=_,on=1<<32-et(s)+x|c<<x|f,an=v+r}else on=1<<v|c<<x|f,an=r}function ql(r){r.return!==null&&(es(r,1),Tf(r,1,0))}function Vl(r){for(;r===Jo;)Jo=Os[--Ds],Os[Ds]=null,Yo=Os[--Ds],Os[Ds]=null;for(;r===Zn;)Zn=Sr[--Nr],Sr[Nr]=null,an=Sr[--Nr],Sr[Nr]=null,on=Sr[--Nr],Sr[Nr]=null}var yr=null,br=null,pt=!1,zr=null;function Lf(r,s){var c=Tr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=r,s=r.deletions,s===null?(r.deletions=[c],r.flags|=16):s.push(c)}function If(r,s){switch(r.tag){case 5:var c=r.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,yr=r,br=En(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,yr=r,br=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Zn!==null?{id:on,overflow:an}:null,r.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=Tr(18,null,null,0),c.stateNode=s,c.return=r,r.child=c,yr=r,br=null,!0):!1;default:return!1}}function Hl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Wl(r){if(pt){var s=br;if(s){var c=s;if(!If(r,s)){if(Hl(r))throw Error(n(418));s=En(c.nextSibling);var f=yr;s&&If(r,s)?Lf(f,c):(r.flags=r.flags&-4097|2,pt=!1,yr=r)}}else{if(Hl(r))throw Error(n(418));r.flags=r.flags&-4097|2,pt=!1,yr=r}}}function Af(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yr=r}function Xo(r){if(r!==yr)return!1;if(!pt)return Af(r),pt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ol(r.type,r.memoizedProps)),s&&(s=br)){if(Hl(r))throw Rf(),Error(n(418));for(;s;)Lf(r,s),s=En(s.nextSibling)}if(Af(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(s===0){br=En(r.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}r=r.nextSibling}br=null}}else br=yr?En(r.stateNode.nextSibling):null;return!0}function Rf(){for(var r=br;r;)r=En(r.nextSibling)}function $s(){br=yr=null,pt=!1}function Gl(r){zr===null?zr=[r]:zr.push(r)}var G0=D.ReactCurrentBatchConfig;function Di(r,s,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,r));var x=f,v=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(_){var T=x.refs;_===null?delete T[v]:T[v]=_},s._stringRef=v,s)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Zo(r,s){throw r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function zf(r){var s=r._init;return s(r._payload)}function Mf(r){function s(F,M){if(r){var B=F.deletions;B===null?(F.deletions=[M],F.flags|=16):B.push(M)}}function c(F,M){if(!r)return null;for(;M!==null;)s(F,M),M=M.sibling;return null}function f(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function x(F,M){return F=$n(F,M),F.index=0,F.sibling=null,F}function v(F,M,B){return F.index=B,r?(B=F.alternate,B!==null?(B=B.index,B<M?(F.flags|=2,M):B):(F.flags|=2,M)):(F.flags|=1048576,M)}function _(F){return r&&F.alternate===null&&(F.flags|=2),F}function T(F,M,B,xe){return M===null||M.tag!==6?(M=Dc(B,F.mode,xe),M.return=F,M):(M=x(M,B),M.return=F,M)}function R(F,M,B,xe){var Le=B.type;return Le===J?ie(F,M,B.props.children,xe,B.key):M!==null&&(M.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ve&&zf(Le)===M.type)?(xe=x(M,B.props),xe.ref=Di(F,M,B),xe.return=F,xe):(xe=_a(B.type,B.key,B.props,null,F.mode,xe),xe.ref=Di(F,M,B),xe.return=F,xe)}function W(F,M,B,xe){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=$c(B,F.mode,xe),M.return=F,M):(M=x(M,B.children||[]),M.return=F,M)}function ie(F,M,B,xe,Le){return M===null||M.tag!==7?(M=ls(B,F.mode,xe,Le),M.return=F,M):(M=x(M,B),M.return=F,M)}function he(F,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Dc(""+M,F.mode,B),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case G:return B=_a(M.type,M.key,M.props,null,F.mode,B),B.ref=Di(F,null,M),B.return=F,B;case z:return M=$c(M,F.mode,B),M.return=F,M;case ve:var xe=M._init;return he(F,xe(M._payload),B)}if(Lt(M)||ae(M))return M=ls(M,F.mode,B,null),M.return=F,M;Zo(F,M)}return null}function se(F,M,B,xe){var Le=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Le!==null?null:T(F,M,""+B,xe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case G:return B.key===Le?R(F,M,B,xe):null;case z:return B.key===Le?W(F,M,B,xe):null;case ve:return Le=B._init,se(F,M,Le(B._payload),xe)}if(Lt(B)||ae(B))return Le!==null?null:ie(F,M,B,xe,null);Zo(F,B)}return null}function je(F,M,B,xe,Le){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return F=F.get(B)||null,T(M,F,""+xe,Le);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case G:return F=F.get(xe.key===null?B:xe.key)||null,R(M,F,xe,Le);case z:return F=F.get(xe.key===null?B:xe.key)||null,W(M,F,xe,Le);case ve:var ze=xe._init;return je(F,M,B,ze(xe._payload),Le)}if(Lt(xe)||ae(xe))return F=F.get(B)||null,ie(M,F,xe,Le,null);Zo(M,xe)}return null}function Ee(F,M,B,xe){for(var Le=null,ze=null,Me=M,$e=M=0,Bt=null;Me!==null&&$e<B.length;$e++){Me.index>$e?(Bt=Me,Me=null):Bt=Me.sibling;var Xe=se(F,Me,B[$e],xe);if(Xe===null){Me===null&&(Me=Bt);break}r&&Me&&Xe.alternate===null&&s(F,Me),M=v(Xe,M,$e),ze===null?Le=Xe:ze.sibling=Xe,ze=Xe,Me=Bt}if($e===B.length)return c(F,Me),pt&&es(F,$e),Le;if(Me===null){for(;$e<B.length;$e++)Me=he(F,B[$e],xe),Me!==null&&(M=v(Me,M,$e),ze===null?Le=Me:ze.sibling=Me,ze=Me);return pt&&es(F,$e),Le}for(Me=f(F,Me);$e<B.length;$e++)Bt=je(Me,F,$e,B[$e],xe),Bt!==null&&(r&&Bt.alternate!==null&&Me.delete(Bt.key===null?$e:Bt.key),M=v(Bt,M,$e),ze===null?Le=Bt:ze.sibling=Bt,ze=Bt);return r&&Me.forEach(function(Fn){return s(F,Fn)}),pt&&es(F,$e),Le}function Te(F,M,B,xe){var Le=ae(B);if(typeof Le!="function")throw Error(n(150));if(B=Le.call(B),B==null)throw Error(n(151));for(var ze=Le=null,Me=M,$e=M=0,Bt=null,Xe=B.next();Me!==null&&!Xe.done;$e++,Xe=B.next()){Me.index>$e?(Bt=Me,Me=null):Bt=Me.sibling;var Fn=se(F,Me,Xe.value,xe);if(Fn===null){Me===null&&(Me=Bt);break}r&&Me&&Fn.alternate===null&&s(F,Me),M=v(Fn,M,$e),ze===null?Le=Fn:ze.sibling=Fn,ze=Fn,Me=Bt}if(Xe.done)return c(F,Me),pt&&es(F,$e),Le;if(Me===null){for(;!Xe.done;$e++,Xe=B.next())Xe=he(F,Xe.value,xe),Xe!==null&&(M=v(Xe,M,$e),ze===null?Le=Xe:ze.sibling=Xe,ze=Xe);return pt&&es(F,$e),Le}for(Me=f(F,Me);!Xe.done;$e++,Xe=B.next())Xe=je(Me,F,$e,Xe.value,xe),Xe!==null&&(r&&Xe.alternate!==null&&Me.delete(Xe.key===null?$e:Xe.key),M=v(Xe,M,$e),ze===null?Le=Xe:ze.sibling=Xe,ze=Xe);return r&&Me.forEach(function(Nx){return s(F,Nx)}),pt&&es(F,$e),Le}function St(F,M,B,xe){if(typeof B=="object"&&B!==null&&B.type===J&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case G:e:{for(var Le=B.key,ze=M;ze!==null;){if(ze.key===Le){if(Le=B.type,Le===J){if(ze.tag===7){c(F,ze.sibling),M=x(ze,B.props.children),M.return=F,F=M;break e}}else if(ze.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===ve&&zf(Le)===ze.type){c(F,ze.sibling),M=x(ze,B.props),M.ref=Di(F,ze,B),M.return=F,F=M;break e}c(F,ze);break}else s(F,ze);ze=ze.sibling}B.type===J?(M=ls(B.props.children,F.mode,xe,B.key),M.return=F,F=M):(xe=_a(B.type,B.key,B.props,null,F.mode,xe),xe.ref=Di(F,M,B),xe.return=F,F=xe)}return _(F);case z:e:{for(ze=B.key;M!==null;){if(M.key===ze)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){c(F,M.sibling),M=x(M,B.children||[]),M.return=F,F=M;break e}else{c(F,M);break}else s(F,M);M=M.sibling}M=$c(B,F.mode,xe),M.return=F,F=M}return _(F);case ve:return ze=B._init,St(F,M,ze(B._payload),xe)}if(Lt(B))return Ee(F,M,B,xe);if(ae(B))return Te(F,M,B,xe);Zo(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(c(F,M.sibling),M=x(M,B),M.return=F,F=M):(c(F,M),M=Dc(B,F.mode,xe),M.return=F,F=M),_(F)):c(F,M)}return St}var Fs=Mf(!0),Of=Mf(!1),ea=Pn(null),ta=null,Us=null,Kl=null;function Ql(){Kl=Us=ta=null}function Jl(r){var s=ea.current;ft(ea),r._currentValue=s}function Yl(r,s,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===c)break;r=r.return}}function Bs(r,s){ta=r,Kl=Us=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(cr=!0),r.firstContext=null)}function Cr(r){var s=r._currentValue;if(Kl!==r)if(r={context:r,memoizedValue:s,next:null},Us===null){if(ta===null)throw Error(n(308));Us=r,ta.dependencies={lanes:0,firstContext:r}}else Us=Us.next=r;return s}var ts=null;function Xl(r){ts===null?ts=[r]:ts.push(r)}function Df(r,s,c,f){var x=s.interleaved;return x===null?(c.next=c,Xl(s)):(c.next=x.next,x.next=c),s.interleaved=c,ln(r,f)}function ln(r,s){r.lanes|=s;var c=r.alternate;for(c!==null&&(c.lanes|=s),c=r,r=r.return;r!==null;)r.childLanes|=s,c=r.alternate,c!==null&&(c.childLanes|=s),c=r,r=r.return;return c.tag===3?c.stateNode:null}var In=!1;function Zl(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $f(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function cn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function An(r,s,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Je&2)!==0){var x=f.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),f.pending=s,ln(r,c)}return x=f.interleaved,x===null?(s.next=s,Xl(f)):(s.next=x.next,x.next=s),f.interleaved=s,ln(r,c)}function ra(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,hl(r,c)}}function Ff(r,s){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var x=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var _={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?x=v=_:v=v.next=_,c=c.next}while(c!==null);v===null?x=v=s:v=v.next=s}else x=v=s;c={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:v,shared:f.shared,effects:f.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}function na(r,s,c,f){var x=r.updateQueue;In=!1;var v=x.firstBaseUpdate,_=x.lastBaseUpdate,T=x.shared.pending;if(T!==null){x.shared.pending=null;var R=T,W=R.next;R.next=null,_===null?v=W:_.next=W,_=R;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==_&&(T===null?ie.firstBaseUpdate=W:T.next=W,ie.lastBaseUpdate=R))}if(v!==null){var he=x.baseState;_=0,ie=W=R=null,T=v;do{var se=T.lane,je=T.eventTime;if((f&se)===se){ie!==null&&(ie=ie.next={eventTime:je,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var Ee=r,Te=T;switch(se=s,je=c,Te.tag){case 1:if(Ee=Te.payload,typeof Ee=="function"){he=Ee.call(je,he,se);break e}he=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Te.payload,se=typeof Ee=="function"?Ee.call(je,he,se):Ee,se==null)break e;he=S({},he,se);break e;case 2:In=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,se=x.effects,se===null?x.effects=[T]:se.push(T))}else je={eventTime:je,lane:se,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(W=ie=je,R=he):ie=ie.next=je,_|=se;if(T=T.next,T===null){if(T=x.shared.pending,T===null)break;se=T,T=se.next,se.next=null,x.lastBaseUpdate=se,x.shared.pending=null}}while(!0);if(ie===null&&(R=he),x.baseState=R,x.firstBaseUpdate=W,x.lastBaseUpdate=ie,s=x.shared.interleaved,s!==null){x=s;do _|=x.lane,x=x.next;while(x!==s)}else v===null&&(x.shared.lanes=0);ss|=_,r.lanes=_,r.memoizedState=he}}function Uf(r,s,c){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var f=r[s],x=f.callback;if(x!==null){if(f.callback=null,f=c,typeof x!="function")throw Error(n(191,x));x.call(f)}}}var $i={},Kr=Pn($i),Fi=Pn($i),Ui=Pn($i);function rs(r){if(r===$i)throw Error(n(174));return r}function ec(r,s){switch(lt(Ui,s),lt(Fi,r),lt(Kr,$i),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:le(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=le(s,r)}ft(Kr),lt(Kr,s)}function qs(){ft(Kr),ft(Fi),ft(Ui)}function Bf(r){rs(Ui.current);var s=rs(Kr.current),c=le(s,r.type);s!==c&&(lt(Fi,r),lt(Kr,c))}function tc(r){Fi.current===r&&(ft(Kr),ft(Fi))}var xt=Pn(0);function sa(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rc=[];function nc(){for(var r=0;r<rc.length;r++)rc[r]._workInProgressVersionPrimary=null;rc.length=0}var ia=D.ReactCurrentDispatcher,sc=D.ReactCurrentBatchConfig,ns=0,vt=null,At=null,Ft=null,oa=!1,Bi=!1,qi=0,K0=0;function Kt(){throw Error(n(321))}function ic(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Rr(r[c],s[c]))return!1;return!0}function oc(r,s,c,f,x,v){if(ns=v,vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ia.current=r===null||r.memoizedState===null?X0:Z0,r=c(f,x),Bi){v=0;do{if(Bi=!1,qi=0,25<=v)throw Error(n(301));v+=1,Ft=At=null,s.updateQueue=null,ia.current=ex,r=c(f,x)}while(Bi)}if(ia.current=ca,s=At!==null&&At.next!==null,ns=0,Ft=At=vt=null,oa=!1,s)throw Error(n(300));return r}function ac(){var r=qi!==0;return qi=0,r}function Qr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?vt.memoizedState=Ft=r:Ft=Ft.next=r,Ft}function Er(){if(At===null){var r=vt.alternate;r=r!==null?r.memoizedState:null}else r=At.next;var s=Ft===null?vt.memoizedState:Ft.next;if(s!==null)Ft=s,At=r;else{if(r===null)throw Error(n(310));At=r,r={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ft===null?vt.memoizedState=Ft=r:Ft=Ft.next=r}return Ft}function Vi(r,s){return typeof s=="function"?s(r):s}function lc(r){var s=Er(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=At,x=f.baseQueue,v=c.pending;if(v!==null){if(x!==null){var _=x.next;x.next=v.next,v.next=_}f.baseQueue=x=v,c.pending=null}if(x!==null){v=x.next,f=f.baseState;var T=_=null,R=null,W=v;do{var ie=W.lane;if((ns&ie)===ie)R!==null&&(R=R.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),f=W.hasEagerState?W.eagerState:r(f,W.action);else{var he={lane:ie,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};R===null?(T=R=he,_=f):R=R.next=he,vt.lanes|=ie,ss|=ie}W=W.next}while(W!==null&&W!==v);R===null?_=f:R.next=T,Rr(f,s.memoizedState)||(cr=!0),s.memoizedState=f,s.baseState=_,s.baseQueue=R,c.lastRenderedState=f}if(r=c.interleaved,r!==null){x=r;do v=x.lane,vt.lanes|=v,ss|=v,x=x.next;while(x!==r)}else x===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function cc(r){var s=Er(),c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=c.dispatch,x=c.pending,v=s.memoizedState;if(x!==null){c.pending=null;var _=x=x.next;do v=r(v,_.action),_=_.next;while(_!==x);Rr(v,s.memoizedState)||(cr=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,f]}function qf(){}function Vf(r,s){var c=vt,f=Er(),x=s(),v=!Rr(f.memoizedState,x);if(v&&(f.memoizedState=x,cr=!0),f=f.queue,uc(Gf.bind(null,c,f,r),[r]),f.getSnapshot!==s||v||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,Hi(9,Wf.bind(null,c,f,x,s),void 0,null),Ut===null)throw Error(n(349));(ns&30)!==0||Hf(c,s,x)}return x}function Hf(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=vt.updateQueue,s===null?(s={lastEffect:null,stores:null},vt.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function Wf(r,s,c,f){s.value=c,s.getSnapshot=f,Kf(s)&&Qf(r)}function Gf(r,s,c){return c(function(){Kf(s)&&Qf(r)})}function Kf(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Rr(r,c)}catch{return!0}}function Qf(r){var s=ln(r,1);s!==null&&$r(s,r,1,-1)}function Jf(r){var s=Qr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:r},s.queue=r,r=r.dispatch=Y0.bind(null,vt,r),[s.memoizedState,r]}function Hi(r,s,c,f){return r={tag:r,create:s,destroy:c,deps:f,next:null},s=vt.updateQueue,s===null?(s={lastEffect:null,stores:null},vt.updateQueue=s,s.lastEffect=r.next=r):(c=s.lastEffect,c===null?s.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,s.lastEffect=r)),r}function Yf(){return Er().memoizedState}function aa(r,s,c,f){var x=Qr();vt.flags|=r,x.memoizedState=Hi(1|s,c,void 0,f===void 0?null:f)}function la(r,s,c,f){var x=Er();f=f===void 0?null:f;var v=void 0;if(At!==null){var _=At.memoizedState;if(v=_.destroy,f!==null&&ic(f,_.deps)){x.memoizedState=Hi(s,c,v,f);return}}vt.flags|=r,x.memoizedState=Hi(1|s,c,v,f)}function Xf(r,s){return aa(8390656,8,r,s)}function uc(r,s){return la(2048,8,r,s)}function Zf(r,s){return la(4,2,r,s)}function eh(r,s){return la(4,4,r,s)}function th(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function rh(r,s,c){return c=c!=null?c.concat([r]):null,la(4,4,th.bind(null,s,r),c)}function dc(){}function nh(r,s){var c=Er();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&ic(s,f[1])?f[0]:(c.memoizedState=[r,s],r)}function sh(r,s){var c=Er();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&ic(s,f[1])?f[0]:(r=r(),c.memoizedState=[r,s],r)}function ih(r,s,c){return(ns&21)===0?(r.baseState&&(r.baseState=!1,cr=!0),r.memoizedState=c):(Rr(c,s)||(c=Rd(),vt.lanes|=c,ss|=c,r.baseState=!0),s)}function Q0(r,s){var c=tt;tt=c!==0&&4>c?c:4,r(!0);var f=sc.transition;sc.transition={};try{r(!1),s()}finally{tt=c,sc.transition=f}}function oh(){return Er().memoizedState}function J0(r,s,c){var f=On(r);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},ah(r))lh(s,c);else if(c=Df(r,s,c,f),c!==null){var x=tr();$r(c,r,f,x),ch(c,s,f)}}function Y0(r,s,c){var f=On(r),x={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(ah(r))lh(s,x);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var _=s.lastRenderedState,T=v(_,c);if(x.hasEagerState=!0,x.eagerState=T,Rr(T,_)){var R=s.interleaved;R===null?(x.next=x,Xl(s)):(x.next=R.next,R.next=x),s.interleaved=x;return}}catch{}finally{}c=Df(r,s,x,f),c!==null&&(x=tr(),$r(c,r,f,x),ch(c,s,f))}}function ah(r){var s=r.alternate;return r===vt||s!==null&&s===vt}function lh(r,s){Bi=oa=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function ch(r,s,c){if((c&4194240)!==0){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,hl(r,c)}}var ca={readContext:Cr,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},X0={readContext:Cr,useCallback:function(r,s){return Qr().memoizedState=[r,s===void 0?null:s],r},useContext:Cr,useEffect:Xf,useImperativeHandle:function(r,s,c){return c=c!=null?c.concat([r]):null,aa(4194308,4,th.bind(null,s,r),c)},useLayoutEffect:function(r,s){return aa(4194308,4,r,s)},useInsertionEffect:function(r,s){return aa(4,2,r,s)},useMemo:function(r,s){var c=Qr();return s=s===void 0?null:s,r=r(),c.memoizedState=[r,s],r},useReducer:function(r,s,c){var f=Qr();return s=c!==void 0?c(s):s,f.memoizedState=f.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},f.queue=r,r=r.dispatch=J0.bind(null,vt,r),[f.memoizedState,r]},useRef:function(r){var s=Qr();return r={current:r},s.memoizedState=r},useState:Jf,useDebugValue:dc,useDeferredValue:function(r){return Qr().memoizedState=r},useTransition:function(){var r=Jf(!1),s=r[0];return r=Q0.bind(null,r[1]),Qr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,c){var f=vt,x=Qr();if(pt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=s(),Ut===null)throw Error(n(349));(ns&30)!==0||Hf(f,s,c)}x.memoizedState=c;var v={value:c,getSnapshot:s};return x.queue=v,Xf(Gf.bind(null,f,v,r),[r]),f.flags|=2048,Hi(9,Wf.bind(null,f,v,c,s),void 0,null),c},useId:function(){var r=Qr(),s=Ut.identifierPrefix;if(pt){var c=an,f=on;c=(f&~(1<<32-et(f)-1)).toString(32)+c,s=":"+s+"R"+c,c=qi++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=K0++,s=":"+s+"r"+c.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Z0={readContext:Cr,useCallback:nh,useContext:Cr,useEffect:uc,useImperativeHandle:rh,useInsertionEffect:Zf,useLayoutEffect:eh,useMemo:sh,useReducer:lc,useRef:Yf,useState:function(){return lc(Vi)},useDebugValue:dc,useDeferredValue:function(r){var s=Er();return ih(s,At.memoizedState,r)},useTransition:function(){var r=lc(Vi)[0],s=Er().memoizedState;return[r,s]},useMutableSource:qf,useSyncExternalStore:Vf,useId:oh,unstable_isNewReconciler:!1},ex={readContext:Cr,useCallback:nh,useContext:Cr,useEffect:uc,useImperativeHandle:rh,useInsertionEffect:Zf,useLayoutEffect:eh,useMemo:sh,useReducer:cc,useRef:Yf,useState:function(){return cc(Vi)},useDebugValue:dc,useDeferredValue:function(r){var s=Er();return At===null?s.memoizedState=r:ih(s,At.memoizedState,r)},useTransition:function(){var r=cc(Vi)[0],s=Er().memoizedState;return[r,s]},useMutableSource:qf,useSyncExternalStore:Vf,useId:oh,unstable_isNewReconciler:!1};function Mr(r,s){if(r&&r.defaultProps){s=S({},s),r=r.defaultProps;for(var c in r)s[c]===void 0&&(s[c]=r[c]);return s}return s}function fc(r,s,c,f){s=r.memoizedState,c=c(f,s),c=c==null?s:S({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ua={isMounted:function(r){return(r=r._reactInternals)?Ar(r)===r:!1},enqueueSetState:function(r,s,c){r=r._reactInternals;var f=tr(),x=On(r),v=cn(f,x);v.payload=s,c!=null&&(v.callback=c),s=An(r,v,x),s!==null&&($r(s,r,x,f),ra(s,r,x))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var f=tr(),x=On(r),v=cn(f,x);v.tag=1,v.payload=s,c!=null&&(v.callback=c),s=An(r,v,x),s!==null&&($r(s,r,x,f),ra(s,r,x))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=tr(),f=On(r),x=cn(c,f);x.tag=2,s!=null&&(x.callback=s),s=An(r,x,f),s!==null&&($r(s,r,f,c),ra(s,r,f))}};function uh(r,s,c,f,x,v,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,v,_):s.prototype&&s.prototype.isPureReactComponent?!Li(c,f)||!Li(x,v):!0}function dh(r,s,c){var f=!1,x=Tn,v=s.contextType;return typeof v=="object"&&v!==null?v=Cr(v):(x=lr(s)?Xn:Gt.current,f=s.contextTypes,v=(f=f!=null)?Ms(r,x):Tn),s=new s(c,v),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ua,r.stateNode=s,s._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=x,r.__reactInternalMemoizedMaskedChildContext=v),s}function fh(r,s,c,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==r&&ua.enqueueReplaceState(s,s.state,null)}function hc(r,s,c,f){var x=r.stateNode;x.props=c,x.state=r.memoizedState,x.refs={},Zl(r);var v=s.contextType;typeof v=="object"&&v!==null?x.context=Cr(v):(v=lr(s)?Xn:Gt.current,x.context=Ms(r,v)),x.state=r.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(fc(r,s,v,c),x.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(s=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),s!==x.state&&ua.enqueueReplaceState(x,x.state,null),na(r,c,x,f),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308)}function Vs(r,s){try{var c="",f=s;do c+=fe(f),f=f.return;while(f);var x=c}catch(v){x=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:s,stack:x,digest:null}}function pc(r,s,c){return{value:r,source:null,stack:c??null,digest:s??null}}function mc(r,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var tx=typeof WeakMap=="function"?WeakMap:Map;function hh(r,s,c){c=cn(-1,c),c.tag=3,c.payload={element:null};var f=s.value;return c.callback=function(){xa||(xa=!0,Tc=f),mc(r,s)},c}function ph(r,s,c){c=cn(-1,c),c.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var x=s.value;c.payload=function(){return f(x)},c.callback=function(){mc(r,s)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){mc(r,s),typeof f!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),c}function mh(r,s,c){var f=r.pingCache;if(f===null){f=r.pingCache=new tx;var x=new Set;f.set(s,x)}else x=f.get(s),x===void 0&&(x=new Set,f.set(s,x));x.has(c)||(x.add(c),r=mx.bind(null,r,s,c),s.then(r,r))}function gh(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function xh(r,s,c,f,x){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=cn(-1,1),s.tag=2,An(c,s,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=x,r)}var rx=D.ReactCurrentOwner,cr=!1;function er(r,s,c,f){s.child=r===null?Of(s,null,c,f):Fs(s,r.child,c,f)}function vh(r,s,c,f,x){c=c.render;var v=s.ref;return Bs(s,x),f=oc(r,s,c,f,v,x),c=ac(),r!==null&&!cr?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~x,un(r,s,x)):(pt&&c&&ql(s),s.flags|=1,er(r,s,f,x),s.child)}function yh(r,s,c,f,x){if(r===null){var v=c.type;return typeof v=="function"&&!Oc(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=v,bh(r,s,v,f,x)):(r=_a(c.type,null,f,s,s.mode,x),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,(r.lanes&x)===0){var _=v.memoizedProps;if(c=c.compare,c=c!==null?c:Li,c(_,f)&&r.ref===s.ref)return un(r,s,x)}return s.flags|=1,r=$n(v,f),r.ref=s.ref,r.return=s,s.child=r}function bh(r,s,c,f,x){if(r!==null){var v=r.memoizedProps;if(Li(v,f)&&r.ref===s.ref)if(cr=!1,s.pendingProps=f=v,(r.lanes&x)!==0)(r.flags&131072)!==0&&(cr=!0);else return s.lanes=r.lanes,un(r,s,x)}return gc(r,s,c,f,x)}function wh(r,s,c){var f=s.pendingProps,x=f.children,v=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Ws,wr),wr|=c;else{if((c&1073741824)===0)return r=v!==null?v.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,lt(Ws,wr),wr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:c,lt(Ws,wr),wr|=f}else v!==null?(f=v.baseLanes|c,s.memoizedState=null):f=c,lt(Ws,wr),wr|=f;return er(r,s,x,c),s.child}function kh(r,s){var c=s.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function gc(r,s,c,f,x){var v=lr(c)?Xn:Gt.current;return v=Ms(s,v),Bs(s,x),c=oc(r,s,c,f,v,x),f=ac(),r!==null&&!cr?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~x,un(r,s,x)):(pt&&f&&ql(s),s.flags|=1,er(r,s,c,x),s.child)}function _h(r,s,c,f,x){if(lr(c)){var v=!0;Ko(s)}else v=!1;if(Bs(s,x),s.stateNode===null)fa(r,s),dh(s,c,f),hc(s,c,f,x),f=!0;else if(r===null){var _=s.stateNode,T=s.memoizedProps;_.props=T;var R=_.context,W=c.contextType;typeof W=="object"&&W!==null?W=Cr(W):(W=lr(c)?Xn:Gt.current,W=Ms(s,W));var ie=c.getDerivedStateFromProps,he=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function";he||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==f||R!==W)&&fh(s,_,f,W),In=!1;var se=s.memoizedState;_.state=se,na(s,f,_,x),R=s.memoizedState,T!==f||se!==R||ar.current||In?(typeof ie=="function"&&(fc(s,c,ie,f),R=s.memoizedState),(T=In||uh(s,c,T,f,se,R,W))?(he||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=R),_.props=f,_.state=R,_.context=W,f=T):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,$f(r,s),T=s.memoizedProps,W=s.type===s.elementType?T:Mr(s.type,T),_.props=W,he=s.pendingProps,se=_.context,R=c.contextType,typeof R=="object"&&R!==null?R=Cr(R):(R=lr(c)?Xn:Gt.current,R=Ms(s,R));var je=c.getDerivedStateFromProps;(ie=typeof je=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==he||se!==R)&&fh(s,_,f,R),In=!1,se=s.memoizedState,_.state=se,na(s,f,_,x);var Ee=s.memoizedState;T!==he||se!==Ee||ar.current||In?(typeof je=="function"&&(fc(s,c,je,f),Ee=s.memoizedState),(W=In||uh(s,c,W,f,se,Ee,R)||!1)?(ie||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,Ee,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,Ee,R)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ee),_.props=f,_.state=Ee,_.context=R,f=W):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),f=!1)}return xc(r,s,c,f,v,x)}function xc(r,s,c,f,x,v){kh(r,s);var _=(s.flags&128)!==0;if(!f&&!_)return x&&Ef(s,c,!1),un(r,s,v);f=s.stateNode,rx.current=s;var T=_&&typeof c.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,r!==null&&_?(s.child=Fs(s,r.child,null,v),s.child=Fs(s,null,T,v)):er(r,s,T,v),s.memoizedState=f.state,x&&Ef(s,c,!0),s.child}function jh(r){var s=r.stateNode;s.pendingContext?Nf(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Nf(r,s.context,!1),ec(r,s.containerInfo)}function Sh(r,s,c,f,x){return $s(),Gl(x),s.flags|=256,er(r,s,c,f),s.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function yc(r){return{baseLanes:r,cachePool:null,transitions:null}}function Nh(r,s,c){var f=s.pendingProps,x=xt.current,v=!1,_=(s.flags&128)!==0,T;if((T=_)||(T=r!==null&&r.memoizedState===null?!1:(x&2)!==0),T?(v=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(x|=1),lt(xt,x&1),r===null)return Wl(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=f.children,r=f.fallback,v?(f=s.mode,v=s.child,_={mode:"hidden",children:_},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=_):v=ja(_,f,0,null),r=ls(r,f,c,null),v.return=s,r.return=s,v.sibling=r,s.child=v,s.child.memoizedState=yc(c),s.memoizedState=vc,r):bc(s,_));if(x=r.memoizedState,x!==null&&(T=x.dehydrated,T!==null))return nx(r,s,_,f,T,x,c);if(v){v=f.fallback,_=s.mode,x=r.child,T=x.sibling;var R={mode:"hidden",children:f.children};return(_&1)===0&&s.child!==x?(f=s.child,f.childLanes=0,f.pendingProps=R,s.deletions=null):(f=$n(x,R),f.subtreeFlags=x.subtreeFlags&14680064),T!==null?v=$n(T,v):(v=ls(v,_,c,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,_=r.child.memoizedState,_=_===null?yc(c):{baseLanes:_.baseLanes|c,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=r.childLanes&~c,s.memoizedState=vc,f}return v=r.child,r=v.sibling,f=$n(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=c),f.return=s,f.sibling=null,r!==null&&(c=s.deletions,c===null?(s.deletions=[r],s.flags|=16):c.push(r)),s.child=f,s.memoizedState=null,f}function bc(r,s){return s=ja({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function da(r,s,c,f){return f!==null&&Gl(f),Fs(s,r.child,null,c),r=bc(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function nx(r,s,c,f,x,v,_){if(c)return s.flags&256?(s.flags&=-257,f=pc(Error(n(422))),da(r,s,_,f)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(v=f.fallback,x=s.mode,f=ja({mode:"visible",children:f.children},x,0,null),v=ls(v,x,_,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&Fs(s,r.child,null,_),s.child.memoizedState=yc(_),s.memoizedState=vc,v);if((s.mode&1)===0)return da(r,s,_,null);if(x.data==="$!"){if(f=x.nextSibling&&x.nextSibling.dataset,f)var T=f.dgst;return f=T,v=Error(n(419)),f=pc(v,f,void 0),da(r,s,_,f)}if(T=(_&r.childLanes)!==0,cr||T){if(f=Ut,f!==null){switch(_&-_){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(f.suspendedLanes|_))!==0?0:x,x!==0&&x!==v.retryLane&&(v.retryLane=x,ln(r,x),$r(f,r,x,-1))}return Mc(),f=pc(Error(n(421))),da(r,s,_,f)}return x.data==="$?"?(s.flags|=128,s.child=r.child,s=gx.bind(null,r),x._reactRetry=s,null):(r=v.treeContext,br=En(x.nextSibling),yr=s,pt=!0,zr=null,r!==null&&(Sr[Nr++]=on,Sr[Nr++]=an,Sr[Nr++]=Zn,on=r.id,an=r.overflow,Zn=s),s=bc(s,f.children),s.flags|=4096,s)}function Ch(r,s,c){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Yl(r.return,s,c)}function wc(r,s,c,f,x){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:x}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=x)}function Eh(r,s,c){var f=s.pendingProps,x=f.revealOrder,v=f.tail;if(er(r,s,f.children,c),f=xt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ch(r,c,s);else if(r.tag===19)Ch(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(lt(xt,f),(s.mode&1)===0)s.memoizedState=null;else switch(x){case"forwards":for(c=s.child,x=null;c!==null;)r=c.alternate,r!==null&&sa(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=s.child,s.child=null):(x=c.sibling,c.sibling=null),wc(s,!1,x,c,v);break;case"backwards":for(c=null,x=s.child,s.child=null;x!==null;){if(r=x.alternate,r!==null&&sa(r)===null){s.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}wc(s,!0,c,null,v);break;case"together":wc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function fa(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function un(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),ss|=s.lanes,(c&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,c=$n(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=$n(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function sx(r,s,c){switch(s.tag){case 3:jh(s),$s();break;case 5:Bf(s);break;case 1:lr(s.type)&&Ko(s);break;case 4:ec(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,x=s.memoizedProps.value;lt(ea,f._currentValue),f._currentValue=x;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(lt(xt,xt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?Nh(r,s,c):(lt(xt,xt.current&1),r=un(r,s,c),r!==null?r.sibling:null);lt(xt,xt.current&1);break;case 19:if(f=(c&s.childLanes)!==0,(r.flags&128)!==0){if(f)return Eh(r,s,c);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),lt(xt,xt.current),f)break;return null;case 22:case 23:return s.lanes=0,wh(r,s,c)}return un(r,s,c)}var Ph,kc,Th,Lh;Ph=function(r,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},kc=function(){},Th=function(r,s,c,f){var x=r.memoizedProps;if(x!==f){r=s.stateNode,rs(Kr.current);var v=null;switch(c){case"input":x=rt(r,x),f=rt(r,f),v=[];break;case"select":x=S({},x,{value:void 0}),f=S({},f,{value:void 0}),v=[];break;case"textarea":x=de(r,x),f=de(r,f),v=[];break;default:typeof x.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Ho)}gt(c,f);var _;c=null;for(W in x)if(!f.hasOwnProperty(W)&&x.hasOwnProperty(W)&&x[W]!=null)if(W==="style"){var T=x[W];for(_ in T)T.hasOwnProperty(_)&&(c||(c={}),c[_]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?v||(v=[]):(v=v||[]).push(W,null));for(W in f){var R=f[W];if(T=x?.[W],f.hasOwnProperty(W)&&R!==T&&(R!=null||T!=null))if(W==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(c||(c={}),c[_]="");for(_ in R)R.hasOwnProperty(_)&&T[_]!==R[_]&&(c||(c={}),c[_]=R[_])}else c||(v||(v=[]),v.push(W,c)),c=R;else W==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(v=v||[]).push(W,R)):W==="children"?typeof R!="string"&&typeof R!="number"||(v=v||[]).push(W,""+R):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(R!=null&&W==="onScroll"&&dt("scroll",r),v||T===R||(v=[])):(v=v||[]).push(W,R))}c&&(v=v||[]).push("style",c);var W=v;(s.updateQueue=W)&&(s.flags|=4)}},Lh=function(r,s,c,f){c!==f&&(s.flags|=4)};function Wi(r,s){if(!pt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(s)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags&14680064,f|=x.flags&14680064,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=f,r.childLanes=c,s}function ix(r,s,c){var f=s.pendingProps;switch(Vl(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return lr(s.type)&&Go(),Qt(s),null;case 3:return f=s.stateNode,qs(),ft(ar),ft(Gt),nc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Xo(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zr!==null&&(Ac(zr),zr=null))),kc(r,s),Qt(s),null;case 5:tc(s);var x=rs(Ui.current);if(c=s.type,r!==null&&s.stateNode!=null)Th(r,s,c,f,x),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(n(166));return Qt(s),null}if(r=rs(Kr.current),Xo(s)){f=s.stateNode,c=s.type;var v=s.memoizedProps;switch(f[Gr]=s,f[Mi]=v,r=(s.mode&1)!==0,c){case"dialog":dt("cancel",f),dt("close",f);break;case"iframe":case"object":case"embed":dt("load",f);break;case"video":case"audio":for(x=0;x<Ai.length;x++)dt(Ai[x],f);break;case"source":dt("error",f);break;case"img":case"image":case"link":dt("error",f),dt("load",f);break;case"details":dt("toggle",f);break;case"input":mt(f,v),dt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},dt("invalid",f);break;case"textarea":bt(f,v),dt("invalid",f)}gt(c,v),x=null;for(var _ in v)if(v.hasOwnProperty(_)){var T=v[_];_==="children"?typeof T=="string"?f.textContent!==T&&(v.suppressHydrationWarning!==!0&&Vo(f.textContent,T,r),x=["children",T]):typeof T=="number"&&f.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&Vo(f.textContent,T,r),x=["children",""+T]):o.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&dt("scroll",f)}switch(c){case"input":Re(f),Tt(f,v,!0);break;case"textarea":Re(f),sr(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Ho)}f=x,s.updateQueue=f,f!==null&&(s.flags|=4)}else{_=x.nodeType===9?x:x.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Y(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=_.createElement(c,{is:f.is}):(r=_.createElement(c),c==="select"&&(_=r,f.multiple?_.multiple=!0:f.size&&(_.size=f.size))):r=_.createElementNS(r,c),r[Gr]=s,r[Mi]=f,Ph(r,s,!1,!1),s.stateNode=r;e:{switch(_=Ot(c,f),c){case"dialog":dt("cancel",r),dt("close",r),x=f;break;case"iframe":case"object":case"embed":dt("load",r),x=f;break;case"video":case"audio":for(x=0;x<Ai.length;x++)dt(Ai[x],r);x=f;break;case"source":dt("error",r),x=f;break;case"img":case"image":case"link":dt("error",r),dt("load",r),x=f;break;case"details":dt("toggle",r),x=f;break;case"input":mt(r,f),x=rt(r,f),dt("invalid",r);break;case"option":x=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},x=S({},f,{value:void 0}),dt("invalid",r);break;case"textarea":bt(r,f),x=de(r,f),dt("invalid",r);break;default:x=f}gt(c,x),T=x;for(v in T)if(T.hasOwnProperty(v)){var R=T[v];v==="style"?mr(r,R):v==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Fe(r,R)):v==="children"?typeof R=="string"?(c!=="textarea"||R!=="")&&ye(r,R):typeof R=="number"&&ye(r,""+R):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?R!=null&&v==="onScroll"&&dt("scroll",r):R!=null&&I(r,v,R,_))}switch(c){case"input":Re(r),Tt(r,f,!1);break;case"textarea":Re(r),sr(r);break;case"option":f.value!=null&&r.setAttribute("value",""+_e(f.value));break;case"select":r.multiple=!!f.multiple,v=f.value,v!=null?yt(r,!!f.multiple,v,!1):f.defaultValue!=null&&yt(r,!!f.multiple,f.defaultValue,!0);break;default:typeof x.onClick=="function"&&(r.onclick=Ho)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(r&&s.stateNode!=null)Lh(r,s,r.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(n(166));if(c=rs(Ui.current),rs(Kr.current),Xo(s)){if(f=s.stateNode,c=s.memoizedProps,f[Gr]=s,(v=f.nodeValue!==c)&&(r=yr,r!==null))switch(r.tag){case 3:Vo(f.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Vo(f.nodeValue,c,(r.mode&1)!==0)}v&&(s.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Gr]=s,s.stateNode=f}return Qt(s),null;case 13:if(ft(xt),f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(pt&&br!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Rf(),$s(),s.flags|=98560,v=!1;else if(v=Xo(s),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Gr]=s}else $s(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),v=!1}else zr!==null&&(Ac(zr),zr=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(xt.current&1)!==0?Rt===0&&(Rt=3):Mc())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return qs(),kc(r,s),r===null&&Ri(s.stateNode.containerInfo),Qt(s),null;case 10:return Jl(s.type._context),Qt(s),null;case 17:return lr(s.type)&&Go(),Qt(s),null;case 19:if(ft(xt),v=s.memoizedState,v===null)return Qt(s),null;if(f=(s.flags&128)!==0,_=v.rendering,_===null)if(f)Wi(v,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=sa(r),_!==null){for(s.flags|=128,Wi(v,!1),f=_.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=c,c=s.child;c!==null;)v=c,r=f,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,r=_.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return lt(xt,xt.current&1|2),s.child}r=r.sibling}v.tail!==null&&at()>Gs&&(s.flags|=128,f=!0,Wi(v,!1),s.lanes=4194304)}else{if(!f)if(r=sa(_),r!==null){if(s.flags|=128,f=!0,c=r.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Wi(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!pt)return Qt(s),null}else 2*at()-v.renderingStartTime>Gs&&c!==1073741824&&(s.flags|=128,f=!0,Wi(v,!1),s.lanes=4194304);v.isBackwards?(_.sibling=s.child,s.child=_):(c=v.last,c!==null?c.sibling=_:s.child=_,v.last=_)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=at(),s.sibling=null,c=xt.current,lt(xt,f?c&1|2:c&1),s):(Qt(s),null);case 22:case 23:return zc(),f=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(wr&1073741824)!==0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function ox(r,s){switch(Vl(s),s.tag){case 1:return lr(s.type)&&Go(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return qs(),ft(ar),ft(Gt),nc(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return tc(s),null;case 13:if(ft(xt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));$s()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ft(xt),null;case 4:return qs(),null;case 10:return Jl(s.type._context),null;case 22:case 23:return zc(),null;case 24:return null;default:return null}}var ha=!1,Jt=!1,ax=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Hs(r,s){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){_t(r,s,f)}else c.current=null}function _c(r,s,c){try{c()}catch(f){_t(r,s,f)}}var Ih=!1;function lx(r,s){if(zl=Ao,r=uf(),Cl(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var x=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var _=0,T=-1,R=-1,W=0,ie=0,he=r,se=null;t:for(;;){for(var je;he!==c||x!==0&&he.nodeType!==3||(T=_+x),he!==v||f!==0&&he.nodeType!==3||(R=_+f),he.nodeType===3&&(_+=he.nodeValue.length),(je=he.firstChild)!==null;)se=he,he=je;for(;;){if(he===r)break t;if(se===c&&++W===x&&(T=_),se===v&&++ie===f&&(R=_),(je=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=je}c=T===-1||R===-1?null:{start:T,end:R}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ml={focusedElem:r,selectionRange:c},Ao=!1,Ce=s;Ce!==null;)if(s=Ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Ce=r;else for(;Ce!==null;){s=Ce;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Te=Ee.memoizedProps,St=Ee.memoizedState,F=s.stateNode,M=F.getSnapshotBeforeUpdate(s.elementType===s.type?Te:Mr(s.type,Te),St);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){_t(s,s.return,xe)}if(r=s.sibling,r!==null){r.return=s.return,Ce=r;break}Ce=s.return}return Ee=Ih,Ih=!1,Ee}function Gi(r,s,c){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&r)===r){var v=x.destroy;x.destroy=void 0,v!==void 0&&_c(s,c,v)}x=x.next}while(x!==f)}}function pa(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&r)===r){var f=c.create;c.destroy=f()}c=c.next}while(c!==s)}}function jc(r){var s=r.ref;if(s!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof s=="function"?s(r):s.current=r}}function Ah(r){var s=r.alternate;s!==null&&(r.alternate=null,Ah(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Gr],delete s[Mi],delete s[Fl],delete s[V0],delete s[H0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Rh(r){return r.tag===5||r.tag===3||r.tag===4}function zh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Rh(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sc(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(r,s):c.insertBefore(r,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(r,c)):(s=c,s.appendChild(r)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Ho));else if(f!==4&&(r=r.child,r!==null))for(Sc(r,s,c),r=r.sibling;r!==null;)Sc(r,s,c),r=r.sibling}function Nc(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Nc(r,s,c),r=r.sibling;r!==null;)Nc(r,s,c),r=r.sibling}var Vt=null,Or=!1;function Rn(r,s,c){for(c=c.child;c!==null;)Mh(r,s,c),c=c.sibling}function Mh(r,s,c){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(ce,c)}catch{}switch(c.tag){case 5:Jt||Hs(c,s);case 6:var f=Vt,x=Or;Vt=null,Rn(r,s,c),Vt=f,Or=x,Vt!==null&&(Or?(r=Vt,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):Vt.removeChild(c.stateNode));break;case 18:Vt!==null&&(Or?(r=Vt,c=c.stateNode,r.nodeType===8?$l(r.parentNode,c):r.nodeType===1&&$l(r,c),Si(r)):$l(Vt,c.stateNode));break;case 4:f=Vt,x=Or,Vt=c.stateNode.containerInfo,Or=!0,Rn(r,s,c),Vt=f,Or=x;break;case 0:case 11:case 14:case 15:if(!Jt&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){x=f=f.next;do{var v=x,_=v.destroy;v=v.tag,_!==void 0&&((v&2)!==0||(v&4)!==0)&&_c(c,s,_),x=x.next}while(x!==f)}Rn(r,s,c);break;case 1:if(!Jt&&(Hs(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(T){_t(c,s,T)}Rn(r,s,c);break;case 21:Rn(r,s,c);break;case 22:c.mode&1?(Jt=(f=Jt)||c.memoizedState!==null,Rn(r,s,c),Jt=f):Rn(r,s,c);break;default:Rn(r,s,c)}}function Oh(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new ax),s.forEach(function(f){var x=xx.bind(null,r,f);c.has(f)||(c.add(f),f.then(x,x))})}}function Dr(r,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];try{var v=r,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 5:Vt=T.stateNode,Or=!1;break e;case 3:Vt=T.stateNode.containerInfo,Or=!0;break e;case 4:Vt=T.stateNode.containerInfo,Or=!0;break e}T=T.return}if(Vt===null)throw Error(n(160));Mh(v,_,x),Vt=null,Or=!1;var R=x.alternate;R!==null&&(R.return=null),x.return=null}catch(W){_t(x,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Dh(s,r),s=s.sibling}function Dh(r,s){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Dr(s,r),Jr(r),f&4){try{Gi(3,r,r.return),pa(3,r)}catch(Te){_t(r,r.return,Te)}try{Gi(5,r,r.return)}catch(Te){_t(r,r.return,Te)}}break;case 1:Dr(s,r),Jr(r),f&512&&c!==null&&Hs(c,c.return);break;case 5:if(Dr(s,r),Jr(r),f&512&&c!==null&&Hs(c,c.return),r.flags&32){var x=r.stateNode;try{ye(x,"")}catch(Te){_t(r,r.return,Te)}}if(f&4&&(x=r.stateNode,x!=null)){var v=r.memoizedProps,_=c!==null?c.memoizedProps:v,T=r.type,R=r.updateQueue;if(r.updateQueue=null,R!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&Ye(x,v),Ot(T,_);var W=Ot(T,v);for(_=0;_<R.length;_+=2){var ie=R[_],he=R[_+1];ie==="style"?mr(x,he):ie==="dangerouslySetInnerHTML"?Fe(x,he):ie==="children"?ye(x,he):I(x,ie,he,W)}switch(T){case"input":Ct(x,v);break;case"textarea":wt(x,v);break;case"select":var se=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!v.multiple;var je=v.value;je!=null?yt(x,!!v.multiple,je,!1):se!==!!v.multiple&&(v.defaultValue!=null?yt(x,!!v.multiple,v.defaultValue,!0):yt(x,!!v.multiple,v.multiple?[]:"",!1))}x[Mi]=v}catch(Te){_t(r,r.return,Te)}}break;case 6:if(Dr(s,r),Jr(r),f&4){if(r.stateNode===null)throw Error(n(162));x=r.stateNode,v=r.memoizedProps;try{x.nodeValue=v}catch(Te){_t(r,r.return,Te)}}break;case 3:if(Dr(s,r),Jr(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Si(s.containerInfo)}catch(Te){_t(r,r.return,Te)}break;case 4:Dr(s,r),Jr(r);break;case 13:Dr(s,r),Jr(r),x=r.child,x.flags&8192&&(v=x.memoizedState!==null,x.stateNode.isHidden=v,!v||x.alternate!==null&&x.alternate.memoizedState!==null||(Pc=at())),f&4&&Oh(r);break;case 22:if(ie=c!==null&&c.memoizedState!==null,r.mode&1?(Jt=(W=Jt)||ie,Dr(s,r),Jt=W):Dr(s,r),Jr(r),f&8192){if(W=r.memoizedState!==null,(r.stateNode.isHidden=W)&&!ie&&(r.mode&1)!==0)for(Ce=r,ie=r.child;ie!==null;){for(he=Ce=ie;Ce!==null;){switch(se=Ce,je=se.child,se.tag){case 0:case 11:case 14:case 15:Gi(4,se,se.return);break;case 1:Hs(se,se.return);var Ee=se.stateNode;if(typeof Ee.componentWillUnmount=="function"){f=se,c=se.return;try{s=f,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(Te){_t(f,c,Te)}}break;case 5:Hs(se,se.return);break;case 22:if(se.memoizedState!==null){Uh(he);continue}}je!==null?(je.return=se,Ce=je):Uh(he)}ie=ie.sibling}e:for(ie=null,he=r;;){if(he.tag===5){if(ie===null){ie=he;try{x=he.stateNode,W?(v=x.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=he.stateNode,R=he.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=st("display",_))}catch(Te){_t(r,r.return,Te)}}}else if(he.tag===6){if(ie===null)try{he.stateNode.nodeValue=W?"":he.memoizedProps}catch(Te){_t(r,r.return,Te)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===r)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===r)break e;for(;he.sibling===null;){if(he.return===null||he.return===r)break e;ie===he&&(ie=null),he=he.return}ie===he&&(ie=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Dr(s,r),Jr(r),f&4&&Oh(r);break;case 21:break;default:Dr(s,r),Jr(r)}}function Jr(r){var s=r.flags;if(s&2){try{e:{for(var c=r.return;c!==null;){if(Rh(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var x=f.stateNode;f.flags&32&&(ye(x,""),f.flags&=-33);var v=zh(r);Nc(r,v,x);break;case 3:case 4:var _=f.stateNode.containerInfo,T=zh(r);Sc(r,T,_);break;default:throw Error(n(161))}}catch(R){_t(r,r.return,R)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function cx(r,s,c){Ce=r,$h(r)}function $h(r,s,c){for(var f=(r.mode&1)!==0;Ce!==null;){var x=Ce,v=x.child;if(x.tag===22&&f){var _=x.memoizedState!==null||ha;if(!_){var T=x.alternate,R=T!==null&&T.memoizedState!==null||Jt;T=ha;var W=Jt;if(ha=_,(Jt=R)&&!W)for(Ce=x;Ce!==null;)_=Ce,R=_.child,_.tag===22&&_.memoizedState!==null?Bh(x):R!==null?(R.return=_,Ce=R):Bh(x);for(;v!==null;)Ce=v,$h(v),v=v.sibling;Ce=x,ha=T,Jt=W}Fh(r)}else(x.subtreeFlags&8772)!==0&&v!==null?(v.return=x,Ce=v):Fh(r)}}function Fh(r){for(;Ce!==null;){var s=Ce;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||pa(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Jt)if(c===null)f.componentDidMount();else{var x=s.elementType===s.type?c.memoizedProps:Mr(s.type,c.memoizedProps);f.componentDidUpdate(x,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Uf(s,v,f);break;case 3:var _=s.updateQueue;if(_!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}Uf(s,_,c)}break;case 5:var T=s.stateNode;if(c===null&&s.flags&4){c=T;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&c.focus();break;case"img":R.src&&(c.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var ie=W.memoizedState;if(ie!==null){var he=ie.dehydrated;he!==null&&Si(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Jt||s.flags&512&&jc(s)}catch(se){_t(s,s.return,se)}}if(s===r){Ce=null;break}if(c=s.sibling,c!==null){c.return=s.return,Ce=c;break}Ce=s.return}}function Uh(r){for(;Ce!==null;){var s=Ce;if(s===r){Ce=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Ce=c;break}Ce=s.return}}function Bh(r){for(;Ce!==null;){var s=Ce;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{pa(4,s)}catch(R){_t(s,c,R)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var x=s.return;try{f.componentDidMount()}catch(R){_t(s,x,R)}}var v=s.return;try{jc(s)}catch(R){_t(s,v,R)}break;case 5:var _=s.return;try{jc(s)}catch(R){_t(s,_,R)}}}catch(R){_t(s,s.return,R)}if(s===r){Ce=null;break}var T=s.sibling;if(T!==null){T.return=s.return,Ce=T;break}Ce=s.return}}var ux=Math.ceil,ma=D.ReactCurrentDispatcher,Cc=D.ReactCurrentOwner,Pr=D.ReactCurrentBatchConfig,Je=0,Ut=null,Et=null,Ht=0,wr=0,Ws=Pn(0),Rt=0,Ki=null,ss=0,ga=0,Ec=0,Qi=null,ur=null,Pc=0,Gs=1/0,dn=null,xa=!1,Tc=null,zn=null,va=!1,Mn=null,ya=0,Ji=0,Lc=null,ba=-1,wa=0;function tr(){return(Je&6)!==0?at():ba!==-1?ba:ba=at()}function On(r){return(r.mode&1)===0?1:(Je&2)!==0&&Ht!==0?Ht&-Ht:G0.transition!==null?(wa===0&&(wa=Rd()),wa):(r=tt,r!==0||(r=window.event,r=r===void 0?16:qd(r.type)),r)}function $r(r,s,c,f){if(50<Ji)throw Ji=0,Lc=null,Error(n(185));bi(r,c,f),((Je&2)===0||r!==Ut)&&(r===Ut&&((Je&2)===0&&(ga|=c),Rt===4&&Dn(r,Ht)),dr(r,f),c===1&&Je===0&&(s.mode&1)===0&&(Gs=at()+500,Qo&&Ln()))}function dr(r,s){var c=r.callbackNode;G1(r,s);var f=To(r,r===Ut?Ht:0);if(f===0)c!==null&&wn(c),r.callbackNode=null,r.callbackPriority=0;else if(s=f&-f,r.callbackPriority!==s){if(c!=null&&wn(c),s===1)r.tag===0?W0(Vh.bind(null,r)):Pf(Vh.bind(null,r)),B0(function(){(Je&6)===0&&Ln()}),c=null;else{switch(zd(f)){case 1:c=N;break;case 4:c=q;break;case 16:c=Q;break;case 536870912:c=be;break;default:c=Q}c=Xh(c,qh.bind(null,r))}r.callbackPriority=s,r.callbackNode=c}}function qh(r,s){if(ba=-1,wa=0,(Je&6)!==0)throw Error(n(327));var c=r.callbackNode;if(Ks()&&r.callbackNode!==c)return null;var f=To(r,r===Ut?Ht:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||s)s=ka(r,f);else{s=f;var x=Je;Je|=2;var v=Wh();(Ut!==r||Ht!==s)&&(dn=null,Gs=at()+500,os(r,s));do try{hx();break}catch(T){Hh(r,T)}while(!0);Ql(),ma.current=v,Je=x,Et!==null?s=0:(Ut=null,Ht=0,s=Rt)}if(s!==0){if(s===2&&(x=dl(r),x!==0&&(f=x,s=Ic(r,x))),s===1)throw c=Ki,os(r,0),Dn(r,f),dr(r,at()),c;if(s===6)Dn(r,f);else{if(x=r.current.alternate,(f&30)===0&&!dx(x)&&(s=ka(r,f),s===2&&(v=dl(r),v!==0&&(f=v,s=Ic(r,v))),s===1))throw c=Ki,os(r,0),Dn(r,f),dr(r,at()),c;switch(r.finishedWork=x,r.finishedLanes=f,s){case 0:case 1:throw Error(n(345));case 2:as(r,ur,dn);break;case 3:if(Dn(r,f),(f&130023424)===f&&(s=Pc+500-at(),10<s)){if(To(r,0)!==0)break;if(x=r.suspendedLanes,(x&f)!==f){tr(),r.pingedLanes|=r.suspendedLanes&x;break}r.timeoutHandle=Dl(as.bind(null,r,ur,dn),s);break}as(r,ur,dn);break;case 4:if(Dn(r,f),(f&4194240)===f)break;for(s=r.eventTimes,x=-1;0<f;){var _=31-et(f);v=1<<_,_=s[_],_>x&&(x=_),f&=~v}if(f=x,f=at()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ux(f/1960))-f,10<f){r.timeoutHandle=Dl(as.bind(null,r,ur,dn),f);break}as(r,ur,dn);break;case 5:as(r,ur,dn);break;default:throw Error(n(329))}}}return dr(r,at()),r.callbackNode===c?qh.bind(null,r):null}function Ic(r,s){var c=Qi;return r.current.memoizedState.isDehydrated&&(os(r,s).flags|=256),r=ka(r,s),r!==2&&(s=ur,ur=c,s!==null&&Ac(s)),r}function Ac(r){ur===null?ur=r:ur.push.apply(ur,r)}function dx(r){for(var s=r;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var x=c[f],v=x.getSnapshot;x=x.value;try{if(!Rr(v(),x))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dn(r,s){for(s&=~Ec,s&=~ga,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var c=31-et(s),f=1<<c;r[c]=-1,s&=~f}}function Vh(r){if((Je&6)!==0)throw Error(n(327));Ks();var s=To(r,0);if((s&1)===0)return dr(r,at()),null;var c=ka(r,s);if(r.tag!==0&&c===2){var f=dl(r);f!==0&&(s=f,c=Ic(r,f))}if(c===1)throw c=Ki,os(r,0),Dn(r,s),dr(r,at()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,as(r,ur,dn),dr(r,at()),null}function Rc(r,s){var c=Je;Je|=1;try{return r(s)}finally{Je=c,Je===0&&(Gs=at()+500,Qo&&Ln())}}function is(r){Mn!==null&&Mn.tag===0&&(Je&6)===0&&Ks();var s=Je;Je|=1;var c=Pr.transition,f=tt;try{if(Pr.transition=null,tt=1,r)return r()}finally{tt=f,Pr.transition=c,Je=s,(Je&6)===0&&Ln()}}function zc(){wr=Ws.current,ft(Ws)}function os(r,s){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,U0(c)),Et!==null)for(c=Et.return;c!==null;){var f=c;switch(Vl(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Go();break;case 3:qs(),ft(ar),ft(Gt),nc();break;case 5:tc(f);break;case 4:qs();break;case 13:ft(xt);break;case 19:ft(xt);break;case 10:Jl(f.type._context);break;case 22:case 23:zc()}c=c.return}if(Ut=r,Et=r=$n(r.current,null),Ht=wr=s,Rt=0,Ki=null,Ec=ga=ss=0,ur=Qi=null,ts!==null){for(s=0;s<ts.length;s++)if(c=ts[s],f=c.interleaved,f!==null){c.interleaved=null;var x=f.next,v=c.pending;if(v!==null){var _=v.next;v.next=x,f.next=_}c.pending=f}ts=null}return r}function Hh(r,s){do{var c=Et;try{if(Ql(),ia.current=ca,oa){for(var f=vt.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}oa=!1}if(ns=0,Ft=At=vt=null,Bi=!1,qi=0,Cc.current=null,c===null||c.return===null){Rt=1,Ki=s,Et=null;break}e:{var v=r,_=c.return,T=c,R=s;if(s=Ht,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=R,ie=T,he=ie.tag;if((ie.mode&1)===0&&(he===0||he===11||he===15)){var se=ie.alternate;se?(ie.updateQueue=se.updateQueue,ie.memoizedState=se.memoizedState,ie.lanes=se.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var je=gh(_);if(je!==null){je.flags&=-257,xh(je,_,T,v,s),je.mode&1&&mh(v,W,s),s=je,R=W;var Ee=s.updateQueue;if(Ee===null){var Te=new Set;Te.add(R),s.updateQueue=Te}else Ee.add(R);break e}else{if((s&1)===0){mh(v,W,s),Mc();break e}R=Error(n(426))}}else if(pt&&T.mode&1){var St=gh(_);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),xh(St,_,T,v,s),Gl(Vs(R,T));break e}}v=R=Vs(R,T),Rt!==4&&(Rt=2),Qi===null?Qi=[v]:Qi.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var F=hh(v,R,s);Ff(v,F);break e;case 1:T=R;var M=v.type,B=v.stateNode;if((v.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(zn===null||!zn.has(B)))){v.flags|=65536,s&=-s,v.lanes|=s;var xe=ph(v,T,s);Ff(v,xe);break e}}v=v.return}while(v!==null)}Kh(c)}catch(Le){s=Le,Et===c&&c!==null&&(Et=c=c.return);continue}break}while(!0)}function Wh(){var r=ma.current;return ma.current=ca,r===null?ca:r}function Mc(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ut===null||(ss&268435455)===0&&(ga&268435455)===0||Dn(Ut,Ht)}function ka(r,s){var c=Je;Je|=2;var f=Wh();(Ut!==r||Ht!==s)&&(dn=null,os(r,s));do try{fx();break}catch(x){Hh(r,x)}while(!0);if(Ql(),Je=c,ma.current=f,Et!==null)throw Error(n(261));return Ut=null,Ht=0,Rt}function fx(){for(;Et!==null;)Gh(Et)}function hx(){for(;Et!==null&&!Ss();)Gh(Et)}function Gh(r){var s=Yh(r.alternate,r,wr);r.memoizedProps=r.pendingProps,s===null?Kh(r):Et=s,Cc.current=null}function Kh(r){var s=r;do{var c=s.alternate;if(r=s.return,(s.flags&32768)===0){if(c=ix(c,s,wr),c!==null){Et=c;return}}else{if(c=ox(c,s),c!==null){c.flags&=32767,Et=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Rt=6,Et=null;return}}if(s=s.sibling,s!==null){Et=s;return}Et=s=r}while(s!==null);Rt===0&&(Rt=5)}function as(r,s,c){var f=tt,x=Pr.transition;try{Pr.transition=null,tt=1,px(r,s,c,f)}finally{Pr.transition=x,tt=f}return null}function px(r,s,c,f){do Ks();while(Mn!==null);if((Je&6)!==0)throw Error(n(327));c=r.finishedWork;var x=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var v=c.lanes|c.childLanes;if(K1(r,v),r===Ut&&(Et=Ut=null,Ht=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||va||(va=!0,Xh(Q,function(){return Ks(),null})),v=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||v){v=Pr.transition,Pr.transition=null;var _=tt;tt=1;var T=Je;Je|=4,Cc.current=null,lx(r,c),Dh(c,r),R0(Ml),Ao=!!zl,Ml=zl=null,r.current=c,cx(c),Ns(),Je=T,tt=_,Pr.transition=v}else r.current=c;if(va&&(va=!1,Mn=r,ya=x),v=r.pendingLanes,v===0&&(zn=null),Ie(c.stateNode),dr(r,at()),s!==null)for(f=r.onRecoverableError,c=0;c<s.length;c++)x=s[c],f(x.value,{componentStack:x.stack,digest:x.digest});if(xa)throw xa=!1,r=Tc,Tc=null,r;return(ya&1)!==0&&r.tag!==0&&Ks(),v=r.pendingLanes,(v&1)!==0?r===Lc?Ji++:(Ji=0,Lc=r):Ji=0,Ln(),null}function Ks(){if(Mn!==null){var r=zd(ya),s=Pr.transition,c=tt;try{if(Pr.transition=null,tt=16>r?16:r,Mn===null)var f=!1;else{if(r=Mn,Mn=null,ya=0,(Je&6)!==0)throw Error(n(331));var x=Je;for(Je|=4,Ce=r.current;Ce!==null;){var v=Ce,_=v.child;if((Ce.flags&16)!==0){var T=v.deletions;if(T!==null){for(var R=0;R<T.length;R++){var W=T[R];for(Ce=W;Ce!==null;){var ie=Ce;switch(ie.tag){case 0:case 11:case 15:Gi(8,ie,v)}var he=ie.child;if(he!==null)he.return=ie,Ce=he;else for(;Ce!==null;){ie=Ce;var se=ie.sibling,je=ie.return;if(Ah(ie),ie===W){Ce=null;break}if(se!==null){se.return=je,Ce=se;break}Ce=je}}}var Ee=v.alternate;if(Ee!==null){var Te=Ee.child;if(Te!==null){Ee.child=null;do{var St=Te.sibling;Te.sibling=null,Te=St}while(Te!==null)}}Ce=v}}if((v.subtreeFlags&2064)!==0&&_!==null)_.return=v,Ce=_;else e:for(;Ce!==null;){if(v=Ce,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Gi(9,v,v.return)}var F=v.sibling;if(F!==null){F.return=v.return,Ce=F;break e}Ce=v.return}}var M=r.current;for(Ce=M;Ce!==null;){_=Ce;var B=_.child;if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,Ce=B;else e:for(_=M;Ce!==null;){if(T=Ce,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:pa(9,T)}}catch(Le){_t(T,T.return,Le)}if(T===_){Ce=null;break e}var xe=T.sibling;if(xe!==null){xe.return=T.return,Ce=xe;break e}Ce=T.return}}if(Je=x,Ln(),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(ce,r)}catch{}f=!0}return f}finally{tt=c,Pr.transition=s}}return!1}function Qh(r,s,c){s=Vs(c,s),s=hh(r,s,1),r=An(r,s,1),s=tr(),r!==null&&(bi(r,1,s),dr(r,s))}function _t(r,s,c){if(r.tag===3)Qh(r,r,c);else for(;s!==null;){if(s.tag===3){Qh(s,r,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(zn===null||!zn.has(f))){r=Vs(c,r),r=ph(s,r,1),s=An(s,r,1),r=tr(),s!==null&&(bi(s,1,r),dr(s,r));break}}s=s.return}}function mx(r,s,c){var f=r.pingCache;f!==null&&f.delete(s),s=tr(),r.pingedLanes|=r.suspendedLanes&c,Ut===r&&(Ht&c)===c&&(Rt===4||Rt===3&&(Ht&130023424)===Ht&&500>at()-Pc?os(r,0):Ec|=c),dr(r,s)}function Jh(r,s){s===0&&((r.mode&1)===0?s=1:(s=Po,Po<<=1,(Po&130023424)===0&&(Po=4194304)));var c=tr();r=ln(r,s),r!==null&&(bi(r,s,c),dr(r,c))}function gx(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),Jh(r,c)}function xx(r,s){var c=0;switch(r.tag){case 13:var f=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(s),Jh(r,c)}var Yh;Yh=function(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps||ar.current)cr=!0;else{if((r.lanes&c)===0&&(s.flags&128)===0)return cr=!1,sx(r,s,c);cr=(r.flags&131072)!==0}else cr=!1,pt&&(s.flags&1048576)!==0&&Tf(s,Yo,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;fa(r,s),r=s.pendingProps;var x=Ms(s,Gt.current);Bs(s,c),x=oc(null,s,f,r,x,c);var v=ac();return s.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,lr(f)?(v=!0,Ko(s)):v=!1,s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Zl(s),x.updater=ua,s.stateNode=x,x._reactInternals=s,hc(s,f,r,c),s=xc(null,s,f,!0,v,c)):(s.tag=0,pt&&v&&ql(s),er(null,s,x,c),s=s.child),s;case 16:f=s.elementType;e:{switch(fa(r,s),r=s.pendingProps,x=f._init,f=x(f._payload),s.type=f,x=s.tag=yx(f),r=Mr(f,r),x){case 0:s=gc(null,s,f,r,c);break e;case 1:s=_h(null,s,f,r,c);break e;case 11:s=vh(null,s,f,r,c);break e;case 14:s=yh(null,s,f,Mr(f.type,r),c);break e}throw Error(n(306,f,""))}return s;case 0:return f=s.type,x=s.pendingProps,x=s.elementType===f?x:Mr(f,x),gc(r,s,f,x,c);case 1:return f=s.type,x=s.pendingProps,x=s.elementType===f?x:Mr(f,x),_h(r,s,f,x,c);case 3:e:{if(jh(s),r===null)throw Error(n(387));f=s.pendingProps,v=s.memoizedState,x=v.element,$f(r,s),na(s,f,null,c);var _=s.memoizedState;if(f=_.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){x=Vs(Error(n(423)),s),s=Sh(r,s,f,c,x);break e}else if(f!==x){x=Vs(Error(n(424)),s),s=Sh(r,s,f,c,x);break e}else for(br=En(s.stateNode.containerInfo.firstChild),yr=s,pt=!0,zr=null,c=Of(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($s(),f===x){s=un(r,s,c);break e}er(r,s,f,c)}s=s.child}return s;case 5:return Bf(s),r===null&&Wl(s),f=s.type,x=s.pendingProps,v=r!==null?r.memoizedProps:null,_=x.children,Ol(f,x)?_=null:v!==null&&Ol(f,v)&&(s.flags|=32),kh(r,s),er(r,s,_,c),s.child;case 6:return r===null&&Wl(s),null;case 13:return Nh(r,s,c);case 4:return ec(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=Fs(s,null,f,c):er(r,s,f,c),s.child;case 11:return f=s.type,x=s.pendingProps,x=s.elementType===f?x:Mr(f,x),vh(r,s,f,x,c);case 7:return er(r,s,s.pendingProps,c),s.child;case 8:return er(r,s,s.pendingProps.children,c),s.child;case 12:return er(r,s,s.pendingProps.children,c),s.child;case 10:e:{if(f=s.type._context,x=s.pendingProps,v=s.memoizedProps,_=x.value,lt(ea,f._currentValue),f._currentValue=_,v!==null)if(Rr(v.value,_)){if(v.children===x.children&&!ar.current){s=un(r,s,c);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){_=v.child;for(var R=T.firstContext;R!==null;){if(R.context===f){if(v.tag===1){R=cn(-1,c&-c),R.tag=2;var W=v.updateQueue;if(W!==null){W=W.shared;var ie=W.pending;ie===null?R.next=R:(R.next=ie.next,ie.next=R),W.pending=R}}v.lanes|=c,R=v.alternate,R!==null&&(R.lanes|=c),Yl(v.return,c,s),T.lanes|=c;break}R=R.next}}else if(v.tag===10)_=v.type===s.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(n(341));_.lanes|=c,T=_.alternate,T!==null&&(T.lanes|=c),Yl(_,c,s),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===s){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}er(r,s,x.children,c),s=s.child}return s;case 9:return x=s.type,f=s.pendingProps.children,Bs(s,c),x=Cr(x),f=f(x),s.flags|=1,er(r,s,f,c),s.child;case 14:return f=s.type,x=Mr(f,s.pendingProps),x=Mr(f.type,x),yh(r,s,f,x,c);case 15:return bh(r,s,s.type,s.pendingProps,c);case 17:return f=s.type,x=s.pendingProps,x=s.elementType===f?x:Mr(f,x),fa(r,s),s.tag=1,lr(f)?(r=!0,Ko(s)):r=!1,Bs(s,c),dh(s,f,x),hc(s,f,x,c),xc(null,s,f,!0,r,c);case 19:return Eh(r,s,c);case 22:return wh(r,s,c)}throw Error(n(156,s.tag))};function Xh(r,s){return jr(r,s)}function vx(r,s,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(r,s,c,f){return new vx(r,s,c,f)}function Oc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yx(r){if(typeof r=="function")return Oc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Z)return 11;if(r===ee)return 14}return 2}function $n(r,s){var c=r.alternate;return c===null?(c=Tr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function _a(r,s,c,f,x,v){var _=2;if(f=r,typeof r=="function")Oc(r)&&(_=1);else if(typeof r=="string")_=5;else e:switch(r){case J:return ls(c.children,x,v,s);case K:_=8,x|=8;break;case oe:return r=Tr(12,c,s,x|2),r.elementType=oe,r.lanes=v,r;case ue:return r=Tr(13,c,s,x),r.elementType=ue,r.lanes=v,r;case re:return r=Tr(19,c,s,x),r.elementType=re,r.lanes=v,r;case Se:return ja(c,x,v,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:_=10;break e;case $:_=9;break e;case Z:_=11;break e;case ee:_=14;break e;case ve:_=16,f=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return s=Tr(_,c,s,x),s.elementType=r,s.type=f,s.lanes=v,s}function ls(r,s,c,f){return r=Tr(7,r,f,s),r.lanes=c,r}function ja(r,s,c,f){return r=Tr(22,r,f,s),r.elementType=Se,r.lanes=c,r.stateNode={isHidden:!1},r}function Dc(r,s,c){return r=Tr(6,r,null,s),r.lanes=c,r}function $c(r,s,c){return s=Tr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function bx(r,s,c,f,x){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=f,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Fc(r,s,c,f,x,v,_,T,R){return r=new bx(r,s,c,T,R),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Tr(3,null,null,s),r.current=v,v.stateNode=r,v.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zl(v),r}function wx(r,s,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:f==null?null:""+f,children:r,containerInfo:s,implementation:c}}function Zh(r){if(!r)return Tn;r=r._reactInternals;e:{if(Ar(r)!==r||r.tag!==1)throw Error(n(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(lr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(lr(c))return Cf(r,c,s)}return s}function ep(r,s,c,f,x,v,_,T,R){return r=Fc(c,f,!0,r,x,v,_,T,R),r.context=Zh(null),c=r.current,f=tr(),x=On(c),v=cn(f,x),v.callback=s??null,An(c,v,x),r.current.lanes=x,bi(r,x,f),dr(r,f),r}function Sa(r,s,c,f){var x=s.current,v=tr(),_=On(x);return c=Zh(c),s.context===null?s.context=c:s.pendingContext=c,s=cn(v,_),s.payload={element:r},f=f===void 0?null:f,f!==null&&(s.callback=f),r=An(x,s,_),r!==null&&($r(r,x,_,v),ra(r,x,_)),_}function Na(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function tp(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function Uc(r,s){tp(r,s),(r=r.alternate)&&tp(r,s)}function kx(){return null}var rp=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bc(r){this._internalRoot=r}Ca.prototype.render=Bc.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));Sa(r,s,null,null)},Ca.prototype.unmount=Bc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;is(function(){Sa(null,r,null,null)}),s[nn]=null}};function Ca(r){this._internalRoot=r}Ca.prototype.unstable_scheduleHydration=function(r){if(r){var s=Dd();r={blockedOn:null,target:r,priority:s};for(var c=0;c<Sn.length&&s!==0&&s<Sn[c].priority;c++);Sn.splice(c,0,r),c===0&&Ud(r)}};function qc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ea(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function np(){}function _x(r,s,c,f,x){if(x){if(typeof f=="function"){var v=f;f=function(){var W=Na(_);v.call(W)}}var _=ep(s,f,r,0,null,!1,!1,"",np);return r._reactRootContainer=_,r[nn]=_.current,Ri(r.nodeType===8?r.parentNode:r),is(),_}for(;x=r.lastChild;)r.removeChild(x);if(typeof f=="function"){var T=f;f=function(){var W=Na(R);T.call(W)}}var R=Fc(r,0,!1,null,null,!1,!1,"",np);return r._reactRootContainer=R,r[nn]=R.current,Ri(r.nodeType===8?r.parentNode:r),is(function(){Sa(s,R,c,f)}),R}function Pa(r,s,c,f,x){var v=c._reactRootContainer;if(v){var _=v;if(typeof x=="function"){var T=x;x=function(){var R=Na(_);T.call(R)}}Sa(s,_,r,x)}else _=_x(c,s,r,x,f);return Na(_)}Md=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var c=yi(s.pendingLanes);c!==0&&(hl(s,c|1),dr(s,at()),(Je&6)===0&&(Gs=at()+500,Ln()))}break;case 13:is(function(){var f=ln(r,1);if(f!==null){var x=tr();$r(f,r,1,x)}}),Uc(r,1)}},pl=function(r){if(r.tag===13){var s=ln(r,134217728);if(s!==null){var c=tr();$r(s,r,134217728,c)}Uc(r,134217728)}},Od=function(r){if(r.tag===13){var s=On(r),c=ln(r,s);if(c!==null){var f=tr();$r(c,r,s,f)}Uc(r,s)}},Dd=function(){return tt},$d=function(r,s){var c=tt;try{return tt=r,s()}finally{tt=c}},ot=function(r,s,c){switch(s){case"input":if(Ct(r,c),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==r&&f.form===r.form){var x=Wo(f);if(!x)throw Error(n(90));qe(f),Ct(f,x)}}}break;case"textarea":wt(r,c);break;case"select":s=c.value,s!=null&&yt(r,!!c.multiple,s,!1)}},Vr=Rc,xn=is;var jx={usingClientEntryPoint:!1,Events:[Oi,Rs,Wo,Dt,gn,Rc]},Yi={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sx={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=_s(r),r===null?null:r.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||kx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{ce=Ta.inject(Sx),me=Ta}catch{}}return fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx,fr.createPortal=function(r,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(s))throw Error(n(200));return wx(r,s,null,c)},fr.createRoot=function(r,s){if(!qc(r))throw Error(n(299));var c=!1,f="",x=rp;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=Fc(r,1,!1,null,null,c,!1,f,x),r[nn]=s.current,Ri(r.nodeType===8?r.parentNode:r),new Bc(s)},fr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=_s(s),r=r===null?null:r.stateNode,r},fr.flushSync=function(r){return is(r)},fr.hydrate=function(r,s,c){if(!Ea(s))throw Error(n(200));return Pa(null,r,s,!0,c)},fr.hydrateRoot=function(r,s,c){if(!qc(r))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,x=!1,v="",_=rp;if(c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),s=ep(s,null,r,1,c??null,x,!1,v,_),r[nn]=s.current,Ri(r),f)for(r=0;r<f.length;r++)c=f[r],x=c._getVersion,x=x(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,x]:s.mutableSourceEagerHydrationData.push(c,x);return new Ca(s)},fr.render=function(r,s,c){if(!Ea(s))throw Error(n(200));return Pa(null,r,s,!1,c)},fr.unmountComponentAtNode=function(r){if(!Ea(r))throw Error(n(40));return r._reactRootContainer?(is(function(){Pa(null,null,r,!1,function(){r._reactRootContainer=null,r[nn]=null})}),!0):!1},fr.unstable_batchedUpdates=Rc,fr.unstable_renderSubtreeIntoContainer=function(r,s,c,f){if(!Ea(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Pa(r,s,c,!1,f)},fr.version="18.3.1-next-f1338f8080-20240426",fr}var dp;function eg(){if(dp)return Wc.exports;dp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wc.exports=Mx(),Wc.exports}var fp;function Ox(){if(fp)return La;fp=1;var e=eg();return La.createRoot=e.createRoot,La.hydrateRoot=e.hydrateRoot,La}var Dx=Ox();const $x="modulepreload",Fx=function(e){return"/"+e},hp={},xs=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=h(n.map(p=>{if(p=Fx(p),p in hp)return;hp[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":$x,m||(y.as="script"),y.crossOrigin="",y.href=p,d&&y.setAttribute("nonce",d),document.head.appendChild(y),m)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},Ux=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xs(async()=>{const{default:i}=await Promise.resolve().then(()=>mi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class ed extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class Bx extends ed{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class pp extends ed{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mp extends ed{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ku;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ku||(ku={}));var qx=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class Vx{constructor(t,{headers:n={},customFetch:i,region:o=ku.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=Ux(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return qx(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:u}=n;let d={},{region:h}=n;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(d["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(d["Content-Type"]="application/json",m=JSON.stringify(u)));const g=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:m}).catch(C=>{throw new Bx(C)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new pp(g);if(!g.ok)throw new mp(g);let b=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield g.json():b==="application/octet-stream"?w=yield g.blob():b==="text/event-stream"?w=g:b==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof mp||o instanceof pp?o.context:void 0}}})}}var qt={},Qs={},Js={},Ys={},Xs={},Zs={},Hx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},di=Hx();const Wx=di.fetch,tg=di.fetch.bind(di),rg=di.Headers,Gx=di.Request,Kx=di.Response,mi=Object.freeze(Object.defineProperty({__proto__:null,Headers:rg,Request:Gx,Response:Kx,default:tg,fetch:Wx},Symbol.toStringTag,{value:"Module"})),Qx=Ex(mi);var Ia={},gp;function ng(){if(gp)return Ia;gp=1,Object.defineProperty(Ia,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ia.default=e,Ia}var xp;function sg(){if(xp)return Zs;xp=1;var e=Zs&&Zs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Zs,"__esModule",{value:!0});const t=e(Qx),n=e(ng());class i{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,g,y,b;let w=null,C=null,j=null,P=p.status,A=p.statusText;if(p.ok){if(this.method!=="HEAD"){const z=await p.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?C=z:C=JSON.parse(z))}const D=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),G=(y=p.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");D&&G&&G.length>1&&(j=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(w={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,j=null,P=406,A="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const D=await p.text();try{w=JSON.parse(D),Array.isArray(w)&&p.status===404&&(C=[],w=null,P=200,A="OK")}catch{p.status===404&&D===""?(P=204,A="No Content"):w={message:D}}if(w&&this.isMaybeSingle&&(!((b=w?.details)===null||b===void 0)&&b.includes("0 rows"))&&(w=null,P=200,A="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:C,count:j,status:P,statusText:A}});return this.shouldThrowOnError||(h=h.catch(p=>{var m,g,y;return{error:{message:`${(m=p?.name)!==null&&m!==void 0?m:"FetchError"}: ${p?.message}`,details:`${(g=p?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=p?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(l,u)}returns(){return this}overrideTypes(){return this}}return Zs.default=i,Zs}var vp;function ig(){if(vp)return Xs;vp=1;var e=Xs&&Xs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xs,"__esModule",{value:!0});const t=e(sg());class n extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",m=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${m?`${m},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var m;const g=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${y}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Xs.default=n,Xs}var yp;function td(){if(yp)return Ys;yp=1;var e=Ys&&Ys.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ys,"__esModule",{value:!0});const t=e(ig());class n extends t.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const u=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:u,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${h}fts${p}.${l}`),this}match(o){return Object.entries(o).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(o,l,u){return this.url.searchParams.append(o,`not.${l}.${u}`),this}or(o,{foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,l,u){return this.url.searchParams.append(o,`${l}.${u}`),this}}return Ys.default=n,Ys}var bp;function og(){if(bp)return Js;bp=1;var e=Js&&Js.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Js,"__esModule",{value:!0});const t=e(td());class n{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(o,{head:l=!1,count:u}={}){const d=l?"HEAD":"GET";let h=!1;const p=(o??"*").split("").map(m=>/\s/.test(m)&&!h?"":(m==='"'&&(h=!h),m)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var p;const m="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(g.length>0){const y=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Js.default=n,Js}var wp;function Jx(){if(wp)return Qs;wp=1;var e=Qs&&Qs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Qs,"__esModule",{value:!0});const t=e(og()),n=e(td());class i{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:p}={}){var m;let g;const y=new URL(`${this.url}/rpc/${l}`);let b;d||h?(g=d?"HEAD":"GET",Object.entries(u).filter(([C,j])=>j!==void 0).map(([C,j])=>[C,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([C,j])=>{y.searchParams.append(C,j)})):(g="POST",b=u);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new n.default({method:g,url:y,headers:w,schema:this.schemaName,body:b,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Qs.default=i,Qs}var kp;function Yx(){if(kp)return qt;kp=1;var e=qt&&qt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const t=e(Jx());qt.PostgrestClient=t.default;const n=e(og());qt.PostgrestQueryBuilder=n.default;const i=e(td());qt.PostgrestFilterBuilder=i.default;const o=e(ig());qt.PostgrestTransformBuilder=o.default;const l=e(sg());qt.PostgrestBuilder=l.default;const u=e(ng());return qt.PostgrestError=u.default,qt.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},qt}var Xx=Yx();const Zx=tl(Xx),{PostgrestClient:ev,PostgrestQueryBuilder:R8,PostgrestFilterBuilder:z8,PostgrestTransformBuilder:M8,PostgrestBuilder:O8,PostgrestError:D8}=Zx;class tv{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const rv="2.15.5",nv=`realtime-js/${rv}`,sv="1.0.0",_u=1e4,iv=1e3,ov=100;var oo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(oo||(oo={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var Ur;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ur||(Ur={}));var ju;(function(e){e.websocket="websocket"})(ju||(ju={}));var hs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hs||(hs={}));class av{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const o=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=i.decode(t.slice(u,u+o));u=u+o;const h=i.decode(t.slice(u,u+l));u=u+l;const p=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class ag{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ct||(ct={}));const _p=(e,t,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((l,u)=>(l[u]=lv(u,e,t,o),l),{})},lv=(e,t,n,i)=>{const o=t.find(d=>d.name===e),l=o?.type,u=n[e];return l&&!i.includes(l)?lg(l,u):Su(u)},lg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return fv(t,n)}switch(e){case ct.bool:return cv(t);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return uv(t);case ct.json:case ct.jsonb:return dv(t);case ct.timestamp:return hv(t);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return Su(t);default:return Su(t)}},Su=e=>e,cv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fv=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>lg(t,d))}return e},hv=e=>typeof e=="string"?e.replace(" ","T"):e,cg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Qc{constructor(t,n,i={},o=_u){this.channel=t,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jp||(jp={}));class ao{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ao.syncState(this.state,o,l,u),this.pendingDiffs.forEach(h=>{this.state=ao.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ao.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,o){const l=this.cloneDeep(t),u=this.transformState(n),d={},h={};return this.map(l,(p,m)=>{u[p]||(h[p]=m)}),this.map(u,(p,m)=>{const g=l[p];if(g){const y=m.map(j=>j.presence_ref),b=g.map(j=>j.presence_ref),w=m.filter(j=>b.indexOf(j.presence_ref)<0),C=g.filter(j=>y.indexOf(j.presence_ref)<0);w.length>0&&(d[p]=w),C.length>0&&(h[p]=C)}else d[p]=m}),this.syncDiff(l,{joins:d,leaves:h},i,o)}static syncDiff(t,n,i,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(d,h)=>{var p;const m=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(h),m.length>0){const g=t[d].map(b=>b.presence_ref),y=m.filter(b=>g.indexOf(b.presence_ref)<0);t[d].unshift(...y)}i(d,m,h)}),this.map(u,(d,h)=>{let p=t[d];if(!p)return;const m=h.map(g=>g.presence_ref);p=p.filter(g=>m.indexOf(g.presence_ref)<0),t[d]=p,o(d,p,h),p.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const o=t[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sp||(Sp={}));var lo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(lo||(lo={}));var hn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(hn||(hn={}));class rd{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qc(this,Ur.join,this.params,this.timeout),this.rejoinTimer=new ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ur.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ao(this),this.broadcastEndpointURL=cg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&o!==void 0?o:[],m=!!this.bindings[lo.PRESENCE]&&this.bindings[lo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(hn.CHANNEL_ERROR,b)),this._onClose(()=>t?.(hn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket.setAuth(),b===void 0){t?.(hn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,j=(w=C?.length)!==null&&w!==void 0?w:0,P=[];for(let A=0;A<j;A++){const I=C[A],{filter:{event:D,schema:G,table:z,filter:J}}=I,K=b&&b[A];if(K&&K.event===D&&K.schema===G&&K.table===z&&K.filter===J)P.push(Object.assign(Object.assign({},I),{id:K.id}));else{this.unsubscribe(),this.state=zt.errored,t?.(hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,t&&t(hn.SUBSCRIBED);return}}).receive("error",b=>{this.state=zt.errored,t?.(hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===zt.joined&&t===lo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async send(t,n={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:u}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ur.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Qc(this,Ur.leave,{},t),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Qc(this,t,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ov){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var o,l;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:p,join:m}=Ur;if(i&&[d,h,p,m].indexOf(u)>=0&&i!==this._joinRef())return;let y=this._onMessage(u,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,C,j;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(C=b.filter)===null||C===void 0?void 0:C.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(b=>b.callback(y,i)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var w,C,j,P,A,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const D=b.id,G=(w=b.filter)===null||w===void 0?void 0:w.event;return D&&((C=n.ids)===null||C===void 0?void 0:C.includes(D))&&(G==="*"||G?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const D=(A=(P=b?.filter)===null||P===void 0?void 0:P.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return D==="*"||D===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:C,table:j,commit_timestamp:P,type:A,errors:I}=w;y=Object.assign(Object.assign({},{schema:C,table:j,commit_timestamp:P,eventType:A,new:{},old:{},errors:I}),this._getPayloadRecords(w))}b.callback(y,i)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const o=t.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&rd.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ur.close,{},t)}_onError(t){this._on(Ur.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=_p(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=_p(t.columns,t.old_record)),n}}const Jc=()=>{},Aa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pv=[1e3,2e3,5e3,1e4],mv=1e4,gv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xv{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=Aa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jc,this.ref=0,this.reconnectTimer=null,this.logger=Jc,this.conn=null,this.sendBuffer=[],this.serializer=new av,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>xs(async()=>{const{default:d}=await Promise.resolve().then(()=>mi);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ju.websocket}`,this.httpEndpoint=cg(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tv.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sv}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case oo.connecting:return hs.Connecting;case oo.open:return hs.Open;case oo.closing:return hs.Closing;default:return hs.Closed}}isConnected(){return this.connectionState()===hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new rd(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(iv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Aa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=n,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${i} ${o} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ur.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${i}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([gv],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:nv};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Ur.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Aa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,o,l,u,d,h,p,m;if(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:_u,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Aa.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:Jc,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>pv[g-1]||mv),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((g,y)=>y(JSON.stringify(g))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class nd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vv extends nd{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nu extends nd{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var yv=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const ug=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xs(async()=>{const{default:i}=await Promise.resolve().then(()=>mi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},bv=()=>yv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xs(()=>Promise.resolve().then(()=>mi),void 0)).Response:Response}),Cu=e=>{if(Array.isArray(e))return e.map(n=>Cu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=Cu(i)}),t},wv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var vs=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const Yc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kv=(e,t,n)=>vs(void 0,void 0,void 0,function*(){const i=yield bv();e instanceof i&&!n?.noResolveJson?e.json().then(o=>{const l=e.status||500,u=o?.statusCode||l+"";t(new vv(Yc(o),l,u))}).catch(o=>{t(new Nu(Yc(o),o))}):t(new Nu(Yc(e),e))}),_v=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!i?o:(wv(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),n))};function ko(e,t,n,i,o,l){return vs(this,void 0,void 0,function*(){return new Promise((u,d)=>{e(n,_v(t,i,o,l)).then(h=>{if(!h.ok)throw h;return i?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>kv(h,d,i))})})}function Wa(e,t,n,i){return vs(this,void 0,void 0,function*(){return ko(e,"GET",t,n,i)})}function Yr(e,t,n,i,o){return vs(this,void 0,void 0,function*(){return ko(e,"POST",t,i,o,n)})}function Eu(e,t,n,i,o){return vs(this,void 0,void 0,function*(){return ko(e,"PUT",t,i,o,n)})}function jv(e,t,n,i){return vs(this,void 0,void 0,function*(){return ko(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function dg(e,t,n,i,o){return vs(this,void 0,void 0,function*(){return ko(e,"DELETE",t,i,o,n)})}var rr=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const Sv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Np={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nv{constructor(t,n={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=ug(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,o){return rr(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Np),o);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h))):(l=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const p=this._removeEmptyFolders(n),m=this._getFinalPath(p),g=yield(t=="PUT"?Eu:Yr)(this.fetch,`${this.url}/object/${m}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}upload(t,n,i){return rr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,o){return rr(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:Np.upsert},o),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",p.cacheControl)):(h=i,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);const g=yield Eu(this.fetch,d.toString(),h,{headers:m});return{data:{path:l,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,n){return rr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);n?.upsert&&(o["x-upsert"]="true");const l=yield Yr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new nd("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}update(t,n,i){return rr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return rr(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}copy(t,n,i){return rr(this,void 0,void 0,function*(){try{return{data:{path:(yield Yr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,i){return rr(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield Yr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,i){return rr(this,void 0,void 0,function*(){try{const o=yield Yr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}download(t,n){return rr(this,void 0,void 0,function*(){const o=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),u=l?`?${l}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield Wa(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Mt(d))return{data:null,error:d};throw d}})}info(t){return rr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Wa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cu(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}exists(t){return rr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield jv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i)&&i instanceof Nu){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),o=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const d=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${p}`)}}}remove(t){return rr(this,void 0,void 0,function*(){try{return{data:yield dg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}list(t,n,i){return rr(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Sv),n),{prefix:t||""});return{data:yield Yr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}listV2(t,n){return rr(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Yr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Cv="2.12.1",Ev={"X-Client-Info":`storage-js/${Cv}`};var ei=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class Pv{constructor(t,n={},i,o){this.shouldThrowOnError=!1;const l=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Ev),n),this.fetch=ug(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ei(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}getBucket(t){return ei(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return ei(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return ei(this,void 0,void 0,function*(){try{return{data:yield Eu(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ei(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ei(this,void 0,void 0,function*(){try{return{data:yield dg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}class Tv extends Pv{constructor(t,n={},i,o){super(t,n,i,o)}from(t){return new Nv(this.url,this.headers,t,this.fetch)}}const Lv="2.57.4";let io="";typeof Deno<"u"?io="deno":typeof document<"u"?io="web":typeof navigator<"u"&&navigator.product==="ReactNative"?io="react-native":io="node";const Iv={"X-Client-Info":`supabase-js-${io}/${Lv}`},Av={headers:Iv},Rv={schema:"public"},zv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mv={};var Ov=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};const Dv=e=>{let t;return e?t=e:typeof fetch>"u"?t=tg:t=fetch,(...n)=>t(...n)},$v=()=>typeof Headers>"u"?rg:Headers,Fv=(e,t,n)=>{const i=Dv(n),o=$v();return(l,u)=>Ov(void 0,void 0,void 0,function*(){var d;const h=(d=yield t())!==null&&d!==void 0?d:e;let p=new o(u?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),i(l,Object.assign(Object.assign({},u),{headers:p}))})};var Uv=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};function Bv(e){return e.endsWith("/")?e:e+"/"}function qv(e,t){var n,i;const{db:o,auth:l,realtime:u,global:d}=e,{db:h,auth:p,realtime:m,global:g}=t,y={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},m),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g?.headers)!==null&&n!==void 0?n:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Uv(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Vv(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Bv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fg="2.71.1",ai=30*1e3,Pu=3,Xc=Pu*ai,Hv="http://localhost:9999",Wv="supabase.auth.token",Gv={"X-Client-Info":`gotrue-js/${fg}`},Tu="X-Supabase-Api-Version",hg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qv=600*1e3;class sd extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Jv extends sd{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function Yv(e){return Ue(e)&&e.name==="AuthApiError"}class pg extends sd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wn extends sd{constructor(t,n,i,o){super(t,i,o),this.name=n,this.status=i}}class qn extends Wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xv(e){return Ue(e)&&e.name==="AuthSessionMissingError"}class Ra extends Wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class za extends Wn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ma extends Wn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zv(e){return Ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Cp extends Wn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lu extends Wn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Zc(e){return Ue(e)&&e.name==="AuthRetryableFetchError"}class Ep extends Wn{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Iu extends Wn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pp=` 	
\r=`.split(""),e2=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pp.length;t+=1)e[Pp[t].charCodeAt(0)]=-2;for(let t=0;t<Ga.length;t+=1)e[Ga[t].charCodeAt(0)]=t;return e})();function Tp(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ga[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ga[i]),t.queuedBits-=6}}function mg(e,t,n){const i=e2[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Lp(e){const t=[],n=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{n2(u,i,n)};for(let u=0;u<e.length;u+=1)mg(e.charCodeAt(u),o,l);return t.join("")}function t2(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function r2(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}t2(i,t)}}function n2(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function s2(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)mg(e.charCodeAt(o),n,i);return new Uint8Array(t)}function i2(e){const t=[];return r2(e,n=>t.push(n)),new Uint8Array(t)}function o2(e){const t=[],n={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Tp(o,n,i)),Tp(null,n,i),t.join("")}function a2(e){return Math.round(Date.now()/1e3)+e}function l2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fr=()=>typeof window<"u"&&typeof document<"u",cs={tested:!1,writable:!1},gg=()=>{if(!Fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cs.tested)return cs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cs.tested=!0,cs.writable=!0}catch{cs.tested=!0,cs.writable=!1}return cs.writable};function c2(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{t[o]=i}),t}const xg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xs(async()=>{const{default:i}=await Promise.resolve().then(()=>mi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},u2=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",li=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},us=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Un=async(e,t)=>{await e.removeItem(t)};class rl{constructor(){this.promise=new rl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}rl.promiseConstructor=Promise;function eu(e){const t=e.split(".");if(t.length!==3)throw new Iu("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!Kv.test(t[i]))throw new Iu("JWT not in base64url format");return{header:JSON.parse(Lp(t[0])),payload:JSON.parse(Lp(t[1])),signature:s2(t[2]),raw:{header:t[0],payload:t[1]}}}async function d2(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function f2(e,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function h2(e){return("0"+e.toString(16)).substr(-2)}function p2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,h2).join("")}async function m2(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function g2(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await m2(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ti(e,t,n=!1){const i=p2();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await li(e,`${t}-code-verifier`,o);const l=await g2(i);return[l,i===l?"plain":"s256"]}const x2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function v2(e){const t=e.headers.get(Tu);if(!t||!t.match(x2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function y2(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function b2(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ri(e){if(!w2.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ip(e){return JSON.parse(JSON.stringify(e))}var k2=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};const fs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_2=[502,503,504];async function Ap(e){var t;if(!u2(e))throw new Lu(fs(e),0);if(_2.includes(e.status))throw new Lu(fs(e),e.status);let n;try{n=await e.json()}catch(l){throw new pg(fs(l),l)}let i;const o=v2(e);if(o&&o.getTime()>=hg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ep(fs(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new qn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Ep(fs(n),e.status,n.weak_password.reasons);throw new Jv(fs(n),e.status||500,i)}const j2=(e,t,n,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function We(e,t,n,i){var o;const l=Object.assign({},i?.headers);l[Tu]||(l[Tu]=hg["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await S2(e,t,n+d,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(h):{data:Object.assign({},h),error:null}}async function S2(e,t,n,i,o,l){const u=j2(t,i,o,l);let d;try{d=await e(n,Object.assign({},u))}catch(h){throw console.error(h),new Lu(fs(h),0)}if(d.ok||await Ap(d),i?.noResolveJson)return d;try{return await d.json()}catch(h){await Ap(h)}}function fn(e){var t;let n=null;P2(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=a2(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Rp(e){const t=fn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Vn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function N2(e){return{data:e,error:null}}function C2(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=e,u=k2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function E2(e){return e}function P2(e){return e.access_token&&e.refresh_token&&e.expires_in}const ru=["global","local","others"];var T2=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};class L2{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=xg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=ru[0]){if(ru.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ru.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Vn})}catch(i){if(Ue(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=T2(t,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:C2,redirectTo:n?.redirectTo})}catch(n){if(Ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Vn})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,o,l,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},m=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:E2});if(m.error)throw m.error;const g=await m.json(),y=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(w=>{const C=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);p[`${j}Page`]=C}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(Ue(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){ri(t);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Vn})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ri(t);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Vn})}catch(i){if(Ue(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){ri(t);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Vn})}catch(i){if(Ue(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ri(t.userId);try{const{data:n,error:i}=await We(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ri(t.userId),ri(t.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}function zp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function I2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ni={debug:!!(globalThis&&gg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A2 extends vg{}async function R2(e,t,n){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new A2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ni.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}I2();const z2={url:Hv,storageKey:Wv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mp(e,t,n){return await n()}const si={};class po{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=po.nextInstanceID,po.nextInstanceID+=1,this.instanceID>0&&Fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},z2),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new L2({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=xg(o.fetch),this.lock=o.lock||Mp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Fr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=R2:this.lock=Mp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:gg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zp(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=zp(this.memoryStorage)),Fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=si[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=si[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=c2(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Fr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Zv(l)){const h=(t=l.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ue(n)?{error:n}:{error:new pg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,o;try{const l=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:fn}),{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(l){if(Ue(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var n,i,o;try{let l;if("email"in t){const{email:m,password:g,options:y}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await ti(this.storage,this.storageKey)),l=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:m,password:g,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:w},xform:fn})}else if("phone"in t){const{phone:m,password:g,options:y}=t;l=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:fn})}else throw new za("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(l){if(Ue(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:u,options:d}=t;n=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Rp})}else if("phone"in t){const{phone:l,password:u,options:d}=t;n=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Rp})}else throw new za("You must provide either an email or phone number and a password");const{data:i,error:o}=n;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ra}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,i,o,l,u,d,h,p,m,g,y,b;let w,C;if("message"in t)w=t.message,C=t.signature;else{const{chain:j,wallet:P,statement:A,options:I}=t;let D;if(Fr())if(typeof P=="object")D=P;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=P}const G=new URL((n=I?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),A?{statement:A}:null));let J;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")J=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)J=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)w=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),C=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${G.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(o=(i=I?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=I?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((u=I?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((d=I?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((g=(m=I?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...I.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(w),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=z}}try{const{data:j,error:P}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:o2(C)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:fn});if(P)throw P;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ra}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:P})}catch(j){if(Ue(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{const{data:l,error:u}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:fn});if(await Un(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Ra}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(Ue(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:n,provider:i,token:o,access_token:l,nonce:u}=t,d=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:fn}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ra}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,o,l,u;try{if("email"in t){const{email:d,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ti(this.storage,this.storageKey));const{error:g}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:d,options:h}=t,{data:p,error:m}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(l=h?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:m}}throw new za("You must provide either an email or phone number.")}catch(d){if(Ue(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var n,i;try{let o,l;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:fn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(Ue(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var n,i,o;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await ti(this.storage,this.storageKey)),await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:N2})}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new qn;const{error:o}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await We(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:d}=await We(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new za("You must provide either an email or phone number and a type")}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Xc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await us(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=tu()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,m)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,m))})}return{data:{session:t},error:null}}const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Vn}):await this._useSession(async n=>{var i,o,l;const{data:u,error:d}=n;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qn}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Vn})})}catch(n){if(Ue(n))return Xv(n)&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new qn;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await ti(this.storage,this.storageKey));const{data:p,error:m}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Vn});if(m)throw m;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(Ue(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qn;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:u}=eu(t.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{session:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(Ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:u,error:d}=n;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new qn;const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fr())throw new Ma("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ma(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ma("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Cp("No code detected.");const{data:A,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=t;if(!l||!d||!u||!p)throw new Ma("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let y=m+g;h&&(y=parseInt(h));const b=y-m;b*1e3<=ai&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const w=y-g;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,m);const{data:C,error:j}=await this._getUser(l);if(j)throw j;const P={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:g,expires_at:y,refresh_token:u,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(i){if(Ue(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await us(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{error:l};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(Yv(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=l2(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ti(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var u,d,h,p,m;const{data:g,error:y}=l;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(o)throw o;return Fr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(Ue(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)throw u;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await f2(async o=>(o>0&&await d2(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:fn})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Zc(l)&&Date.now()+u-i<ai})}catch(i){if(this._debug(n,"error",i),Ue(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Fr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await us(this.storage,this.storageKey);if(o&&this.userStorage){let u=await us(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await li(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:tu()}else if(o&&!o.user&&!o.user){const u=await us(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Un(this.storage,this.storageKey+"-user"),await li(this.storage,this.storageKey,o)):o.user=tu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xc;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Xc}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Zc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new qn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new rl;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new qn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),Ue(l)){const u={session:null,error:l};return Zc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await li(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Ip(o);await li(this.storage,this.storageKey,l)}else{const o=Ip(n);await li(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Un(this.storage,this.storageKey),await Un(this.storage,this.storageKey+"-code-verifier"),await Un(this.storage,this.storageKey+"-user"),this.userStorage&&await Un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ai);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/ai);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ai}ms, refresh threshold is ${Pu} ticks`),o<=Pu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await ti(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await We(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,o;const{data:l,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await We(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const{data:u,error:d}=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?{data:null,error:l}:await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=t?.factors||[],o=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:o},error:l}=t;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=eu(o.access_token);let d=null;u.aal&&(d=u.aal);let h=d;((i=(n=o.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const m=u.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(d=>d.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+Qv>o)return i;const{data:l,error:u}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};i=b.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:h}}=eu(i);n?.allowExpired||y2(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:o,signature:u},error:null}}const m=b2(o.alg),g=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,u,i2(`${d}.${h}`)))throw new Iu("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(Ue(i))return{data:null,error:i};throw i}}}po.nextInstanceID=0;const M2=po;class O2 extends M2{constructor(t){super(t)}}var D2=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(m){try{p(i.next(m))}catch(g){u(g)}}function h(m){try{p(i.throw(m))}catch(g){u(g)}}function p(m){m.done?l(m.value):o(m.value).then(d,h)}p((i=i.apply(e,t||[])).next())})};class $2{constructor(t,n,i){var o,l,u;this.supabaseUrl=t,this.supabaseKey=n;const d=Vv(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:Rv,realtime:Mv,auth:Object.assign(Object.assign({},zv),{storageKey:h}),global:Av},m=qv(i??{},p);this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=Fv(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new ev(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Tv(this.storageUrl.href,this.headers,this.fetch,i?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Vx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return D2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:u,flowType:d,lock:h,debug:p},m,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new O2({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),m),storageKey:u,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:o,userStorage:l,flowType:d,lock:h,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new xv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const F2=(e,t,n)=>new $2(e,t,n);function U2(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}U2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const B2="https://uhtieumdogkgagbxvlda.supabase.co",q2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVodGlldW1kb2drZ2FnYnh2bGRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MTg2NTcsImV4cCI6MjA3ODA5NDY1N30.-Q6XYb8XH8GIKJYgVyfPRfhQJp4RRLOmZcgoIhX7Ss4",V=F2(B2,q2),V2=100*1024*1024,H2=async(e,t)=>mo(e,"statuses"),mo=async(e,t,n)=>{const i=(await V.auth.getUser())?.data.user;if(!i)return null;if(e.size>V2)return alert("File too large. Max 100 MB."),null;const o=e.name.split(".").pop()?.toLowerCase()||"",l=["jpg","jpeg","png","gif","webp","svg","bmp"],u=["mp4","webm","mov","avi"],d=["mp3","weba","ogg","wav","m4a"],h=["pdf","doc","docx","txt","json","rtf","exe","zip"];let p;if(l.includes(o))p="image";else if(u.includes(o))o==="webm"&&e.type.startsWith("audio/")?p="audio":p="video";else if(d.includes(o))p="audio";else if(h.includes(o))p="document";else return alert("Unsupported file type"),null;if(t==="profiles"&&p!=="image")return alert("Images only for profiles"),null;const m=`${t}/${i.id}/${Date.now()}_${Math.random().toString(36).slice(2)}.${o}`,{data:g,error:y}=await V.storage.from("media").upload(m,e,{upsert:!0,contentType:e.type});if(y&&y.message!=="The resource already exists")return console.error("Upload error:",y),null;const{data:{publicUrl:b}}=V.storage.from("media").getPublicUrl(m);return{url:b,type:p}},yg=k.createContext(void 0),W2=({children:e})=>{const[t,n]=k.useState(null),[i,o]=k.useState(null),[l,u]=k.useState(!0),d=async y=>{const{data:b}=await V.from("profiles").select("*").eq("id",y).maybeSingle();o(b),u(!1)},h=y=>{o(y)};k.useEffect(()=>{V.auth.getSession().then(({data:{session:b}})=>{n(b?.user??null),b?.user?d(b.user.id):u(!1)});const{data:{subscription:y}}=V.auth.onAuthStateChange((b,w)=>{n(w?.user??null),w?.user?d(w.user.id):(o(null),u(!1))});return()=>y.unsubscribe()},[]);const p=async(y,b,w,C)=>{const{data:j,error:P}=await V.auth.signUp({email:y,password:b});if(P)throw P;j.user&&await V.from("profiles").insert({id:j.user.id,username:w,display_name:C})},m=async(y,b)=>{const{error:w}=await V.auth.signInWithPassword({email:y,password:b});if(w)throw w},g=async()=>{await V.auth.signOut()};return a.jsx(yg.Provider,{value:{user:t,profile:i,loading:l,signUp:p,signIn:m,signOut:g,updateProfile:h},children:e})},Nt=()=>{const e=k.useContext(yg);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(e,t)=>{const n=k.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:h,...p},m)=>k.createElement("svg",{ref:m,...G2,width:o,height:o,stroke:i,strokeWidth:u?Number(l)*24/Number(o):l,className:["lucide",`lucide-${K2(e)}`,d].join(" "),...p},[...t.map(([g,y])=>k.createElement(g,y)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=we("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=we("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=we("ArrowBigUp",[["path",{d:"M9 18v-6H5l7-7 7 7h-4v6H9z",key:"1x06kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=we("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=we("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=we("CornerUpLeft",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=we("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=we("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=we("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=we("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=we("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=we("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=we("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=we("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=we("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=we("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=we("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z",key:"16vlm8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=we("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=we("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=we("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=we("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=we("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=we("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=we("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=we("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=we("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=we("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=we("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=we("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=we("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=we("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=we("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),jy=({isOpen:e,title:t,slug:n,onClose:i})=>{if(!e)return null;const o=`/${n}`;return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col transform transition-all duration-300 scale-100 opacity-100",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-orange-200 bg-orange-50 rounded-t-3xl",children:[a.jsx("h2",{className:"text-2xl font-black text-gray-800",children:t}),a.jsx("button",{onClick:i,className:"p-3 text-red-600 hover:text-white hover:bg-red-600 rounded-full transition","aria-label":"Close modal",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-grow overflow-hidden p-0",children:a.jsx("iframe",{src:o,title:t,className:"w-full h-full border-0 rounded-b-3xl"})})]})})},qp=()=>{const[e,t]=k.useState(!1),[n,i]=k.useState(""),[o,l]=k.useState(""),[u,d]=k.useState(""),[h,p]=k.useState(""),[m,g]=k.useState(""),[y,b]=k.useState(!1),[w,C]=k.useState(!1),{signUp:j,signIn:P}=Nt(),[A,I]=k.useState(!1),[D,G]=k.useState(""),[z,J]=k.useState("");k.useEffect(()=>{g("")},[n,o,u,h]);const K=($,Z)=>{G($),J(Z),I(!0)},oe=()=>{I(!1),G(""),J("")},O=async $=>{$.preventDefault(),g(""),b(!1),C(!0);try{if(e){if(!u.trim()){g("Username is required"),C(!1);return}if(!h.trim()){g("Display name is required"),C(!1);return}if(u.includes(" ")){g("Username cannot contain spaces"),C(!1);return}await j(n,o,u,h),b(!0),setTimeout(()=>{t(!1),i(""),l(""),d(""),p(""),b(!1)},1800)}else await P(n,o)}catch(Z){const ue=Z.message?.toLowerCase()||"";ue.includes("invalid login credentials")||ue.includes("invalid credentials")?g("Wrong email or password. Please try again."):ue.includes("email not confirmed")?g("Please check your email and click the confirmation link."):ue.includes("user already registered")||ue.includes("already exists")?g("An account with this email already exists. Try signing in."):ue.includes("password should be at least")?g("Password must be at least 6 characters long."):ue.includes("unable to validate email address")?g("Please enter a valid email address."):ue.includes("rate limit")||ue.includes("too many requests")?g("Too many attempts. Please wait a minute and try again."):ue.includes("network")||ue.includes("fetch")?g("Network error. Please check your connection."):g(Z.message||"Something went wrong. Please try again.")}finally{C(!1)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 -z-10",children:[a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 1440 1024",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#ff6b6b"}),a.jsx("stop",{offset:"50%",stopColor:"#ffa726"}),a.jsx("stop",{offset:"100%",stopColor:"#ff8a65"})]}),a.jsxs("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#ff5252"}),a.jsx("stop",{offset:"50%",stopColor:"#ff9800"}),a.jsx("stop",{offset:"100%",stopColor:"#ff6b6b"})]}),a.jsxs("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#ff3d00"}),a.jsx("stop",{offset:"50%",stopColor:"#ff6d00"}),a.jsx("stop",{offset:"100%",stopColor:"#ff9100"})]})]}),a.jsx("path",{fill:"url(#grad1)",fillOpacity:"0.6",d:"M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z",className:"animate-wave1",children:a.jsx("animate",{attributeName:"d",values:`\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z;\r
                M0,200 C380,50 1060,350 1440,180 L1440,1024 L0,1024 Z;\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z\r
              `,dur:"20s",repeatCount:"indefinite"})}),a.jsx("path",{fill:"url(#grad2)",fillOpacity:"0.5",d:"M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z",className:"animate-wave2",children:a.jsx("animate",{attributeName:"d",values:`\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z;\r
                M0,250 C350,450 1090,-50 1440,320 L1440,1024 L0,1024 Z;\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z\r
              `,dur:"25s",repeatCount:"indefinite"})}),a.jsx("path",{fill:"url(#grad3)",fillOpacity:"0.4",d:"M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z",className:"animate-wave3",children:a.jsx("animate",{attributeName:"d",values:`\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z;\r
                M0,500 C250,200 1190,700 1440,350 L1440,1024 L0,1024 Z;\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z\r
              `,dur:"30s",repeatCount:"indefinite"})})]}),a.jsx("style",{jsx:!0,children:`
          @keyframes wave1 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-40px); }
          }
          @keyframes wave2 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(60px); }
          }
          @keyframes wave3 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-80px); }
          }
          .animate-wave1 { animation: wave1 20s ease-in-out infinite; }
          .animate-wave2 { animation: wave2 25s ease-in-out infinite; }
          .animate-wave3 { animation: wave3 30s ease-in-out infinite; }
        `})]}),a.jsx("div",{className:"w-full max-w-md z-10",children:a.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl rounded-3xl shadow-2xl p-10 border border-white/40",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("img",{src:"https://mux8.com/assets/logo/liaotian-dragon.svg",alt:"LiaoTian logo",className:"mx-auto w-40 h-40 mb-1"}),a.jsx("p",{className:"text-gray-700 text-xl font-bold",children:"Liaoverse"})]}),a.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{class:"text-xs text-gray-500 text-center -mt-3",children:["By creating an account you agree to the ",a.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>K("Terms of Service","terms-of-service"),children:"Terms of Service"})," and ",a.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>K("Privacy Policy","privacy-policy"),children:"Privacy Policy"})]}),a.jsx("input",{type:"text",placeholder:"Username (no spaces)",value:u,onChange:$=>d($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),a.jsx("input",{type:"text",placeholder:"Display Name",value:h,onChange:$=>p($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"})]}),a.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:$=>i($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),a.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:$=>l($.target.value),required:!0,disabled:w,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),a.jsxs("div",{className:"min-h-8",children:[m&&a.jsxs("div",{className:"flex items-center gap-3 text-red-600 bg-red-50/90 px-5 py-4 rounded-2xl border-2 border-red-300 backdrop-blur",children:[a.jsx(wg,{size:22}),a.jsx("span",{className:"font-semibold",children:m})]}),y&&a.jsxs("div",{className:"flex items-center gap-3 text-green-600 bg-green-50/90 px-5 py-4 rounded-2xl border-2 border-green-300 backdrop-blur",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.jsx("span",{className:"font-bold",children:"Account created! Switching to Sign In..."})]})]}),a.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 text-white py-5 rounded-2xl font-bold text-xl hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-70 disabled:cursor-not-allowed transition transform hover:scale-[1.02] active:scale-100 shadow-2xl flex items-center justify-center gap-4",children:[w?a.jsxs("svg",{className:"animate-spin h-7 w-7",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):a.jsx(cy,{size:28}),w?"Loading...":e?"Join Liaoverse":"Enter Liaoverse"]})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("button",{onClick:()=>{t(!e),g(""),b(!1)},disabled:w,className:"text-red-600 hover:text-red-700 font-bold text-lg hover:underline disabled:opacity-50",children:e?"Already have an account? Sign In":"Need an account? Sign Up"})}),a.jsxs("div",{className:"text-center text-gray-600 text-sm mt-12 font-bold",children:[" Mux ",new Date().getFullYear()]})]})}),a.jsx(jy,{isOpen:A,title:D,slug:z,onClose:oe})]})},Vp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Sy="0 0 784 1168",Ny=()=>{const[e,t]=k.useState([]),[n,i]=k.useState(!0),{user:o}=Nt(),l=k.useRef(null),u=k.useCallback(async $=>{if(!$.length)return{likeCounts:{},commentCounts:{}};const Z={},ue={};for(const re of $){const[{count:ee},{count:ve}]=await Promise.all([V.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",re),V.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",re)]);Z[re]=ee||0,ue[re]=ve||0}return{likeCounts:Z,commentCounts:ue}},[]),[d,h]=k.useState(new Set),[p,m]=k.useState(null),[g,y]=k.useState([]),[b,w]=k.useState(""),[C,j]=k.useState(null),[P,A]=k.useState([]),I=k.useCallback(async $=>{if(!o||$.length===0)return;const Z=$.map(re=>re.id),{data:ue}=await V.from("likes").select("entity_id").eq("user_id",o.id).eq("entity_type","post").in("entity_id",Z);ue&&h(re=>new Set([...re,...ue.map(ee=>ee.entity_id)]))},[o]),D=k.useCallback(async()=>{i(!0);let $=V.from("posts").select("*, profiles(*)").eq("media_type","video").order("created_at",{ascending:!1}).limit(20);if(o){const{data:X}=await V.from("follows").select("following_id").eq("follower_id",o.id),S=[...X?.map(L=>L.following_id)||[],o.id];$=$.in("user_id",S)}const{data:Z}=await $,ue=Z||[],re=ue.map(X=>X.id),{likeCounts:ee,commentCounts:ve}=await u(re),Se=ue.map(X=>({...X,like_count:ee[X.id]||0,comment_count:ve[X.id]||0}));t(Se),I(Se),i(!1)},[o,I,u]);k.useEffect(()=>{D()},[D]),k.useEffect(()=>{const $={root:l.current,threshold:.6},Z=new IntersectionObserver(re=>{re.forEach(ee=>{const ve=ee.target.querySelector("video");ve&&(ee.isIntersecting?ve.play().catch(()=>{}):(ve.pause(),ve.currentTime=0))})},$);return document.querySelectorAll(".shot-item").forEach(re=>Z.observe(re)),()=>Z.disconnect()},[e]);const G=async $=>{if(o){if(!d.has($.id)){const Z=new Set(d);Z.add($.id),h(Z),t(ue=>ue.map(re=>re.id===$.id?{...re,like_count:re.like_count+1}:re)),await V.from("likes").insert({user_id:o.id,entity_id:$.id,entity_type:"post"})}J($.id)}},z=async $=>{if(!o)return;const Z=new Set(d);Z.delete($),h(Z),t(ue=>ue.map(re=>re.id===$?{...re,like_count:Math.max(0,re.like_count-1)}:re)),await V.from("likes").delete().match({user_id:o.id,entity_id:$,entity_type:"post"}),A(ue=>ue.filter(re=>re.user_id!==o.id))},J=async $=>{j($);const{data:Z}=await V.from("likes").select("user_id, profiles(*)").eq("entity_id",$).eq("entity_type","post");Z&&A(Z)},K=async $=>{m($);const{data:Z}=await V.from("comments").select("*, profiles(*)").eq("post_id",$).order("created_at",{ascending:!0});Z&&y(Z)},oe=async $=>{if($.preventDefault(),!o||!p||!b.trim())return;const Z=p,{data:ue,error:re}=await V.from("comments").insert({post_id:Z,user_id:o.id,content:b.trim()}).select("*, profiles(*)").single();!re&&ue&&(y(ee=>[...ee,ue]),w(""),t(ee=>ee.map(ve=>ve.id===Z?{...ve,comment_count:(ve.comment_count||0)+1}:ve)))},O=$=>{window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:$}))};return n?a.jsxs("div",{className:"flex flex-col items-center justify-center py-10 w-full",children:[a.jsx("div",{className:"logo-loading-container w-[100px] h-auto relative mb-4",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Sy,className:"logo-svg",children:[a.jsx("defs",{children:a.jsx("clipPath",{id:"logo-clip",children:a.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),a.jsx("path",{d:Vp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:Vp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Loading shots..."})]}):e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-[rgb(var(--color-text-secondary))] p-8 text-center",children:[a.jsx(Up,{size:48,className:"mb-4 opacity-50"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Shots Yet"}),a.jsx("p",{children:"No video content available in your feed. Follow people who post video content, or post a video yourself to see them here!"})]}):a.jsxs("div",{className:"relative w-full h-[calc(100vh-180px)] bg-black rounded-xl overflow-hidden",children:[a.jsx("div",{ref:l,className:"w-full h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide",style:{scrollBehavior:"smooth"},children:e.map($=>a.jsxs("div",{className:"shot-item relative w-full h-full snap-start bg-black",children:[a.jsx("video",{src:$.media_url,className:"w-full h-full object-cover",playsInline:!0,loop:!0,muted:!1}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none"}),a.jsxs("div",{className:"absolute right-4 bottom-20 flex flex-col gap-6 items-center z-10",children:[a.jsx("div",{className:"flex flex-col items-center gap-1",children:a.jsx("button",{onClick:()=>O($.user_id),className:"relative",children:a.jsx("img",{src:$.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.profiles?.username}`,className:"w-12 h-12 rounded-full border-2 border-white"})})}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("button",{onClick:()=>G($),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:a.jsx(hi,{size:28,className:d.has($.id)?"fill-red-500 text-red-500":"text-white"})}),a.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:$.like_count})]}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("button",{onClick:()=>K($.id),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:a.jsx(ys,{size:28,className:"text-white"})}),a.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:$.comment_count})]}),a.jsx("button",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:a.jsx(sl,{size:28,className:"text-white"})})]}),a.jsxs("div",{className:"absolute bottom-4 left-4 right-16 z-10 text-white",children:[a.jsxs("button",{onClick:()=>O($.user_id),className:"font-bold text-lg hover:underline flex items-center gap-1 mb-2 shadow-black drop-shadow-md",children:["@",$.profiles?.username,$.profiles?.verified&&a.jsx(en,{size:16,className:"text-blue-400"})]}),a.jsx("p",{className:"text-sm line-clamp-2 opacity-90 mb-3 shadow-black drop-shadow-md",children:$.content}),a.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-70",children:[a.jsx(Up,{size:14,className:"animate-spin-slow"}),a.jsxs("span",{children:["Original Sound - ",$.profiles?.display_name]})]})]})]},$.id))}),C&&a.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[60vh] rounded-t-2xl sm:rounded-2xl flex flex-col",onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Likes"}),a.jsx("button",{onClick:()=>j(null),children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:P.map($=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:$.profiles.avatar_url,className:"w-10 h-10 rounded-full"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:$.profiles.display_name}),a.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["@",$.profiles.username]})]})]}),$.user_id===o?.id&&a.jsx("button",{onClick:()=>z(C),className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100",title:"Remove like",children:a.jsx(hi,{size:16,className:"fill-current"})})]},$.user_id))})]})}),p&&a.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[70vh] rounded-t-2xl sm:rounded-2xl flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Comments"}),a.jsx("button",{onClick:()=>m(null),children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:g.map($=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("img",{src:$.profiles.avatar_url,className:"w-8 h-8 rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex gap-2 items-baseline",children:[a.jsx("span",{className:"font-bold text-xs text-[rgb(var(--color-text))]",children:$.profiles.display_name}),a.jsx("span",{className:"text-[10px] text-[rgb(var(--color-text-secondary))]",children:new Date($.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text))]",children:$.content})]})]},$.id))}),a.jsxs("form",{onSubmit:oe,className:"p-3 border-t border-[rgb(var(--color-border))] flex gap-2",children:[a.jsx("input",{value:b,onChange:$=>w($.target.value),placeholder:"Say something...",className:"flex-1 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2 text-sm outline-none text-[rgb(var(--color-text))]"}),a.jsx("button",{type:"submit",className:"text-[rgb(var(--color-accent))]",children:a.jsx(gi,{size:20})})]})]})})]})},Cy=!0,Hp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Ey="0 0 784 1168",Py=()=>{const{user:e,profile:t}=Nt(),[n,i]=k.useState([]),[o,l]=k.useState(null),[u,d]=k.useState(null);k.useEffect(()=>{const y=b=>{const C=b.detail.progress;C===100?setTimeout(()=>d(null),1e3):d(C)};return window.addEventListener("statusUploadProgress",y),()=>{window.removeEventListener("statusUploadProgress",y)}},[]),k.useEffect(()=>{if(!e||!t)return;const y=async()=>{try{let C=V.from("statuses").select("*, profiles!user_id(*)").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!0});if(Cy){const{data:D}=await V.from("follows").select("following_id").eq("follower_id",e.id),G=D?.map(z=>z.following_id)||[];C=C.in("user_id",[e.id,...G])}const{data:j}=await C;if(!j)return;const P=new Map;for(const D of j){if(!D.profiles)continue;const G=D.user_id,z={...D,viewed_by:D.viewed_by||[]};if(!P.has(G))P.set(G,{...D.profiles,statuses:[z],hasUnseen:!z.viewed_by.includes(e.id)});else{const J=P.get(G);J.statuses.push(z),z.viewed_by.includes(e.id)||(J.hasUnseen=!0)}}const A=P.get(e.id)||{...t,statuses:[],hasUnseen:!1};A.statuses.length>0&&(A.hasUnseen=A.statuses.some(D=>!D.viewed_by.includes(e.id))),P.delete(e.id);const I=Array.from(P.values()).sort((D,G)=>{if(D.hasUnseen!==G.hasUnseen)return D.hasUnseen?-1:1;const z=new Date(D.statuses[D.statuses.length-1].created_at).getTime();return new Date(G.statuses[G.statuses.length-1].created_at).getTime()-z});l(A),i(I)}catch(C){console.error("Error fetching statuses:",C)}};y();const b=V.channel("status-tray-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"statuses"},y).subscribe(),w=setInterval(y,6e4);return()=>{clearInterval(w),V.removeChannel(b)}},[e,t]);const h=y=>{if(!o)return;const b=[o,...n];window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{initialUserId:y,users:b}}))},p=()=>{o&&o.statuses.length>0?h(e.id):window.dispatchEvent(new CustomEvent("openStatusCreator"))},m=y=>{y.stopPropagation(),window.dispatchEvent(new CustomEvent("openStatusCreator"))};if(!e)return null;const g=y=>{const b=y.statuses.length>0;return y.id===t?.id?u!==null&&u<100?a.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10",style:{background:`conic-gradient(rgb(var(--color-primary)) ${u}%, rgb(var(--color-border)) ${u}%)`}}):b?a.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10 bg-[rgb(var(--color-border))]"}):a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-[rgb(var(--color-border))] -z-10"}):a.jsx("div",{className:`absolute inset-0 rounded-full p-[2px] -z-10 ${y.hasUnseen?"bg-gradient-to-tr from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] group-hover:scale-105 transition-transform":"bg-[rgb(var(--color-border))]"}`})};return a.jsxs("div",{className:"flex space-x-4 p-4 overflow-x-auto scrollbar-hide bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))]",children:[o&&a.jsxs("div",{onClick:p,className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[a.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[a.jsx("img",{src:t?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t?.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:"Your avatar"}),g(o),a.jsx("div",{onClick:m,className:"absolute -bottom-1 -right-1 w-6 h-6 bg-[rgb(var(--color-primary))] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform cursor-pointer border-2 border-[rgb(var(--color-surface))]",children:a.jsx(nl,{size:16,className:"text-[rgb(var(--color-text-on-primary))]"})})]}),a.jsx("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16",children:"Your Status"})]}),n.map(y=>a.jsxs("div",{onClick:()=>h(y.id),className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[a.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[a.jsx("img",{src:y.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${y.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:y.display_name}),g(y)]}),a.jsxs("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16 flex items-center justify-center gap-1",children:[a.jsx("span",{className:"truncate",children:y.display_name||y.username}),y.verified&&a.jsx(en,{size:12,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]})]},y.id))]})},Ty=({onClose:e})=>{const{user:t}=Nt(),[n,i]=k.useState(null),[o,l]=k.useState(null),[u,d]=k.useState(""),[h,p]=k.useState("image"),[m,g]=k.useState(""),[y,b]=k.useState(!1),[w,C]=k.useState("camera"),[j,P]=k.useState(!1),[A,I]=k.useState(""),[D,G]=k.useState([]),z=async(fe="")=>{const pe="AIzaSyDlYCxbThckK4ctV5XLDeqbQAEk-rebKKE",Pe=fe?`https://tenor.googleapis.com/v2/search?q=${fe}&key=${pe}&client_key=gazebo_app&limit=12&media_filter=minimal`:`https://tenor.googleapis.com/v2/featured?key=${pe}&client_key=gazebo_app&limit=12&media_filter=minimal`;try{const ne=await(await fetch(Pe)).json();G(ne.results||[])}catch(_e){console.error("Tenor Error",_e)}};k.useEffect(()=>{w==="gif"&&z(A)},[w,A]);const J=k.useRef(null),K=k.useRef(null),oe=k.useRef(null),O=k.useRef(null),$=k.useRef([]),[Z,ue]=k.useState("user"),re=k.useRef(null),ee=()=>{oe.current&&(oe.current.getTracks().forEach(fe=>fe.stop()),oe.current=null)};k.useEffect(()=>()=>{ee(),u&&URL.revokeObjectURL(u)},[u]);const ve=k.useCallback(async()=>{if(ee(),!navigator.mediaDevices?.getUserMedia){alert("Camera is not supported on your device."),C("upload");return}try{const fe=await navigator.mediaDevices.getUserMedia({video:{facingMode:Z},audio:w==="video"});oe.current=fe,J.current&&(J.current.srcObject=fe)}catch(fe){console.error("Error accessing camera:",fe),alert("Could not access camera. Please check permissions."),C("upload")}},[Z,w]);k.useEffect(()=>(w==="camera"||w==="video"?n||ve():ee(),()=>ee()),[w,ve,n]);const Se=fe=>{const pe=fe.target.files?.[0];if(pe){if(!pe.type.startsWith("image/")&&!pe.type.startsWith("video/")){alert("Only image and video files are allowed.");return}p(pe.type.startsWith("image/")?"image":"video"),i(pe),d(URL.createObjectURL(pe)),ee()}},X=()=>{if(!J.current||!K.current)return;const fe=J.current,pe=K.current;pe.width=fe.videoWidth,pe.height=fe.videoHeight;const Pe=pe.getContext("2d");Pe&&(Pe.drawImage(fe,0,0,pe.width,pe.height),pe.toBlob(_e=>{_e&&(i(new File([_e],"status.jpg",{type:"image/jpeg"})),d(URL.createObjectURL(_e)),p("image"),ee())},"image/jpeg"))},ae=()=>{if(!oe.current)return;P(!0),$.current=[];const fe=MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":"video/webm",pe=fe.split("/")[1]||"webm";O.current=new MediaRecorder(oe.current,{mimeType:fe}),O.current.ondataavailable=Pe=>{$.current.push(Pe.data)},O.current.onstop=()=>{const Pe=new Blob($.current,{type:fe});i(new File([Pe],`status.${pe}`,{type:fe})),d(URL.createObjectURL(Pe)),p("video"),P(!1),ee()},O.current.start()},S=()=>{O.current?.stop()},L=()=>{ue(fe=>fe==="user"?"environment":"user")},H=async()=>{if(!t||!n&&!o)return;b(!0),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:1}}));let fe=1;const pe=()=>{fe=Math.min(fe+10,95),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:fe}})),fe<95&&setTimeout(pe,300)},Pe=setTimeout(pe,300);try{let _e=o;if(n){const Ne=await H2(n);if(!Ne)throw new Error("Upload failed.");_e=Ne.url}if(!_e)throw new Error("No media URL generated.");clearTimeout(Pe),fe=99,window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:fe}}));const ne=new Date(Date.now()+1440*60*1e3).toISOString();await V.from("statuses").insert({user_id:t.id,media_url:_e,media_type:h,text_overlay:m?{text:m,x:50,y:85,color:"white",fontSize:12}:{},expires_at:ne}),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:100}})),e()}catch(_e){console.error("Error posting status:",_e),alert("Failed to post status."),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:null}}))}finally{b(!1)}},E=()=>{i(null),l(null),d(""),g(""),I(""),w==="gif"&&z(""),ve()},ke=!!(n||o);return a.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:[a.jsx("canvas",{ref:K,className:"hidden"}),a.jsxs("div",{className:"relative w-full h-full max-w-lg max-h-screen bg-black rounded-lg overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 z-20 flex justify-between items-center bg-gradient-to-b from-black/50 to-transparent",children:[a.jsx("button",{onClick:ke?E:e,className:"p-2 bg-black/50 rounded-full text-white backdrop-blur-md",children:a.jsx(Ze,{size:24})}),ke&&a.jsxs("button",{onClick:H,disabled:y,className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-full font-bold text-sm flex items-center gap-2 disabled:opacity-50 shadow-lg",children:[y?"Posting...":"Share",!y&&a.jsx(gi,{size:16})]})]}),a.jsxs("div",{className:"flex-1 relative w-full h-full overflow-hidden bg-[#1a1a1a]",children:[ke&&a.jsxs("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center z-10 bg-black",children:[h==="image"&&a.jsx("img",{src:u,className:"w-full h-full object-contain",alt:"Preview"}),h==="video"&&a.jsx("video",{src:u,className:"w-full h-full object-contain",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),a.jsx("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-end pb-20",children:a.jsx("input",{type:"text",value:m,onChange:fe=>g(fe.target.value),placeholder:"Add a caption...",className:"w-full text-center bg-black/40 text-white text-xl font-medium p-3 outline-none border-none pointer-events-auto backdrop-blur-sm",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.8)"}})})]}),!ke&&a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center z-0 relative",children:[(w==="camera"||w==="video")&&a.jsx("video",{ref:J,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),w==="upload"&&a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-4 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[rgb(var(--color-surface-hover))] rounded-full flex items-center justify-center mb-2",children:a.jsx(id,{size:40,className:"text-[rgb(var(--color-text-secondary))]"})}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Gallery"}),a.jsx("p",{className:"text-gray-400 max-w-xs",children:"Share photos and videos from your device."}),a.jsx("button",{onClick:()=>re.current?.click(),className:"mt-4 px-8 py-3 bg-[rgb(var(--color-primary))] text-white rounded-full font-bold shadow-lg transform active:scale-95 transition",children:"Select Media"})]}),w==="gif"&&a.jsxs("div",{className:"w-full h-full flex flex-col bg-[rgb(var(--color-surface))] pt-20 pb-32",children:[a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(pn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",value:A,onChange:fe=>I(fe.target.value),placeholder:"Search Tenor GIFs...",className:"w-full pl-10 pr-4 py-3 bg-[rgb(var(--color-background))] rounded-xl text-white outline-none focus:ring-2 focus:ring-[rgb(var(--color-primary))]",autoFocus:!0})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 pb-4",children:D.map(fe=>a.jsx("button",{onClick:()=>{l(fe.media_formats.gif.url),d(fe.media_formats.gif.url),p("image")},className:"relative aspect-square rounded-lg overflow-hidden bg-gray-800",children:a.jsx("img",{src:fe.media_formats.tinygif.url,className:"w-full h-full object-cover",loading:"lazy"})},fe.id))})})]})]})]}),!ke&&a.jsxs("div",{className:"absolute bottom-0 left-0 w-full z-20 flex flex-col items-center bg-gradient-to-t from-black/80 via-black/40 to-transparent pb-8 pt-12",children:[a.jsxs("div",{className:"flex items-center justify-center w-full mb-8 relative px-6",children:[a.jsx("div",{className:"flex-1 flex justify-start",children:(w==="camera"||w==="video")&&a.jsx("button",{onClick:L,className:"p-3 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition",children:a.jsx(gy,{size:24})})}),a.jsxs("div",{className:"flex-0 mx-4",children:[w==="camera"&&a.jsx("button",{onClick:X,className:"w-20 h-20 rounded-full bg-white border-4 border-white/30 shadow-[0_0_20px_rgba(255,255,255,0.3)] transform active:scale-90 transition-transform"}),w==="video"&&a.jsx("button",{onClick:j?S:ae,className:`w-20 h-20 rounded-full border-4 border-white/30 flex items-center justify-center transform active:scale-95 transition-all ${j?"bg-transparent border-red-500":"bg-red-500"}`,children:j?a.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-md animate-pulse"}):null}),(w==="upload"||w==="gif")&&a.jsx("div",{className:"w-20 h-20"})]}),a.jsx("div",{className:"flex-1"})]}),a.jsxs("div",{className:"flex gap-6 text-sm font-bold uppercase tracking-wider overflow-x-auto max-w-full px-4 no-scrollbar items-center justify-center pb-2",children:[a.jsx("button",{onClick:()=>C("upload"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="upload"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Gallery"}),a.jsx("button",{onClick:()=>C("gif"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="gif"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"GIF"}),a.jsx("button",{onClick:()=>C("camera"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="camera"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Photo"}),a.jsx("button",{onClick:()=>C("video"),className:`transition-colors whitespace-nowrap px-2 py-1 ${w==="video"?"text-[rgb(var(--color-primary))]":"text-gray-400 hover:text-white"}`,children:"Video"})]}),a.jsx("input",{ref:re,type:"file",accept:"image/*,video/*",onChange:Se,className:"hidden"})]}),y&&a.jsxs("div",{className:"absolute inset-0 z-30 bg-black/80 flex flex-col items-center justify-center gap-3 backdrop-blur-sm",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-[rgb(var(--color-primary))] border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-white font-bold animate-pulse",children:"Sharing Status..."})]})]})]})},Ly=e=>{const t=new Date,n=new Date(e),i=Math.floor((t.getTime()-n.getTime())/1e3);if(i<60)return`${i}s ago`;const o=Math.floor(i/60);if(o<60)return`${o}m ago`;const l=Math.floor(o/60);if(l<24){const d=o%60;return d>0?`${l}h ${d}m ago`:`${l}h ago`}return`${Math.floor(l/24)}d ago`},Iy=({duration:e,isActive:t,isPaused:n,onFinished:i})=>{const[o,l]=k.useState(0),u=k.useRef(Date.now()),d=k.useRef(0),h=k.useRef(0);k.useEffect(()=>{t?(l(0),u.current=Date.now(),d.current=0,h.current=0):l(m=>m<100?0:100)},[t]),k.useEffect(()=>{t&&(n?h.current===0&&(h.current=Date.now()):h.current>0&&(d.current+=Date.now()-h.current,h.current=0))},[n,t]),k.useEffect(()=>{if(!t||n||e===0)return;let m;const g=()=>{const w=(Date.now()-u.current-d.current)/e*100;w>=100?(l(100),i()):(l(w),m=requestAnimationFrame(g))};return m=requestAnimationFrame(g),()=>{cancelAnimationFrame(m)}},[t,n,e,i]);const p=!t&&o<100?0:o;return a.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-white",style:{width:`${p}%`,transition:p>0&&p<100?"width 50ms linear":"none"}})})},Ay=({statusId:e,onClose:t,onGoToProfile:n})=>{const[i,o]=k.useState([]),[l,u]=k.useState(!0);return k.useEffect(()=>{(async()=>{u(!0);try{const{data:h,error:p}=await V.from("statuses").select("viewed_by").eq("id",e).single();if(p||!h||!h.viewed_by||h.viewed_by.length===0){u(!1);return}const{data:m,error:g}=await V.from("profiles").select("*").in("id",h.viewed_by);if(g)throw g;o(m||[])}catch(h){console.error("Error fetching viewers:",h)}finally{u(!1)}})()},[e]),a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[1001] flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:d=>d.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Viewed By"}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsxs("div",{className:"overflow-y-auto p-4 space-y-4",children:[l&&a.jsx("div",{className:"text-center p-4 text-[rgb(var(--color-text-secondary))]",children:"Loading..."}),!l&&i.length===0&&a.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No views yet."}),i.map(d=>a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:d.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${d.username}`,className:"w-10 h-10 rounded-full cursor-pointer",alt:"Avatar",onClick:()=>n(d.id)}),a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>n(d.id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm block",children:[d.display_name,d.verified&&a.jsx(en,{size:14,className:"inline ml-1 text-[rgb(var(--color-accent))]"})]}),a.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",d.username]})]})]})},d.id))]})]})})},Ry=({allStatusUsers:e,initialUserId:t,onClose:n})=>{const{user:i}=Nt(),[o,l]=k.useState(()=>Math.max(0,e.findIndex(S=>S.id===t))),[u,d]=k.useState(0),[h,p]=k.useState(!1),[m,g]=k.useState(!1),[y,b]=k.useState(!0),[w,C]=k.useState(""),[j,P]=k.useState(!1),[A,I]=k.useState(!1),[D,G]=k.useState(0),z=k.useRef(null),J=e[o],K=J?.statuses?.[u],oe=k.useCallback(()=>{o<e.length-1?(l(S=>S+1),d(0),b(!0)):n()},[o,e.length,n]),O=k.useCallback(()=>{J&&u<J.statuses.length-1?d(S=>S+1):oe()},[u,J,oe]),$=()=>{o>0&&(l(S=>S-1),d(0),b(!0))},Z=()=>{u>0?d(S=>S-1):$()};k.useEffect(()=>{if(!K||!i)return;b(!0),(async()=>{K.user_id===i.id||(K.viewed_by||[]).includes(i.id)||(K.viewed_by.push(i.id),await V.rpc("mark_status_viewed",{status_id:K.id,viewer_id:i.id}))})();const L=K.media_url;if(K.media_type==="image"){const H=new Image;H.src=L,H.onload=()=>b(!1),H.onerror=()=>O()}else K.media_type==="video"&&z.current&&(z.current.src=L,z.current.load(),G(0))},[K,i,O]),k.useEffect(()=>{const S=z.current;S&&(h||y?S.pause():S.play().catch(()=>{}))},[h,y,K]);const ue=()=>p(!0),re=()=>p(!1),ee=S=>{const L=S.currentTarget.getBoundingClientRect(),H=S.clientX-L.left,E=L.width*.3;H<E?Z():O()},ve=S=>{n(),I(!1),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:S}))},Se=async S=>{if(S.preventDefault(),!(!w.trim()||!i||!K||!J)){P(!0),p(!0);try{await V.from("messages").insert({sender_id:i.id,recipient_id:J.id,content:w,media_url:K.media_url,media_type:K.media_type}),C(""),setTimeout(()=>{P(!1),p(!1)},1e3)}catch(L){console.error("Error sending reply:",L),P(!1),p(!1)}}};if(!J||!K)return a.jsx("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})});const X=K.text_overlay,ae=J.id===i?.id;return a.jsxs(k.Fragment,{children:[a.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center select-none",onPointerDown:ue,onPointerUp:re,onPointerLeave:re,children:[a.jsx("div",{className:"absolute inset-0 z-20",onClick:ee}),a.jsxs("div",{className:"absolute top-0 left-0 w-full p-3 z-30",children:[a.jsx("div",{className:"flex space-x-1 mb-2",children:J.statuses.map((S,L)=>a.jsx(Iy,{duration:S.media_type==="image"?5e3:L===u?D:0,isActive:L===u,isPaused:h||y||m,onFinished:O},S.id))}),a.jsxs("button",{onClick:()=>ve(J.id),className:"flex items-center gap-3 group",children:[a.jsx("img",{src:J.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${J.username}`,className:"w-10 h-10 rounded-full group-hover:opacity-80 transition",alt:J.display_name}),a.jsxs("div",{className:"flex items-center gap-2",children:[" ",a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsxs("span",{className:"text-white font-bold text-sm group-hover:underline flex items-center gap-1",children:[J.display_name,J.verified&&a.jsx(en,{size:14,className:"text-white"})]}),a.jsxs("span",{className:"text-white/70 text-xs",children:["@",J.username]})]}),a.jsx("span",{className:"text-white/70 text-xs",children:Ly(K.created_at)})]})]})]}),a.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-40 text-white p-2 bg-black/30 rounded-full",children:a.jsx(Ze,{size:24})}),a.jsxs("div",{className:"relative flex-1 w-full h-full max-w-lg max-h-screen flex items-center justify-center overflow-hidden bg-black",children:[y&&a.jsx("div",{className:"p-4 flex flex-col items-center justify-center border-b border-[rgb(var(--color-border))]",children:a.jsx("div",{className:"logo-loading-container w-[50px] h-auto relative",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Ey,className:"logo-svg",children:[a.jsx("defs",{children:a.jsx("clipPath",{id:"logo-clip",children:a.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),a.jsx("path",{d:Hp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:Hp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),a.jsx("img",{src:K.media_type==="image"?K.media_url:"",className:`w-full h-full object-contain mx-auto block transition-opacity ${K.media_type==="image"?"opacity-100":"opacity-0"}`,style:{display:K.media_type==="image"?"block":"none"},alt:"image not loaded"}),a.jsx("video",{ref:z,className:`w-full h-full object-contain mx-auto block transition-opacity ${K.media_type==="video"?"opacity-100":"opacity-0"}`,style:{display:K.media_type==="video"?"block":"none"},playsInline:!0,onEnded:O,onLoadedMetadata:S=>{b(!1),G(S.currentTarget.duration*1e3)},onCanPlay:()=>{b(!1),z.current&&D===0&&G(z.current.duration*1e3)},onError:()=>O()}),X.text&&a.jsx("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-end pb-20 z-30",children:a.jsx("div",{className:"w-full text-center bg-black/40 text-white text-xl font-medium p-3 backdrop-blur-sm",style:{textShadow:"0px 1px 2px rgba(0,0,0,0.8)"},children:X.text})})]}),ae?a.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 z-30",children:a.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 bg-black/50 rounded-full text-white text-sm",children:[a.jsx(ry,{size:16}),"Viewed by ",K.viewed_by?.length||0]})}):a.jsx("form",{onSubmit:Se,className:"absolute bottom-0 left-0 w-full p-4 z-30",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:w,onChange:S=>C(S.target.value),onFocus:()=>g(!0),onBlur:()=>g(!1),placeholder:`Reply to ${J.display_name}...`,className:"flex-1 p-3 rounded-full bg-white/20 border border-white/30 text-white placeholder-white/70 outline-none text-sm",onClick:S=>S.stopPropagation(),onPointerDown:S=>S.stopPropagation()}),a.jsx("button",{type:"submit",disabled:j||!w.trim(),className:"p-3 rounded-full text-white bg-white/20 disabled:opacity-50",children:j?a.jsx(fi,{size:20}):a.jsx(gi,{size:20})})]})})]}),A&&ae&&a.jsx(Ay,{statusId:K.id,onClose:()=>I(!1),onGoToProfile:ve})]})},zy=()=>{const{user:e}=Nt(),[t,n]=k.useState([]),[i,o]=k.useState(null);k.useEffect(()=>{if(!e)return;(async()=>{try{const{data:d}=await V.from("statuses").select("*, profiles!user_id(*)").eq("user_id",e.id).order("created_at",{ascending:!1});n(d||[])}catch(d){console.error("Error fetching archive:",d)}})()},[e]);const l=u=>o(u);return t.length===0?a.jsxs("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))]",children:[a.jsx(kg,{size:48,className:"mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No statuses in your archive yet."})]}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:"Status Archive"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(u=>a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>l(u),children:[u.media_type==="image"?a.jsx("img",{src:u.media_url,className:"w-full aspect-square object-cover rounded",alt:"Archive"}):a.jsx("video",{src:u.media_url,className:"w-full aspect-square object-cover rounded",muted:!0}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-end p-2 rounded transition-opacity",children:a.jsx("span",{className:"text-white text-sm truncate",children:new Date(u.created_at).toLocaleDateString()})})]},u.id))}),i&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>o(null),children:a.jsxs("div",{className:"relative w-full max-w-md",onClick:u=>u.stopPropagation(),children:[i.media_type==="image"?a.jsx("img",{src:i.media_url,className:"w-full rounded",alt:"Full"}):a.jsx("video",{src:i.media_url,className:"w-full rounded",controls:!0,autoPlay:!0,muted:!0,playsInline:!0}),a.jsx("button",{onClick:()=>o(null),className:"absolute -top-10 right-0 text-white p-2",children:a.jsx(Ze,{size:24})})]})})]})},My=()=>{const[e,t]=k.useState(!1),[n,i]=k.useState(null);return k.useEffect(()=>{const o=()=>t(!0),l=u=>{const d=u.detail;d&&d.users&&d.initialUserId&&i({users:d.users,initialUserId:d.initialUserId})};return window.addEventListener("openStatusCreator",o),window.addEventListener("openStatusViewer",l),()=>{window.removeEventListener("openStatusCreator",o),window.removeEventListener("openStatusViewer",l)}},[]),a.jsxs(k.Fragment,{children:[e&&a.jsx(Ty,{onClose:()=>t(!1)}),n&&a.jsx(Ry,{allStatusUsers:n.users,initialUserId:n.initialUserId,onClose:()=>i(null)})]})},cd=({url:e})=>{const[t,n]=k.useState(null),[i,o]=k.useState(!0),[l,u]=k.useState(!1);return k.useEffect(()=>{let d=!0;return o(!0),u(!1),fetch(`https://api.microlink.io/?url=${encodeURIComponent(e)}`).then(h=>h.json()).then(h=>{d&&(h.status==="success"?n(h.data):u(!0),o(!1))}).catch(()=>{d&&(u(!0),o(!1))}),()=>{d=!1}},[e]),i||l||!t?null:a.jsx("div",{className:"mt-2 w-full rounded-lg border border-[rgb(var(--color-border))] bg-[rgba(var(--color-surface-hover),0.5)] overflow-hidden transition hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"px-3 pt-3 flex items-center gap-2 text-[10px] uppercase font-bold text-[rgb(var(--color-text-secondary))]",children:[t.logo?.url&&a.jsx("img",{src:t.logo.url,alt:"",className:"w-3 h-3 rounded-sm"}),a.jsx("span",{children:t.publisher||new URL(e).hostname})]}),a.jsxs("div",{className:"flex gap-4 p-3",children:[a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[a.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-[rgb(var(--color-primary))] hover:underline line-clamp-2 leading-tight mb-1",children:t.title||e}),t.description&&a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] line-clamp-3",children:t.description})]}),t.image?.url&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:t.image.url,alt:"Preview",className:"w-16 h-16 object-cover rounded-md border border-[rgb(var(--color-border))]"})})]})]})})},Oy=e=>{const t=e.match(/(https?:\/\/[^\s]+)/);return t?t[0]:null},Du=({src:e})=>{const t=k.useRef(null),[n,i]=k.useState(!1),[o,l]=k.useState(0),[u,d]=k.useState(0),h="rgb(var(--color-accent))",p="rgb(var(--color-border))",m=b=>{const w=Math.floor(b/60),C=Math.floor(b%60);return`${w}:${C.toString().padStart(2,"0")}`};k.useEffect(()=>{const b=t.current;if(!b)return;const w=()=>{l(b.duration),d(b.currentTime)},C=()=>d(b.currentTime),j=()=>i(!b.paused);return b.addEventListener("loadedmetadata",w),b.addEventListener("timeupdate",C),b.addEventListener("play",j),b.addEventListener("pause",j),b.addEventListener("ended",()=>{i(!1),b.currentTime=0}),()=>{b.removeEventListener("loadedmetadata",w),b.removeEventListener("timeupdate",C),b.removeEventListener("play",j),b.removeEventListener("pause",j),b.removeEventListener("ended",()=>{})}},[]);const g=()=>{const b=t.current;b&&(n?b.pause():b.play())},y=b=>{const w=parseFloat(b.target.value),C=t.current;C&&(C.currentTime=w,d(w))};return a.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full p-2 bg-[rgb(var(--color-surface-hover))] rounded-xl",children:[a.jsx("audio",{ref:t,src:e,preload:"metadata",className:"hidden"}),a.jsx("button",{onClick:g,className:"flex-shrink-0 p-2 rounded-full transition-colors",style:{backgroundColor:h,color:"rgb(var(--color-text-on-primary))"},children:n?a.jsx(Ng,{size:16,fill:"currentColor"}):a.jsx(ld,{size:16,fill:"currentColor"})}),a.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[a.jsx("input",{type:"range",min:"0",max:o,step:"0.01",value:u,onChange:y,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${h} 0%, ${h} ${u/o*100||0}%, ${p} ${u/o*100||0}%, ${p} 100%)`}}),a.jsxs("span",{className:"text-xs flex-shrink-0 text-[rgb(var(--color-text-secondary))]",children:[m(u),"/",m(o)]})]})]})},Lg=e=>{if(!e)return null;const t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?.*v=|embed\/|v\/|shorts\/))([\w-]{11})/i);return t&&t[1]?a.jsx("div",{className:"mt-3 rounded-2xl overflow-hidden bg-black",children:a.jsx("iframe",{title:"YouTube",className:"w-full aspect-video",src:`https://www.youtube.com/embed/${t[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):null},Wp=({post:e,isDeleted:t})=>{const[n,i]=k.useState(null),[o,l]=k.useState("");return k.useEffect(()=>{if(t||!e)return;let u=e.content;const d=u.match(/(https?:\/\/[^\s]+)/),h=d?d[0]:null;if(!e.media_url&&h){u=u.replace(h,"").trim();const p=Lg(h);i(p||a.jsx(cd,{url:h}))}else i(null);l(u)},[e,t]),t||!e?a.jsxs("div",{className:"mt-2 p-4 border border-[rgb(var(--color-border))] rounded-xl bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] italic text-sm flex items-center gap-2",children:[a.jsx(Ze,{size:16})," [Original post has been deleted or cannot be found right now]"]}):a.jsxs("div",{className:"mt-3 border border-[rgb(var(--color-border))] rounded-xl overflow-hidden hover:bg-[rgb(var(--color-surface-hover))] transition cursor-pointer",children:[a.jsxs("div",{className:"p-3 pb-1 flex items-center gap-2",children:[a.jsx("img",{src:e.profiles?.avatar_url,className:"w-6 h-6 rounded-full",alt:""}),a.jsx("span",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:e.profiles?.display_name}),a.jsxs("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["@",e.profiles?.username,"  ",new Date(e.created_at).toLocaleDateString()]})]}),a.jsxs("div",{className:"p-3 pt-1",children:[o&&a.jsx("p",{className:"text-sm text-[rgb(var(--color-text))] line-clamp-3 mb-2",children:o}),n,e.media_url&&a.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden h-40 bg-black/5 relative",children:[e.media_type==="image"&&a.jsx("img",{src:e.media_url,className:"w-full h-full object-cover",alt:"Media"}),e.media_type==="video"&&a.jsx("video",{src:e.media_url,className:"w-full h-full object-cover"}),e.media_type==="audio"&&a.jsx("div",{className:"p-4 flex items-center justify-center h-full",children:a.jsx("span",{className:"text-xs font-bold uppercase tracking-widest opacity-50",children:"Audio Attachment"})})]})]})]})},Dy=({url:e,type:t,onClose:n})=>a.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:n,children:[a.jsxs("div",{className:"max-w-full max-h-full",onClick:i=>i.stopPropagation(),children:[t==="image"&&a.jsx("img",{src:e,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size"}),t==="video"&&a.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[a.jsx("source",{src:e})," Your browser does not support the video tag."]})]}),a.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:a.jsx(Ze,{size:24})})]}),co=({post:e,currentUserId:t,isLiked:n,onLikeToggle:i,onCommentUpdate:o,onDelete:l,onNavigateToProfile:u})=>{const[d,h]=k.useState(!1),[p,m]=k.useState(!1),[g,y]=k.useState(!1),[b,w]=k.useState(!1),[C,j]=k.useState(!1),[P,A]=k.useState(null),[I,D]=k.useState([]),[G,z]=k.useState([]),[J,K]=k.useState(""),[oe,O]=k.useState(!1),[$,Z]=k.useState(!1),[ue,re]=k.useState(!1),[ee,ve]=k.useState(""),[Se,X]=k.useState(!1),ae=async()=>{if(!t)return;X(!0);const de=e.id,{error:bt}=await V.from("posts").insert({user_id:t,content:ee,repost_of:de,is_repost:!0,media_type:"image"});bt?alert("Failed to repost."):(w(!1),ve(""),alert("Reposted!")),X(!1)},[S,L]=k.useState(!1),[H,E]=k.useState(e.content),[ke,fe]=k.useState(e.content),[pe,Pe]=k.useState(0),_e=k.useRef(null),ne=de=>new Date(de).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ne=de=>de?new Date().getTime()-new Date(de).getTime()<3e5:!1;k.useEffect(()=>{fe(e.content),E(e.content)},[e.content]);const Re=()=>{const de=`${window.location.origin}/?post=${e.id}`;navigator.clipboard.writeText(de).then(()=>{re(!0),Z(!1),setTimeout(()=>re(!1),2e3)})},qe=async()=>{if(!H.trim()||H===e.content){L(!1);return}const{error:de}=await V.from("posts").update({content:H}).eq("id",e.id);de?alert("Failed to update post."):(fe(H),L(!1))},De=async()=>{const{data:de}=await V.from("likes").select("user_id, profiles(*)").eq("entity_id",e.id).eq("entity_type","post");de&&D(de)},rt=async()=>{t&&(i(e),n||await V.from("likes").insert({user_id:t,entity_id:e.id,entity_type:"post"}),h(!0),De())},mt=async()=>{t&&(i(e),D(de=>de.filter(bt=>bt.user_id!==t)),await V.from("likes").delete().match({user_id:t,entity_id:e.id,entity_type:"post"}))};k.useEffect(()=>{d&&De()},[d]);const Ye=async()=>{const{data:de}=await V.from("comments").select("*, profiles(*)").eq("post_id",e.id).order("created_at",{ascending:!0});de&&z(de)},Ct=async de=>{if(de.preventDefault(),!t||!J.trim())return;O(!0);const{data:bt,error:wt}=await V.from("comments").insert({post_id:e.id,user_id:t,content:J.trim()}).select("*, profiles(*)").single();!wt&&bt&&(z(sr=>[...sr,bt]),K(""),o({...e,comment_count:(e.comment_count||0)+1})),O(!1)};k.useEffect(()=>{p&&Ye()},[p]);const Tt=()=>{Pe(0);let de=0;_e.current=setInterval(()=>{if(de+=2,de>=100){clearInterval(_e.current),l&&l(e),y(!1);return}Pe(de)},50)},nt=()=>{_e.current&&clearInterval(_e.current),Pe(0)},Lt=t===e.user_id,yt=e.groups;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border-b border-[rgb(var(--color-border))] p-4 hover:bg-[rgb(var(--color-surface-hover))] transition bg-[rgb(var(--color-surface))]",children:[Ad,a.jsxs("div",{className:"flex gap-4 items-start",children:[a.jsxs("button",{onClick:()=>u(e.user_id),className:"flex-shrink-0 relative",children:[a.jsx("img",{src:e.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.profiles?.username}`,className:"w-12 h-12 rounded-full hover:opacity-80 transition",alt:"Avatar"}),Ne(e.profiles?.last_seen)&&a.jsx("span",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[a.jsx("button",{onClick:()=>u(e.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))]",children:e.profiles?.display_name}),e.profiles?.verified&&a.jsx(en,{size:16,className:"text-[rgb(var(--color-accent))]"}),a.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:["@",e.profiles?.username]}),a.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:[" ",new Date(e.created_at).toLocaleDateString()," at ",ne(e.created_at)]})]}),yt&&a.jsxs("div",{className:"flex items-center gap-2 mt-1 cursor-pointer group w-fit",children:[a.jsx("img",{src:yt.icon_url||`https://ui-avatars.com/api/?name=${yt.name}&background=random`,className:"w-5 h-5 rounded-md border border-[rgb(var(--color-border))]",alt:"Group"}),a.jsx("span",{className:"text-xs font-bold text-[rgb(var(--color-text-secondary))] group-hover:text-[rgb(var(--color-primary))] transition",children:yt.name})]}),S?a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsx("textarea",{value:H,onChange:de=>E(de.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))] outline-none resize-none focus:border-[rgb(var(--color-primary))]",rows:3,autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{L(!1),E(ke)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:"Cancel"}),a.jsx("button",{onClick:qe,className:"text-sm bg-[rgb(var(--color-primary))] text-white px-3 py-1 rounded-full font-bold",children:"Save"})]})]}):a.jsx(a.Fragment,{children:(()=>{let de=ke,bt=null;if(!e.media_url){const wt=Oy(ke);if(wt){de=ke.replace(wt,"").trim();const sr=Lg(wt);sr?bt=sr:bt=a.jsx(cd,{url:wt})}}return a.jsxs(a.Fragment,{children:[de&&a.jsx("p",{className:"mt-1 whitespace-pre-wrap break-words text-[rgb(var(--color-text))]",children:de}),bt,e.is_repost&&a.jsx(Wp,{post:e.original_post,isDeleted:!e.original_post})]})})()}),e.media_url&&a.jsxs("div",{className:"mt-3",children:[e.media_type==="image"&&a.jsx("img",{src:e.media_url,className:"rounded-2xl max-h-96 object-cover w-full cursor-pointer transition hover:opacity-90",alt:"Post",onClick:()=>{A("image"),j(!0)}}),e.media_type==="video"&&a.jsxs("div",{className:"relative cursor-pointer",onClick:()=>{A("video"),j(!0)},children:[a.jsx("video",{src:e.media_url,className:"rounded-2xl max-h-96 w-full object-cover"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/10 transition rounded-2xl",children:a.jsx(ld,{size:48,className:"text-white opacity-80"})})]}),e.media_type==="audio"&&a.jsx("div",{className:"rounded-2xl w-full",children:a.jsx(Du,{src:e.media_url})}),e.media_type==="document"&&a.jsxs("a",{href:e.media_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg hover:bg-[rgb(var(--color-border))] transition inline-block text-[rgb(var(--color-text))]",children:[a.jsx(ms,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})," Download File"]})]}),a.jsxs("div",{className:"flex items-center gap-6 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-1 group",children:[a.jsx("button",{onClick:de=>{de.stopPropagation(),rt()},className:`p-2 rounded-full transition ${n?"text-pink-500 bg-pink-500/10":"text-[rgb(var(--color-text-secondary))] hover:bg-pink-500/10 hover:text-pink-500"}`,children:a.jsx(hi,{size:18,fill:n?"currentColor":"none"})}),e.like_count>0&&a.jsx("button",{onClick:de=>{de.stopPropagation(),h(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.like_count})]}),a.jsxs("div",{className:"flex items-center gap-1 group",children:[a.jsx("button",{onClick:de=>{de.stopPropagation(),m(!0)},className:"p-2 rounded-full transition text-[rgb(var(--color-text-secondary))] hover:bg-blue-500/10 hover:text-blue-500",children:a.jsx(ys,{size:18})}),e.comment_count>0&&a.jsx("button",{onClick:de=>{de.stopPropagation(),m(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.comment_count})]}),a.jsxs("div",{className:"flex items-center gap-1 group",children:[a.jsx("button",{onClick:de=>{de.stopPropagation(),w(!0)},className:"p-2 rounded-full transition text-[rgb(var(--color-text-secondary))] hover:bg-green-500/10 hover:text-green-500",children:a.jsx(Bp,{size:18})}),(e.repost_count||0)>0&&a.jsx("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:e.repost_count})]})]})]}),a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("button",{onClick:de=>{de.stopPropagation(),Z(!$)},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:ue?a.jsx(fi,{size:20,className:"text-green-500"}):a.jsx(Mu,{size:20})}),$&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>Z(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-lg shadow-xl overflow-hidden z-10",children:[a.jsxs("button",{onClick:Re,className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[a.jsx(sl,{size:18})," Share Post"]}),Lt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{L(!0),Z(!1)},className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[a.jsx(Cg,{size:18})," Edit Post"]}),a.jsxs("button",{onClick:()=>{y(!0),Z(!1)},className:"w-full text-left p-3 text-red-500 hover:bg-red-50 transition flex items-center gap-2",children:[a.jsx(vo,{size:18})," Delete Post"]})]})]})]})]})]})]}),C&&e.media_url&&a.jsx(Dy,{url:e.media_url,type:P||"image",onClose:()=>j(!1)}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>h(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Likes"}),a.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsx("div",{className:"overflow-y-auto p-4 space-y-4",children:I.length===0?a.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No likes yet."}):I.map((de,bt)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>u(de.user_id),children:[a.jsx("img",{src:de.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${de.profiles?.username}`,className:"w-10 h-10 rounded-full",alt:"Avatar"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm flex items-center",children:[de.profiles?.display_name," ",de.profiles?.verified&&a.jsx(en,{size:14,className:"ml-1 text-[rgb(var(--color-accent))]"})]}),a.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",de.profiles?.username]})]})]}),de.user_id===t&&a.jsx("button",{onClick:mt,className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100 transition",children:a.jsx(hi,{size:16,className:"fill-current"})})]},`${de.user_id}-${bt}`))})]})}),p&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>m(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-lg rounded-2xl h-[80vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Comments"}),a.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:G.length===0?a.jsx("div",{className:"h-full flex items-center justify-center text-[rgb(var(--color-text-secondary))]",children:"No comments yet."}):G.map(de=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("img",{src:de.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${de.profiles?.username}`,className:"w-9 h-9 rounded-full cursor-pointer flex-shrink-0",alt:"Avatar",onClick:()=>u(de.user_id)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("button",{onClick:()=>u(de.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm",children:de.profiles?.display_name}),a.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:ne(de.created_at)})]}),a.jsx("p",{className:"text-[rgb(var(--color-text))] text-sm mt-0.5 whitespace-pre-wrap break-words bg-[rgb(var(--color-surface-hover))] p-2 rounded-r-xl rounded-bl-xl inline-block",children:de.content})]})]},de.id))}),a.jsx("form",{onSubmit:Ct,className:"p-3 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-b-2xl",children:a.jsxs("div",{className:"flex items-center gap-2 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2",children:[a.jsx("input",{type:"text",value:J,onChange:de=>K(de.target.value),placeholder:"Add a comment...",className:"flex-1 bg-transparent border-none outline-none text-sm text-[rgb(var(--color-text))]",autoFocus:!0}),a.jsx("button",{type:"submit",disabled:!J.trim()||oe,className:"text-[rgb(var(--color-accent))] disabled:opacity-50 hover:text-[rgb(var(--color-primary))] transition",children:a.jsx(gi,{size:18})})]})})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>{y(!1),nt()},children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-sm flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(vo,{size:24,className:"text-red-500 flex-shrink-0"}),a.jsx("h3",{className:"font-bold text-xl",children:"Confirm Deletion"})]}),a.jsx("p",{className:"mb-6",children:"Are you sure? This action cannot be undone!"}),a.jsxs("button",{onMouseDown:Tt,onMouseUp:nt,onMouseLeave:nt,onTouchStart:Tt,onTouchEnd:nt,className:"relative w-full py-3 rounded-xl font-bold text-lg text-white bg-red-500 overflow-hidden disabled:opacity-50 transition duration-100",children:[a.jsx("div",{className:"absolute inset-0 bg-red-700 transition-all duration-50",style:{width:`${pe}%`}}),a.jsx("span",{className:"relative z-10",children:(pe>0,"Hold to Delete")})]}),a.jsx("button",{onClick:()=>{y(!1),nt()},className:"mt-3 w-full py-2 text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] rounded-xl transition",children:"Cancel"})]})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>w(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-lg rounded-2xl flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Repost"}),a.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:a.jsx(Ze,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex gap-3 mb-4",children:a.jsx("textarea",{value:ee,onChange:de=>ve(de.target.value),placeholder:"Say something about this... (optional)",className:"w-full bg-transparent outline-none text-[rgb(var(--color-text))] resize-none h-24 p-2 border border-[rgb(var(--color-border))] rounded-lg",autoFocus:!0})}),a.jsx("div",{className:"pointer-events-none opacity-80",children:a.jsx(Wp,{post:e})}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsxs("button",{onClick:ae,disabled:Se,className:"bg-[rgb(var(--color-accent))] text-white font-bold py-2 px-6 rounded-full hover:opacity-90 transition flex items-center gap-2 disabled:opacity-50",children:[a.jsx(Bp,{size:18}),Se?"Reposting...":"Repost"]})})]})]})})]})},Gp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",$y="0 0 784 1168",eo=10,Fy=()=>{const[e,t]=k.useState([]),[n,i]=k.useState(""),[o,l]=k.useState(null),[u,d]=k.useState(""),[h,p]=k.useState(0),[m,g]=k.useState(!1),[y,b]=k.useState(!1),[w,C]=k.useState(!1),{user:j}=Nt(),P=k.useRef(null),A=k.useRef(null),[I,D]=k.useState("posts"),[G,z]=k.useState(!1),[J,K]=k.useState(""),[oe,O]=k.useState([]),$=async(ne="")=>{const Ne="AIzaSyDlYCxbThckK4ctV5XLDeqbQAEk-rebKKE",Re=ne?`https://tenor.googleapis.com/v2/search?q=${ne}&key=${Ne}&client_key=gazebo_app&limit=12&media_filter=minimal`:`https://tenor.googleapis.com/v2/featured?key=${Ne}&client_key=gazebo_app&limit=12&media_filter=minimal`;try{const De=await(await fetch(Re)).json();O(De.results||[])}catch(qe){console.error("Tenor Error",qe)}};k.useEffect(()=>{G&&$(J)},[G,J]),k.useRef(null),k.useEffect(()=>{},[]);const[Z,ue]=k.useState(new Set),[re,ee]=k.useState(0),[ve,Se]=k.useState(!0),[X,ae]=k.useState(!1),S=k.useCallback(async ne=>{if(!ne.length)return{likeCounts:{},commentCounts:{}};const Ne={},Re={};for(const qe of ne){const[{count:De},{count:rt}]=await Promise.all([V.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",qe),V.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",qe)]);Ne[qe]=De||0,Re[qe]=rt||0}return{likeCounts:Ne,commentCounts:Re}},[]),L=k.useCallback(async ne=>{if(!j||ne.length===0)return;const Ne=ne.map(qe=>qe.id),{data:Re}=await V.from("likes").select("entity_id").eq("user_id",j.id).eq("entity_type","post").in("entity_id",Ne);Re&&ue(qe=>new Set([...qe,...Re.map(De=>De.entity_id)]))},[j]),H=k.useCallback(async()=>{if(!j?.id)return;t([]),ee(0),Se(!0);let ne=V.from("posts").select("*, profiles(*), original_post:repost_of(*, profiles(*))").order("created_at",{ascending:!1});if(j){const{data:Ye}=await V.from("follows").select("following_id").eq("follower_id",j.id),Ct=Ye?.map(Tt=>Tt.following_id)||[];ne=ne.in("user_id",[...Ct,j.id])}const{data:Ne}=await ne.range(0,eo-1),Re=Ne||[],qe=Re.map(Ye=>Ye.id),{likeCounts:De,commentCounts:rt}=await S(qe),mt=Re.map(Ye=>({...Ye,like_count:De[Ye.id]||0,comment_count:rt[Ye.id]||0}));t(mt),mt.length<eo&&Se(!1),L(mt)},[j?.id,L,S]),E=k.useCallback(async()=>{if(X||!ve)return;ae(!0);const ne=re+1,Ne=ne*eo,Re=Ne+eo-1;let qe=V.from("posts").select("*, profiles(*), original_post:repost_of(*, profiles(*))").order("created_at",{ascending:!1});if(j){const{data:nt}=await V.from("follows").select("following_id").eq("follower_id",j.id),Lt=nt?.map(yt=>yt.following_id)||[];qe=qe.in("user_id",[...Lt,j.id])}const{data:De}=await qe.range(Ne,Re),rt=De||[],mt=rt.map(nt=>nt.id),{likeCounts:Ye,commentCounts:Ct}=await S(mt),Tt=rt.map(nt=>({...nt,like_count:Ye[nt.id]||0,comment_count:Ct[nt.id]||0}));t(nt=>[...nt,...Tt]),ee(ne),rt.length<eo&&Se(!1),L(Tt),ae(!1)},[X,ve,re,j,L,S]);k.useEffect(()=>{if(!j?.id)return;H();const ne=V.channel("feed-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async Ne=>{const{data:Re}=await V.from("posts").select("*, profiles(*), original_post:repost_of(*, profiles(*))").eq("id",Ne.new.id).single();Re&&t(qe=>[{...Re,like_count:0,comment_count:0},...qe])}).subscribe();return()=>{V.removeChannel(ne)}},[j?.id,H]),k.useEffect(()=>{const ne=()=>{const Ne=window.scrollY>100;Ne&&y&&b(!1),C(Ne),I==="posts"&&window.innerHeight+document.documentElement.scrollTop+200>=document.documentElement.offsetHeight&&ve&&!X&&E()};return window.addEventListener("scroll",ne),()=>{window.removeEventListener("scroll",ne)}},[y,ve,X,E,I]);const ke=async ne=>{if(ne.preventDefault(),!n.trim()&&!o&&!u.trim())return;g(!0),p(0);let Ne=null,Re=null;if(o){const qe=await mo(o,"posts");if(!qe){g(!1);return}Ne=qe.url,Re=qe.type}else u.trim()&&(Ne=u.trim(),u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?Re="image":u.match(/\.(mp4|webm|mov|avi)$/i)?Re="video":u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?Re="audio":Re="document");await V.from("posts").insert({user_id:j.id,content:n,media_url:Ne,media_type:Re}),i(""),l(null),d(""),b(!1),g(!1),p(0)},fe=async ne=>{const{data:Ne}=await V.from("profiles").select("username").eq("id",ne).single();Ne&&(window.history.replaceState({},"",`/?user=${Ne.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:ne})))},pe=()=>{if(o){const ne=URL.createObjectURL(o);return o.type.startsWith("image/")?a.jsx("img",{src:ne,className:"max-h-48 rounded-lg object-cover",alt:"Preview"}):o.type.startsWith("video/")?a.jsx("video",{src:ne,className:"max-h-48 rounded-lg",controls:!0}):o.type.startsWith("audio/")?a.jsx(Du,{src:ne}):a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[a.jsx(ms,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("span",{className:"text-sm text-[rgb(var(--color-text))]",children:o.name})]})}return u?u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?a.jsx("img",{src:u,className:"max-h-48 rounded-lg object-cover",alt:"Remote preview"}):u.match(/\.(mp4|webm|mov|avi)$/i)?a.jsx("video",{src:u,className:"max-h-48 rounded-lg",controls:!0}):u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?a.jsx(Du,{src:u}):a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[a.jsx(xo,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("span",{className:"text-sm truncate max-w-[200px] text-[rgb(var(--color-text))]",children:u})]}):null},Pe=ne=>{const Ne=Z.has(ne.id),Re=new Set(Z);Ne?Re.delete(ne.id):Re.add(ne.id),ue(Re),t(qe=>qe.map(De=>De.id===ne.id?{...De,like_count:Math.max(0,De.like_count+(Ne?-1:1))}:De))},_e=ne=>{t(Ne=>Ne.map(Re=>Re.id===ne.id?ne:Re))};return a.jsxs("div",{className:"max-w-2xl mx-auto",children:[Ad,I==="posts"&&a.jsx(Py,{}),I==="posts"&&a.jsx("div",{ref:P,className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] shadow-sm",children:y?a.jsxs("form",{onSubmit:ke,className:"p-4 space-y-3",children:[a.jsx("textarea",{value:n,onChange:ne=>i(ne.target.value),placeholder:"What's happening?",rows:3,className:"w-full px-4 py-3 border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-2xl focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none text-[rgb(var(--color-text))]",autoFocus:!0}),(o||u)&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[a.jsx("div",{className:"flex-1",children:pe()}),a.jsx("button",{type:"button",onClick:()=>{l(null),d("")},className:"ml-2 p-1 hover:bg-[rgb(var(--color-border))] rounded-full transition",children:a.jsx(Ze,{size:18,className:"text-[rgb(var(--color-text-secondary))]"})})]}),m&&a.jsx("div",{className:"w-full bg-[rgb(var(--color-border))] rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"bg-[rgba(var(--color-accent),1)] h-full transition-all duration-300",style:{width:`${h}%`}})}),G&&a.jsxs("div",{className:"relative border border-[rgb(var(--color-border))] rounded-xl overflow-hidden bg-[rgb(var(--color-background))] h-64 flex flex-col mb-3",children:[a.jsxs("div",{className:"p-2 border-b border-[rgb(var(--color-border))] flex gap-2",children:[a.jsx(pn,{size:16,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("input",{type:"text",placeholder:"Search GIFs...",className:"flex-1 bg-transparent text-sm outline-none text-[rgb(var(--color-text))]",value:J,onChange:ne=>K(ne.target.value),autoFocus:!0}),a.jsx("button",{type:"button",onClick:()=>z(!1),children:a.jsx(Ze,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-3 gap-2",children:oe.map(ne=>a.jsx("img",{src:ne.media_formats.tinygif.url,alt:"GIF",className:"w-full h-24 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>{d(ne.media_formats.gif.url),l(null),z(!1)}},ne.id))})]}),a.jsx("input",{ref:A,type:"file",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt",onChange:ne=>{l(ne.target.files?.[0]||null),d("")},className:"hidden"}),a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsxs("button",{type:"button",onClick:()=>A.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] rounded-full text-sm hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2 text-[rgb(var(--color-text))]",children:[a.jsx(xo,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})," ",o?"Change File":"Attach"]}),a.jsxs("button",{type:"button",onClick:()=>z(!G),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] rounded-full text-sm hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2 text-[rgb(var(--color-text))]",children:[a.jsx(_g,{size:16,className:"text-pink-500"})," GIF"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"or"}),a.jsx("input",{type:"url",value:u,onChange:ne=>{d(ne.target.value),l(null)},placeholder:"Paste URL...",className:"flex-1 min-w-0 px-3 py-1.5 text-sm border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] text-[rgb(var(--color-text))]"})]}),a.jsxs("button",{type:"submit",disabled:m||!n.trim()&&!o&&!u.trim(),className:"ml-auto bg-[rgba(var(--color-accent),1)] disabled:bg-[rgb(var(--color-border))] text-[rgb(var(--color-text-on-primary))] px-6 py-2 rounded-full hover:bg-[rgba(var(--color-primary),1)] flex items-center gap-2 font-semibold transition",children:[a.jsx(gi,{size:16})," ",m?"Uploading...":"Post"]})]})]}):a.jsxs("button",{onClick:()=>b(!0),className:"w-full p-4 flex items-center gap-3 hover:bg-[rgb(var(--color-surface-hover))] transition",children:[a.jsx(Cg,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Write a post..."})]})}),a.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-[0px] z-30",children:[a.jsxs("button",{onClick:()=>D("posts"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${I==="posts"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx(od,{size:18})," Posts"]}),a.jsxs("button",{onClick:()=>D("shots"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${I==="shots"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx(vy,{size:18})," Shots"]})]}),a.jsx("div",{children:I==="shots"?a.jsx(Ny,{}):a.jsxs(a.Fragment,{children:[e.length===0&&!X&&a.jsx("div",{className:"text-center py-12 text-[rgb(var(--color-text-secondary))]",children:"No posts from people you follow yet."}),e.map(ne=>a.jsx(co,{post:ne,currentUserId:j?.id,isLiked:Z.has(ne.id),onLikeToggle:Pe,onCommentUpdate:_e,onNavigateToProfile:fe},ne.id)),X&&a.jsx("div",{className:"flex justify-center p-4",children:a.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:$y,className:"logo-svg",children:[a.jsx("path",{d:Gp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:Gp,fill:"rgb(var(--color-primary))",className:"logo-fill-animated"})]})})}),!X&&!ve&&e.length>0&&a.jsx("div",{className:"text-center py-8 text-sm text-[rgb(var(--color-text-secondary))]",children:"You've reached the end of the feed."})]})})]})},Uy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],By=({onSelect:e,onClose:t})=>a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:t,children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-xs sm:max-w-md rounded-2xl shadow-2xl border border-[rgb(var(--color-border))] flex flex-col max-h-[60vh]",onClick:n=>n.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-[rgb(var(--color-border))]",children:[a.jsx("span",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:"Choose Reaction"}),a.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(Ze,{size:18,className:"text-[rgb(var(--color-text-secondary))]"})})]}),a.jsx("div",{className:"overflow-y-auto p-2 grid grid-cols-6 sm:grid-cols-8 gap-2 custom-scrollbar",children:Uy.map(n=>a.jsx("button",{onClick:()=>e(n),className:"aspect-square flex items-center justify-center text-xl hover:bg-[rgb(var(--color-surface-hover))] rounded-lg transition",children:n},n))})]})}),Kp=k.lazy(()=>xs(()=>import("./Calls-lVRuv2Sc.js"),__vite__mapDeps([0,1])).then(e=>({default:e.Calls}))),qy=k.lazy(()=>xs(()=>import("./Gazebos-xaSxw7KS.js"),__vite__mapDeps([2,1])).then(e=>({default:e.Gazebos}))),Vy=e=>{const t=/(https?:\/\/[^\s]+)/g,n=e.match(t);return n?n[0]:null},Qp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Hy="0 0 784 1168",$u=["","","","","",""],Wy=(e,t)=>{if(!e)return[];const n=new Map;for(const i of e){const{emoji:o,user_id:l,profiles:u}=i;n.has(o)||n.set(o,{emoji:o,count:0,hasReacted:!1,userProfiles:[]});const d=n.get(o);d.count++,l===t&&(d.hasReacted=!0),u&&!Array.isArray(u)&&d.userProfiles.push(u)}return Array.from(n.values()).sort((i,o)=>{const l=$u.indexOf(i.emoji),u=$u.indexOf(o.emoji);return l!==-1&&u!==-1?l-u:l!==-1?-1:u!==-1?1:o.count-i.count})},Da=({src:e,isOutgoing:t})=>{const n=k.useRef(null),[i,o]=k.useState(!1),[l,u]=k.useState(0),[d,h]=k.useState(0),p=t?"rgb(var(--color-text-on-primary))":"rgb(var(--color-accent))",m=t?"rgba(var(--color-text-on-primary), 0.3)":"rgb(var(--color-border))",g=w=>{const C=Math.floor(w/60),j=Math.floor(w%60);return`${C}:${j.toString().padStart(2,"0")}`};k.useEffect(()=>{const w=n.current;if(!w)return;const C=()=>{u(w.duration),h(w.currentTime)},j=()=>h(w.currentTime),P=()=>o(!w.paused),A=()=>{o(!1),w.currentTime=0};return w.addEventListener("loadedmetadata",C),w.addEventListener("timeupdate",j),w.addEventListener("play",P),w.addEventListener("pause",P),w.addEventListener("ended",A),()=>{w.removeEventListener("loadedmetadata",C),w.removeEventListener("timeupdate",j),w.removeEventListener("play",P),w.removeEventListener("pause",P),w.removeEventListener("ended",A)}},[]);const y=()=>{const w=n.current;w&&(i?w.pause():w.play())},b=w=>{const C=parseFloat(w.target.value),j=n.current;j&&(j.currentTime=C,h(C))};return a.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full mb-1",children:[a.jsx("audio",{ref:n,src:e,preload:"metadata",className:"hidden"}),a.jsx("button",{onClick:y,className:"flex-shrink-0 p-1.5 rounded-full transition-colors",style:{backgroundColor:t?"rgba(var(--color-text-on-primary), 0.15)":"rgb(var(--color-surface-hover))",color:p},children:i?a.jsx(Ng,{size:14,fill:p}):a.jsx(ld,{size:14,fill:p})}),a.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[a.jsx("input",{type:"range",min:"0",max:l,step:"0.01",value:d,onChange:b,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${p} 0%, ${p} ${d/l*100||0}%, ${m} ${d/l*100||0}%, ${m} 100%)`}}),a.jsxs("span",{className:"text-[10px] flex-shrink-0 opacity-80",style:{color:p},children:[g(d),"/",g(l)]})]})]})},Gy=({initialInviteCode:e,onInviteHandled:t,initialTab:n="chats",initialGazeboId:i})=>{const[o,l]=k.useState(n),[u,d]=k.useState([]),[h,p]=k.useState(null),[m,g]=k.useState([]),[y,b]=k.useState(""),[w,C]=k.useState(null),[j,P]=k.useState(null),[A,I]=k.useState(""),[D,G]=k.useState(0),[z,J]=k.useState(!1),[K,oe]=k.useState(""),[O,$]=k.useState(!0),[Z,ue]=k.useState(!1),[re,ee]=k.useState(!1),[ve,Se]=k.useState(null),[X,ae]=k.useState(null),[S,L]=k.useState(null),[H,E]=k.useState(!1),ke=k.useRef(null),fe=k.useRef(!1),[pe,Pe]=k.useState(null),[_e,ne]=k.useState(!1),[Ne,Re]=k.useState(""),[qe,De]=k.useState([]),rt=N=>{navigator.clipboard.writeText(N),ae(null)},mt=async N=>{ae(null),g(Q=>Q.map(te=>te.id===N?{...te,is_deleted:!0}:te));const{error:q}=await V.from("messages").update({is_deleted:!0}).eq("id",N).eq("sender_id",ye.id).select();q&&(console.error("Error deleting message:",q),ks(h.id))},Ye=N=>{Pe(N),b(N.content),ae(null),xn.current?.focus()},Ct=async N=>{if(N.preventDefault(),!pe||!y.trim())return;const q=[...m];g(te=>te.map(be=>be.id===pe.id?{...be,content:y,is_edited:!0}:be)),Pe(null),b("");const{error:Q}=await V.from("messages").update({content:y,is_edited:!0}).eq("id",pe.id).eq("sender_id",ye.id).select();Q&&(console.error("Error updating message:",Q),g(q),alert("Failed to update message"))},Tt=async(N="")=>{const q="AIzaSyDlYCxbThckK4ctV5XLDeqbQAEk-rebKKE",Q=N?`https://tenor.googleapis.com/v2/search?q=${N}&key=${q}&client_key=gazebo_app&limit=12&media_filter=minimal`:`https://tenor.googleapis.com/v2/featured?key=${q}&client_key=gazebo_app&limit=12&media_filter=minimal`;try{const be=await(await fetch(Q)).json();De(be.results||[])}catch(te){console.error("Tenor Error",te)}};k.useEffect(()=>{_e&&Tt(Ne)},[_e,Ne]),k.useEffect(()=>{const N=q=>{Hr.current&&!Hr.current.contains(q.target)&&ne(!1)};return _e&&document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[_e]);const nt=async N=>{ne(!1),Se(null);const{data:q}=await V.from("messages").insert({sender_id:ye.id,recipient_id:h.id,content:"",media_url:N,media_type:"image"}).select().single();q&&xr()},[Lt,yt]=k.useState(!1),[de,bt]=k.useState("image"),[wt,sr]=k.useState([]),[Y,le]=k.useState(!1),Ae=async()=>{if(!ye||!h)return;le(!0);const{data:N}=await V.from("messages").select("*").or(`and(sender_id.eq.${ye.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${ye.id})`).not("media_url","is",null).neq("media_url","").order("created_at",{ascending:!1});N&&sr(N),le(!1)},Fe=(N,q)=>{if(N.length<=q)return N;const Q=N.slice(0,Math.floor(q/2)),te=N.slice(-Math.floor(q/2));return`${Q}...${te}`},{user:ye}=Nt(),ht=k.useCallback(async(N,q)=>{if(!ye)return;const te=m.find(be=>be.id===N)?.reactions?.find(be=>be.user_id===ye.id);te?te.emoji===q?await V.from("message_reactions").delete().eq("id",te.id):await V.from("message_reactions").update({emoji:q}).eq("id",te.id):await V.from("message_reactions").insert({message_id:N,user_id:ye.id,emoji:q,message_type:"dm"}),ae(null)},[ye,m]),jt=async N=>{await V.from("message_reactions").delete().eq("id",N)},[st,mr]=k.useState(!1),gr=k.useRef(null),gt=k.useRef([]),[Ot,Ve]=k.useState(0),[Ke,ot]=k.useState(!0),[ir,Zt]=k.useState(!1),qr=k.useRef(null),Dt=10,gn=k.useRef(null),Vr=k.useRef(null),xn=k.useRef(null),Hr=k.useRef(null),$t=k.useRef(null),kt=k.useRef(null),Wr=async N=>{if(!ye)return;const{error:q}=await V.from("messages").update({read:!0}).eq("recipient_id",ye.id).eq("sender_id",N).eq("read",!1);q||window.dispatchEvent(new CustomEvent("messagesRead"))},or=N=>{if(!N)return!1;const q=new Date(N);return new Date().getTime()-q.getTime()<6e4},Kn=N=>{if(!N)return null;const q=new Date(N),te=new Date().getTime()-q.getTime();if(te<6e4)return null;const ce=Math.floor(te/1e3),me=Math.floor(ce/(3600*24)),Ie=Math.floor(ce%(3600*24)/3600),et=Math.floor(ce%3600/60);let Wt=[];return me>0?(Wt.push(`${me}d`),Ie>0&&Wt.push(`${Ie}h`)):Ie>0?(Wt.push(`${Ie}h`),et>0&&Wt.push(`${et}m`)):et>0&&Wt.push(`${et}m`),Wt.length===0?null:`${Wt.join(" ")} ago`},xr=()=>{gn.current?.scrollIntoView({behavior:"smooth"})},vn=N=>{const q=document.getElementById(`msg-${N}`);q?(q.scrollIntoView({behavior:"smooth",block:"center"}),q.classList.add("ring-2","ring-[rgb(var(--color-primary))]","ring-offset-2"),setTimeout(()=>{q.classList.remove("ring-2","ring-[rgb(var(--color-primary))]","ring-offset-2")},1e3)):console.log("Message not currently loaded in view")},Ir=async N=>{const{data:q}=await V.from("profiles").select("username").eq("id",N).single();q&&window.history.replaceState({},"",`/?${q.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:N}))},rn=async()=>{const{data:N}=await V.from("messages").select(`
        id,
        sender_id,
        recipient_id,
        created_at,
        sender:profiles!sender_id(id, username, display_name, avatar_url, verified, last_seen),
        recipient:profiles!recipient_id(id, username, display_name, avatar_url, verified, last_seen)
      `).or(`sender_id.eq.${ye.id},recipient_id.eq.${ye.id}`).order("created_at",{ascending:!1}),q=new Map;N?.forEach(te=>{const be=te.sender_id===ye.id?te.recipient:te.sender;if(be){const ce=q.get(be.id);(!ce||te.created_at>ce.latest)&&q.set(be.id,{profile:be,latest:te.created_at})}});const Q=Array.from(q.values()).sort((te,be)=>be.latest.localeCompare(te.latest)).map(te=>te.profile);d(Q)};k.useEffect(()=>{n&&l(n)},[n]),k.useEffect(()=>{const N=q=>{const Q=q.detail;Q&&Q.id!==ye?.id&&(p(Q),$(!1),oe(""))};return window.addEventListener("openDirectMessage",N),()=>window.removeEventListener("openDirectMessage",N)},[ye]),k.useEffect(()=>{ye&&rn()},[ye]),k.useEffect(()=>{const q=new URLSearchParams(window.location.search).get("user");q&&ye&&(async()=>{const{data:te}=await V.from("profiles").select("*").eq("username",q).single();te&&te.id!==ye.id&&(p(te),$(!1))})()},[ye]);const[ws,Qn]=k.useState([]);k.useEffect(()=>{if(!K.trim()){Qn([]);return}const q=setTimeout(async()=>{const{data:Q}=await V.from("profiles").select("*").or(`username.ilike.%${K}%,display_name.ilike.%${K}%`).neq("id",ye.id).limit(20);Qn(Q||[])},300);return()=>clearTimeout(q)},[K]),k.useEffect(()=>{if(!h){$t.current&&($t.current.unsubscribe(),$t.current=null),kt.current&&(kt.current.unsubscribe(),kt.current=null);return}ks(h.id),Wr(h.id),$(!1);const N=V.channel(`messages:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"messages"},async te=>{const be=te.eventType,ce=te.new;if(be==="INSERT"&&(ce.sender_id===ye.id&&ce.recipient_id===h.id||ce.sender_id===h.id&&ce.recipient_id===ye.id)){let me=ce;if(me.reply_to_id){const{data:Ie}=await V.from("messages").select("id, content, sender_id, media_type").eq("id",me.reply_to_id).single();Ie&&(me={...me,reply_to:Ie})}ce.sender_id===h.id&&ce.recipient_id===ye.id&&(Wr(h.id),me.read=!0),g(Ie=>[...Ie,me]),xr(),rn()}be==="UPDATE"&&g(me=>me.map(Ie=>Ie.id===ce.id?{...Ie,content:ce.content,media_url:ce.media_url,media_type:ce.media_type,is_edited:ce.is_edited,is_deleted:ce.is_deleted,read:ce.read}:Ie))}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},async te=>{if(te.eventType==="DELETE"){const be=te.old;g(ce=>ce.map(me=>me.reactions?.some(Ie=>Ie.id===be.id)?{...me,reactions:me.reactions.filter(Ie=>Ie.id!==be.id)}:me)),L(ce=>ce&&ce.reactions?.some(me=>me.id===be.id)?{...ce,reactions:ce.reactions.filter(me=>me.id!==be.id)}:ce)}else if(te.eventType==="INSERT"){const be=te.new,ce=be.message_id,{data:me}=await V.from("message_reactions").select("*, profiles(id, username, display_name, avatar_url)").eq("id",be.id).single();me&&(g(Ie=>Ie.map(et=>{if(et.id===ce){const Wt=et.reactions||[];return Wt.some(It=>It.id===me.id)?et:{...et,reactions:[...Wt,me]}}return et})),L(Ie=>Ie&&Ie.id===ce&&Ie.reactions?Ie.reactions.some(et=>et.id===me.id)?Ie:{...Ie,reactions:[...Ie.reactions,me]}:Ie))}else if(te.eventType==="UPDATE"){const be=te.new;g(ce=>ce.map(me=>me.reactions?.some(Ie=>Ie.id===be.id)?{...me,reactions:me.reactions.map(Ie=>Ie.id===be.id?{...Ie,emoji:be.emoji}:Ie)}:me)),L(ce=>ce&&ce.reactions?.some(me=>me.id===be.id)?{...ce,reactions:ce.reactions.map(me=>me.id===be.id?{...me,emoji:be.emoji}:me)}:ce)}}).subscribe(),q=`typing:${h.id}:${ye.id}`;$t.current=V.channel(q),$t.current.on("presence",{event:"sync"},()=>{const te=$t.current.presenceState(),be=Object.values(te).flat().some(ce=>ce.typing===!0);ue(be)}).subscribe();const Q=`typing:${ye.id}:${h.id}`;return kt.current=V.channel(Q),kt.current.subscribe(async te=>{te==="SUBSCRIBED"&&await kt.current.track({typing:!1})}),()=>{V.removeChannel(N),$t.current&&($t.current.unsubscribe(),$t.current=null),kt.current&&(kt.current.untrack(),kt.current.unsubscribe(),kt.current=null)}},[h,ye]);const yn=async N=>{if(kt.current)try{await kt.current.track({typing:N})}catch{}},Ar=N=>{const q=N.target.value;b(q),q.trim()?(yn(!0),Vr.current&&clearTimeout(Vr.current),Vr.current=setTimeout(()=>{yn(!1)},1e3)):(yn(!1),Vr.current&&clearTimeout(Vr.current))},bn=N=>{if(N.clipboardData.files.length>0){const q=N.clipboardData.files[0];P(q),I(""),Se(null),N.preventDefault();return}},Jn=async N=>{if(N.preventDefault(),!y.trim()&&!j&&!A.trim()||!h)return;J(!0),G(0);let q=null,Q=null;if(j){j.type.startsWith("audio/")&&(Q="audio");const be=await mo(j,"messages");if(!be){J(!1);return}q=be.url,Q=Q||be.type}else A.trim()&&(q=A.trim(),A.match(/\.(jpeg|jpg|gif|png|webp)$/i)?Q="image":A.match(/\.(mp4|webm|mov|avi)$/i)?Q="video":A.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?Q="audio":Q="document");yn(!1);const{data:te}=await V.from("messages").insert({sender_id:ye.id,recipient_id:h.id,content:y,media_url:q,media_type:Q,reply_to_id:w?w.id:null}).select().single();te&&(b(""),P(null),I(""),C(null),J(!1),G(0),Se(null))},ks=async N=>{g([]),Ve(0),ot(!0),Zt(!1);const{data:q,count:Q}=await V.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${ye.id},recipient_id.eq.${N}),and(sender_id.eq.${N},recipient_id.eq.${ye.id})`).order("created_at",{ascending:!1}).range(0,Dt-1);if(!q||q.length===0){ot(!1);return}const te=q.map(me=>me.reply_to_id).filter(me=>me!=null);let be=new Map;if(te.length>0){const{data:me}=await V.from("messages").select("id, content, sender_id, media_type").in("id",te);me&&me.forEach(Ie=>be.set(Ie.id,Ie))}const ce=q.map(me=>({...me,reply_to:me.reply_to_id&&be.get(me.reply_to_id)||null}));g(ce.reverse()),(q.length<Dt||Q!==null&&Q<=Dt)&&ot(!1),setTimeout(xr,100)},_s=async()=>{if(ir||!Ke||!h)return;Zt(!0);const N=Ot+1,q=N*Dt,Q=q+Dt-1,te=qr.current,be=te?.scrollHeight,{data:ce,count:me}=await V.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${ye.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${ye.id})`).order("created_at",{ascending:!1}).range(q,Q);if(ce&&ce.length>0){const Ie=ce.map(It=>It.reply_to_id).filter(It=>It!=null);let et=new Map;if(Ie.length>0){const{data:It}=await V.from("messages").select("id, content, sender_id, media_type").in("id",Ie);It&&It.forEach(Co=>et.set(Co.id,Co))}const Wt=ce.map(It=>({...It,reply_to:It.reply_to_id&&et.get(It.reply_to_id)||null}));g(It=>[...Wt.reverse(),...It]),Ve(N),te&&be&&setTimeout(()=>{const It=te.scrollHeight;te.scrollTop=It-be},0)}(!ce||ce.length<Dt||me!==null&&m.length+(ce?.length||0)>=me)&&ot(!1),Zt(!1)},js=()=>{if(qr.current){const{scrollTop:N}=qr.current;N===0&&Ke&&!ir&&_s()}},jr=(N,q)=>{window.dispatchEvent(new CustomEvent("startCall",{detail:{targetUser:N,type:q}}))},wn=()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Audio recording is not supported by your browser.");return}navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const q={mimeType:"audio/webm"};let Q;try{Q=new MediaRecorder(N,q)}catch{Q=new MediaRecorder(N)}gr.current=Q,gt.current=[],Q.ondataavailable=te=>{gt.current.push(te.data)},Q.onstop=()=>{const te=Q.mimeType||"audio/webm",be=te.split("/")[1]?.split(";")[0]||"weba",ce=new Blob(gt.current,{type:te}),me=new File([ce],`voice-message.${be}`,{type:te});P(me),mr(!1),N.getTracks().forEach(Ie=>Ie.stop())},Q.start(),mr(!0),P(null),I(""),Se(null)}).catch(N=>{console.error("Mic error:",N),alert("Mic not found or permission was denied. Please check your browser settings.")})},Ss=()=>{gr.current&&st&&gr.current.stop()},Ns=()=>{st?Ss():wn()},at=K?ws:u,U=()=>{if(j){const N=URL.createObjectURL(j);return j.type.startsWith("image/")?a.jsx("img",{src:N,className:"max-h-24 rounded-lg shadow-sm",alt:"Preview"}):j.type.startsWith("video/")?a.jsx("video",{src:N,className:"max-h-24 rounded-lg shadow-sm",controls:!0}):j.type.startsWith("audio/")?a.jsx(Da,{src:N,isOutgoing:!0}):a.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text))] p-2 bg-[rgb(var(--color-background))] rounded-lg border border-[rgb(var(--color-border))]",children:[a.jsx(ms,{size:16,className:"text-[rgb(var(--color-accent))]"}),a.jsx("span",{children:j.name})]})}return A?A.match(/\.(jpeg|jpg|gif|png|webp)$/i)?a.jsx("img",{src:A,className:"max-h-24 rounded-lg shadow-sm",alt:"Remote preview"}):A.match(/\.(mp4|webm|mov|avi)$/i)?a.jsx("video",{src:A,className:"max-h-24 rounded-lg shadow-sm",controls:!0}):A.match(/\.(mp3|wav|ogg|m4a)$/i)?a.jsx(Da,{src:A,isOutgoing:!0}):a.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text))] p-2 bg-[rgb(var(--color-background))] rounded-lg border border-[rgb(var(--color-border))]",children:[a.jsx(zu,{size:16,className:"text-[rgb(var(--color-accent))]"}),a.jsx("span",{className:"truncate max-w-[150px]",children:A})]}):null};return o==="gazebos"?a.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] flex-col md:flex-row text-[rgb(var(--color-text))]",children:[a.jsx(k.Suspense,{fallback:a.jsx("div",{className:"p-4",children:"Loading Calls..."}),children:a.jsx(Kp,{})}),a.jsxs("div",{className:"md:hidden flex-shrink-0 p-2 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] flex gap-2 z-50",children:[a.jsx("button",{onClick:()=>l("chats"),className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:"Chats"}),a.jsx("button",{className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))]",children:"Gazebos"})]}),a.jsxs("div",{className:"hidden md:flex flex-col w-16 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] items-center py-4 gap-4 z-50 flex-shrink-0",children:[a.jsx("button",{onClick:()=>l("chats"),title:"Direct Messages",className:"p-3 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:a.jsx(go,{size:24})}),a.jsx("button",{title:"Gazebos",className:"p-3 rounded-full bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] shadow-md transition",children:a.jsx(_o,{size:24})})]}),a.jsx("div",{className:"flex-1 min-w-0 h-full relative overflow-hidden",children:a.jsx(k.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading Gazebos..."}),children:a.jsx(qy,{initialInviteCode:e,onInviteHandled:t,initialGazeboId:i})})})]}):a.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] overflow-hidden",children:[a.jsx(k.Suspense,{fallback:null,children:a.jsx(Kp,{})}),X&&a.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>ae(null),onContextMenu:N=>{N.preventDefault(),ae(null)},children:a.jsxs("div",{className:"absolute bg-[rgb(var(--color-surface))] rounded-2xl shadow-xl flex flex-col z-50 pointer-events-auto border border-[rgb(var(--color-border))] animate-in fade-in zoom-in-95 duration-200 origin-bottom overflow-hidden min-w-[180px]",style:{top:X.y-120,left:Math.min(window.innerWidth-200,Math.max(10,X.x-90))},onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface-hover))] justify-center",children:[$u.slice(0,4).map(N=>a.jsx("button",{onClick:()=>ht(X.messageId,N),className:"text-xl p-1.5 hover:scale-125 transition",children:N},N)),a.jsx("button",{onClick:()=>E(!0),className:"p-1 text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",children:a.jsx(nl,{size:18})})]}),a.jsxs("div",{className:"flex flex-col p-1",children:[a.jsxs("button",{onClick:()=>rt(m.find(N=>N.id===X.messageId)?.content||""),className:"flex items-center gap-3 px-3 py-2 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-lg text-left",children:[a.jsx(Z2,{size:16})," Copy Text"]}),X.isOutgoing&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>Ye(m.find(N=>N.id===X.messageId)),className:"flex items-center gap-3 px-3 py-2 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-lg text-left",children:[a.jsx(Ou,{size:16})," Edit Message"]}),a.jsxs("button",{onClick:()=>mt(X.messageId),className:"flex items-center gap-3 px-3 py-2 text-sm text-red-500 hover:bg-red-500/10 rounded-lg text-left",children:[a.jsx(vo,{size:16})," Delete Message"]})]})]})]})}),H&&X&&a.jsx(By,{onSelect:N=>{ht(X.messageId,N),E(!1)},onClose:()=>E(!1)}),S&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:()=>L(null),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))] transform transition-all",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center bg-[rgb(var(--color-background))]",children:[a.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Reactions"}),a.jsx("button",{onClick:()=>L(null),className:"p-1.5 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:a.jsx(Ze,{size:18})})]}),a.jsxs("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"p-3 bg-[rgb(var(--color-surface-hover))] text-xs text-[rgb(var(--color-text-secondary))] truncate mx-4 mt-4 rounded-xl border border-[rgb(var(--color-border))] opacity-70 italic",children:S.content||(S.media_type?`[${S.media_type}]`:"Message")}),a.jsx("div",{className:"p-2 space-y-1",children:S.reactions?.map(N=>a.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-[rgb(var(--color-surface-hover))] rounded-2xl transition group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:N.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${N.profiles?.username}`,alt:N.profiles?.username,className:"w-8 h-8 rounded-full object-cover bg-[rgb(var(--color-background))]"}),a.jsx("div",{className:"absolute -bottom-1 -right-1 text-sm leading-none drop-shadow-sm",children:N.emoji})]}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"font-semibold text-sm text-[rgb(var(--color-text))] flex items-center gap-1",children:[N.profiles?.display_name||"Unknown",N.user_id===ye?.id&&a.jsx("span",{className:"text-[10px] text-[rgb(var(--color-text-secondary))] font-normal bg-[rgb(var(--color-surface-hover))] px-1.5 py-0.5 rounded-full",children:"You"})]})}),N.user_id===ye?.id&&a.jsx("button",{onClick:q=>{q.stopPropagation(),jt(N.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 text-[rgb(var(--color-text-secondary))] hover:text-red-500 hover:bg-[rgb(var(--color-surface-hover))] rounded-full transition",title:"Remove reaction",children:a.jsx(Ze,{size:14})})]},N.id))})]})]})}),Lt&&a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:()=>yt(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-4xl h-[85vh] rounded-3xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))] flex flex-col",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center bg-[rgb(var(--color-surface))]",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Shared Media"}),a.jsx("button",{onClick:()=>yt(!1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:a.jsx(Ze,{size:20})})]}),a.jsx("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] text-xs md:text-sm font-medium",children:["image","video","audio","document"].map(N=>a.jsxs("button",{onClick:()=>bt(N),className:`flex-1 py-3 flex items-center justify-center gap-2 transition uppercase tracking-wide ${de===N?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))] bg-[rgba(var(--color-accent),0.05)]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[N==="image"&&a.jsx(id,{size:16}),N==="video"&&a.jsx(sy,{size:16}),N==="audio"&&a.jsx(py,{size:16}),N==="document"&&a.jsx(ny,{size:16}),a.jsxs("span",{className:"hidden sm:inline",children:[N,"s"]})]},N))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-[rgb(var(--color-background))] custom-scrollbar",children:Y?a.jsx("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))] animate-pulse",children:"Loading media..."}):a.jsx(a.Fragment,{children:wt.filter(N=>N.media_type===de).length===0?a.jsxs("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))] flex-col gap-2 opacity-50",children:[a.jsx($p,{size:48,strokeWidth:1}),a.jsxs("span",{children:["No shared ",de,"s"]})]}):a.jsxs(a.Fragment,{children:[(de==="image"||de==="video")&&a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1",children:wt.filter(N=>N.media_type===de).map(N=>a.jsx("div",{className:"aspect-square relative group bg-[rgb(var(--color-surface))] overflow-hidden rounded-md border border-[rgb(var(--color-border))]",children:de==="image"?a.jsx("a",{href:N.media_url,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:a.jsx("img",{src:N.media_url,className:"w-full h-full object-cover hover:scale-105 transition duration-300",alt:"Shared"})}):a.jsx("video",{src:N.media_url,className:"w-full h-full object-cover",controls:!0})},N.id))}),(de==="audio"||de==="document")&&a.jsx("div",{className:"space-y-2",children:wt.filter(N=>N.media_type===de).map(N=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[rgb(var(--color-surface))] rounded-xl border border-[rgb(var(--color-border))] hover:border-[rgb(var(--color-accent))] transition",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgba(var(--color-accent),0.1)] flex items-center justify-center flex-shrink-0 text-[rgb(var(--color-accent))]",children:de==="audio"?a.jsx(Fp,{size:20}):a.jsx(ms,{size:20})}),a.jsx("div",{className:"flex-1 min-w-0",children:de==="document"?a.jsxs("a",{href:N.media_url,target:"_blank",rel:"noopener noreferrer",className:"block group",children:[a.jsx("p",{className:"font-medium text-sm text-[rgb(var(--color-text))] truncate group-hover:text-[rgb(var(--color-accent))] transition",children:N.content||Fe(N.media_url.split("/").pop()||"File",30)}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(N.created_at).toLocaleDateString()})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mb-1",children:new Date(N.created_at).toLocaleDateString()}),a.jsx(Da,{src:N.media_url,isOutgoing:!1})]})})]},N.id))})]})})})]})}),a.jsxs("div",{className:`w-full md:w-80 lg:w-96 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] flex-shrink-0 flex flex-col transition-transform duration-300 ease-in-out ${O?"translate-x-0":"-translate-x-full md:translate-x-0"} md:relative fixed inset-y-0 left-0 z-40 md:z-auto`,children:[a.jsxs("div",{className:"px-4 pt-16 md:pt-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] z-10",children:[a.jsxs("div",{className:"flex gap-2 mb-4 bg-[rgb(var(--color-surface-hover))] p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>l("chats"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition ${o==="chats"?"bg-[rgb(var(--color-background))] shadow-sm text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Chats"}),a.jsx("button",{onClick:()=>l("gazebos"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition ${o==="gazebos"?"bg-[rgb(var(--color-background))] shadow-sm text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Gazebos"})]}),a.jsx("h2",{className:"text-xl font-extrabold text-[rgb(var(--color-text))] mb-3 px-1",children:"Messages"}),a.jsxs("div",{className:"relative mb-3",children:[a.jsx(pn,{size:16,className:"absolute left-3 top-3 text-[rgb(var(--color-text-secondary))]"}),a.jsx("input",{type:"text",placeholder:"Search people...",value:K,onChange:N=>oe(N.target.value),className:"w-full pl-9 pr-4 py-2.5 text-sm border border-[rgb(var(--color-border))] rounded-xl focus:outline-none focus:border-[rgb(var(--color-accent))] focus:ring-1 focus:ring-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] transition-all"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[at.length===0&&a.jsxs("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))] flex flex-col items-center gap-2",children:[a.jsx(pn,{size:24,className:"opacity-20"}),a.jsx("span",{className:"text-sm",children:K?"No users found":"Start a new chat"})]}),at.map(N=>a.jsxs("button",{onClick:()=>{p(N),$(!1),oe("")},className:`w-full flex items-center gap-3 p-3 transition border-b border-[rgb(var(--color-border))] border-opacity-40 hover:bg-[rgb(var(--color-surface-hover))] ${h?.id===N.id?"bg-[rgba(var(--color-accent),0.05)] border-l-4 border-l-[rgb(var(--color-accent))] pl-2":""}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:N.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${N.username}`,className:"w-12 h-12 rounded-full object-cover bg-[rgb(var(--color-background))]",alt:""}),or(N.last_seen)&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),a.jsxs("div",{className:"text-left flex-1 min-w-0",children:[a.jsxs("div",{className:"font-semibold text-sm flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[N.display_name,N.verified&&a.jsx(en,{size:14,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),a.jsx("div",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate mt-0.5",children:or(N.last_seen)?a.jsx("span",{className:"text-green-500 font-medium",children:"Online"}):Kn(N.last_seen)||`@${N.username}`})]})]},N.id))]})]}),a.jsx("div",{className:`flex-1 flex flex-col bg-[rgb(var(--color-background))] transition-all duration-300 ease-in-out ${h?"":"hidden md:flex"}`,children:h?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-3 flex items-center gap-3 sticky top-0 z-20 shadow-sm",children:[a.jsx("button",{onClick:()=>$(!0),className:"md:hidden p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition active:scale-95",children:a.jsx(Ka,{size:20,className:"text-[rgb(var(--color-text))]"})}),a.jsxs("button",{onClick:()=>Ir(h.id),className:"flex items-center gap-3 flex-1 min-w-0 group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:h.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${h.username}`,className:"w-10 h-10 rounded-full object-cover ring-2 ring-transparent group-hover:ring-[rgb(var(--color-accent))] transition",alt:""}),or(h.last_seen)&&a.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),a.jsxs("div",{className:"text-left min-w-0",children:[a.jsxs("div",{className:"font-bold text-sm flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[h.display_name,h.verified&&a.jsx(en,{size:14,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),a.jsx("div",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate",children:or(h.last_seen)?a.jsx("span",{className:"text-green-500 font-medium",children:"Active now"}):h.last_seen?`Last seen ${new Date(h.last_seen).toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`:`@${h.username}`})]})]}),a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx("button",{onClick:()=>jr(h,"audio"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"Audio call",children:a.jsx(my,{size:18})}),a.jsx("button",{onClick:()=>jr(h,"video"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"Video call",children:a.jsx(ky,{size:18})}),a.jsx("button",{onClick:()=>{yt(!0),Ae()},className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-accent))]",title:"View Media",children:a.jsx(Mu,{size:18})})]})]}),a.jsxs("div",{ref:qr,onScroll:js,className:"flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4 space-y-1 bg-[rgb(var(--color-background))]",children:[ir&&a.jsx("div",{className:"flex justify-center p-4 w-full",children:a.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Hy,className:"logo-svg",children:[a.jsx("defs",{children:a.jsx("clipPath",{id:"logo-clip",children:a.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),a.jsx("path",{d:Qp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:Qp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),m.map((N,q)=>{const Q=N.sender_id===ye.id,te=m[q+1],be=!te||te.sender_id!==N.sender_id;return a.jsxs("div",{id:`msg-${N.id}`,className:`flex w-full mb-1 group relative ${Q?"justify-end":"justify-start"}`,children:[Q&&a.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition duration-200 mr-2 self-center",children:[a.jsx("button",{onClick:ce=>{const me=ce.currentTarget.getBoundingClientRect();ae({messageId:N.id,x:me.left,y:me.top,isOutgoing:!0})},className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(yy,{size:14})}),a.jsx("button",{onClick:()=>C(N),className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(Op,{size:14})})]}),a.jsxs("div",{onContextMenu:ce=>{ce.preventDefault();const me=ce.currentTarget.getBoundingClientRect();ae({messageId:N.id,x:me.left+me.width/2,y:me.top,isOutgoing:Q})},onTouchStart:ce=>{fe.current=!1,ke.current=setTimeout(()=>{fe.current=!0;const me=ce.currentTarget.getBoundingClientRect();navigator.vibrate&&navigator.vibrate(50),ae({messageId:N.id,x:me.left+me.width/2,y:me.top,isOutgoing:Q})},500)},onTouchEnd:()=>{ke.current&&clearTimeout(ke.current)},onTouchMove:()=>{ke.current&&clearTimeout(ke.current)},className:`relative max-w-[85%] md:max-w-[70%] lg:max-w-[60%] min-w-0 px-3 py-1.5 shadow-sm break-words select-none cursor-pointer
                      ${Q?`bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-2xl rounded-tr-sm ${be?"":"mb-0.5"}`:`bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] rounded-2xl rounded-tl-sm ${be?"":"mb-0.5"}`}
                      ${N.is_deleted?"opacity-70 italic":""}
                    `,children:[N.is_deleted?a.jsxs("div",{className:"flex items-center gap-2 text-sm py-1",children:[a.jsx(vo,{size:14,className:"opacity-50"}),a.jsx("span",{children:"[Message Deleted]"})]}):a.jsxs(a.Fragment,{children:[N.reply_to_id&&N.reply_to&&(()=>{const ce=N.reply_to,me=ce.sender_id===ye.id;return a.jsxs("div",{onClick:Ie=>{Ie.stopPropagation(),vn(N.reply_to_id)},className:`flex items-center gap-2 p-1.5 rounded-lg mb-1 cursor-pointer transition select-none ${Q?"bg-black/10 hover:bg-black/20":"bg-[rgb(var(--color-surface-hover))] hover:bg-black/5"}`,children:[a.jsx("div",{className:`w-0.5 h-6 rounded-full self-stretch ${Q?"bg-white/50":"bg-[rgb(var(--color-accent))]"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`text-[10px] font-bold ${Q?"text-white/90":"text-[rgb(var(--color-accent))]"}`,children:me?"You":h?.display_name}),a.jsx("div",{className:`text-[10px] truncate ${Q?"text-white/70":"text-[rgb(var(--color-text-secondary))]"}`,children:ce.content?ce.content.length>20?ce.content.substring(0,20)+"...":ce.content:a.jsxs("span",{className:"italic",children:["[",ce.media_type||"...","]"]})})]})]})})(),N.media_url&&!N.is_deleted&&a.jsxs("div",{className:`mb-1 ${N.content?"pb-1":""}`,children:[N.media_type==="image"&&a.jsx("img",{src:N.media_url,className:"rounded-lg w-full h-auto max-h-80 object-cover",alt:"Image",loading:"lazy"}),N.media_type==="video"&&a.jsx("video",{controls:!0,className:"rounded-lg w-full max-h-80 bg-black",children:a.jsx("source",{src:N.media_url})}),N.media_type==="audio"&&a.jsx("div",{className:"pt-1",children:a.jsx(Da,{src:N.media_url,isOutgoing:Q})}),N.media_type==="document"&&a.jsxs("a",{href:N.media_url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 p-2 rounded-lg transition ${Q?"bg-white/10 hover:bg-white/20":"bg-[rgb(var(--color-surface-hover))] hover:bg-[rgb(var(--color-border))]"}`,children:[a.jsx(ms,{size:16}),a.jsx("span",{className:"underline decoration-dotted text-xs truncate",children:"Open File"})]})]}),(()=>{const ce=N.content&&!N.media_url?Vy(N.content):null,me=ce?N.content.replace(ce,"").trim():N.content;return a.jsxs(a.Fragment,{children:[me&&a.jsx("p",{className:`whitespace-pre-wrap leading-relaxed text-sm md:text-sm text-left ${Ky(me)?"text-2xl md:text-3xl":""}`,children:me}),ce&&a.jsx("div",{className:"mt-2 rounded-lg overflow-hidden text-xs",children:a.jsx(cd,{url:ce})})]})})()]}),a.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 select-none ${Q?"text-white/70":"text-[rgb(var(--color-text-secondary))] opacity-60"}`,children:[N.is_edited&&!N.is_deleted&&a.jsx("span",{className:"text-[9px] italic opacity-80",children:"(Edited)"}),a.jsx("span",{className:"text-[9px] font-medium tracking-tight",children:new Date(N.created_at).toLocaleString([],{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"2-digit"})}),Q&&!N.is_deleted&&(N.read?a.jsx(Y2,{size:14,className:"text-sky-300 drop-shadow-[0_0_2px_rgba(125,211,252,0.5)]"}):a.jsx(fi,{size:12}))]}),N.reactions&&N.reactions.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5 pt-1 border-t border-white/10",children:Wy(N.reactions,ye.id).map(ce=>a.jsxs("button",{onClick:me=>{me.stopPropagation(),L(N)},className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[9px] font-medium transition active:scale-95 ${Q?"bg-white/20 text-white hover:bg-white/30":"bg-[rgb(var(--color-surface-hover))] border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))]"}`,children:[a.jsx("span",{children:ce.emoji}),a.jsx("span",{className:ce.count>1?"":"hidden",children:ce.count})]},ce.emoji))})]}),!Q&&!N.is_deleted&&a.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition duration-200 ml-2 self-center",children:[a.jsx("button",{onClick:ce=>{const me=ce.currentTarget.getBoundingClientRect();ae({messageId:N.id,x:me.right,y:me.top,isOutgoing:!1})},className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(Mu,{size:14})}),a.jsx("button",{onClick:()=>C(N),className:"p-1.5 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(Op,{size:14})})]})]},N.id)}),Z&&a.jsx("div",{className:"flex justify-start w-full mb-2",children:a.jsx("div",{className:"bg-[rgb(var(--color-surface))] px-3 py-2 rounded-2xl rounded-tl-sm shadow-sm border border-[rgb(var(--color-border))]",children:a.jsxs("div",{className:"flex gap-1 items-center h-4",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-1.5 h-1.5 bg-[rgb(var(--color-text-secondary))] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),a.jsx("div",{ref:gn,className:"h-2"})]}),a.jsx("div",{className:"p-2 sm:p-3 md:p-4 bg-[rgb(var(--color-background))]",children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-3xl shadow-lg flex flex-col relative transition-all duration-200 focus-within:ring-1 focus-within:ring-[rgb(var(--color-accent))] focus-within:border-[rgb(var(--color-accent))]",children:[w&&a.jsx("div",{className:"px-4 pt-3 flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-[rgb(var(--color-surface-hover))] rounded-xl w-full border-l-4 border-[rgb(var(--color-accent))]",children:[a.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[" ",a.jsxs("div",{className:"text-xs font-bold text-[rgb(var(--color-accent))] mb-0.5 truncate",children:[" ","Replying to ",w.sender_id===ye.id?"yourself":h?.display_name]}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] block whitespace-nowrap overflow-hidden",children:w.content?w.content.length>20?w.content.substring(0,20)+"...":w.content:a.jsxs("span",{className:"italic",children:["[",w.media_type||"Media","]"]})})]}),a.jsx("button",{onClick:()=>C(null),className:"p-1 rounded-full hover:bg-black/10 text-[rgb(var(--color-text-secondary))]",children:a.jsx(Ze,{size:14})})]})}),(j||A)&&a.jsx("div",{className:"px-4 pt-3",children:a.jsxs("div",{className:"relative inline-block",children:[U(),a.jsx("button",{onClick:()=>{P(null),I(""),Se(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600",children:a.jsx(Ze,{size:12})})]})}),ve==="url"&&!j&&!A&&a.jsxs("div",{className:"px-4 pt-3 pb-1 flex items-center gap-2",children:[a.jsx("input",{type:"url",autoFocus:!0,value:A,onChange:N=>I(N.target.value),placeholder:"https://...",className:"flex-1 text-sm bg-transparent border-none focus:ring-0 text-[rgb(var(--color-text))]"}),a.jsx("button",{onClick:()=>Se(null),className:"text-[rgb(var(--color-text-secondary))]",children:a.jsx(Ze,{size:16})})]}),pe&&a.jsxs("div",{className:"px-4 pt-3 flex items-center justify-between bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))]",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[a.jsx(Ou,{size:16})," Editing Message"]}),a.jsx("button",{onClick:()=>{Pe(null),b("")},className:"p-1 hover:bg-white/20 rounded-full",children:a.jsx(Ze,{size:16})})]}),_e&&a.jsxs("div",{ref:Hr,className:"absolute bottom-full left-0 right-0 h-80 bg-[rgb(var(--color-surface))] border-t border-[rgb(var(--color-border))] rounded-t-2xl z-20 flex flex-col shadow-2xl",children:[a.jsxs("div",{className:"p-3 border-b border-[rgb(var(--color-border))] flex gap-2 items-center",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(pn,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgb(var(--color-text-secondary))]"}),a.jsx("input",{type:"text",placeholder:"Search GIFs...",value:Ne,onChange:N=>Re(N.target.value),className:"w-full pl-9 pr-3 py-2 text-sm bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))] rounded-xl border border-[rgb(var(--color-border))] focus:border-[rgb(var(--color-accent))] focus:outline-none",autoFocus:!0})]}),a.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-[rgb(var(--color-surface-hover))] rounded-full text-[rgb(var(--color-text-secondary))]",children:a.jsx(Ze,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:[a.jsx("div",{className:"columns-2 md:columns-3 gap-2 space-y-2",children:qe.map(N=>a.jsx("button",{onClick:()=>nt(N.media_formats.gif.url),className:"w-full block rounded-lg overflow-hidden hover:opacity-90 hover:ring-2 hover:ring-[rgb(var(--color-accent))] transition-all break-inside-avoid",children:a.jsx("img",{src:N.media_formats.tinygif.url,alt:"GIF",className:"w-full h-auto object-cover",loading:"lazy"})},N.id))}),qe.length===0&&a.jsx("div",{className:"flex items-center justify-center h-full text-[rgb(var(--color-text-secondary))] text-sm",children:"No GIFs found"})]})]}),a.jsxs("form",{onSubmit:pe?Ct:Jn,className:"flex items-end gap-2 p-2 relative",children:[z&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-[rgb(var(--color-surface-hover))]",children:a.jsx("div",{className:"h-full bg-[rgb(var(--color-accent))] transition-all duration-300",style:{width:`${D}%`}})}),!pe&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>ee(!re),className:`p-2.5 rounded-full transition duration-200 ${re?"bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rotate-45":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:a.jsx(xo,{size:20})}),re&&a.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-56 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-2xl shadow-xl overflow-hidden z-30 animate-in slide-in-from-bottom-2 fade-in duration-200",children:[a.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{ee(!1),xn.current?.click(),I(""),Se("file")},children:[a.jsx($p,{size:18,className:"text-[rgb(var(--color-accent))]"})," Upload File"]}),a.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{ee(!1),P(null),I(""),Se("url")},children:[a.jsx(zu,{size:18,className:"text-[rgb(var(--color-accent))]"})," Paste Link"]}),a.jsx("div",{className:"h-px bg-[rgb(var(--color-border))]"}),a.jsxs("button",{type:"button",className:"w-full text-left p-3 text-sm text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-3",onClick:()=>{ee(!1),ne(!0)},children:[a.jsx(_g,{size:18,className:"text-pink-500"})," Insert GIF"]})]})]}),a.jsx("input",{ref:xn,type:"file",accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:N=>{P(N.target.files?.[0]||null),I("")},className:"hidden"}),a.jsx("textarea",{value:y,onChange:N=>Ar(N),onPaste:bn,placeholder:pe?"Edit your message...":st?"Recording...":"Message...",disabled:st,className:"flex-1 py-2.5 px-2 bg-transparent border-none focus:ring-0 resize-none text-sm text-[rgb(var(--color-text))] placeholder-[rgb(var(--color-text-secondary))] max-h-32 custom-scrollbar",rows:1,style:{minHeight:"44px"},onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),pe?Ct(N):Jn(N))}}),a.jsx("div",{className:"flex items-center gap-1 pb-1",children:y.trim()||j||A?a.jsx("button",{type:"submit",disabled:z,className:`p-2.5 rounded-full hover:brightness-110 shadow-md transition-all active:scale-95 disabled:opacity-50 ${pe?"bg-green-500 text-white":"bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))]"}`,children:pe?a.jsx(fi,{size:18}):a.jsx(gi,{size:18,className:z?"animate-pulse":""})}):!pe&&a.jsx("button",{type:"button",onClick:Ns,className:`p-2.5 rounded-full transition-all duration-200 ${st?"bg-red-500 text-white animate-pulse shadow-red-500/30 shadow-lg":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:st?a.jsx("div",{className:"w-4 h-4 bg-white rounded-sm"}):a.jsx(Fp,{size:20})})})]})]})})]}):a.jsxs("div",{className:"flex-1 flex items-center justify-center bg-[rgb(var(--color-background))] flex-col gap-6 p-8",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-[rgb(var(--color-surface))] flex items-center justify-center shadow-inner",children:a.jsx(go,{size:40,className:"text-[rgb(var(--color-text-secondary))] opacity-50"})}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-[rgb(var(--color-text))]",children:"Welcome to Messages"}),a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] max-w-xs mx-auto",children:"Select a conversation from the sidebar to start chatting or search for a new connection."})]}),a.jsxs("button",{onClick:()=>$(!0),className:"md:hidden mt-4 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] px-6 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition flex items-center gap-2",children:[a.jsx(Ka,{size:18})," View Chats"]})]})}),O&&!h&&a.jsx("div",{onClick:()=>$(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 md:hidden animate-in fade-in duration-200"})]})};function Ky(e){return/^(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])+$/.test(e)&&e.length<10}const Jp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",Qy="0 0 784 1168",Jy=(e,t,n)=>new Promise(i=>{const o=new Image,l=new FileReader;l.onload=u=>{o.onload=()=>{const d=document.createElement("canvas"),h=d.getContext("2d");if(!h)return console.error("Canvas context not available."),i(null);const p=t==="avatar"?256:500,m=t==="avatar"?256:200;d.width=p,d.height=m;const g=o.width/o.height,y=d.width/d.height;let b,w,C,j;g>y?(j=o.height,C=o.height*y,b=(o.width-C)/2,w=0):(C=o.width,j=o.width/y,b=0,w=(o.height-j)/2);const P=1/n;C*=P,j*=P,b=o.width/2-C/2,w=o.height/2-j/2,b=Math.max(0,b),w=Math.max(0,w),h.drawImage(o,b,w,C,j,0,0,d.width,d.height),d.toBlob(A=>{i(A)},e.type,.95)},o.onerror=()=>{console.error("Error loading image for cropping."),i(null)},o.src=u.target?.result},l.onerror=()=>{console.error("Error reading file for cropping."),i(null)},l.readAsDataURL(e)}),Yp=({userId:e,initialPostId:t,onMessage:n,onSettings:i})=>{const[o,l]=k.useState(null),[u,d]=k.useState([]),[h,p]=k.useState(!1),[m,g]=k.useState(""),[y,b]=k.useState(""),[w,C]=k.useState(""),[j,P]=k.useState(""),[A,I]=k.useState(""),[D,G]=k.useState(!1),[z,J]=k.useState(0),[K,oe]=k.useState(0),[O,$]=k.useState(!1),[Z,ue]=k.useState(!1),[re,ee]=k.useState([]),[ve,Se]=k.useState([]),[X,ae]=k.useState(!1),[S,L]=k.useState(""),[H,E]=k.useState(null),[ke,fe]=k.useState(null),[pe,Pe]=k.useState(null),[_e,ne]=k.useState(""),[Ne,Re]=k.useState(""),[qe,De]=k.useState(!1),[rt,mt]=k.useState(!1),[Ye,Ct]=k.useState(!1),[Tt,nt]=k.useState(1),[Lt,yt]=k.useState(1),[de,bt]=k.useState(new Set),[wt,sr]=k.useState("posts"),[Y,le]=k.useState([]),[Ae,Fe]=k.useState(!1),[ye,ht]=k.useState(!1),[jt,st]=k.useState(null),mr=(U,N)=>{L(U),E(N),ae(!0)},gr=U=>{if(!U)return"";let N=U.replace(/^(https?:\/\/)?(www\.)?/,"");return N.length>30?N.substring(0,20)+"...":N},gt=U=>U?/^(f|ht)tps?:\/\//i.test(U)?U:"https://"+U:"",Ot=U=>({...U,original_post:Array.isArray(U.original_post)?U.original_post[0]:U.original_post}),{user:Ve}=Nt(),Ke=e||Ve?.id,ot=Ke===Ve?.id,ir=k.useRef(null),Zt=k.useRef(null),qr=U=>{if(!U)return!1;const N=new Date().getTime(),q=new Date(U).getTime();return N-q<3e5},Dt=k.useCallback(async U=>{if(!U.length)return{likeCounts:{},commentCounts:{}};const N={},q={};for(const Q of U){const[{count:te},{count:be}]=await Promise.all([V.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",Q),V.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",Q)]);N[Q]=te||0,q[Q]=be||0}return{likeCounts:N,commentCounts:q}},[]),gn=async(U,N)=>{Ct(!0);try{const q=await mo(U,"profiles");q&&(N==="avatar"?P(q.url):I(q.url))}catch(q){console.error("Direct upload failed:",q)}finally{Ct(!1)}},Vr=U=>{if(U){if(U.type==="image/gif"){gn(U,"avatar");return}const N=URL.createObjectURL(U);fe(U),ne(N),nt(1),De(!0)}else fe(null),ne("")},xn=U=>{if(U){if(U.type==="image/gif"){gn(U,"banner");return}const N=URL.createObjectURL(U);Pe(U),Re(N),yt(1),mt(!0)}else Pe(null),Re("")},Hr=async(U,N)=>{if(!U)return;Ct(!0);const q=N==="avatar"?Tt:Lt;try{const Q=await Jy(U,N,q);if(!Q){console.error("Cropping failed, received null Blob.");return}const te=new File([Q],`cropped-${U.name}`,{type:Q.type}),be=await mo(te,"profiles");be?N==="avatar"?P(be.url):I(be.url):console.error("Media upload failed.")}catch(Q){console.error("An error occurred during crop or upload:",Q)}finally{Ct(!1),N==="avatar"?(De(!1),fe(null),ne("")):(mt(!1),Pe(null),Re(""))}},$t=k.useCallback(async U=>{if(!Ve||U.length===0)return;const N=U.map(Q=>Q.id),{data:q}=await V.from("likes").select("entity_id").eq("user_id",Ve.id).eq("entity_type","post").in("entity_id",N);q&&bt(Q=>{const te=new Set(Q);return q.forEach(be=>te.add(be.entity_id)),te})},[Ve]),kt=U=>{bt(N=>{const q=new Set(N);return q.has(U.id)?q.delete(U.id):q.add(U.id),q}),d(N=>N.map(q=>{if(q.id===U.id){const Q=de.has(q.id);return{...q,like_count:Math.max(0,q.like_count+(Q?-1:1))}}return q})),le(N=>N.map(q=>{if(q.id===U.id){const Q=de.has(q.id);return{...q,like_count:Math.max(0,q.like_count+(Q?-1:1))}}return q})),jt&&jt.id===U.id&&st(N=>{if(!N)return null;const q=de.has(N.id);return{...N,like_count:Math.max(0,N.like_count+(q?-1:1))}})},Wr=U=>{d(N=>N.map(q=>q.id===U.id?{...q,comment_count:U.comment_count}:q)),le(N=>N.map(q=>q.id===U.id?{...q,comment_count:U.comment_count}:q)),jt&&jt.id===U.id&&st(N=>N?{...N,comment_count:U.comment_count}:null)},or=async U=>{d(q=>q.filter(Q=>Q.id!==U.id)),le(q=>q.filter(Q=>Q.id!==U.id)),jt&&jt.id===U.id&&st(null);const{error:N}=await V.from("posts").delete().eq("id",U.id);N&&(console.error("Failed to delete post",N),xr())},Kn=k.useCallback(async()=>{if(!Ke)return;const{data:U}=await V.from("profiles").select("*").eq("id",Ke).single();l(U),U&&(g(U.display_name),b(U.bio||""),C(U.bio_link||""),P(U.avatar_url||""),I(U.banner_url||""))},[Ke]),xr=k.useCallback(async()=>{if(!Ke)return;const{data:U}=await V.from("posts").select("*, profiles(*), original_post:posts!repost_of(*, profiles(*))").eq("user_id",Ke).order("created_at",{ascending:!1}),N=(U||[]).map(Ot),q=N.map(ce=>ce.id),{likeCounts:Q,commentCounts:te}=await Dt(q),be=N.map(ce=>({...ce,like_count:Q[ce.id]||0,comment_count:te[ce.id]||0}));d(be),$t(be)},[Ke,$t,Dt]),vn=k.useCallback(async()=>{if(!Ke)return;Fe(!0);const{data:U}=await V.from("likes").select("entity_id").eq("user_id",Ke).eq("entity_type","post");if(!U||U.length===0){le([]),ht(!0),Fe(!1);return}const N=U.map(Ie=>Ie.entity_id),{data:q}=await V.from("posts").select("*, profiles(*), original_post:posts!repost_of(*, profiles(*))").in("id",N).order("created_at",{ascending:!1}),Q=(q||[]).map(Ot),te=Q.map(Ie=>Ie.id),{likeCounts:be,commentCounts:ce}=await Dt(te),me=Q.map(Ie=>({...Ie,like_count:be[Ie.id]||0,comment_count:ce[Ie.id]||0}));le(me),$t(me),ht(!0),Fe(!1)},[Ke,$t,Dt]),Ir=k.useCallback(async()=>{if(!Ke)return;const{count:U}=await V.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",Ke),{count:N}=await V.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",Ke);J(U||0),oe(N||0)},[Ke]),rn=k.useCallback(async()=>{if(!Ve||!Ke)return;const{data:U}=await V.from("follows").select("follower_id").eq("follower_id",Ve.id).eq("following_id",Ke).maybeSingle();G(!!U)},[Ve,Ke]);k.useEffect(()=>{if(Ke){sr("posts"),ht(!1),le([]),Kn(),xr(),Ir(),ot||rn();const U=V.channel(`profile-${Ke}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async N=>{if(N.new.user_id!==Ke)return;const{data:q}=await V.from("posts").select("*, profiles(*), original_post:posts!repost_of(*, profiles(*))").eq("id",N.new.id).single();if(q){const te=[Ot(q).id],{likeCounts:be,commentCounts:ce}=await Dt(te),me={...q,like_count:be[q.id]||0,comment_count:ce[q.id]||0};d(Ie=>[me,...Ie])}}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},N=>{const q=N.old.id;d(Q=>Q.filter(te=>te.id!==q)),le(Q=>Q.filter(te=>te.id!==q))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"likes",filter:"entity_type=eq.post"},async N=>{if(N.new.user_id===Ke){const{data:Q}=await V.from("posts").select("*, profiles(*), original_post:posts!repost_of(*, profiles(*))").eq("id",N.new.entity_id).single();if(Q){const be=[Ot(Q).id],{likeCounts:ce,commentCounts:me}=await Dt(be),Ie={...Q,like_count:ce[Q.id]||0,comment_count:me[Q.id]||0};le(et=>et.some(Wt=>Wt.id===Ie.id)?et:[Ie,...et])}}const q=N.new.entity_id;d(Q=>Q.map(te=>te.id===q?{...te,like_count:(te.like_count||0)+1}:te)),le(Q=>Q.map(te=>te.id===q?{...te,like_count:(te.like_count||0)+1}:te))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"likes",filter:"entity_type=eq.post"},N=>{N.old.user_id===Ke&&le(Q=>Q.filter(te=>te.id!==N.old.entity_id));const q=N.old.entity_id;d(Q=>Q.map(te=>te.id===q?{...te,like_count:Math.max(0,(te.like_count||0)-1)}:te)),le(Q=>Q.map(te=>te.id===q?{...te,like_count:Math.max(0,(te.like_count||0)-1)}:te))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},N=>{const q=N.new.post_id;d(Q=>Q.map(te=>te.id===q?{...te,comment_count:(te.comment_count||0)+1}:te)),le(Q=>Q.map(te=>te.id===q?{...te,comment_count:(te.comment_count||0)+1}:te))}).subscribe();return()=>{V.removeChannel(U)}}},[Ke,ot,Kn,xr,Ir,rn,Dt]),k.useEffect(()=>{t&&(async()=>{const{data:N}=await V.from("posts").select("*, profiles(*), original_post:posts!repost_of(*, profiles(*))").eq("id",t).maybeSingle();if(N){Ot(N);let q=0,Q=0;try{const{likeCounts:be,commentCounts:ce}=await Dt([N.id]);q=be[N.id]||0,Q=ce[N.id]||0}catch(be){console.error("Error loading counts",be)}const te={...N,like_count:q,comment_count:Q};st(te),Ve&&$t([te])}})()},[t]);const ws=async()=>{const{data:U}=await V.from("follows").select("follower:profiles!follower_id(*)").eq("following_id",Ke);ee(U?.map(N=>N.follower)||[])},Qn=async()=>{const{data:U}=await V.from("follows").select("following:profiles!following_id(*)").eq("follower_id",Ke);Se(U?.map(N=>N.following)||[])},yn=async()=>{await ws(),$(!0),ue(!1)},Ar=async()=>{await Qn(),ue(!0),$(!1)},bn=()=>{$(!1),ue(!1)},Jn=async()=>{Ve&&(D?await V.from("follows").delete().eq("follower_id",Ve.id).eq("following_id",Ke):await V.from("follows").insert({follower_id:Ve.id,following_id:Ke}),G(!D),Ir())},ks=async U=>{if(!Ve)return;const{data:N}=await V.from("follows").select("follower_id").eq("follower_id",Ve.id).eq("following_id",U).maybeSingle();N?await V.from("follows").delete().eq("follower_id",Ve.id).eq("following_id",U):await V.from("follows").insert({follower_id:Ve.id,following_id:U}),O&&await ws(),Z&&await Qn(),Ir()},_s=async U=>{const{error:N}=await V.rpc("remove_follower",{p_follower_id:U});N?console.error("Error removing follower:",N):(ee(q=>q.filter(Q=>Q.id!==U)),J(q=>q-1))},js=async()=>{await V.from("profiles").update({display_name:m,bio:y,bio_link:w,avatar_url:j,banner_url:A}).eq("id",Ve.id),p(!1),Kn()},jr=async U=>{bn(),st(null);const{data:N}=await V.from("profiles").select("username").eq("id",U).single();N&&(window.history.replaceState({},"",`/?user=${N.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:U})))},wn=U=>{sr(U),U==="likes"&&!ye&&!Ae&&vn()},Ss=k.useCallback(()=>u.filter(U=>U.media_url&&(U.media_type==="image"||U.media_type==="video")),[u])();if(!o)return a.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text))]",children:"Loading..."});const Ns=h&&Ne?Ne:A||o.banner_url,at=h&&_e?_e:j||o.avatar_url;return a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"bg-[rgb(var(--color-surface))]",children:[a.jsx("div",{className:"relative h-48 bg-[rgb(var(--color-border))]",children:Ns?a.jsxs("button",{onClick:()=>ot&&h&&Zt.current?.click(),className:`w-full h-full ${ot&&h?"cursor-pointer group":""}`,disabled:!ot||!h,children:[a.jsx("img",{src:Ns,className:"w-full h-full object-cover",alt:"Banner"}),ot&&h&&a.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Oa,{size:48,className:"text-white"})})]}):a.jsx("button",{onClick:()=>ot&&h&&Zt.current?.click(),className:`w-full h-full ${ot&&h?"cursor-pointer group":""}`,disabled:!ot||!h,children:a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgba(var(--color-accent),1)] to-[rgba(var(--color-primary),1)] flex items-center justify-center",children:ot&&h&&a.jsx(Oa,{size:48,className:"text-white"})})})}),a.jsxs("div",{className:"relative px-4 pb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end -mt-16",children:[a.jsxs("button",{onClick:()=>{ot&&h?ir.current?.click():ot||jr(o.id)},className:`relative ${ot&&h?"group cursor-pointer":""}`,children:[a.jsx("img",{src:at||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.username}`,className:"w-32 h-32 rounded-full border-4 border-[rgb(var(--color-surface))] shadow-lg ring-4 ring-[rgb(var(--color-surface))] hover:opacity-90 transition object-cover",alt:"Avatar"}),qr(o.last_seen)&&a.jsx("span",{className:"absolute bottom-2 right-2 w-5 h-5 bg-green-500 border-4 border-[rgb(var(--color-surface))] rounded-full"}),ot&&h&&a.jsx("div",{className:"absolute inset-0 w-32 h-32 rounded-full bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Oa,{size:32,className:"text-white"})})]}),a.jsx("div",{className:"mt-4 sm:mt-0 flex gap-2",children:ot?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>h?js():p(!0),className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[h?a.jsx(fi,{size:18}):a.jsx(Ou,{size:18}),h?"Save":"Edit Profile"]}),i&&a.jsxs("button",{onClick:i,className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[a.jsx(Eg,{size:18}),"Settings"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{o?.username&&(window.history.replaceState({},"",`/message?${o.username}`),n?.(o))},className:"flex items-center gap-2 px-5 py-2.5 bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-full hover:bg-[rgb(var(--color-primary))] transition font-medium",children:[a.jsx(ys,{size:18}),"Message"]}),a.jsx("button",{onClick:Jn,className:`px-6 py-2.5 rounded-full font-semibold transition ${D?"bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:D?"Following":"Follow"})]})})]}),h?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx("input",{type:"text",value:m,onChange:U=>g(U.target.value),placeholder:"Display Name",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),a.jsx("textarea",{value:y,onChange:U=>b(U.target.value),placeholder:"Bio",rows:3,className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),a.jsx("input",{type:"url",value:w,onChange:U=>C(U.target.value),placeholder:"Bio Link (e.g., yourwebsite.com)",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"url",value:j,onChange:U=>P(U.target.value),placeholder:"Avatar URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),a.jsx("button",{type:"button",onClick:()=>ir.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:a.jsx(xo,{size:16})}),a.jsx("input",{ref:ir,type:"file",accept:"image/*",onChange:U=>Vr(U.target.files?.[0]||null),className:"hidden"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"url",value:A,onChange:U=>I(U.target.value),placeholder:"Banner URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),a.jsx("button",{type:"button",onClick:()=>Zt.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:a.jsx(xo,{size:16})}),a.jsx("input",{ref:Zt,type:"file",accept:"image/*",onChange:U=>xn(U.target.files?.[0]||null),className:"hidden"})]})]}):a.jsxs("div",{className:"mt-5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>!ot&&jr(o.id),className:"font-bold text-2xl text-[rgb(var(--color-text))] hover:underline",children:o.display_name}),o.verified&&a.jsx(en,{size:22,className:"text-[rgb(var(--color-accent))]"})]}),a.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",o.username]}),o.bio&&a.jsx("p",{className:"mt-3 text-[rgb(var(--color-text))]",children:o.bio}),a.jsxs("div",{className:"mt-4 flex gap-8 items-center text-sm",children:[" ",a.jsxs("button",{onClick:Ar,className:"hover:underline text-[rgb(var(--color-text))]",children:[a.jsx("strong",{className:"text-lg",children:K})," ",a.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Following"})]}),a.jsxs("button",{onClick:yn,className:"hover:underline text-[rgb(var(--color-text))]",children:[a.jsx("strong",{className:"text-lg",children:z})," ",a.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Followers"})]}),o.bio_link&&a.jsxs("a",{href:gt(o.bio_link),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[rgb(var(--color-accent))] hover:underline hover:text-[rgb(var(--color-primary))] transition",children:[a.jsx(zu,{size:16}),a.jsx("span",{className:"truncate max-w-[150px]",children:gr(o.bio_link)})]})]})]})]})]}),a.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-0 z-30",children:[a.jsxs("button",{onClick:()=>wn("posts"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${wt==="posts"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx(od,{size:18}),"Posts"]}),a.jsxs("button",{onClick:()=>wn("media"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${wt==="media"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx(oy,{size:18}),"Media"]}),a.jsxs("button",{onClick:()=>wn("likes"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${wt==="likes"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx(by,{size:18}),"Likes"]})]}),a.jsxs("div",{children:[wt==="posts"&&a.jsxs("div",{children:[u.length===0&&a.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted anything yet."}),u.map(U=>a.jsx(co,{post:U,currentUserId:Ve?.id,isLiked:de.has(U.id),onLikeToggle:kt,onCommentUpdate:Wr,onNavigateToProfile:jr,onDelete:or},U.id))]}),wt==="media"&&a.jsx("div",{children:Ss.length===0?a.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted any media."}):a.jsx("div",{className:"grid grid-cols-3 gap-1",children:Ss.map(U=>a.jsxs("button",{className:"aspect-square relative bg-[rgb(var(--color-border))] hover:opacity-80 transition",onClick:()=>mr(U.media_url,U.media_type==="video"?"video":"image"),children:[U.media_type==="image"&&a.jsx("img",{src:U.media_url,alt:"Media",className:"w-full h-full object-cover"}),U.media_type==="video"&&a.jsxs(a.Fragment,{children:[a.jsx("video",{src:U.media_url,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute top-2 right-2 p-1.5 bg-black/50 rounded-full",children:a.jsx(Oa,{size:16,className:"text-white"})})]})]},U.id))})}),wt==="likes"&&a.jsxs("div",{children:[Ae&&a.jsx("div",{className:"flex justify-center p-8",children:a.jsx("div",{className:"logo-loading-container w-8 h-8 relative",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:Qy,className:"logo-svg",children:[a.jsx("defs",{children:a.jsx("clipPath",{id:"logo-clip",children:a.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),a.jsx("path",{d:Jp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:Jp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),!Ae&&ye&&Y.length===0&&a.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't liked any posts yet."}),!Ae&&ye&&Y.map(U=>a.jsx(co,{post:U,currentUserId:Ve?.id,isLiked:de.has(U.id),onLikeToggle:kt,onCommentUpdate:Wr,onNavigateToProfile:jr,onDelete:or},U.id))]})]}),jt&&a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:()=>{st(null),window.history.replaceState({},"","/")},children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-2xl overflow-y-auto border border-[rgb(var(--color-border))]",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 z-10 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Post"}),a.jsx("button",{onClick:()=>{st(null),window.history.replaceState({},"","/")},className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:a.jsx(Ze,{size:24})})]}),a.jsx(co,{post:jt,currentUserId:Ve?.id,isLiked:de.has(jt.id),onLikeToggle:kt,onCommentUpdate:Wr,onNavigateToProfile:jr,onDelete:or})]})}),qe&&ke&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!Ye&&De(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-lg flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[a.jsx(Dp,{size:20})," Crop Avatar"]}),a.jsx("button",{onClick:()=>De(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:Ye,children:a.jsx(Ze,{size:20})})]}),a.jsxs("div",{className:"flex justify-center items-center h-80 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[a.jsx("img",{src:_e,className:"max-w-full max-h-full object-contain",alt:"Avatar Crop Preview",style:{transform:`scale(${Tt})`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[a.jsx("div",{className:"w-64 h-64 border-4 border-dashed border-white/80 rounded-full shadow-lg"}),a.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"circle(128px at center)",mixBlendMode:"saturation"}}),Ye&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",Tt.toFixed(1),"x)"]}),a.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:Tt,onChange:U=>nt(parseFloat(U.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:Ye}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),a.jsx("button",{onClick:()=>Hr(ke,"avatar"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:Ye,children:Ye?"Cropping & Uploading...":"Crop & Save Avatar"})]})}),rt&&pe&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!Ye&&mt(!1),children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-2xl flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[a.jsx(Dp,{size:20})," Crop Banner"]}),a.jsx("button",{onClick:()=>mt(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:Ye,children:a.jsx(Ze,{size:20})})]}),a.jsxs("div",{className:"flex justify-center items-center h-48 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[a.jsx("img",{src:Ne,className:"w-full h-full object-cover",alt:"Banner Crop Preview",style:{transform:`scale(${Lt})`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[a.jsx("div",{className:"w-11/12 h-3/5 border-4 border-dashed border-white/80 shadow-lg"}),a.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"polygon(0% 0%, 0% 100%, 5% 100%, 5% 20%, 95% 20%, 95% 80%, 5% 80%, 5% 100%, 100% 100%, 100% 0%)",mixBlendMode:"saturation"}}),Ye&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",Lt.toFixed(1),"x)"]}),a.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:Lt,onChange:U=>yt(parseFloat(U.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:Ye}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),a.jsx("button",{onClick:()=>Hr(pe,"banner"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:Ye,children:Ye?"Cropping & Uploading...":"Crop & Save Banner"})]})}),(O||Z)&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:bn,children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-md max-h-[80vh] flex flex-col",onClick:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[rgb(var(--color-border))]",children:[a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:O?"Followers":"Following"}),a.jsx("button",{onClick:bn,className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:a.jsx(Ze,{size:20})})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:(O?re:ve).map(U=>{const N=ve.some(Q=>Q.id===U.id),q=U.id===Ve?.id;return a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-[rgb(var(--color-surface-hover))] border-b border-[rgb(var(--color-border))]",children:[a.jsxs("button",{onClick:()=>jr(U.id),className:"flex items-center gap-3 flex-1 text-left",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("img",{src:U.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${U.username}`,className:"w-10 h-10 rounded-full",alt:""}),qr(U.last_seen)&&a.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))]",children:U.display_name}),a.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",U.username]})]})]}),ot&&!q&&a.jsxs("div",{className:"flex gap-2",children:[O&&a.jsxs("button",{onClick:Q=>{Q.stopPropagation(),_s(U.id)},className:"px-3 py-1.5 text-sm font-medium rounded-full border border-red-300 text-red-600 hover:bg-red-50 transition",children:[a.jsx(wy,{size:16,className:"inline mr-1"}),"Remove"]}),Z&&a.jsx("button",{onClick:Q=>{Q.stopPropagation(),ks(U.id)},className:`px-4 py-1.5 text-sm font-medium rounded-full border transition ${N?"border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:N?"Following":"Follow"})]})]},U.id)})})]})}),X&&S&&a.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:()=>ae(!1),children:[a.jsxs("div",{className:"max-w-full max-h-full",onClick:U=>U.stopPropagation(),children:[H==="image"&&a.jsx("img",{src:S,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size view"}),H==="video"&&a.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[a.jsx("source",{src:S}),"Your browser does not support the video tag."]})]}),a.jsx("button",{onClick:()=>ae(!1),className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:a.jsx(Ze,{size:24})})]})]})},Xp=async e=>{const{data:t}=await V.from("profiles").select("username").eq("id",e).single();t&&(window.history.replaceState({},"",`/?${t.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:e})))},Yy=({onClose:e})=>{const[t,n]=k.useState(""),[i,o]=k.useState([]),[l,u]=k.useState([]),[d,h]=k.useState(!1);return k.useEffect(()=>{if(!t.trim()){o([]),u([]);return}const p=setTimeout(async()=>{h(!0);const m=t.toLowerCase(),{data:g}=await V.from("profiles").select("*").or(`username.ilike.%${m}%,display_name.ilike.%${m}%`).limit(5),{data:y}=await V.from("posts").select("*, profiles(*)").ilike("content",`%${m}%`).limit(10);o(g||[]),u(y||[]),h(!1)},300);return()=>clearTimeout(p)},[t]),a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center p-4 pt-10",onClick:e,children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-xl max-h-[80vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center p-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] rounded-t-2xl z-10",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(pn,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgb(var(--color-text-secondary))]"}),a.jsx("input",{type:"text",placeholder:"Search users and posts...",value:t,onChange:p=>n(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-[rgb(var(--color-border))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]",autoFocus:!0})]}),a.jsx("button",{onClick:e,className:"p-2 ml-3 hover:bg-[rgb(var(--color-surface-hover))] rounded-full text-[rgb(var(--color-text))]",children:a.jsx(Ze,{size:24})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&t&&a.jsxs("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:['Loading results for "',t,'"...']}),t&&!d&&a.jsxs(a.Fragment,{children:[i.length>0&&a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))]",children:[a.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[a.jsx(Tg,{size:20,className:"text-[rgb(var(--color-primary))]"})," Users"]}),i.map(p=>a.jsxs("button",{onClick:()=>{e(),Xp(p.id)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left",children:[a.jsx("img",{src:p.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))] truncate",children:p.display_name}),a.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] truncate",children:["@",p.username]})]})]},p.id))]}),l.length>0&&a.jsxs("div",{className:"p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[a.jsx(ys,{size:20,className:"text-[rgb(var(--color-primary))]"})," Posts"]}),l.map(p=>a.jsxs("button",{onClick:()=>{e(),Xp(p.user_id)},className:"w-full flex gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left border-b border-[rgb(var(--color-border))] last:border-b-0",children:[a.jsx("img",{src:p.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.profiles?.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx("span",{className:"font-bold text-[rgb(var(--color-text))]",children:p.profiles?.display_name}),a.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",p.profiles?.username]})]}),a.jsx("p",{className:"text-[rgb(var(--color-text))] mt-1 line-clamp-2",children:p.content}),p.media_url&&a.jsx("img",{src:p.media_url,className:"mt-2 rounded-xl max-h-48 object-cover w-full",alt:""})]})]},p.id))]}),!i.length&&!l.length&&a.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:['No results found for "',t,'"']})]}),!t&&a.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:[a.jsx(pn,{size:48,className:"mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Type to search users and posts"})]})]})]})})},Xy=[{value:"lt-classic",name:"LT Classic",desc:"Default theme. Fiery orange and reds."},{value:"lt-dark",name:"LT Dark",desc:"Dark mode. Fiery orange and reds."},{value:"muxday",name:"MuxDay",desc:"Alternate theme in honor of the previous MuxDay platform. Analogous shades of blue."},{value:"amrella",name:"Amrella",desc:"Alternate theme in honor of the previous Amrella platform. Analogous shades of green."},{value:"cooper-black",name:"Cooper Black",desc:"Special theme for Cooper Black fans and enthusiasts. Futuristic cyberpunk vibes."},{value:"knightspeak",name:"Knightspeak",desc:"Special theme for Knightspeak fans and enthusiasts. Medieval vibes."},{value:"wildest-dimensions",name:"Wildest Dimensions",desc:"Special theme for Radiyana, in the Wildest Dimensions. Feel the high life."},{value:"mahir-beats",name:"Mahir Beats",desc:"Special theme for Mahir. Deep dark blues. Enjoy the cruise."},{value:"dewan-mukto",name:"Dewan Mukto",desc:"Low contrast within pure black and white. Timeless."},{value:"marlizo",name:"Marlizo",desc:"Special theme for Marlizo. Dante from Devil May Cry will love this."},{value:"invincible",name:"Invincible",desc:"Not invisible, yet invincible. This is a theme for people like A.A.A. who are the role models of IT. Pure OLED darkness."}],Zy=({currentTheme:e,onChange:t,loading:n})=>a.jsx("div",{className:"space-y-2",children:Xy.map(i=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all border ${e===i.value?"bg-[rgba(var(--color-primary),0.1)] border-[rgb(var(--color-primary))]":"bg-[rgb(var(--color-surface-hover))] border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-border))]"}`,onClick:()=>!n&&t(i.value),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-[rgb(var(--color-text))]",children:i.name}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:i.desc})]}),e===i.value&&a.jsx(Ru,{size:16,className:"text-[rgb(var(--color-primary))]"})]})},i.value))}),eb=()=>{const{user:e,profile:t,updateProfile:n}=Nt(),[i,o]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(""),[p,m]=k.useState(""),[g,y]=k.useState(""),[b,w]=k.useState(!1),[C,j]=k.useState(!1),[P,A]=k.useState(null),I=async K=>{if(!e?.id||!t)return;j(!0);const{error:oe}=await V.from("profiles").update({theme:K}).eq("id",e.id);j(!1),oe?A({type:"error",text:"Failed to update theme."}):(n({...t,theme:K}),A({type:"success",text:"Theme updated!"})),setTimeout(()=>A(null),3e3)},D=async()=>{if(!e?.id||!t||i===t.username||!i.trim())return;j(!0);const{data:K}=await V.from("profiles").select("id").eq("username",i.toLowerCase()).maybeSingle();if(K){A({type:"error",text:"Username already taken."}),j(!1);return}const{error:oe}=await V.from("profiles").update({username:i.toLowerCase()}).eq("id",e.id);j(!1),oe?A({type:"error",text:"Failed to update username."}):(n({...t,username:i.toLowerCase()}),A({type:"success",text:"Username updated!"}),o("")),setTimeout(()=>A(null),3e3)},G=async()=>{if(!e?.id||!l.trim())return;j(!0);const{error:K}=await V.auth.updateUser({email:l});j(!1),K?A({type:"error",text:K.message||"Failed to update email."}):(A({type:"success",text:"Email updated! Check your inbox for confirmation."}),u("")),setTimeout(()=>A(null),3e3)},z=async()=>{if(!e?.id||d!==p||d.length<6)return;j(!0);const{error:K}=await V.auth.updateUser({password:d});j(!1),K?A({type:"error",text:K.message||"Failed to update password."}):(A({type:"success",text:"Password updated!"}),h(""),m("")),setTimeout(()=>A(null),3e3)},J=async()=>{if(!e?.id||!t||!g.trim())return;j(!0);const{error:K}=await V.from("profiles").update({verification_request:g}).eq("id",e.id);j(!1),K?A({type:"error",text:"Failed to submit request."}):(n({...t,verification_request:g}),A({type:"success",text:"Verification request submitted!"}),y(""),w(!1)),setTimeout(()=>A(null),3e3)};return!t||!e?a.jsx("div",{className:"text-center p-8",children:"Loading..."}):a.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-8",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Eg,{size:24,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})]}),P&&a.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${P.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[P.type==="success"?a.jsx(Ru,{size:20}):a.jsx(wg,{size:20}),P.text]}),a.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Theme"}),a.jsx(Zy,{currentTheme:t.theme,onChange:I,loading:C})]}),a.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Username"}),a.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: @",t.username]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:K=>o(K.target.value),placeholder:"New username",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),a.jsx("button",{onClick:D,disabled:C||!i.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition",children:C?"...":"Change"})]})]}),a.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Email"}),a.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: ",e.email]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"email",value:l,onChange:K=>u(K.target.value),placeholder:"New email",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),a.jsxs("button",{onClick:G,disabled:C||!l.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:[a.jsx(dy,{size:16}),C?"...":"Change"]})]})]}),a.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Password"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"password",value:d,onChange:K=>h(K.target.value),placeholder:"New password (min 6 chars)",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),a.jsx("input",{type:"password",value:p,onChange:K=>m(K.target.value),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),a.jsxs("button",{onClick:z,disabled:C||d!==p||d.length<6,className:"w-full py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center justify-center gap-2",children:[a.jsx(ad,{size:16}),C?"...":"Change Password"]})]})]}),a.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Verification"}),t.verified?a.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[a.jsx(Ru,{size:20}),a.jsx("span",{children:"Verified"}),a.jsx(fi,{size:20,className:"text-[rgb(var(--color-primary))]"})]}):t.verification_request?a.jsxs("div",{className:"text-yellow-600",children:["Pending: ",t.verification_request]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mb-4",children:" Apply for verification badge."}),a.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] transition",children:"Apply for Verification"}),b&&a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx("textarea",{value:g,onChange:K=>y(K.target.value),placeholder:"Reason for verification (e.g., public figure, brand, etc.)",rows:3,className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:J,disabled:C||!g.trim(),className:"flex-1 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-[rgb(var(--color-border))] transition",children:C?"...":"Submit"}),a.jsx("button",{onClick:()=>{w(!1),y("")},className:"px-4 py-2 bg-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition",children:"Cancel"})]})]})]})]})]})};function tb(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const rb=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nb=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sb={};function Zp(e,t){return(sb.jsx?nb:rb).test(e)}const ib=/[ \t\n\f\r]/g;function ob(e){return typeof e=="object"?e.type==="text"?em(e.value):!1:em(e)}function em(e){return e.replace(ib,"")===""}class jo{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}jo.prototype.normal={};jo.prototype.property={};jo.prototype.space=void 0;function Ig(e,t){const n={},i={};for(const o of e)Object.assign(n,o.property),Object.assign(i,o.normal);return new jo(n,i,t)}function Fu(e){return e.toLowerCase()}class pr{constructor(t,n){this.attribute=n,this.property=t}}pr.prototype.attribute="";pr.prototype.booleanish=!1;pr.prototype.boolean=!1;pr.prototype.commaOrSpaceSeparated=!1;pr.prototype.commaSeparated=!1;pr.prototype.defined=!1;pr.prototype.mustUseProperty=!1;pr.prototype.number=!1;pr.prototype.overloadedBoolean=!1;pr.prototype.property="";pr.prototype.spaceSeparated=!1;pr.prototype.space=void 0;let ab=0;const Be=bs(),Pt=bs(),Uu=bs(),ge=bs(),ut=bs(),ui=bs(),kr=bs();function bs(){return 2**++ab}const Bu=Object.freeze(Object.defineProperty({__proto__:null,boolean:Be,booleanish:Pt,commaOrSpaceSeparated:kr,commaSeparated:ui,number:ge,overloadedBoolean:Uu,spaceSeparated:ut},Symbol.toStringTag,{value:"Module"})),nu=Object.keys(Bu);class ud extends pr{constructor(t,n,i,o){let l=-1;if(super(t,n),tm(this,"space",o),typeof i=="number")for(;++l<nu.length;){const u=nu[l];tm(this,nu[l],(i&Bu[u])===Bu[u])}}}ud.prototype.defined=!0;function tm(e,t,n){n&&(e[t]=n)}function xi(e){const t={},n={};for(const[i,o]of Object.entries(e.properties)){const l=new ud(i,e.transform(e.attributes||{},i),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),t[i]=l,n[Fu(i)]=i,n[Fu(l.attribute)]=i}return new jo(t,n,e.space)}const Ag=xi({properties:{ariaActiveDescendant:null,ariaAtomic:Pt,ariaAutoComplete:null,ariaBusy:Pt,ariaChecked:Pt,ariaColCount:ge,ariaColIndex:ge,ariaColSpan:ge,ariaControls:ut,ariaCurrent:null,ariaDescribedBy:ut,ariaDetails:null,ariaDisabled:Pt,ariaDropEffect:ut,ariaErrorMessage:null,ariaExpanded:Pt,ariaFlowTo:ut,ariaGrabbed:Pt,ariaHasPopup:null,ariaHidden:Pt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ut,ariaLevel:ge,ariaLive:null,ariaModal:Pt,ariaMultiLine:Pt,ariaMultiSelectable:Pt,ariaOrientation:null,ariaOwns:ut,ariaPlaceholder:null,ariaPosInSet:ge,ariaPressed:Pt,ariaReadOnly:Pt,ariaRelevant:null,ariaRequired:Pt,ariaRoleDescription:ut,ariaRowCount:ge,ariaRowIndex:ge,ariaRowSpan:ge,ariaSelected:Pt,ariaSetSize:ge,ariaSort:null,ariaValueMax:ge,ariaValueMin:ge,ariaValueNow:ge,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Rg(e,t){return t in e?e[t]:t}function zg(e,t){return Rg(e,t.toLowerCase())}const lb=xi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ui,acceptCharset:ut,accessKey:ut,action:null,allow:null,allowFullScreen:Be,allowPaymentRequest:Be,allowUserMedia:Be,alt:null,as:null,async:Be,autoCapitalize:null,autoComplete:ut,autoFocus:Be,autoPlay:Be,blocking:ut,capture:null,charSet:null,checked:Be,cite:null,className:ut,cols:ge,colSpan:null,content:null,contentEditable:Pt,controls:Be,controlsList:ut,coords:ge|ui,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Be,defer:Be,dir:null,dirName:null,disabled:Be,download:Uu,draggable:Pt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Be,formTarget:null,headers:ut,height:ge,hidden:Uu,high:ge,href:null,hrefLang:null,htmlFor:ut,httpEquiv:ut,id:null,imageSizes:null,imageSrcSet:null,inert:Be,inputMode:null,integrity:null,is:null,isMap:Be,itemId:null,itemProp:ut,itemRef:ut,itemScope:Be,itemType:ut,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Be,low:ge,manifest:null,max:null,maxLength:ge,media:null,method:null,min:null,minLength:ge,multiple:Be,muted:Be,name:null,nonce:null,noModule:Be,noValidate:Be,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Be,optimum:ge,pattern:null,ping:ut,placeholder:null,playsInline:Be,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Be,referrerPolicy:null,rel:ut,required:Be,reversed:Be,rows:ge,rowSpan:ge,sandbox:ut,scope:null,scoped:Be,seamless:Be,selected:Be,shadowRootClonable:Be,shadowRootDelegatesFocus:Be,shadowRootMode:null,shape:null,size:ge,sizes:null,slot:null,span:ge,spellCheck:Pt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ge,step:null,style:null,tabIndex:ge,target:null,title:null,translate:null,type:null,typeMustMatch:Be,useMap:null,value:Pt,width:ge,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ut,axis:null,background:null,bgColor:null,border:ge,borderColor:null,bottomMargin:ge,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Be,declare:Be,event:null,face:null,frame:null,frameBorder:null,hSpace:ge,leftMargin:ge,link:null,longDesc:null,lowSrc:null,marginHeight:ge,marginWidth:ge,noResize:Be,noHref:Be,noShade:Be,noWrap:Be,object:null,profile:null,prompt:null,rev:null,rightMargin:ge,rules:null,scheme:null,scrolling:Pt,standby:null,summary:null,text:null,topMargin:ge,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ge,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Be,disableRemotePlayback:Be,prefix:null,property:null,results:ge,security:null,unselectable:null},space:"html",transform:zg}),cb=xi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:kr,accentHeight:ge,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ge,amplitude:ge,arabicForm:null,ascent:ge,attributeName:null,attributeType:null,azimuth:ge,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ge,by:null,calcMode:null,capHeight:ge,className:ut,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ge,diffuseConstant:ge,direction:null,display:null,dur:null,divisor:ge,dominantBaseline:null,download:Be,dx:null,dy:null,edgeMode:null,editable:null,elevation:ge,enableBackground:null,end:null,event:null,exponent:ge,externalResourcesRequired:null,fill:null,fillOpacity:ge,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ui,g2:ui,glyphName:ui,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ge,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ge,horizOriginX:ge,horizOriginY:ge,id:null,ideographic:ge,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ge,k:ge,k1:ge,k2:ge,k3:ge,k4:ge,kernelMatrix:kr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ge,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ge,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ge,overlineThickness:ge,paintOrder:null,panose1:null,path:null,pathLength:ge,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ut,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ge,pointsAtY:ge,pointsAtZ:ge,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kr,rev:kr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kr,requiredFeatures:kr,requiredFonts:kr,requiredFormats:kr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ge,specularExponent:ge,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ge,strikethroughThickness:ge,string:null,stroke:null,strokeDashArray:kr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ge,strokeOpacity:ge,strokeWidth:null,style:null,surfaceScale:ge,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kr,tabIndex:ge,tableValues:null,target:null,targetX:ge,targetY:ge,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ge,underlineThickness:ge,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ge,values:null,vAlphabetic:ge,vMathematical:ge,vectorEffect:null,vHanging:ge,vIdeographic:ge,version:null,vertAdvY:ge,vertOriginX:ge,vertOriginY:ge,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ge,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Rg}),Mg=xi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Og=xi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:zg}),Dg=xi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ub={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},db=/[A-Z]/g,rm=/-[a-z]/g,fb=/^data[-\w.:]+$/i;function hb(e,t){const n=Fu(t);let i=t,o=pr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fb.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace(rm,mb);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!rm.test(l)){let u=l.replace(db,pb);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}o=ud}return new o(i,t)}function pb(e){return"-"+e.toLowerCase()}function mb(e){return e.charAt(1).toUpperCase()}const gb=Ig([Ag,lb,Mg,Og,Dg],"html"),dd=Ig([Ag,cb,Mg,Og,Dg],"svg");function xb(e){return e.join(" ").trim()}var ii={},su,nm;function vb(){if(nm)return su;nm=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,d=/^\s+|\s+$/g,h=`
`,p="/",m="*",g="",y="comment",b="declaration";function w(j,P){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];P=P||{};var A=1,I=1;function D(re){var ee=re.match(t);ee&&(A+=ee.length);var ve=re.lastIndexOf(h);I=~ve?re.length-ve:I+re.length}function G(){var re={line:A,column:I};return function(ee){return ee.position=new z(re),oe(),ee}}function z(re){this.start=re,this.end={line:A,column:I},this.source=P.source}z.prototype.content=j;function J(re){var ee=new Error(P.source+":"+A+":"+I+": "+re);if(ee.reason=re,ee.filename=P.source,ee.line=A,ee.column=I,ee.source=j,!P.silent)throw ee}function K(re){var ee=re.exec(j);if(ee){var ve=ee[0];return D(ve),j=j.slice(ve.length),ee}}function oe(){K(n)}function O(re){var ee;for(re=re||[];ee=$();)ee!==!1&&re.push(ee);return re}function $(){var re=G();if(!(p!=j.charAt(0)||m!=j.charAt(1))){for(var ee=2;g!=j.charAt(ee)&&(m!=j.charAt(ee)||p!=j.charAt(ee+1));)++ee;if(ee+=2,g===j.charAt(ee-1))return J("End of comment missing");var ve=j.slice(2,ee-2);return I+=2,D(ve),j=j.slice(ee),I+=2,re({type:y,comment:ve})}}function Z(){var re=G(),ee=K(i);if(ee){if($(),!K(o))return J("property missing ':'");var ve=K(l),Se=re({type:b,property:C(ee[0].replace(e,g)),value:ve?C(ve[0].replace(e,g)):g});return K(u),Se}}function ue(){var re=[];O(re);for(var ee;ee=Z();)ee!==!1&&(re.push(ee),O(re));return re}return oe(),ue()}function C(j){return j?j.replace(d,g):g}return su=w,su}var sm;function yb(){if(sm)return ii;sm=1;var e=ii&&ii.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ii,"__esModule",{value:!0}),ii.default=n;const t=e(vb());function n(i,o){let l=null;if(!i||typeof i!="string")return l;const u=(0,t.default)(i),d=typeof o=="function";return u.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:m}=h;d?o(p,m,h):m&&(l=l||{},l[p]=m)}),l}return ii}var to={},im;function bb(){if(im)return to;im=1,Object.defineProperty(to,"__esModule",{value:!0}),to.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,l=function(p){return!p||n.test(p)||e.test(p)},u=function(p,m){return m.toUpperCase()},d=function(p,m){return"".concat(m,"-")},h=function(p,m){return m===void 0&&(m={}),l(p)?p:(p=p.toLowerCase(),m.reactCompat?p=p.replace(o,d):p=p.replace(i,d),p.replace(t,u))};return to.camelCase=h,to}var ro,om;function wb(){if(om)return ro;om=1;var e=ro&&ro.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(yb()),n=bb();function i(o,l){var u={};return!o||typeof o!="string"||(0,t.default)(o,function(d,h){d&&h&&(u[(0,n.camelCase)(d,l)]=h)}),u}return i.default=i,ro=i,ro}var kb=wb();const _b=tl(kb),$g=Fg("end"),fd=Fg("start");function Fg(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function jb(e){const t=fd(e),n=$g(e);if(t&&n)return{start:t,end:n}}function uo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?am(e.position):"start"in e||"end"in e?am(e):"line"in e||"column"in e?qu(e):""}function qu(e){return lm(e&&e.line)+":"+lm(e&&e.column)}function am(e){return qu(e&&e.start)+"-"+qu(e&&e.end)}function lm(e){return e&&typeof e=="number"?e:1}class Xt extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",l={},u=!1;if(n&&("line"in n&&"column"in n?l={place:n}:"start"in n&&"end"in n?l={place:n}:"type"in n?l={ancestors:[n],place:n.position}:l={...n}),typeof t=="string"?o=t:!l.cause&&t&&(u=!0,o=t.message,l.cause=t),!l.ruleId&&!l.source&&typeof i=="string"){const h=i.indexOf(":");h===-1?l.ruleId=i:(l.source=i.slice(0,h),l.ruleId=i.slice(h+1))}if(!l.place&&l.ancestors&&l.ancestors){const h=l.ancestors[l.ancestors.length-1];h&&(l.place=h.position)}const d=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=d?d.line:void 0,this.name=uo(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=u&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Xt.prototype.file="";Xt.prototype.name="";Xt.prototype.reason="";Xt.prototype.message="";Xt.prototype.stack="";Xt.prototype.column=void 0;Xt.prototype.line=void 0;Xt.prototype.ancestors=void 0;Xt.prototype.cause=void 0;Xt.prototype.fatal=void 0;Xt.prototype.place=void 0;Xt.prototype.ruleId=void 0;Xt.prototype.source=void 0;const hd={}.hasOwnProperty,Sb=new Map,Nb=/[A-Z]/g,Cb=new Set(["table","tbody","thead","tfoot","tr"]),Eb=new Set(["td","th"]),Ug="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Pb(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Ob(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=Mb(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?dd:gb,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},l=Bg(o,e,void 0);return l&&typeof l!="string"?l:o.create(e,o.Fragment,{children:l||void 0},void 0)}function Bg(e,t,n){if(t.type==="element")return Tb(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Lb(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Ab(e,t,n);if(t.type==="mdxjsEsm")return Ib(e,t);if(t.type==="root")return Rb(e,t,n);if(t.type==="text")return zb(e,t)}function Tb(e,t,n){const i=e.schema;let o=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=dd,e.schema=o),e.ancestors.push(t);const l=Vg(e,t.tagName,!1),u=Db(e,t);let d=md(e,t);return Cb.has(t.tagName)&&(d=d.filter(function(h){return typeof h=="string"?!ob(h):!0})),qg(e,u,l,t),pd(u,d),e.ancestors.pop(),e.schema=i,e.create(t,l,u,n)}function Lb(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}yo(e,t.position)}function Ib(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);yo(e,t.position)}function Ab(e,t,n){const i=e.schema;let o=i;t.name==="svg"&&i.space==="html"&&(o=dd,e.schema=o),e.ancestors.push(t);const l=t.name===null?e.Fragment:Vg(e,t.name,!0),u=$b(e,t),d=md(e,t);return qg(e,u,l,t),pd(u,d),e.ancestors.pop(),e.schema=i,e.create(t,l,u,n)}function Rb(e,t,n){const i={};return pd(i,md(e,t)),e.create(t,e.Fragment,i,n)}function zb(e,t){return t.value}function qg(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function pd(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Mb(e,t,n){return i;function i(o,l,u,d){const p=Array.isArray(u.children)?n:t;return d?p(l,u,d):p(l,u)}}function Ob(e,t){return n;function n(i,o,l,u){const d=Array.isArray(l.children),h=fd(i);return t(o,l,u,d,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function Db(e,t){const n={};let i,o;for(o in t.properties)if(o!=="children"&&hd.call(t.properties,o)){const l=Fb(e,o,t.properties[o]);if(l){const[u,d]=l;e.tableCellAlignToStyle&&u==="align"&&typeof d=="string"&&Eb.has(t.tagName)?i=d:n[u]=d}}if(i){const l=n.style||(n.style={});l[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function $b(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const l=i.data.estree.body[0];l.type;const u=l.expression;u.type;const d=u.properties[0];d.type,Object.assign(n,e.evaluater.evaluateExpression(d.argument))}else yo(e,t.position);else{const o=i.name;let l;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const d=i.value.data.estree.body[0];d.type,l=e.evaluater.evaluateExpression(d.expression)}else yo(e,t.position);else l=i.value===null?!0:i.value;n[o]=l}return n}function md(e,t){const n=[];let i=-1;const o=e.passKeys?new Map:Sb;for(;++i<t.children.length;){const l=t.children[i];let u;if(e.passKeys){const h=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(h){const p=o.get(h)||0;u=h+"-"+p,o.set(h,p+1)}}const d=Bg(e,l,u);d!==void 0&&n.push(d)}return n}function Fb(e,t,n){const i=hb(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?tb(n):xb(n)),i.property==="style"){let o=typeof n=="object"?n:Ub(e,String(n));return e.stylePropertyNameCase==="css"&&(o=Bb(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&i.space?ub[i.property]||i.property:i.attribute,n]}}function Ub(e,t){try{return _b(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,o=new Xt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Ug+"#cannot-parse-style-attribute",o}}function Vg(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let l=-1,u;for(;++l<o.length;){const d=Zp(o[l])?{type:"Identifier",name:o[l]}:{type:"Literal",value:o[l]};u=u?{type:"MemberExpression",object:u,property:d,computed:!!(l&&d.type==="Literal"),optional:!1}:d}i=u}else i=Zp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const o=i.value;return hd.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(i);yo(e)}function yo(e,t){const n=new Xt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ug+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Bb(e){const t={};let n;for(n in e)hd.call(e,n)&&(t[qb(n)]=e[n]);return t}function qb(e){let t=e.replace(Nb,Vb);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Vb(e){return"-"+e.toLowerCase()}const iu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Hb={};function gd(e,t){const n=Hb,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Hg(e,i,o)}function Hg(e,t,n){if(Wb(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return cm(e.children,t,n)}return Array.isArray(e)?cm(e,t,n):""}function cm(e,t,n){const i=[];let o=-1;for(;++o<e.length;)i[o]=Hg(e[o],t,n);return i.join("")}function Wb(e){return!!(e&&typeof e=="object")}const um=document.createElement("i");function xd(e){const t="&"+e+";";um.innerHTML=t;const n=um.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function _r(e,t,n,i){const o=e.length;let l=0,u;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,i.length<1e4)u=Array.from(i),u.unshift(t,n),e.splice(...u);else for(n&&e.splice(t,n);l<i.length;)u=i.slice(l,l+1e4),u.unshift(t,0),e.splice(...u),l+=1e4,t+=1e4}function Lr(e,t){return e.length>0?(_r(e,e.length,0,t),e):t}const dm={}.hasOwnProperty;function Wg(e){const t={};let n=-1;for(;++n<e.length;)Gb(t,e[n]);return t}function Gb(e,t){let n;for(n in t){const o=(dm.call(e,n)?e[n]:void 0)||(e[n]={}),l=t[n];let u;if(l)for(u in l){dm.call(o,u)||(o[u]=[]);const d=l[u];Kb(o[u],Array.isArray(d)?d:d?[d]:[])}}}function Kb(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);_r(e,0,0,i)}function Gg(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Br(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nr=Gn(/[A-Za-z]/),Yt=Gn(/[\dA-Za-z]/),Qb=Gn(/[#-'*+\--9=?A-Z^-~]/);function Ja(e){return e!==null&&(e<32||e===127)}const Vu=Gn(/\d/),Jb=Gn(/[\dA-Fa-f]/),Yb=Gn(/[!-/:-@[-`{-~]/);function Oe(e){return e!==null&&e<-2}function it(e){return e!==null&&(e<0||e===32)}function Ge(e){return e===-2||e===-1||e===32}const il=Gn(new RegExp("\\p{P}|\\p{S}","u")),gs=Gn(/\s/);function Gn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function vi(e){const t=[];let n=-1,i=0,o=0;for(;++n<e.length;){const l=e.charCodeAt(n);let u="";if(l===37&&Yt(e.charCodeAt(n+1))&&Yt(e.charCodeAt(n+2)))o=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(u=String.fromCharCode(l));else if(l>55295&&l<57344){const d=e.charCodeAt(n+1);l<56320&&d>56319&&d<57344?(u=String.fromCharCode(l,d),o=1):u=""}else u=String.fromCharCode(l);u&&(t.push(e.slice(i,n),encodeURIComponent(u)),i=n+o+1,u=""),o&&(n+=o,o=0)}return t.join("")+e.slice(i)}function Qe(e,t,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let l=0;return u;function u(h){return Ge(h)?(e.enter(n),d(h)):t(h)}function d(h){return Ge(h)&&l++<o?(e.consume(h),d):(e.exit(n),t(h))}}const Xb={tokenize:Zb};function Zb(e){const t=e.attempt(this.parser.constructs.contentInitial,i,o);let n;return t;function i(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Qe(e,t,"linePrefix")}function o(d){return e.enter("paragraph"),l(d)}function l(d){const h=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,u(d)}function u(d){if(d===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(d);return}return Oe(d)?(e.consume(d),e.exit("chunkText"),l):(e.consume(d),u)}}const ew={tokenize:tw},fm={tokenize:rw};function tw(e){const t=this,n=[];let i=0,o,l,u;return d;function d(I){if(i<n.length){const D=n[i];return t.containerState=D[1],e.attempt(D[0].continuation,h,p)(I)}return p(I)}function h(I){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&A();const D=t.events.length;let G=D,z;for(;G--;)if(t.events[G][0]==="exit"&&t.events[G][1].type==="chunkFlow"){z=t.events[G][1].end;break}P(i);let J=D;for(;J<t.events.length;)t.events[J][1].end={...z},J++;return _r(t.events,G+1,0,t.events.slice(D)),t.events.length=J,p(I)}return d(I)}function p(I){if(i===n.length){if(!o)return y(I);if(o.currentConstruct&&o.currentConstruct.concrete)return w(I);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(fm,m,g)(I)}function m(I){return o&&A(),P(i),y(I)}function g(I){return t.parser.lazy[t.now().line]=i!==n.length,u=t.now().offset,w(I)}function y(I){return t.containerState={},e.attempt(fm,b,w)(I)}function b(I){return i++,n.push([t.currentConstruct,t.containerState]),y(I)}function w(I){if(I===null){o&&A(),P(0),e.consume(I);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:l}),C(I)}function C(I){if(I===null){j(e.exit("chunkFlow"),!0),P(0),e.consume(I);return}return Oe(I)?(e.consume(I),j(e.exit("chunkFlow")),i=0,t.interrupt=void 0,d):(e.consume(I),C)}function j(I,D){const G=t.sliceStream(I);if(D&&G.push(null),I.previous=l,l&&(l.next=I),l=I,o.defineSkip(I.start),o.write(G),t.parser.lazy[I.start.line]){let z=o.events.length;for(;z--;)if(o.events[z][1].start.offset<u&&(!o.events[z][1].end||o.events[z][1].end.offset>u))return;const J=t.events.length;let K=J,oe,O;for(;K--;)if(t.events[K][0]==="exit"&&t.events[K][1].type==="chunkFlow"){if(oe){O=t.events[K][1].end;break}oe=!0}for(P(i),z=J;z<t.events.length;)t.events[z][1].end={...O},z++;_r(t.events,K+1,0,t.events.slice(J)),t.events.length=z}}function P(I){let D=n.length;for(;D-- >I;){const G=n[D];t.containerState=G[1],G[0].exit.call(t,e)}n.length=I}function A(){o.write([null]),l=void 0,o=void 0,t.containerState._closeFlow=void 0}}function rw(e,t,n){return Qe(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function pi(e){if(e===null||it(e)||gs(e))return 1;if(il(e))return 2}function ol(e,t,n){const i=[];let o=-1;for(;++o<e.length;){const l=e[o].resolveAll;l&&!i.includes(l)&&(t=l(t,n),i.push(l))}return t}const Hu={name:"attention",resolveAll:nw,tokenize:sw};function nw(e,t){let n=-1,i,o,l,u,d,h,p,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;h=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const g={...e[i][1].end},y={...e[n][1].start};hm(g,-h),hm(y,h),u={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...e[i][1].end}},d={type:h>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},l={type:h>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},o={type:h>1?"strong":"emphasis",start:{...u.start},end:{...d.end}},e[i][1].end={...u.start},e[n][1].start={...d.end},p=[],e[i][1].end.offset-e[i][1].start.offset&&(p=Lr(p,[["enter",e[i][1],t],["exit",e[i][1],t]])),p=Lr(p,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",l,t]]),p=Lr(p,ol(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),p=Lr(p,[["exit",l,t],["enter",d,t],["exit",d,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,p=Lr(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,_r(e,i-1,n-i+3,p),n=i+p.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function sw(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=pi(i);let l;return u;function u(h){return l=h,e.enter("attentionSequence"),d(h)}function d(h){if(h===l)return e.consume(h),d;const p=e.exit("attentionSequence"),m=pi(h),g=!m||m===2&&o||n.includes(h),y=!o||o===2&&m||n.includes(i);return p._open=!!(l===42?g:g&&(o||!y)),p._close=!!(l===42?y:y&&(m||!g)),t(h)}}function hm(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const iw={name:"autolink",tokenize:ow};function ow(e,t,n){let i=0;return o;function o(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l}function l(b){return nr(b)?(e.consume(b),u):b===64?n(b):p(b)}function u(b){return b===43||b===45||b===46||Yt(b)?(i=1,d(b)):p(b)}function d(b){return b===58?(e.consume(b),i=0,h):(b===43||b===45||b===46||Yt(b))&&i++<32?(e.consume(b),d):(i=0,p(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Ja(b)?n(b):(e.consume(b),h)}function p(b){return b===64?(e.consume(b),m):Qb(b)?(e.consume(b),p):n(b)}function m(b){return Yt(b)?g(b):n(b)}function g(b){return b===46?(e.consume(b),i=0,m):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):y(b)}function y(b){if((b===45||Yt(b))&&i++<63){const w=b===45?y:g;return e.consume(b),w}return n(b)}}const So={partial:!0,tokenize:aw};function aw(e,t,n){return i;function i(l){return Ge(l)?Qe(e,o,"linePrefix")(l):o(l)}function o(l){return l===null||Oe(l)?t(l):n(l)}}const Kg={continuation:{tokenize:cw},exit:uw,name:"blockQuote",tokenize:lw};function lw(e,t,n){const i=this;return o;function o(u){if(u===62){const d=i.containerState;return d.open||(e.enter("blockQuote",{_container:!0}),d.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),l}return n(u)}function l(u){return Ge(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function cw(e,t,n){const i=this;return o;function o(u){return Ge(u)?Qe(e,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):l(u)}function l(u){return e.attempt(Kg,t,n)(u)}}function uw(e){e.exit("blockQuote")}const Qg={name:"characterEscape",tokenize:dw};function dw(e,t,n){return i;function i(l){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(l),e.exit("escapeMarker"),o}function o(l){return Yb(l)?(e.enter("characterEscapeValue"),e.consume(l),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(l)}}const Jg={name:"characterReference",tokenize:fw};function fw(e,t,n){const i=this;let o=0,l,u;return d;function d(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),h}function h(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),l=31,u=Yt,m(g))}function p(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),l=6,u=Jb,m):(e.enter("characterReferenceValue"),l=7,u=Vu,m(g))}function m(g){if(g===59&&o){const y=e.exit("characterReferenceValue");return u===Yt&&!xd(i.sliceSerialize(y))?n(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(g)&&o++<l?(e.consume(g),m):n(g)}}const pm={partial:!0,tokenize:pw},mm={concrete:!0,name:"codeFenced",tokenize:hw};function hw(e,t,n){const i=this,o={partial:!0,tokenize:G};let l=0,u=0,d;return h;function h(z){return p(z)}function p(z){const J=i.events[i.events.length-1];return l=J&&J[1].type==="linePrefix"?J[2].sliceSerialize(J[1],!0).length:0,d=z,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(z)}function m(z){return z===d?(u++,e.consume(z),m):u<3?n(z):(e.exit("codeFencedFenceSequence"),Ge(z)?Qe(e,g,"whitespace")(z):g(z))}function g(z){return z===null||Oe(z)?(e.exit("codeFencedFence"),i.interrupt?t(z):e.check(pm,C,D)(z)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(z))}function y(z){return z===null||Oe(z)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(z)):Ge(z)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Qe(e,b,"whitespace")(z)):z===96&&z===d?n(z):(e.consume(z),y)}function b(z){return z===null||Oe(z)?g(z):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(z))}function w(z){return z===null||Oe(z)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(z)):z===96&&z===d?n(z):(e.consume(z),w)}function C(z){return e.attempt(o,D,j)(z)}function j(z){return e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),P}function P(z){return l>0&&Ge(z)?Qe(e,A,"linePrefix",l+1)(z):A(z)}function A(z){return z===null||Oe(z)?e.check(pm,C,D)(z):(e.enter("codeFlowValue"),I(z))}function I(z){return z===null||Oe(z)?(e.exit("codeFlowValue"),A(z)):(e.consume(z),I)}function D(z){return e.exit("codeFenced"),t(z)}function G(z,J,K){let oe=0;return O;function O(ee){return z.enter("lineEnding"),z.consume(ee),z.exit("lineEnding"),$}function $(ee){return z.enter("codeFencedFence"),Ge(ee)?Qe(z,Z,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ee):Z(ee)}function Z(ee){return ee===d?(z.enter("codeFencedFenceSequence"),ue(ee)):K(ee)}function ue(ee){return ee===d?(oe++,z.consume(ee),ue):oe>=u?(z.exit("codeFencedFenceSequence"),Ge(ee)?Qe(z,re,"whitespace")(ee):re(ee)):K(ee)}function re(ee){return ee===null||Oe(ee)?(z.exit("codeFencedFence"),J(ee)):K(ee)}}}function pw(e,t,n){const i=this;return o;function o(u){return u===null?n(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),l)}function l(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}const ou={name:"codeIndented",tokenize:gw},mw={partial:!0,tokenize:xw};function gw(e,t,n){const i=this;return o;function o(p){return e.enter("codeIndented"),Qe(e,l,"linePrefix",5)(p)}function l(p){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?u(p):n(p)}function u(p){return p===null?h(p):Oe(p)?e.attempt(mw,u,h)(p):(e.enter("codeFlowValue"),d(p))}function d(p){return p===null||Oe(p)?(e.exit("codeFlowValue"),u(p)):(e.consume(p),d)}function h(p){return e.exit("codeIndented"),t(p)}}function xw(e,t,n){const i=this;return o;function o(u){return i.parser.lazy[i.now().line]?n(u):Oe(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),o):Qe(e,l,"linePrefix",5)(u)}function l(u){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):Oe(u)?o(u):n(u)}}const vw={name:"codeText",previous:bw,resolve:yw,tokenize:ww};function yw(e){let t=e.length-4,n=3,i,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)o===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(o=i):(i===t||e[i][1].type==="lineEnding")&&(e[o][1].type="codeTextData",i!==o+2&&(e[o][1].end=e[i-1][1].end,e.splice(o+2,i-o-2),t-=i-o-2,i=o+2),o=void 0);return e}function bw(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ww(e,t,n){let i=0,o,l;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),d(g)}function d(g){return g===96?(e.consume(g),i++,d):(e.exit("codeTextSequence"),h(g))}function h(g){return g===null?n(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),h):g===96?(l=e.enter("codeTextSequence"),o=0,m(g)):Oe(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||Oe(g)?(e.exit("codeTextData"),h(g)):(e.consume(g),p)}function m(g){return g===96?(e.consume(g),o++,m):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(l.type="codeTextData",p(g))}}class kw{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const o=n||0;this.setCursor(Math.trunc(t));const l=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&no(this.left,i),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),no(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),no(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);no(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);no(this.left,n.reverse())}}}function no(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Yg(e){const t={};let n=-1,i,o,l,u,d,h,p;const m=new kw(e);for(;++n<m.length;){for(;n in t;)n=t[n];if(i=m.get(n),n&&i[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(h=i[1]._tokenizer.events,l=0,l<h.length&&h[l][1].type==="lineEndingBlank"&&(l+=2),l<h.length&&h[l][1].type==="content"))for(;++l<h.length&&h[l][1].type!=="content";)h[l][1].type==="chunkText"&&(h[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,_w(m,n)),n=t[n],p=!0);else if(i[1]._container){for(l=n,o=void 0;l--;)if(u=m.get(l),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(o&&(m.get(o)[1].type="lineEndingBlank"),u[1].type="lineEnding",o=l);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;o&&(i[1].end={...m.get(o)[1].start},d=m.slice(o,n),d.unshift(i),m.splice(o,n-o+1,d))}}return _r(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!p}function _w(e,t){const n=e.get(t)[1],i=e.get(t)[2];let o=t-1;const l=[];let u=n._tokenizer;u||(u=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const d=u.events,h=[],p={};let m,g,y=-1,b=n,w=0,C=0;const j=[C];for(;b;){for(;e.get(++o)[1]!==b;);l.push(o),b._tokenizer||(m=i.sliceStream(b),b.next||m.push(null),g&&u.defineSkip(b.start),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(m),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),g=b,b=b.next}for(b=n;++y<d.length;)d[y][0]==="exit"&&d[y-1][0]==="enter"&&d[y][1].type===d[y-1][1].type&&d[y][1].start.line!==d[y][1].end.line&&(C=y+1,j.push(C),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(u.events=[],b?(b._tokenizer=void 0,b.previous=void 0):j.pop(),y=j.length;y--;){const P=d.slice(j[y],j[y+1]),A=l.pop();h.push([A,A+P.length-1]),e.splice(A,2,P)}for(h.reverse(),y=-1;++y<h.length;)p[w+h[y][0]]=w+h[y][1],w+=h[y][1]-h[y][0]-1;return p}const jw={resolve:Nw,tokenize:Cw},Sw={partial:!0,tokenize:Ew};function Nw(e){return Yg(e),e}function Cw(e,t){let n;return i;function i(d){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(d)}function o(d){return d===null?l(d):Oe(d)?e.check(Sw,u,l)(d):(e.consume(d),o)}function l(d){return e.exit("chunkContent"),e.exit("content"),t(d)}function u(d){return e.consume(d),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function Ew(e,t,n){const i=this;return o;function o(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Qe(e,l,"linePrefix")}function l(u){if(u===null||Oe(u))return n(u);const d=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?t(u):e.interrupt(i.parser.constructs.flow,n,t)(u)}}function Xg(e,t,n,i,o,l,u,d,h){const p=h||Number.POSITIVE_INFINITY;let m=0;return g;function g(P){return P===60?(e.enter(i),e.enter(o),e.enter(l),e.consume(P),e.exit(l),y):P===null||P===32||P===41||Ja(P)?n(P):(e.enter(i),e.enter(u),e.enter(d),e.enter("chunkString",{contentType:"string"}),C(P))}function y(P){return P===62?(e.enter(l),e.consume(P),e.exit(l),e.exit(o),e.exit(i),t):(e.enter(d),e.enter("chunkString",{contentType:"string"}),b(P))}function b(P){return P===62?(e.exit("chunkString"),e.exit(d),y(P)):P===null||P===60||Oe(P)?n(P):(e.consume(P),P===92?w:b)}function w(P){return P===60||P===62||P===92?(e.consume(P),b):b(P)}function C(P){return!m&&(P===null||P===41||it(P))?(e.exit("chunkString"),e.exit(d),e.exit(u),e.exit(i),t(P)):m<p&&P===40?(e.consume(P),m++,C):P===41?(e.consume(P),m--,C):P===null||P===32||P===40||Ja(P)?n(P):(e.consume(P),P===92?j:C)}function j(P){return P===40||P===41||P===92?(e.consume(P),C):C(P)}}function Zg(e,t,n,i,o,l){const u=this;let d=0,h;return p;function p(b){return e.enter(i),e.enter(o),e.consume(b),e.exit(o),e.enter(l),m}function m(b){return d>999||b===null||b===91||b===93&&!h||b===94&&!d&&"_hiddenFootnoteSupport"in u.parser.constructs?n(b):b===93?(e.exit(l),e.enter(o),e.consume(b),e.exit(o),e.exit(i),t):Oe(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||b===91||b===93||Oe(b)||d++>999?(e.exit("chunkString"),m(b)):(e.consume(b),h||(h=!Ge(b)),b===92?y:g)}function y(b){return b===91||b===92||b===93?(e.consume(b),d++,g):g(b)}}function e1(e,t,n,i,o,l){let u;return d;function d(y){return y===34||y===39||y===40?(e.enter(i),e.enter(o),e.consume(y),e.exit(o),u=y===40?41:y,h):n(y)}function h(y){return y===u?(e.enter(o),e.consume(y),e.exit(o),e.exit(i),t):(e.enter(l),p(y))}function p(y){return y===u?(e.exit(l),h(u)):y===null?n(y):Oe(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),Qe(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===u||y===null||Oe(y)?(e.exit("chunkString"),p(y)):(e.consume(y),y===92?g:m)}function g(y){return y===u||y===92?(e.consume(y),m):m(y)}}function fo(e,t){let n;return i;function i(o){return Oe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,i):Ge(o)?Qe(e,i,n?"linePrefix":"lineSuffix")(o):t(o)}}const Pw={name:"definition",tokenize:Lw},Tw={partial:!0,tokenize:Iw};function Lw(e,t,n){const i=this;let o;return l;function l(b){return e.enter("definition"),u(b)}function u(b){return Zg.call(i,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function d(b){return o=Br(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):n(b)}function h(b){return it(b)?fo(e,p)(b):p(b)}function p(b){return Xg(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function m(b){return e.attempt(Tw,g,g)(b)}function g(b){return Ge(b)?Qe(e,y,"whitespace")(b):y(b)}function y(b){return b===null||Oe(b)?(e.exit("definition"),i.parser.defined.push(o),t(b)):n(b)}}function Iw(e,t,n){return i;function i(d){return it(d)?fo(e,o)(d):n(d)}function o(d){return e1(e,l,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function l(d){return Ge(d)?Qe(e,u,"whitespace")(d):u(d)}function u(d){return d===null||Oe(d)?t(d):n(d)}}const Aw={name:"hardBreakEscape",tokenize:Rw};function Rw(e,t,n){return i;function i(l){return e.enter("hardBreakEscape"),e.consume(l),o}function o(l){return Oe(l)?(e.exit("hardBreakEscape"),t(l)):n(l)}}const zw={name:"headingAtx",resolve:Mw,tokenize:Ow};function Mw(e,t){let n=e.length-2,i=3,o,l;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},l={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},_r(e,i,n-i+1,[["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t]])),e}function Ow(e,t,n){let i=0;return o;function o(m){return e.enter("atxHeading"),l(m)}function l(m){return e.enter("atxHeadingSequence"),u(m)}function u(m){return m===35&&i++<6?(e.consume(m),u):m===null||it(m)?(e.exit("atxHeadingSequence"),d(m)):n(m)}function d(m){return m===35?(e.enter("atxHeadingSequence"),h(m)):m===null||Oe(m)?(e.exit("atxHeading"),t(m)):Ge(m)?Qe(e,d,"whitespace")(m):(e.enter("atxHeadingText"),p(m))}function h(m){return m===35?(e.consume(m),h):(e.exit("atxHeadingSequence"),d(m))}function p(m){return m===null||m===35||it(m)?(e.exit("atxHeadingText"),d(m)):(e.consume(m),p)}}const Dw=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gm=["pre","script","style","textarea"],$w={concrete:!0,name:"htmlFlow",resolveTo:Bw,tokenize:qw},Fw={partial:!0,tokenize:Hw},Uw={partial:!0,tokenize:Vw};function Bw(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qw(e,t,n){const i=this;let o,l,u,d,h;return p;function p(E){return m(E)}function m(E){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(E),g}function g(E){return E===33?(e.consume(E),y):E===47?(e.consume(E),l=!0,C):E===63?(e.consume(E),o=3,i.interrupt?t:S):nr(E)?(e.consume(E),u=String.fromCharCode(E),j):n(E)}function y(E){return E===45?(e.consume(E),o=2,b):E===91?(e.consume(E),o=5,d=0,w):nr(E)?(e.consume(E),o=4,i.interrupt?t:S):n(E)}function b(E){return E===45?(e.consume(E),i.interrupt?t:S):n(E)}function w(E){const ke="CDATA[";return E===ke.charCodeAt(d++)?(e.consume(E),d===ke.length?i.interrupt?t:Z:w):n(E)}function C(E){return nr(E)?(e.consume(E),u=String.fromCharCode(E),j):n(E)}function j(E){if(E===null||E===47||E===62||it(E)){const ke=E===47,fe=u.toLowerCase();return!ke&&!l&&gm.includes(fe)?(o=1,i.interrupt?t(E):Z(E)):Dw.includes(u.toLowerCase())?(o=6,ke?(e.consume(E),P):i.interrupt?t(E):Z(E)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(E):l?A(E):I(E))}return E===45||Yt(E)?(e.consume(E),u+=String.fromCharCode(E),j):n(E)}function P(E){return E===62?(e.consume(E),i.interrupt?t:Z):n(E)}function A(E){return Ge(E)?(e.consume(E),A):O(E)}function I(E){return E===47?(e.consume(E),O):E===58||E===95||nr(E)?(e.consume(E),D):Ge(E)?(e.consume(E),I):O(E)}function D(E){return E===45||E===46||E===58||E===95||Yt(E)?(e.consume(E),D):G(E)}function G(E){return E===61?(e.consume(E),z):Ge(E)?(e.consume(E),G):I(E)}function z(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),h=E,J):Ge(E)?(e.consume(E),z):K(E)}function J(E){return E===h?(e.consume(E),h=null,oe):E===null||Oe(E)?n(E):(e.consume(E),J)}function K(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||it(E)?G(E):(e.consume(E),K)}function oe(E){return E===47||E===62||Ge(E)?I(E):n(E)}function O(E){return E===62?(e.consume(E),$):n(E)}function $(E){return E===null||Oe(E)?Z(E):Ge(E)?(e.consume(E),$):n(E)}function Z(E){return E===45&&o===2?(e.consume(E),ve):E===60&&o===1?(e.consume(E),Se):E===62&&o===4?(e.consume(E),L):E===63&&o===3?(e.consume(E),S):E===93&&o===5?(e.consume(E),ae):Oe(E)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(Fw,H,ue)(E)):E===null||Oe(E)?(e.exit("htmlFlowData"),ue(E)):(e.consume(E),Z)}function ue(E){return e.check(Uw,re,H)(E)}function re(E){return e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),ee}function ee(E){return E===null||Oe(E)?ue(E):(e.enter("htmlFlowData"),Z(E))}function ve(E){return E===45?(e.consume(E),S):Z(E)}function Se(E){return E===47?(e.consume(E),u="",X):Z(E)}function X(E){if(E===62){const ke=u.toLowerCase();return gm.includes(ke)?(e.consume(E),L):Z(E)}return nr(E)&&u.length<8?(e.consume(E),u+=String.fromCharCode(E),X):Z(E)}function ae(E){return E===93?(e.consume(E),S):Z(E)}function S(E){return E===62?(e.consume(E),L):E===45&&o===2?(e.consume(E),S):Z(E)}function L(E){return E===null||Oe(E)?(e.exit("htmlFlowData"),H(E)):(e.consume(E),L)}function H(E){return e.exit("htmlFlow"),t(E)}}function Vw(e,t,n){const i=this;return o;function o(u){return Oe(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),l):n(u)}function l(u){return i.parser.lazy[i.now().line]?n(u):t(u)}}function Hw(e,t,n){return i;function i(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(So,t,n)}}const Ww={name:"htmlText",tokenize:Gw};function Gw(e,t,n){const i=this;let o,l,u;return d;function d(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),h}function h(S){return S===33?(e.consume(S),p):S===47?(e.consume(S),G):S===63?(e.consume(S),I):nr(S)?(e.consume(S),K):n(S)}function p(S){return S===45?(e.consume(S),m):S===91?(e.consume(S),l=0,w):nr(S)?(e.consume(S),A):n(S)}function m(S){return S===45?(e.consume(S),b):n(S)}function g(S){return S===null?n(S):S===45?(e.consume(S),y):Oe(S)?(u=g,Se(S)):(e.consume(S),g)}function y(S){return S===45?(e.consume(S),b):g(S)}function b(S){return S===62?ve(S):S===45?y(S):g(S)}function w(S){const L="CDATA[";return S===L.charCodeAt(l++)?(e.consume(S),l===L.length?C:w):n(S)}function C(S){return S===null?n(S):S===93?(e.consume(S),j):Oe(S)?(u=C,Se(S)):(e.consume(S),C)}function j(S){return S===93?(e.consume(S),P):C(S)}function P(S){return S===62?ve(S):S===93?(e.consume(S),P):C(S)}function A(S){return S===null||S===62?ve(S):Oe(S)?(u=A,Se(S)):(e.consume(S),A)}function I(S){return S===null?n(S):S===63?(e.consume(S),D):Oe(S)?(u=I,Se(S)):(e.consume(S),I)}function D(S){return S===62?ve(S):I(S)}function G(S){return nr(S)?(e.consume(S),z):n(S)}function z(S){return S===45||Yt(S)?(e.consume(S),z):J(S)}function J(S){return Oe(S)?(u=J,Se(S)):Ge(S)?(e.consume(S),J):ve(S)}function K(S){return S===45||Yt(S)?(e.consume(S),K):S===47||S===62||it(S)?oe(S):n(S)}function oe(S){return S===47?(e.consume(S),ve):S===58||S===95||nr(S)?(e.consume(S),O):Oe(S)?(u=oe,Se(S)):Ge(S)?(e.consume(S),oe):ve(S)}function O(S){return S===45||S===46||S===58||S===95||Yt(S)?(e.consume(S),O):$(S)}function $(S){return S===61?(e.consume(S),Z):Oe(S)?(u=$,Se(S)):Ge(S)?(e.consume(S),$):oe(S)}function Z(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),o=S,ue):Oe(S)?(u=Z,Se(S)):Ge(S)?(e.consume(S),Z):(e.consume(S),re)}function ue(S){return S===o?(e.consume(S),o=void 0,ee):S===null?n(S):Oe(S)?(u=ue,Se(S)):(e.consume(S),ue)}function re(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||it(S)?oe(S):(e.consume(S),re)}function ee(S){return S===47||S===62||it(S)?oe(S):n(S)}function ve(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):n(S)}function Se(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),X}function X(S){return Ge(S)?Qe(e,ae,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):ae(S)}function ae(S){return e.enter("htmlTextData"),u(S)}}const vd={name:"labelEnd",resolveAll:Yw,resolveTo:Xw,tokenize:Zw},Kw={tokenize:e3},Qw={tokenize:t3},Jw={tokenize:r3};function Yw(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const o=i.type==="labelImage"?4:2;i.type="data",t+=o}}return e.length!==n.length&&_r(e,0,e.length,n),e}function Xw(e,t){let n=e.length,i=0,o,l,u,d;for(;n--;)if(o=e[n][1],l){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(u){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(l=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(u=n);const h={type:e[l][1].type==="labelLink"?"link":"image",start:{...e[l][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[l][1].start},end:{...e[u][1].end}},m={type:"labelText",start:{...e[l+i+2][1].end},end:{...e[u-2][1].start}};return d=[["enter",h,t],["enter",p,t]],d=Lr(d,e.slice(l+1,l+i+3)),d=Lr(d,[["enter",m,t]]),d=Lr(d,ol(t.parser.constructs.insideSpan.null,e.slice(l+i+4,u-3),t)),d=Lr(d,[["exit",m,t],e[u-2],e[u-1],["exit",p,t]]),d=Lr(d,e.slice(u+1)),d=Lr(d,[["exit",h,t]]),_r(e,l,e.length,d),e}function Zw(e,t,n){const i=this;let o=i.events.length,l,u;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){l=i.events[o][1];break}return d;function d(y){return l?l._inactive?g(y):(u=i.parser.defined.includes(Br(i.sliceSerialize({start:l.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),h):n(y)}function h(y){return y===40?e.attempt(Kw,m,u?m:g)(y):y===91?e.attempt(Qw,m,u?p:g)(y):u?m(y):g(y)}function p(y){return e.attempt(Jw,m,g)(y)}function m(y){return t(y)}function g(y){return l._balanced=!0,n(y)}}function e3(e,t,n){return i;function i(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),o}function o(g){return it(g)?fo(e,l)(g):l(g)}function l(g){return g===41?m(g):Xg(e,u,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function u(g){return it(g)?fo(e,h)(g):m(g)}function d(g){return n(g)}function h(g){return g===34||g===39||g===40?e1(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function p(g){return it(g)?fo(e,m)(g):m(g)}function m(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):n(g)}}function t3(e,t,n){const i=this;return o;function o(d){return Zg.call(i,e,l,u,"reference","referenceMarker","referenceString")(d)}function l(d){return i.parser.defined.includes(Br(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(d):n(d)}function u(d){return n(d)}}function r3(e,t,n){return i;function i(l){return e.enter("reference"),e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),o}function o(l){return l===93?(e.enter("referenceMarker"),e.consume(l),e.exit("referenceMarker"),e.exit("reference"),t):n(l)}}const n3={name:"labelStartImage",resolveAll:vd.resolveAll,tokenize:s3};function s3(e,t,n){const i=this;return o;function o(d){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(d),e.exit("labelImageMarker"),l}function l(d){return d===91?(e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelImage"),u):n(d)}function u(d){return d===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):t(d)}}const i3={name:"labelStartLink",resolveAll:vd.resolveAll,tokenize:o3};function o3(e,t,n){const i=this;return o;function o(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),l}function l(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):t(u)}}const au={name:"lineEnding",tokenize:a3};function a3(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Qe(e,t,"linePrefix")}}const Ha={name:"thematicBreak",tokenize:l3};function l3(e,t,n){let i=0,o;return l;function l(p){return e.enter("thematicBreak"),u(p)}function u(p){return o=p,d(p)}function d(p){return p===o?(e.enter("thematicBreakSequence"),h(p)):i>=3&&(p===null||Oe(p))?(e.exit("thematicBreak"),t(p)):n(p)}function h(p){return p===o?(e.consume(p),i++,h):(e.exit("thematicBreakSequence"),Ge(p)?Qe(e,d,"whitespace")(p):d(p))}}const hr={continuation:{tokenize:f3},exit:p3,name:"list",tokenize:d3},c3={partial:!0,tokenize:m3},u3={partial:!0,tokenize:h3};function d3(e,t,n){const i=this,o=i.events[i.events.length-1];let l=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,u=0;return d;function d(b){const w=i.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||b===i.containerState.marker:Vu(b)){if(i.containerState.type||(i.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Ha,n,p)(b):p(b);if(!i.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return n(b)}function h(b){return Vu(b)&&++u<10?(e.consume(b),h):(!i.interrupt||u<2)&&(i.containerState.marker?b===i.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):n(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||b,e.check(So,i.interrupt?n:m,e.attempt(c3,y,g))}function m(b){return i.containerState.initialBlankLine=!0,l++,y(b)}function g(b){return Ge(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),y):n(b)}function y(b){return i.containerState.size=l+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function f3(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(So,o,l);function o(d){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Qe(e,t,"listItemIndent",i.containerState.size+1)(d)}function l(d){return i.containerState.furtherBlankLines||!Ge(d)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,u(d)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(u3,t,u)(d))}function u(d){return i.containerState._closeFlow=!0,i.interrupt=void 0,Qe(e,e.attempt(hr,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function h3(e,t,n){const i=this;return Qe(e,o,"listItemIndent",i.containerState.size+1);function o(l){const u=i.events[i.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===i.containerState.size?t(l):n(l)}}function p3(e){e.exit(this.containerState.type)}function m3(e,t,n){const i=this;return Qe(e,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(l){const u=i.events[i.events.length-1];return!Ge(l)&&u&&u[1].type==="listItemPrefixWhitespace"?t(l):n(l)}}const xm={name:"setextUnderline",resolveTo:g3,tokenize:x3};function g3(e,t){let n=e.length,i,o,l;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!l&&e[n][1].type==="definition"&&(l=n);const u={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",l?(e.splice(o,0,["enter",u,t]),e.splice(l+1,0,["exit",e[i][1],t]),e[i][1].end={...e[l][1].end}):e[i][1]=u,e.push(["exit",u,t]),e}function x3(e,t,n){const i=this;let o;return l;function l(p){let m=i.events.length,g;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){g=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(e.enter("setextHeadingLine"),o=p,u(p)):n(p)}function u(p){return e.enter("setextHeadingLineSequence"),d(p)}function d(p){return p===o?(e.consume(p),d):(e.exit("setextHeadingLineSequence"),Ge(p)?Qe(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||Oe(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const v3={tokenize:y3};function y3(e){const t=this,n=e.attempt(So,i,e.attempt(this.parser.constructs.flowInitial,o,Qe(e,e.attempt(this.parser.constructs.flow,o,e.attempt(jw,o)),"linePrefix")));return n;function i(l){if(l===null){e.consume(l);return}return e.enter("lineEndingBlank"),e.consume(l),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const b3={resolveAll:r1()},w3=t1("string"),k3=t1("text");function t1(e){return{resolveAll:r1(e==="text"?_3:void 0),tokenize:t};function t(n){const i=this,o=this.parser.constructs[e],l=n.attempt(o,u,d);return u;function u(m){return p(m)?l(m):d(m)}function d(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),h}function h(m){return p(m)?(n.exit("data"),l(m)):(n.consume(m),h)}function p(m){if(m===null)return!0;const g=o[m];let y=-1;if(g)for(;++y<g.length;){const b=g[y];if(!b.previous||b.previous.call(i,i.previous))return!0}return!1}}}function r1(e){return t;function t(n,i){let o=-1,l;for(;++o<=n.length;)l===void 0?n[o]&&n[o][1].type==="data"&&(l=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==l+2&&(n[l][1].end=n[o-1][1].end,n.splice(l+2,o-l-2),o=l+2),l=void 0);return e?e(n,i):n}}function _3(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],o=t.sliceStream(i);let l=o.length,u=-1,d=0,h;for(;l--;){const p=o[l];if(typeof p=="string"){for(u=p.length;p.charCodeAt(u-1)===32;)d++,u--;if(u)break;u=-1}else if(p===-2)h=!0,d++;else if(p!==-1){l++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(d=0),d){const p={type:n===e.length||h||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?u:i.start._bufferIndex+u,_index:i.start._index+l,line:i.end.line,column:i.end.column-d,offset:i.end.offset-d},end:{...i.end}};i.end={...p.start},i.start.offset===i.end.offset?Object.assign(i,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const j3={42:hr,43:hr,45:hr,48:hr,49:hr,50:hr,51:hr,52:hr,53:hr,54:hr,55:hr,56:hr,57:hr,62:Kg},S3={91:Pw},N3={[-2]:ou,[-1]:ou,32:ou},C3={35:zw,42:Ha,45:[xm,Ha],60:$w,61:xm,95:Ha,96:mm,126:mm},E3={38:Jg,92:Qg},P3={[-5]:au,[-4]:au,[-3]:au,33:n3,38:Jg,42:Hu,60:[iw,Ww],91:i3,92:[Aw,Qg],93:vd,95:Hu,96:vw},T3={null:[Hu,b3]},L3={null:[42,95]},I3={null:[]},A3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:L3,contentInitial:S3,disable:I3,document:j3,flow:C3,flowInitial:N3,insideSpan:T3,string:E3,text:P3},Symbol.toStringTag,{value:"Module"}));function R3(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},l=[];let u=[],d=[];const h={attempt:J(G),check:J(z),consume:A,enter:I,exit:D,interrupt:J(z,{interrupt:!0})},p={code:null,containerState:{},defineSkip:C,events:[],now:w,parser:e,previous:null,sliceSerialize:y,sliceStream:b,write:g};let m=t.tokenize.call(p,h);return t.resolveAll&&l.push(t),p;function g($){return u=Lr(u,$),j(),u[u.length-1]!==null?[]:(K(t,0),p.events=ol(l,p.events,p),p.events)}function y($,Z){return M3(b($),Z)}function b($){return z3(u,$)}function w(){const{_bufferIndex:$,_index:Z,line:ue,column:re,offset:ee}=i;return{_bufferIndex:$,_index:Z,line:ue,column:re,offset:ee}}function C($){o[$.line]=$.column,O()}function j(){let $;for(;i._index<u.length;){const Z=u[i._index];if(typeof Z=="string")for($=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===$&&i._bufferIndex<Z.length;)P(Z.charCodeAt(i._bufferIndex));else P(Z)}}function P($){m=m($)}function A($){Oe($)?(i.line++,i.column=1,i.offset+=$===-3?2:1,O()):$!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===u[i._index].length&&(i._bufferIndex=-1,i._index++)),p.previous=$}function I($,Z){const ue=Z||{};return ue.type=$,ue.start=w(),p.events.push(["enter",ue,p]),d.push(ue),ue}function D($){const Z=d.pop();return Z.end=w(),p.events.push(["exit",Z,p]),Z}function G($,Z){K($,Z.from)}function z($,Z){Z.restore()}function J($,Z){return ue;function ue(re,ee,ve){let Se,X,ae,S;return Array.isArray(re)?H(re):"tokenize"in re?H([re]):L(re);function L(pe){return Pe;function Pe(_e){const ne=_e!==null&&pe[_e],Ne=_e!==null&&pe.null,Re=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(Ne)?Ne:Ne?[Ne]:[]];return H(Re)(_e)}}function H(pe){return Se=pe,X=0,pe.length===0?ve:E(pe[X])}function E(pe){return Pe;function Pe(_e){return S=oe(),ae=pe,pe.partial||(p.currentConstruct=pe),pe.name&&p.parser.constructs.disable.null.includes(pe.name)?fe():pe.tokenize.call(Z?Object.assign(Object.create(p),Z):p,h,ke,fe)(_e)}}function ke(pe){return $(ae,S),ee}function fe(pe){return S.restore(),++X<Se.length?E(Se[X]):ve}}}function K($,Z){$.resolveAll&&!l.includes($)&&l.push($),$.resolve&&_r(p.events,Z,p.events.length-Z,$.resolve(p.events.slice(Z),p)),$.resolveTo&&(p.events=$.resolveTo(p.events,p))}function oe(){const $=w(),Z=p.previous,ue=p.currentConstruct,re=p.events.length,ee=Array.from(d);return{from:re,restore:ve};function ve(){i=$,p.previous=Z,p.currentConstruct=ue,p.events.length=re,d=ee,O()}}function O(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function z3(e,t){const n=t.start._index,i=t.start._bufferIndex,o=t.end._index,l=t.end._bufferIndex;let u;if(n===o)u=[e[n].slice(i,l)];else{if(u=e.slice(n,o),i>-1){const d=u[0];typeof d=="string"?u[0]=d.slice(i):u.shift()}l>0&&u.push(e[o].slice(0,l))}return u}function M3(e,t){let n=-1;const i=[];let o;for(;++n<e.length;){const l=e[n];let u;if(typeof l=="string")u=l;else switch(l){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&o)continue;u=" ";break}default:u=String.fromCharCode(l)}o=l===-2,i.push(u)}return i.join("")}function O3(e){const i={constructs:Wg([A3,...(e||{}).extensions||[]]),content:o(Xb),defined:[],document:o(ew),flow:o(v3),lazy:{},string:o(w3),text:o(k3)};return i;function o(l){return u;function u(d){return R3(i,l,d)}}}function D3(e){for(;!Yg(e););return e}const vm=/[\0\t\n\r]/g;function $3(){let e=1,t="",n=!0,i;return o;function o(l,u,d){const h=[];let p,m,g,y,b;for(l=t+(typeof l=="string"?l.toString():new TextDecoder(u||void 0).decode(l)),g=0,t="",n&&(l.charCodeAt(0)===65279&&g++,n=void 0);g<l.length;){if(vm.lastIndex=g,p=vm.exec(l),y=p&&p.index!==void 0?p.index:l.length,b=l.charCodeAt(y),!p){t=l.slice(g);break}if(b===10&&g===y&&i)h.push(-3),i=void 0;else switch(i&&(h.push(-5),i=void 0),g<y&&(h.push(l.slice(g,y)),e+=y-g),b){case 0:{h.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,h.push(-2);e++<m;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:i=!0,e=1}g=y+1}return d&&(i&&h.push(-5),t&&h.push(t),h.push(null)),h}}const F3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function U3(e){return e.replace(F3,B3)}function B3(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),l=o===120||o===88;return Gg(n.slice(l?2:1),l?16:10)}return xd(n)||e}const n1={}.hasOwnProperty;function q3(e,t,n){return typeof t!="string"&&(n=t,t=void 0),V3(n)(D3(O3(n).document().write($3()(e,t,!0))))}function V3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(nt),autolinkProtocol:oe,autolinkEmail:oe,atxHeading:l(mt),blockQuote:l(Ne),characterEscape:oe,characterReference:oe,codeFenced:l(Re),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(Re,u),codeText:l(qe,u),codeTextData:oe,data:oe,codeFlowValue:oe,definition:l(De),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(rt),hardBreakEscape:l(Ye),hardBreakTrailing:l(Ye),htmlFlow:l(Ct,u),htmlFlowData:oe,htmlText:l(Ct,u),htmlTextData:oe,image:l(Tt),label:u,link:l(nt),listItem:l(yt),listItemValue:y,listOrdered:l(Lt,g),listUnordered:l(Lt),paragraph:l(de),reference:E,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(mt),strong:l(bt),thematicBreak:l(sr)},exit:{atxHeading:h(),atxHeadingSequence:G,autolink:h(),autolinkEmail:ne,autolinkProtocol:_e,blockQuote:h(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:pe,characterReference:Pe,codeFenced:h(j),codeFencedFence:C,codeFencedFenceInfo:b,codeFencedFenceMeta:w,codeFlowValue:O,codeIndented:h(P),codeText:h(ee),codeTextData:O,data:O,definition:h(),definitionDestinationString:D,definitionLabelString:A,definitionTitleString:I,emphasis:h(),hardBreakEscape:h(Z),hardBreakTrailing:h(Z),htmlFlow:h(ue),htmlFlowData:O,htmlText:h(re),htmlTextData:O,image:h(Se),label:ae,labelText:X,lineEnding:$,link:h(ve),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ke,resourceDestinationString:S,resourceTitleString:L,resource:H,setextHeading:h(K),setextHeadingLineSequence:J,setextHeadingText:z,strong:h(),thematicBreak:h()}};s1(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(Y){let le={type:"root",children:[]};const Ae={stack:[le],tokenStack:[],config:t,enter:d,exit:p,buffer:u,resume:m,data:n},Fe=[];let ye=-1;for(;++ye<Y.length;)if(Y[ye][1].type==="listOrdered"||Y[ye][1].type==="listUnordered")if(Y[ye][0]==="enter")Fe.push(ye);else{const ht=Fe.pop();ye=o(Y,ht,ye)}for(ye=-1;++ye<Y.length;){const ht=t[Y[ye][0]];n1.call(ht,Y[ye][1].type)&&ht[Y[ye][1].type].call(Object.assign({sliceSerialize:Y[ye][2].sliceSerialize},Ae),Y[ye][1])}if(Ae.tokenStack.length>0){const ht=Ae.tokenStack[Ae.tokenStack.length-1];(ht[1]||ym).call(Ae,void 0,ht[0])}for(le.position={start:Bn(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:Bn(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},ye=-1;++ye<t.transforms.length;)le=t.transforms[ye](le)||le;return le}function o(Y,le,Ae){let Fe=le-1,ye=-1,ht=!1,jt,st,mr,gr;for(;++Fe<=Ae;){const gt=Y[Fe];switch(gt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{gt[0]==="enter"?ye++:ye--,gr=void 0;break}case"lineEndingBlank":{gt[0]==="enter"&&(jt&&!gr&&!ye&&!mr&&(mr=Fe),gr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gr=void 0}if(!ye&&gt[0]==="enter"&&gt[1].type==="listItemPrefix"||ye===-1&&gt[0]==="exit"&&(gt[1].type==="listUnordered"||gt[1].type==="listOrdered")){if(jt){let Ot=Fe;for(st=void 0;Ot--;){const Ve=Y[Ot];if(Ve[1].type==="lineEnding"||Ve[1].type==="lineEndingBlank"){if(Ve[0]==="exit")continue;st&&(Y[st][1].type="lineEndingBlank",ht=!0),Ve[1].type="lineEnding",st=Ot}else if(!(Ve[1].type==="linePrefix"||Ve[1].type==="blockQuotePrefix"||Ve[1].type==="blockQuotePrefixWhitespace"||Ve[1].type==="blockQuoteMarker"||Ve[1].type==="listItemIndent"))break}mr&&(!st||mr<st)&&(jt._spread=!0),jt.end=Object.assign({},st?Y[st][1].start:gt[1].end),Y.splice(st||Fe,0,["exit",jt,gt[2]]),Fe++,Ae++}if(gt[1].type==="listItemPrefix"){const Ot={type:"listItem",_spread:!1,start:Object.assign({},gt[1].start),end:void 0};jt=Ot,Y.splice(Fe,0,["enter",Ot,gt[2]]),Fe++,Ae++,mr=void 0,gr=!0}}}return Y[le][1]._spread=ht,Ae}function l(Y,le){return Ae;function Ae(Fe){d.call(this,Y(Fe),Fe),le&&le.call(this,Fe)}}function u(){this.stack.push({type:"fragment",children:[]})}function d(Y,le,Ae){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([le,Ae||void 0]),Y.position={start:Bn(le.start),end:void 0}}function h(Y){return le;function le(Ae){Y&&Y.call(this,Ae),p.call(this,Ae)}}function p(Y,le){const Ae=this.stack.pop(),Fe=this.tokenStack.pop();if(Fe)Fe[0].type!==Y.type&&(le?le.call(this,Y,Fe[0]):(Fe[1]||ym).call(this,Y,Fe[0]));else throw new Error("Cannot close `"+Y.type+"` ("+uo({start:Y.start,end:Y.end})+"): its not open");Ae.position.end=Bn(Y.end)}function m(){return gd(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function y(Y){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function b(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.lang=Y}function w(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.meta=Y}function C(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function j(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function P(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y.replace(/(\r?\n|\r)$/g,"")}function A(Y){const le=this.resume(),Ae=this.stack[this.stack.length-1];Ae.label=le,Ae.identifier=Br(this.sliceSerialize(Y)).toLowerCase()}function I(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.title=Y}function D(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.url=Y}function G(Y){const le=this.stack[this.stack.length-1];if(!le.depth){const Ae=this.sliceSerialize(Y).length;le.depth=Ae}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function J(Y){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function K(){this.data.setextHeadingSlurpLineEnding=void 0}function oe(Y){const Ae=this.stack[this.stack.length-1].children;let Fe=Ae[Ae.length-1];(!Fe||Fe.type!=="text")&&(Fe=wt(),Fe.position={start:Bn(Y.start),end:void 0},Ae.push(Fe)),this.stack.push(Fe)}function O(Y){const le=this.stack.pop();le.value+=this.sliceSerialize(Y),le.position.end=Bn(Y.end)}function $(Y){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ae=le.children[le.children.length-1];Ae.position.end=Bn(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(le.type)&&(oe.call(this,Y),O.call(this,Y))}function Z(){this.data.atHardBreak=!0}function ue(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function re(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function ee(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function ve(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=le,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function Se(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=le,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function X(Y){const le=this.sliceSerialize(Y),Ae=this.stack[this.stack.length-2];Ae.label=U3(le),Ae.identifier=Br(le).toLowerCase()}function ae(){const Y=this.stack[this.stack.length-1],le=this.resume(),Ae=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ae.type==="link"){const Fe=Y.children;Ae.children=Fe}else Ae.alt=le}function S(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.url=Y}function L(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.title=Y}function H(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function ke(Y){const le=this.resume(),Ae=this.stack[this.stack.length-1];Ae.label=le,Ae.identifier=Br(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function fe(Y){this.data.characterReferenceType=Y.type}function pe(Y){const le=this.sliceSerialize(Y),Ae=this.data.characterReferenceType;let Fe;Ae?(Fe=Gg(le,Ae==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Fe=xd(le);const ye=this.stack[this.stack.length-1];ye.value+=Fe}function Pe(Y){const le=this.stack.pop();le.position.end=Bn(Y.end)}function _e(Y){O.call(this,Y);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(Y)}function ne(Y){O.call(this,Y);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(Y)}function Ne(){return{type:"blockquote",children:[]}}function Re(){return{type:"code",lang:null,meta:null,value:""}}function qe(){return{type:"inlineCode",value:""}}function De(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function rt(){return{type:"emphasis",children:[]}}function mt(){return{type:"heading",depth:0,children:[]}}function Ye(){return{type:"break"}}function Ct(){return{type:"html",value:""}}function Tt(){return{type:"image",title:null,url:"",alt:null}}function nt(){return{type:"link",title:null,url:"",children:[]}}function Lt(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function yt(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function de(){return{type:"paragraph",children:[]}}function bt(){return{type:"strong",children:[]}}function wt(){return{type:"text",value:""}}function sr(){return{type:"thematicBreak"}}}function Bn(e){return{line:e.line,column:e.column,offset:e.offset}}function s1(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?s1(e,i):H3(e,i)}}function H3(e,t){let n;for(n in t)if(n1.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function ym(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+uo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+uo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+uo({start:t.start,end:t.end})+") is still open")}function W3(e){const t=this;t.parser=n;function n(i){return q3(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function G3(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function K3(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Q3(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function J3(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Y3(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function X3(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),o=vi(i.toLowerCase()),l=e.footnoteOrder.indexOf(i);let u,d=e.footnoteCounts.get(i);d===void 0?(d=0,e.footnoteOrder.push(i),u=e.footnoteOrder.length):u=l+1,d+=1,e.footnoteCounts.set(i,d);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function Z3(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function e4(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function i1(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const o=e.all(t),l=o[0];l&&l.type==="text"?l.value="["+l.value:o.unshift({type:"text",value:"["});const u=o[o.length-1];return u&&u.type==="text"?u.value+=i:o.push({type:"text",value:i}),o}function t4(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return i1(e,t);const o={src:vi(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,l),e.applyData(t,l)}function r4(e,t){const n={src:vi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function n4(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function s4(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return i1(e,t);const o={href:vi(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,l),e.applyData(t,l)}function i4(e,t){const n={href:vi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function o4(e,t,n){const i=e.all(t),o=n?a4(n):o1(t),l={},u=[];if(typeof t.checked=="boolean"){const m=i[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let d=-1;for(;++d<i.length;){const m=i[d];(o||d!==0||m.type!=="element"||m.tagName!=="p")&&u.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!o?u.push(...m.children):u.push(m)}const h=i[i.length-1];h&&(o||h.type!=="element"||h.tagName!=="p")&&u.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:u};return e.patch(t,p),e.applyData(t,p)}function a4(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=o1(n[i])}return t}function o1(e){const t=e.spread;return t??e.children.length>1}function l4(e,t){const n={},i=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<i.length;){const u=i[o];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,l),e.applyData(t,l)}function c4(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function u4(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function d4(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function f4(e,t){const n=e.all(t),i=n.shift(),o=[];if(i){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],u),o.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},d=fd(t.children[1]),h=$g(t.children[t.children.length-1]);d&&h&&(u.position={start:d,end:h}),o.push(u)}const l={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,l),e.applyData(t,l)}function h4(e,t,n){const i=n?n.children:void 0,l=(i?i.indexOf(t):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,d=u?u.length:t.children.length;let h=-1;const p=[];for(;++h<d;){const g=t.children[h],y={},b=u?u[h]:void 0;b&&(y.align=b);let w={type:"element",tagName:l,properties:y,children:[]};g&&(w.children=e.all(g),e.patch(g,w),w=e.applyData(g,w)),p.push(w)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,m),e.applyData(t,m)}function p4(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const bm=9,wm=32;function m4(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),o=0;const l=[];for(;i;)l.push(km(t.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(t);return l.push(km(t.slice(o),o>0,!1)),l.join("")}function km(e,t,n){let i=0,o=e.length;if(t){let l=e.codePointAt(i);for(;l===bm||l===wm;)i++,l=e.codePointAt(i)}if(n){let l=e.codePointAt(o-1);for(;l===bm||l===wm;)o--,l=e.codePointAt(o-1)}return o>i?e.slice(i,o):""}function g4(e,t){const n={type:"text",value:m4(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function x4(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const v4={blockquote:G3,break:K3,code:Q3,delete:J3,emphasis:Y3,footnoteReference:X3,heading:Z3,html:e4,imageReference:t4,image:r4,inlineCode:n4,linkReference:s4,link:i4,listItem:o4,list:l4,paragraph:c4,root:u4,strong:d4,table:f4,tableCell:p4,tableRow:h4,text:g4,thematicBreak:x4,toml:$a,yaml:$a,definition:$a,footnoteDefinition:$a};function $a(){}const a1=-1,al=0,ho=1,Ya=2,yd=3,bd=4,wd=5,kd=6,l1=7,c1=8,_m=typeof self=="object"?self:globalThis,y4=(e,t)=>{const n=(o,l)=>(e.set(l,o),o),i=o=>{if(e.has(o))return e.get(o);const[l,u]=t[o];switch(l){case al:case a1:return n(u,o);case ho:{const d=n([],o);for(const h of u)d.push(i(h));return d}case Ya:{const d=n({},o);for(const[h,p]of u)d[i(h)]=i(p);return d}case yd:return n(new Date(u),o);case bd:{const{source:d,flags:h}=u;return n(new RegExp(d,h),o)}case wd:{const d=n(new Map,o);for(const[h,p]of u)d.set(i(h),i(p));return d}case kd:{const d=n(new Set,o);for(const h of u)d.add(i(h));return d}case l1:{const{name:d,message:h}=u;return n(new _m[d](h),o)}case c1:return n(BigInt(u),o);case"BigInt":return n(Object(BigInt(u)),o);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:d}=new Uint8Array(u);return n(new DataView(d),u)}}return n(new _m[l](u),o)};return i},jm=e=>y4(new Map,e)(0),oi="",{toString:b4}={},{keys:w4}=Object,so=e=>{const t=typeof e;if(t!=="object"||!e)return[al,t];const n=b4.call(e).slice(8,-1);switch(n){case"Array":return[ho,oi];case"Object":return[Ya,oi];case"Date":return[yd,oi];case"RegExp":return[bd,oi];case"Map":return[wd,oi];case"Set":return[kd,oi];case"DataView":return[ho,n]}return n.includes("Array")?[ho,n]:n.includes("Error")?[l1,n]:[Ya,n]},Fa=([e,t])=>e===al&&(t==="function"||t==="symbol"),k4=(e,t,n,i)=>{const o=(u,d)=>{const h=i.push(u)-1;return n.set(d,h),h},l=u=>{if(n.has(u))return n.get(u);let[d,h]=so(u);switch(d){case al:{let m=u;switch(h){case"bigint":d=c1,m=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);m=null;break;case"undefined":return o([a1],u)}return o([d,m],u)}case ho:{if(h){let y=u;return h==="DataView"?y=new Uint8Array(u.buffer):h==="ArrayBuffer"&&(y=new Uint8Array(u)),o([h,[...y]],u)}const m=[],g=o([d,m],u);for(const y of u)m.push(l(y));return g}case Ya:{if(h)switch(h){case"BigInt":return o([h,u.toString()],u);case"Boolean":case"Number":case"String":return o([h,u.valueOf()],u)}if(t&&"toJSON"in u)return l(u.toJSON());const m=[],g=o([d,m],u);for(const y of w4(u))(e||!Fa(so(u[y])))&&m.push([l(y),l(u[y])]);return g}case yd:return o([d,u.toISOString()],u);case bd:{const{source:m,flags:g}=u;return o([d,{source:m,flags:g}],u)}case wd:{const m=[],g=o([d,m],u);for(const[y,b]of u)(e||!(Fa(so(y))||Fa(so(b))))&&m.push([l(y),l(b)]);return g}case kd:{const m=[],g=o([d,m],u);for(const y of u)(e||!Fa(so(y)))&&m.push(l(y));return g}}const{message:p}=u;return o([d,{name:h,message:p}],u)};return l},Sm=(e,{json:t,lossy:n}={})=>{const i=[];return k4(!(t||n),!!t,new Map,i)(e),i},Xa=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?jm(Sm(e,t)):structuredClone(e):(e,t)=>jm(Sm(e,t));function _4(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function j4(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function S4(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||_4,i=e.options.footnoteBackLabel||j4,o=e.options.footnoteLabel||"Footnotes",l=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const m=e.all(p),g=String(p.identifier).toUpperCase(),y=vi(g.toLowerCase());let b=0;const w=[],C=e.footnoteCounts.get(g);for(;C!==void 0&&++b<=C;){w.length>0&&w.push({type:"text",value:" "});let A=typeof n=="string"?n:n(h,b);typeof A=="string"&&(A={type:"text",value:A}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(h,b),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const j=m[m.length-1];if(j&&j.type==="element"&&j.tagName==="p"){const A=j.children[j.children.length-1];A&&A.type==="text"?A.value+=" ":j.children.push({type:"text",value:" "}),j.children.push(...w)}else m.push(...w);const P={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(m,!0)};e.patch(p,P),d.push(P)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Xa(u),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(d,!0)},{type:"text",value:`
`}]}}const ll=(function(e){if(e==null)return P4;if(typeof e=="function")return cl(e);if(typeof e=="object")return Array.isArray(e)?N4(e):C4(e);if(typeof e=="string")return E4(e);throw new Error("Expected function, string, or object as test")});function N4(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ll(e[n]);return cl(i);function i(...o){let l=-1;for(;++l<t.length;)if(t[l].apply(this,o))return!0;return!1}}function C4(e){const t=e;return cl(n);function n(i){const o=i;let l;for(l in e)if(o[l]!==t[l])return!1;return!0}}function E4(e){return cl(t);function t(n){return n&&n.type===e}}function cl(e){return t;function t(n,i,o){return!!(T4(n)&&e.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function P4(){return!0}function T4(e){return e!==null&&typeof e=="object"&&"type"in e}const u1=[],L4=!0,Wu=!1,I4="skip";function d1(e,t,n,i){let o;typeof t=="function"&&typeof n!="function"?(i=n,n=t):o=t;const l=ll(o),u=i?-1:1;d(e,void 0,[])();function d(h,p,m){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const b=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return y;function y(){let b=u1,w,C,j;if((!t||l(h,p,m[m.length-1]||void 0))&&(b=A4(n(h,m)),b[0]===Wu))return b;if("children"in h&&h.children){const P=h;if(P.children&&b[0]!==I4)for(C=(i?P.children.length:-1)+u,j=m.concat(P);C>-1&&C<P.children.length;){const A=P.children[C];if(w=d(A,C,j)(),w[0]===Wu)return w;C=typeof w[1]=="number"?w[1]:C+u}}return b}}}function A4(e){return Array.isArray(e)?e:typeof e=="number"?[L4,e]:e==null?u1:[e]}function _d(e,t,n,i){let o,l,u;typeof t=="function"&&typeof n!="function"?(l=void 0,u=t,o=n):(l=t,u=n,o=i),d1(e,l,d,o);function d(h,p){const m=p[p.length-1],g=m?m.children.indexOf(h):void 0;return u(h,g,m)}}const Gu={}.hasOwnProperty,R4={};function z4(e,t){const n=t||R4,i=new Map,o=new Map,l=new Map,u={...v4,...n.handlers},d={all:p,applyData:O4,definitionById:i,footnoteById:o,footnoteCounts:l,footnoteOrder:[],handlers:u,one:h,options:n,patch:M4,wrap:$4};return _d(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?i:o,y=String(m.identifier).toUpperCase();g.has(y)||g.set(y,m)}}),d;function h(m,g){const y=m.type,b=d.handlers[y];if(Gu.call(d.handlers,y)&&b)return b(d,m,g);if(d.options.passThrough&&d.options.passThrough.includes(y)){if("children"in m){const{children:C,...j}=m,P=Xa(j);return P.children=d.all(m),P}return Xa(m)}return(d.options.unknownHandler||D4)(d,m,g)}function p(m){const g=[];if("children"in m){const y=m.children;let b=-1;for(;++b<y.length;){const w=d.one(y[b],m);if(w){if(b&&y[b-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=Nm(w.value)),!Array.isArray(w)&&w.type==="element")){const C=w.children[0];C&&C.type==="text"&&(C.value=Nm(C.value))}Array.isArray(w)?g.push(...w):g.push(w)}}}return g}}function M4(e,t){e.position&&(t.position=jb(e))}function O4(e,t){let n=t;if(e&&e.data){const i=e.data.hName,o=e.data.hChildren,l=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const u="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:u}}n.type==="element"&&l&&Object.assign(n.properties,Xa(l)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function D4(e,t){const n=t.data||{},i="value"in t&&!(Gu.call(n,"hProperties")||Gu.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function $4(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Nm(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Cm(e,t){const n=z4(e,t),i=n.one(e,void 0),o=S4(n),l=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&l.children.push({type:"text",value:`
`},o),l}function F4(e,t){return e&&"run"in e?async function(n,i){const o=Cm(n,{file:i,...t});await e.run(o,i)}:function(n,i){return Cm(n,{file:i,...e||t})}}function Em(e){if(e)throw e}var lu,Pm;function U4(){if(Pm)return lu;Pm=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},l=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var m=e.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!g)return!1;var y;for(y in p);return typeof y>"u"||e.call(p,y)},u=function(p,m){n&&m.name==="__proto__"?n(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},d=function(p,m){if(m==="__proto__")if(e.call(p,m)){if(i)return i(p,m).value}else return;return p[m]};return lu=function h(){var p,m,g,y,b,w,C=arguments[0],j=1,P=arguments.length,A=!1;for(typeof C=="boolean"&&(A=C,C=arguments[1]||{},j=2),(C==null||typeof C!="object"&&typeof C!="function")&&(C={});j<P;++j)if(p=arguments[j],p!=null)for(m in p)g=d(C,m),y=d(p,m),C!==y&&(A&&y&&(l(y)||(b=o(y)))?(b?(b=!1,w=g&&o(g)?g:[]):w=g&&l(g)?g:{},u(C,{name:m,newValue:h(A,w,y)})):typeof y<"u"&&u(C,{name:m,newValue:y}));return C},lu}var B4=U4();const cu=tl(B4);function Ku(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function q4(){const e=[],t={run:n,use:i};return t;function n(...o){let l=-1;const u=o.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);d(null,...o);function d(h,...p){const m=e[++l];let g=-1;if(h){u(h);return}for(;++g<o.length;)(p[g]===null||p[g]===void 0)&&(p[g]=o[g]);o=p,m?V4(m,d)(...p):u(null,...p)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function V4(e,t){let n;return i;function i(...u){const d=e.length>u.length;let h;d&&u.push(o);try{h=e.apply(this,u)}catch(p){const m=p;if(d&&n)throw m;return o(m)}d||(h&&h.then&&typeof h.then=="function"?h.then(l,o):h instanceof Error?o(h):l(h))}function o(u,...d){n||(n=!0,t(u,...d))}function l(u){o(null,u)}}const Xr={basename:H4,dirname:W4,extname:G4,join:K4,sep:"/"};function H4(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');No(e);let n=0,i=-1,o=e.length,l;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(l){n=o+1;break}}else i<0&&(l=!0,i=o+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let u=-1,d=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(l){n=o+1;break}}else u<0&&(l=!0,u=o+1),d>-1&&(e.codePointAt(o)===t.codePointAt(d--)?d<0&&(i=o):(d=-1,i=u));return n===i?i=u:i<0&&(i=e.length),e.slice(n,i)}function W4(e){if(No(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function G4(e){No(e);let t=e.length,n=-1,i=0,o=-1,l=0,u;for(;t--;){const d=e.codePointAt(t);if(d===47){if(u){i=t+1;break}continue}n<0&&(u=!0,n=t+1),d===46?o<0?o=t:l!==1&&(l=1):o>-1&&(l=-1)}return o<0||n<0||l===0||l===1&&o===n-1&&o===i+1?"":e.slice(o,n)}function K4(...e){let t=-1,n;for(;++t<e.length;)No(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Q4(n)}function Q4(e){No(e);const t=e.codePointAt(0)===47;let n=J4(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function J4(e,t){let n="",i=0,o=-1,l=0,u=-1,d,h;for(;++u<=e.length;){if(u<e.length)d=e.codePointAt(u);else{if(d===47)break;d=47}if(d===47){if(!(o===u-1||l===1))if(o!==u-1&&l===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",i=0):(n=n.slice(0,h),i=n.length-1-n.lastIndexOf("/")),o=u,l=0;continue}}else if(n.length>0){n="",i=0,o=u,l=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(o+1,u):n=e.slice(o+1,u),i=u-o-1;o=u,l=0}else d===46&&l>-1?l++:l=-1}return n}function No(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Y4={cwd:X4};function X4(){return"/"}function Qu(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Z4(e){if(typeof e=="string")e=new URL(e);else if(!Qu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return e5(e)}function e5(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const uu=["history","path","basename","stem","extname","dirname"];class f1{constructor(t){let n;t?Qu(t)?n={path:t}:typeof t=="string"||t5(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Y4.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<uu.length;){const l=uu[i];l in n&&n[l]!==void 0&&n[l]!==null&&(this[l]=l==="history"?[...n[l]]:n[l])}let o;for(o in n)uu.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?Xr.basename(this.path):void 0}set basename(t){fu(t,"basename"),du(t,"basename"),this.path=Xr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Xr.dirname(this.path):void 0}set dirname(t){Tm(this.basename,"dirname"),this.path=Xr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Xr.extname(this.path):void 0}set extname(t){if(du(t,"extname"),Tm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Xr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Qu(t)&&(t=Z4(t)),fu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Xr.basename(this.path,this.extname):void 0}set stem(t){fu(t,"stem"),du(t,"stem"),this.path=Xr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const o=this.message(t,n,i);throw o.fatal=!0,o}info(t,n,i){const o=this.message(t,n,i);return o.fatal=void 0,o}message(t,n,i){const o=new Xt(t,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function du(e,t){if(e&&e.includes(Xr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Xr.sep+"`")}function fu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Tm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function t5(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const r5=(function(e){const i=this.constructor.prototype,o=i[e],l=function(){return o.apply(l,arguments)};return Object.setPrototypeOf(l,i),l}),n5={}.hasOwnProperty;class jd extends r5{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=q4()}copy(){const t=new jd;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(cu(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(mu("data",this.frozen),this.namespace[t]=n,this):n5.call(this.namespace,t)&&this.namespace[t]||void 0:t?(mu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(t,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ua(t),i=this.parser||this.Parser;return hu("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),hu("process",this.parser||this.Parser),pu("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(l,u){const d=Ua(t),h=i.parse(d);i.run(h,d,function(m,g,y){if(m||!g||!y)return p(m);const b=g,w=i.stringify(b,y);o5(w)?y.value=w:y.result=w,p(m,y)});function p(m,g){m||!g?u(m):l?l(g):n(void 0,g)}}}processSync(t){let n=!1,i;return this.freeze(),hu("processSync",this.parser||this.Parser),pu("processSync",this.compiler||this.Compiler),this.process(t,o),Im("processSync","process",n),i;function o(l,u){n=!0,Em(l),i=u}}run(t,n,i){Lm(t),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?l(void 0,i):new Promise(l);function l(u,d){const h=Ua(n);o.run(t,h,p);function p(m,g,y){const b=g||t;m?d(m):u?u(b):i(void 0,b,y)}}}runSync(t,n){let i=!1,o;return this.run(t,n,l),Im("runSync","run",i),o;function l(u,d){Em(u),o=d,i=!0}}stringify(t,n){this.freeze();const i=Ua(n),o=this.compiler||this.Compiler;return pu("stringify",o),Lm(t),o(t,i)}use(t,...n){const i=this.attachers,o=this.namespace;if(mu("use",this.frozen),t!=null)if(typeof t=="function")h(t,n);else if(typeof t=="object")Array.isArray(t)?d(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function l(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[m,...g]=p;h(m,g)}else u(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function u(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(p.plugins),p.settings&&(o.settings=cu(!0,o.settings,p.settings))}function d(p){let m=-1;if(p!=null)if(Array.isArray(p))for(;++m<p.length;){const g=p[m];l(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,m){let g=-1,y=-1;for(;++g<i.length;)if(i[g][0]===p){y=g;break}if(y===-1)i.push([p,...m]);else if(m.length>0){let[b,...w]=m;const C=i[y][1];Ku(C)&&Ku(b)&&(b=cu(!0,C,b)),i[y]=[p,b,...w]}}}}const s5=new jd().freeze();function hu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function pu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function mu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Lm(e){if(!Ku(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Im(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ua(e){return i5(e)?e:new f1(e)}function i5(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function o5(e){return typeof e=="string"||a5(e)}function a5(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const l5="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Am=[],Rm={allowDangerousHtml:!0},c5=/^(https?|ircs?|mailto|xmpp)$/i,u5=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function d5(e){const t=f5(e),n=h5(e);return p5(t.runSync(t.parse(n),n),e)}function f5(e){const t=e.rehypePlugins||Am,n=e.remarkPlugins||Am,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Rm}:Rm;return s5().use(W3).use(n).use(F4,i).use(t)}function h5(e){const t=e.children||"",n=new f1;return typeof t=="string"&&(n.value=t),n}function p5(e,t){const n=t.allowedElements,i=t.allowElement,o=t.components,l=t.disallowedElements,u=t.skipHtml,d=t.unwrapDisallowed,h=t.urlTransform||m5;for(const m of u5)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+l5+m.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),_d(e,p),Pb(e,{Fragment:a.Fragment,components:o,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function p(m,g,y){if(m.type==="raw"&&y&&typeof g=="number")return u?y.children.splice(g,1):y.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let b;for(b in iu)if(Object.hasOwn(iu,b)&&Object.hasOwn(m.properties,b)){const w=m.properties[b],C=iu[b];(C===null||C.includes(m.tagName))&&(m.properties[b]=h(String(w||""),b,m))}}if(m.type==="element"){let b=n?!n.includes(m.tagName):l?l.includes(m.tagName):!1;if(!b&&i&&typeof g=="number"&&(b=!i(m,g,y)),b&&y&&typeof g=="number")return d&&m.children?y.children.splice(g,1,...m.children):y.children.splice(g,1),g}}}function m5(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||i!==-1&&t>i||c5.test(e.slice(0,t))?e:""}function zm(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(t);for(;o!==-1;)i++,o=n.indexOf(t,o+t.length);return i}function g5(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function x5(e,t,n){const o=ll((n||{}).ignore||[]),l=v5(t);let u=-1;for(;++u<l.length;)d1(e,"text",d);function d(p,m){let g=-1,y;for(;++g<m.length;){const b=m[g],w=y?y.children:void 0;if(o(b,w?w.indexOf(b):void 0,y))return;y=b}if(y)return h(p,m)}function h(p,m){const g=m[m.length-1],y=l[u][0],b=l[u][1];let w=0;const j=g.children.indexOf(p);let P=!1,A=[];y.lastIndex=0;let I=y.exec(p.value);for(;I;){const D=I.index,G={index:I.index,input:I.input,stack:[...m,p]};let z=b(...I,G);if(typeof z=="string"&&(z=z.length>0?{type:"text",value:z}:void 0),z===!1?y.lastIndex=D+1:(w!==D&&A.push({type:"text",value:p.value.slice(w,D)}),Array.isArray(z)?A.push(...z):z&&A.push(z),w=D+I[0].length,P=!0),!y.global)break;I=y.exec(p.value)}return P?(w<p.value.length&&A.push({type:"text",value:p.value.slice(w)}),g.children.splice(j,1,...A)):A=[p],j+A.length}}function v5(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const o=n[i];t.push([y5(o[0]),b5(o[1])])}return t}function y5(e){return typeof e=="string"?new RegExp(g5(e),"g"):e}function b5(e){return typeof e=="function"?e:function(){return e}}const gu="phrasing",xu=["autolink","link","image","label"];function w5(){return{transforms:[E5],enter:{literalAutolink:_5,literalAutolinkEmail:vu,literalAutolinkHttp:vu,literalAutolinkWww:vu},exit:{literalAutolink:C5,literalAutolinkEmail:N5,literalAutolinkHttp:j5,literalAutolinkWww:S5}}}function k5(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:gu,notInConstruct:xu},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:gu,notInConstruct:xu},{character:":",before:"[ps]",after:"\\/",inConstruct:gu,notInConstruct:xu}]}}function _5(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function vu(e){this.config.enter.autolinkProtocol.call(this,e)}function j5(e){this.config.exit.autolinkProtocol.call(this,e)}function S5(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function N5(e){this.config.exit.autolinkEmail.call(this,e)}function C5(e){this.exit(e)}function E5(e){x5(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,P5],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),T5]],{ignore:["link","linkReference"]})}function P5(e,t,n,i,o){let l="";if(!h1(o)||(/^w/i.test(t)&&(n=t+n,t="",l="http://"),!L5(n)))return!1;const u=I5(n+i);if(!u[0])return!1;const d={type:"link",title:null,url:l+t+u[0],children:[{type:"text",value:t+u[0]}]};return u[1]?[d,{type:"text",value:u[1]}]:d}function T5(e,t,n,i){return!h1(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function L5(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function I5(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const o=zm(e,"(");let l=zm(e,")");for(;i!==-1&&o>l;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),l++;return[e,n]}function h1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||gs(n)||il(n))&&(!t||n!==47)}p1.peek=U5;function A5(){this.buffer()}function R5(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function z5(){this.buffer()}function M5(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function O5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function D5(e){this.exit(e)}function $5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Br(this.sliceSerialize(e)).toLowerCase(),n.label=t}function F5(e){this.exit(e)}function U5(){return"["}function p1(e,t,n,i){const o=n.createTracker(i);let l=o.move("[^");const u=n.enter("footnoteReference"),d=n.enter("reference");return l+=o.move(n.safe(n.associationId(e),{after:"]",before:l})),d(),u(),l+=o.move("]"),l}function B5(){return{enter:{gfmFootnoteCallString:A5,gfmFootnoteCall:R5,gfmFootnoteDefinitionLabelString:z5,gfmFootnoteDefinition:M5},exit:{gfmFootnoteCallString:O5,gfmFootnoteCall:D5,gfmFootnoteDefinitionLabelString:$5,gfmFootnoteDefinition:F5}}}function q5(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:p1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,o,l,u){const d=l.createTracker(u);let h=d.move("[^");const p=l.enter("footnoteDefinition"),m=l.enter("label");return h+=d.move(l.safe(l.associationId(i),{before:h,after:"]"})),m(),h+=d.move("]:"),i.children&&i.children.length>0&&(d.shift(4),h+=d.move((t?`
`:" ")+l.indentLines(l.containerFlow(i,d.current()),t?m1:V5))),p(),h}}function V5(e,t,n){return t===0?e:m1(e,t,n)}function m1(e,t,n){return(n?"":"    ")+e}const H5=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];g1.peek=J5;function W5(){return{canContainEols:["delete"],enter:{strikethrough:K5},exit:{strikethrough:Q5}}}function G5(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:H5}],handlers:{delete:g1}}}function K5(e){this.enter({type:"delete",children:[]},e)}function Q5(e){this.exit(e)}function g1(e,t,n,i){const o=n.createTracker(i),l=n.enter("strikethrough");let u=o.move("~~");return u+=n.containerPhrasing(e,{...o.current(),before:u,after:"~"}),u+=o.move("~~"),l(),u}function J5(){return"~"}function Y5(e){return e.length}function X5(e,t){const n=t||{},i=(n.align||[]).concat(),o=n.stringLength||Y5,l=[],u=[],d=[],h=[];let p=0,m=-1;for(;++m<e.length;){const C=[],j=[];let P=-1;for(e[m].length>p&&(p=e[m].length);++P<e[m].length;){const A=Z5(e[m][P]);if(n.alignDelimiters!==!1){const I=o(A);j[P]=I,(h[P]===void 0||I>h[P])&&(h[P]=I)}C.push(A)}u[m]=C,d[m]=j}let g=-1;if(typeof i=="object"&&"length"in i)for(;++g<p;)l[g]=Mm(i[g]);else{const C=Mm(i);for(;++g<p;)l[g]=C}g=-1;const y=[],b=[];for(;++g<p;){const C=l[g];let j="",P="";C===99?(j=":",P=":"):C===108?j=":":C===114&&(P=":");let A=n.alignDelimiters===!1?1:Math.max(1,h[g]-j.length-P.length);const I=j+"-".repeat(A)+P;n.alignDelimiters!==!1&&(A=j.length+A+P.length,A>h[g]&&(h[g]=A),b[g]=A),y[g]=I}u.splice(1,0,y),d.splice(1,0,b),m=-1;const w=[];for(;++m<u.length;){const C=u[m],j=d[m];g=-1;const P=[];for(;++g<p;){const A=C[g]||"";let I="",D="";if(n.alignDelimiters!==!1){const G=h[g]-(j[g]||0),z=l[g];z===114?I=" ".repeat(G):z===99?G%2?(I=" ".repeat(G/2+.5),D=" ".repeat(G/2-.5)):(I=" ".repeat(G/2),D=I):D=" ".repeat(G)}n.delimiterStart!==!1&&!g&&P.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&A==="")&&(n.delimiterStart!==!1||g)&&P.push(" "),n.alignDelimiters!==!1&&P.push(I),P.push(A),n.alignDelimiters!==!1&&P.push(D),n.padding!==!1&&P.push(" "),(n.delimiterEnd!==!1||g!==p-1)&&P.push("|")}w.push(n.delimiterEnd===!1?P.join("").replace(/ +$/,""):P.join(""))}return w.join(`
`)}function Z5(e){return e==null?"":String(e)}function Mm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function ek(e,t,n,i){const o=n.enter("blockquote"),l=n.createTracker(i);l.move("> "),l.shift(2);const u=n.indentLines(n.containerFlow(e,l.current()),tk);return o(),u}function tk(e,t,n){return">"+(n?"":" ")+e}function rk(e,t){return Om(e,t.inConstruct,!0)&&!Om(e,t.notInConstruct,!1)}function Om(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Dm(e,t,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&rk(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function nk(e,t){const n=String(e);let i=n.indexOf(t),o=i,l=0,u=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++l>u&&(u=l):l=1,o=i+t.length,i=n.indexOf(t,o);return u}function sk(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ik(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function ok(e,t,n,i){const o=ik(n),l=e.value||"",u=o==="`"?"GraveAccent":"Tilde";if(sk(e,n)){const g=n.enter("codeIndented"),y=n.indentLines(l,ak);return g(),y}const d=n.createTracker(i),h=o.repeat(Math.max(nk(l,o)+1,3)),p=n.enter("codeFenced");let m=d.move(h);if(e.lang){const g=n.enter(`codeFencedLang${u}`);m+=d.move(n.safe(e.lang,{before:m,after:" ",encode:["`"],...d.current()})),g()}if(e.lang&&e.meta){const g=n.enter(`codeFencedMeta${u}`);m+=d.move(" "),m+=d.move(n.safe(e.meta,{before:m,after:`
`,encode:["`"],...d.current()})),g()}return m+=d.move(`
`),l&&(m+=d.move(l+`
`)),m+=d.move(h),p(),m}function ak(e,t,n){return(n?"":"    ")+e}function Sd(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function lk(e,t,n,i){const o=Sd(n),l=o==='"'?"Quote":"Apostrophe",u=n.enter("definition");let d=n.enter("label");const h=n.createTracker(i);let p=h.move("[");return p+=h.move(n.safe(n.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),d(),!e.url||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),d(),e.title&&(d=n.enter(`title${l}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),u(),p}function ck(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function bo(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Za(e,t,n){const i=pi(e),o=pi(t);return i===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}x1.peek=uk;function x1(e,t,n,i){const o=ck(n),l=n.enter("emphasis"),u=n.createTracker(i),d=u.move(o);let h=u.move(n.containerPhrasing(e,{after:o,before:d,...u.current()}));const p=h.charCodeAt(0),m=Za(i.before.charCodeAt(i.before.length-1),p,o);m.inside&&(h=bo(p)+h.slice(1));const g=h.charCodeAt(h.length-1),y=Za(i.after.charCodeAt(0),g,o);y.inside&&(h=h.slice(0,-1)+bo(g));const b=u.move(o);return l(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},d+h+b}function uk(e,t,n){return n.options.emphasis||"*"}function dk(e,t){let n=!1;return _d(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Wu}),!!((!e.depth||e.depth<3)&&gd(e)&&(t.options.setext||n))}function fk(e,t,n,i){const o=Math.max(Math.min(6,e.depth||1),1),l=n.createTracker(i);if(dk(e,n)){const m=n.enter("headingSetext"),g=n.enter("phrasing"),y=n.containerPhrasing(e,{...l.current(),before:`
`,after:`
`});return g(),m(),y+`
`+(o===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const u="#".repeat(o),d=n.enter("headingAtx"),h=n.enter("phrasing");l.move(u+" ");let p=n.containerPhrasing(e,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(p)&&(p=bo(p.charCodeAt(0))+p.slice(1)),p=p?u+" "+p:u,n.options.closeAtx&&(p+=" "+u),h(),d(),p}v1.peek=hk;function v1(e){return e.value||""}function hk(){return"<"}y1.peek=pk;function y1(e,t,n,i){const o=Sd(n),l=o==='"'?"Quote":"Apostrophe",u=n.enter("image");let d=n.enter("label");const h=n.createTracker(i);let p=h.move("![");return p+=h.move(n.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(n.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(d=n.enter("destinationRaw"),p+=h.move(n.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),d(),e.title&&(d=n.enter(`title${l}`),p+=h.move(" "+o),p+=h.move(n.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),d()),p+=h.move(")"),u(),p}function pk(){return"!"}b1.peek=mk;function b1(e,t,n,i){const o=e.referenceType,l=n.enter("imageReference");let u=n.enter("label");const d=n.createTracker(i);let h=d.move("![");const p=n.safe(e.alt,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),u();const m=n.stack;n.stack=[],u=n.enter("reference");const g=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return u(),n.stack=m,l(),o==="full"||!p||p!==g?h+=d.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function mk(){return"!"}w1.peek=gk;function w1(e,t,n){let i=e.value||"",o="`",l=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++l<n.unsafe.length;){const u=n.unsafe[l],d=n.compilePattern(u);let h;if(u.atBreak)for(;h=d.exec(i);){let p=h.index;i.charCodeAt(p)===10&&i.charCodeAt(p-1)===13&&p--,i=i.slice(0,p)+" "+i.slice(h.index+1)}}return o+i+o}function gk(){return"`"}function k1(e,t){const n=gd(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}_1.peek=xk;function _1(e,t,n,i){const o=Sd(n),l=o==='"'?"Quote":"Apostrophe",u=n.createTracker(i);let d,h;if(k1(e,n)){const m=n.stack;n.stack=[],d=n.enter("autolink");let g=u.move("<");return g+=u.move(n.containerPhrasing(e,{before:g,after:">",...u.current()})),g+=u.move(">"),d(),n.stack=m,g}d=n.enter("link"),h=n.enter("label");let p=u.move("[");return p+=u.move(n.containerPhrasing(e,{before:p,after:"](",...u.current()})),p+=u.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=n.enter("destinationLiteral"),p+=u.move("<"),p+=u.move(n.safe(e.url,{before:p,after:">",...u.current()})),p+=u.move(">")):(h=n.enter("destinationRaw"),p+=u.move(n.safe(e.url,{before:p,after:e.title?" ":")",...u.current()}))),h(),e.title&&(h=n.enter(`title${l}`),p+=u.move(" "+o),p+=u.move(n.safe(e.title,{before:p,after:o,...u.current()})),p+=u.move(o),h()),p+=u.move(")"),d(),p}function xk(e,t,n){return k1(e,n)?"<":"["}j1.peek=vk;function j1(e,t,n,i){const o=e.referenceType,l=n.enter("linkReference");let u=n.enter("label");const d=n.createTracker(i);let h=d.move("[");const p=n.containerPhrasing(e,{before:h,after:"]",...d.current()});h+=d.move(p+"]["),u();const m=n.stack;n.stack=[],u=n.enter("reference");const g=n.safe(n.associationId(e),{before:h,after:"]",...d.current()});return u(),n.stack=m,l(),o==="full"||!p||p!==g?h+=d.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=d.move("]"),h}function vk(){return"["}function Nd(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function yk(e){const t=Nd(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function bk(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function S1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function wk(e,t,n,i){const o=n.enter("list"),l=n.bulletCurrent;let u=e.ordered?bk(n):Nd(n);const d=e.ordered?u==="."?")":".":yk(n);let h=t&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((u==="*"||u==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),S1(n)===u&&m){let g=-1;for(;++g<e.children.length;){const y=e.children[g];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(u=d),n.bulletCurrent=u;const p=n.containerFlow(e,i);return n.bulletLastUsed=u,n.bulletCurrent=l,o(),p}function kk(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function _k(e,t,n,i){const o=kk(n);let l=n.bulletCurrent||Nd(n);t&&t.type==="list"&&t.ordered&&(l=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+l);let u=l.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(u=Math.ceil(u/4)*4);const d=n.createTracker(i);d.move(l+" ".repeat(u-l.length)),d.shift(u);const h=n.enter("listItem"),p=n.indentLines(n.containerFlow(e,d.current()),m);return h(),p;function m(g,y,b){return y?(b?"":" ".repeat(u))+g:(b?l:l+" ".repeat(u-l.length))+g}}function jk(e,t,n,i){const o=n.enter("paragraph"),l=n.enter("phrasing"),u=n.containerPhrasing(e,i);return l(),o(),u}const Sk=ll(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Nk(e,t,n,i){return(e.children.some(function(u){return Sk(u)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function Ck(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}N1.peek=Ek;function N1(e,t,n,i){const o=Ck(n),l=n.enter("strong"),u=n.createTracker(i),d=u.move(o+o);let h=u.move(n.containerPhrasing(e,{after:o,before:d,...u.current()}));const p=h.charCodeAt(0),m=Za(i.before.charCodeAt(i.before.length-1),p,o);m.inside&&(h=bo(p)+h.slice(1));const g=h.charCodeAt(h.length-1),y=Za(i.after.charCodeAt(0),g,o);y.inside&&(h=h.slice(0,-1)+bo(g));const b=u.move(o+o);return l(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},d+h+b}function Ek(e,t,n){return n.options.strong||"*"}function Pk(e,t,n,i){return n.safe(e.value,i)}function Tk(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Lk(e,t,n){const i=(S1(n)+(n.options.ruleSpaces?" ":"")).repeat(Tk(n));return n.options.ruleSpaces?i.slice(0,-1):i}const C1={blockquote:ek,break:Dm,code:ok,definition:lk,emphasis:x1,hardBreak:Dm,heading:fk,html:v1,image:y1,imageReference:b1,inlineCode:w1,link:_1,linkReference:j1,list:wk,listItem:_k,paragraph:jk,root:Nk,strong:N1,text:Pk,thematicBreak:Lk};function Ik(){return{enter:{table:Ak,tableData:$m,tableHeader:$m,tableRow:zk},exit:{codeText:Mk,table:Rk,tableData:yu,tableHeader:yu,tableRow:yu}}}function Ak(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Rk(e){this.exit(e),this.data.inTable=void 0}function zk(e){this.enter({type:"tableRow",children:[]},e)}function yu(e){this.exit(e)}function $m(e){this.enter({type:"tableCell",children:[]},e)}function Mk(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ok));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ok(e,t){return t==="|"?t:e}function Dk(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,o=t.stringLength,l=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:u,tableCell:h,tableRow:d}};function u(b,w,C,j){return p(m(b,C,j),b.align)}function d(b,w,C,j){const P=g(b,C,j),A=p([P]);return A.slice(0,A.indexOf(`
`))}function h(b,w,C,j){const P=C.enter("tableCell"),A=C.enter("phrasing"),I=C.containerPhrasing(b,{...j,before:l,after:l});return A(),P(),I}function p(b,w){return X5(b,{align:w,alignDelimiters:i,padding:n,stringLength:o})}function m(b,w,C){const j=b.children;let P=-1;const A=[],I=w.enter("table");for(;++P<j.length;)A[P]=g(j[P],w,C);return I(),A}function g(b,w,C){const j=b.children;let P=-1;const A=[],I=w.enter("tableRow");for(;++P<j.length;)A[P]=h(j[P],b,w,C);return I(),A}function y(b,w,C){let j=C1.inlineCode(b,w,C);return C.stack.includes("tableCell")&&(j=j.replace(/\|/g,"\\$&")),j}}function $k(){return{exit:{taskListCheckValueChecked:Fm,taskListCheckValueUnchecked:Fm,paragraph:Uk}}}function Fk(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Bk}}}function Fm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Uk(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=t.children;let l=-1,u;for(;++l<o.length;){const d=o[l];if(d.type==="paragraph"){u=d;break}}u===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function Bk(e,t,n,i){const o=e.children[0],l=typeof e.checked=="boolean"&&o&&o.type==="paragraph",u="["+(e.checked?"x":" ")+"] ",d=n.createTracker(i);l&&d.move(u);let h=C1.listItem(e,t,n,{...i,...d.current()});return l&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(m){return m+u}}function qk(){return[w5(),B5(),W5(),Ik(),$k()]}function Vk(e){return{extensions:[k5(),q5(e),G5(),Dk(e),Fk()]}}const Hk={tokenize:Yk,partial:!0},E1={tokenize:Xk,partial:!0},P1={tokenize:Zk,partial:!0},T1={tokenize:e6,partial:!0},Wk={tokenize:t6,partial:!0},L1={name:"wwwAutolink",tokenize:Qk,previous:A1},I1={name:"protocolAutolink",tokenize:Jk,previous:R1},mn={name:"emailAutolink",tokenize:Kk,previous:z1},tn={};function Gk(){return{text:tn}}let ds=48;for(;ds<123;)tn[ds]=mn,ds++,ds===58?ds=65:ds===91&&(ds=97);tn[43]=mn;tn[45]=mn;tn[46]=mn;tn[95]=mn;tn[72]=[mn,I1];tn[104]=[mn,I1];tn[87]=[mn,L1];tn[119]=[mn,L1];function Kk(e,t,n){const i=this;let o,l;return u;function u(g){return!Ju(g)||!z1.call(i,i.previous)||Cd(i.events)?n(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),d(g))}function d(g){return Ju(g)?(e.consume(g),d):g===64?(e.consume(g),h):n(g)}function h(g){return g===46?e.check(Wk,m,p)(g):g===45||g===95||Yt(g)?(l=!0,e.consume(g),h):m(g)}function p(g){return e.consume(g),o=!0,h}function m(g){return l&&o&&nr(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(g)):n(g)}}function Qk(e,t,n){const i=this;return o;function o(u){return u!==87&&u!==119||!A1.call(i,i.previous)||Cd(i.events)?n(u):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Hk,e.attempt(E1,e.attempt(P1,l),n),n)(u))}function l(u){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(u)}}function Jk(e,t,n){const i=this;let o="",l=!1;return u;function u(g){return(g===72||g===104)&&R1.call(i,i.previous)&&!Cd(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(g),e.consume(g),d):n(g)}function d(g){if(nr(g)&&o.length<5)return o+=String.fromCodePoint(g),e.consume(g),d;if(g===58){const y=o.toLowerCase();if(y==="http"||y==="https")return e.consume(g),h}return n(g)}function h(g){return g===47?(e.consume(g),l?p:(l=!0,h)):n(g)}function p(g){return g===null||Ja(g)||it(g)||gs(g)||il(g)?n(g):e.attempt(E1,e.attempt(P1,m),n)(g)}function m(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(g)}}function Yk(e,t,n){let i=0;return o;function o(u){return(u===87||u===119)&&i<3?(i++,e.consume(u),o):u===46&&i===3?(e.consume(u),l):n(u)}function l(u){return u===null?n(u):t(u)}}function Xk(e,t,n){let i,o,l;return u;function u(p){return p===46||p===95?e.check(T1,h,d)(p):p===null||it(p)||gs(p)||p!==45&&il(p)?h(p):(l=!0,e.consume(p),u)}function d(p){return p===95?i=!0:(o=i,i=void 0),e.consume(p),u}function h(p){return o||i||!l?n(p):t(p)}}function Zk(e,t){let n=0,i=0;return o;function o(u){return u===40?(n++,e.consume(u),o):u===41&&i<n?l(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?e.check(T1,t,l)(u):u===null||it(u)||gs(u)?t(u):(e.consume(u),o)}function l(u){return u===41&&i++,e.consume(u),o}}function e6(e,t,n){return i;function i(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(e.consume(d),i):d===38?(e.consume(d),l):d===93?(e.consume(d),o):d===60||d===null||it(d)||gs(d)?t(d):n(d)}function o(d){return d===null||d===40||d===91||it(d)||gs(d)?t(d):i(d)}function l(d){return nr(d)?u(d):n(d)}function u(d){return d===59?(e.consume(d),i):nr(d)?(e.consume(d),u):n(d)}}function t6(e,t,n){return i;function i(l){return e.consume(l),o}function o(l){return Yt(l)?n(l):t(l)}}function A1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||it(e)}function R1(e){return!nr(e)}function z1(e){return!(e===47||Ju(e))}function Ju(e){return e===43||e===45||e===46||e===95||Yt(e)}function Cd(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const r6={tokenize:u6,partial:!0};function n6(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:a6,continuation:{tokenize:l6},exit:c6}},text:{91:{name:"gfmFootnoteCall",tokenize:o6},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:s6,resolveTo:i6}}}}function s6(e,t,n){const i=this;let o=i.events.length;const l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let u;for(;o--;){const h=i.events[o][1];if(h.type==="labelImage"){u=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return d;function d(h){if(!u||!u._balanced)return n(h);const p=Br(i.sliceSerialize({start:u.end,end:i.now()}));return p.codePointAt(0)!==94||!l.includes(p.slice(1))?n(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function i6(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},d=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",l,t],["enter",u,t],["exit",u,t],["exit",l,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...d),e}function o6(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l=0,u;return d;function d(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?n(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(g){if(l>999||g===93&&!u||g===null||g===91||it(g))return n(g);if(g===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return o.includes(Br(i.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(g)}return it(g)||(u=!0),l++,e.consume(g),g===92?m:p}function m(g){return g===91||g===92||g===93?(e.consume(g),l++,p):p(g)}}function a6(e,t,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l,u=0,d;return h;function h(w){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(w){return w===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(w)}function m(w){if(u>999||w===93&&!d||w===null||w===91||it(w))return n(w);if(w===93){e.exit("chunkString");const C=e.exit("gfmFootnoteDefinitionLabelString");return l=Br(i.sliceSerialize(C)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(w),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return it(w)||(d=!0),u++,e.consume(w),w===92?g:m}function g(w){return w===91||w===92||w===93?(e.consume(w),u++,m):m(w)}function y(w){return w===58?(e.enter("definitionMarker"),e.consume(w),e.exit("definitionMarker"),o.includes(l)||o.push(l),Qe(e,b,"gfmFootnoteDefinitionWhitespace")):n(w)}function b(w){return t(w)}}function l6(e,t,n){return e.check(So,t,e.attempt(r6,t,n))}function c6(e){e.exit("gfmFootnoteDefinition")}function u6(e,t,n){const i=this;return Qe(e,o,"gfmFootnoteDefinitionIndent",5);function o(l){const u=i.events[i.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?t(l):n(l)}}function d6(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:l,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(u,d){let h=-1;for(;++h<u.length;)if(u[h][0]==="enter"&&u[h][1].type==="strikethroughSequenceTemporary"&&u[h][1]._close){let p=h;for(;p--;)if(u[p][0]==="exit"&&u[p][1].type==="strikethroughSequenceTemporary"&&u[p][1]._open&&u[h][1].end.offset-u[h][1].start.offset===u[p][1].end.offset-u[p][1].start.offset){u[h][1].type="strikethroughSequence",u[p][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},u[p][1].start),end:Object.assign({},u[h][1].end)},g={type:"strikethroughText",start:Object.assign({},u[p][1].end),end:Object.assign({},u[h][1].start)},y=[["enter",m,d],["enter",u[p][1],d],["exit",u[p][1],d],["enter",g,d]],b=d.parser.constructs.insideSpan.null;b&&_r(y,y.length,0,ol(b,u.slice(p+1,h),d)),_r(y,y.length,0,[["exit",g,d],["enter",u[h][1],d],["exit",u[h][1],d],["exit",m,d]]),_r(u,p-1,h-p+3,y),h=p+y.length-2;break}}for(h=-1;++h<u.length;)u[h][1].type==="strikethroughSequenceTemporary"&&(u[h][1].type="data");return u}function l(u,d,h){const p=this.previous,m=this.events;let g=0;return y;function y(w){return p===126&&m[m.length-1][1].type!=="characterEscape"?h(w):(u.enter("strikethroughSequenceTemporary"),b(w))}function b(w){const C=pi(p);if(w===126)return g>1?h(w):(u.consume(w),g++,b);if(g<2&&!n)return h(w);const j=u.exit("strikethroughSequenceTemporary"),P=pi(w);return j._open=!P||P===2&&!!C,j._close=!C||C===2&&!!P,d(w)}}}class f6{constructor(){this.map=[]}add(t,n,i){h6(this,t,n,i)}consume(t){if(this.map.sort(function(l,u){return l[0]-u[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let o=i.pop();for(;o;){for(const l of o)t.push(l);o=i.pop()}this.map.length=0}}function h6(e,t,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...i);return}o+=1}e.map.push([t,n,i])}}function p6(e,t){let n=!1;const i=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const l=i.length-1;i[l]=i[l]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function m6(){return{flow:{null:{name:"table",tokenize:g6,resolveAll:x6}}}}function g6(e,t,n){const i=this;let o=0,l=0,u;return d;function d(O){let $=i.events.length-1;for(;$>-1;){const re=i.events[$][1].type;if(re==="lineEnding"||re==="linePrefix")$--;else break}const Z=$>-1?i.events[$][1].type:null,ue=Z==="tableHead"||Z==="tableRow"?z:h;return ue===z&&i.parser.lazy[i.now().line]?n(O):ue(O)}function h(O){return e.enter("tableHead"),e.enter("tableRow"),p(O)}function p(O){return O===124||(u=!0,l+=1),m(O)}function m(O){return O===null?n(O):Oe(O)?l>1?(l=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),b):n(O):Ge(O)?Qe(e,m,"whitespace")(O):(l+=1,u&&(u=!1,o+=1),O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),u=!0,m):(e.enter("data"),g(O)))}function g(O){return O===null||O===124||it(O)?(e.exit("data"),m(O)):(e.consume(O),O===92?y:g)}function y(O){return O===92||O===124?(e.consume(O),g):g(O)}function b(O){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(O):(e.enter("tableDelimiterRow"),u=!1,Ge(O)?Qe(e,w,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):w(O))}function w(O){return O===45||O===58?j(O):O===124?(u=!0,e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),C):G(O)}function C(O){return Ge(O)?Qe(e,j,"whitespace")(O):j(O)}function j(O){return O===58?(l+=1,u=!0,e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),P):O===45?(l+=1,P(O)):O===null||Oe(O)?D(O):G(O)}function P(O){return O===45?(e.enter("tableDelimiterFiller"),A(O)):G(O)}function A(O){return O===45?(e.consume(O),A):O===58?(u=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),I):(e.exit("tableDelimiterFiller"),I(O))}function I(O){return Ge(O)?Qe(e,D,"whitespace")(O):D(O)}function D(O){return O===124?w(O):O===null||Oe(O)?!u||o!==l?G(O):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(O)):G(O)}function G(O){return n(O)}function z(O){return e.enter("tableRow"),J(O)}function J(O){return O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),J):O===null||Oe(O)?(e.exit("tableRow"),t(O)):Ge(O)?Qe(e,J,"whitespace")(O):(e.enter("data"),K(O))}function K(O){return O===null||O===124||it(O)?(e.exit("data"),J(O)):(e.consume(O),O===92?oe:K)}function oe(O){return O===92||O===124?(e.consume(O),K):K(O)}}function x6(e,t){let n=-1,i=!0,o=0,l=[0,0,0,0],u=[0,0,0,0],d=!1,h=0,p,m,g;const y=new f6;for(;++n<e.length;){const b=e[n],w=b[1];b[0]==="enter"?w.type==="tableHead"?(d=!1,h!==0&&(Um(y,t,h,p,m),m=void 0,h=0),p={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},y.add(n,0,[["enter",p,t]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(i=!0,g=void 0,l=[0,0,0,0],u=[0,n+1,0,0],d&&(d=!1,m={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},y.add(n,0,[["enter",m,t]])),o=w.type==="tableDelimiterRow"?2:m?3:1):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(i=!1,u[2]===0&&(l[1]!==0&&(u[0]=u[1],g=Ba(y,t,l,o,void 0,g),l=[0,0,0,0]),u[2]=n)):w.type==="tableCellDivider"&&(i?i=!1:(l[1]!==0&&(u[0]=u[1],g=Ba(y,t,l,o,void 0,g)),l=u,u=[l[1],n,0,0])):w.type==="tableHead"?(d=!0,h=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(h=n,l[1]!==0?(u[0]=u[1],g=Ba(y,t,l,o,n,g)):u[1]!==0&&(g=Ba(y,t,u,o,n,g)),o=0):o&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(u[3]=n)}for(h!==0&&Um(y,t,h,p,m),y.consume(t.events),n=-1;++n<t.events.length;){const b=t.events[n];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=p6(t.events,n))}return e}function Ba(e,t,n,i,o,l){const u=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",d="tableContent";n[0]!==0&&(l.end=Object.assign({},ci(t.events,n[0])),e.add(n[0],0,[["exit",l,t]]));const h=ci(t.events,n[1]);if(l={type:u,start:Object.assign({},h),end:Object.assign({},h)},e.add(n[1],0,[["enter",l,t]]),n[2]!==0){const p=ci(t.events,n[2]),m=ci(t.events,n[3]),g={type:d,start:Object.assign({},p),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",g,t]]),i!==2){const y=t.events[n[2]],b=t.events[n[3]];if(y[1].end=Object.assign({},b[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,C=n[3]-n[2]-1;e.add(w,C,[])}}e.add(n[3]+1,0,[["exit",g,t]])}return o!==void 0&&(l.end=Object.assign({},ci(t.events,o)),e.add(o,0,[["exit",l,t]]),l=void 0),l}function Um(e,t,n,i,o){const l=[],u=ci(t.events,n);o&&(o.end=Object.assign({},u),l.push(["exit",o,t])),i.end=Object.assign({},u),l.push(["exit",i,t]),e.add(n+1,0,l)}function ci(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const v6={name:"tasklistCheck",tokenize:b6};function y6(){return{text:{91:v6}}}function b6(e,t,n){const i=this;return o;function o(h){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),l)}function l(h){return it(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),u):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),u):n(h)}function u(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),d):n(h)}function d(h){return Oe(h)?t(h):Ge(h)?e.check({tokenize:w6},t,n)(h):n(h)}}function w6(e,t,n){return Qe(e,i,"whitespace");function i(o){return o===null?n(o):t(o)}}function k6(e){return Wg([Gk(),n6(),d6(e),m6(),y6()])}const _6={};function j6(e){const t=this,n=e||_6,i=t.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),l=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),u=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(k6(n)),l.push(qk()),u.push(Vk(n))}const S6=({slug:e})=>{const[t,n]=k.useState(""),[i,o]=k.useState(!0),[l,u]=k.useState(null);return k.useEffect(()=>{const d=async()=>{const p=await fetch(`/pages/${e}.md`,{cache:"no-store"});if(p.ok){const m=await p.text();n(m)}else n(`# Page Not Found

This page does not exist.`);o(!1)},h=async()=>{const{data:p}=await V.from("profiles").select("*").eq("username","liaotian").single();p&&u(p)};d(),h()},[e]),i?a.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex items-center justify-center",children:a.jsx("div",{className:"text-2xl",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] pt-20 pb-10",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[a.jsx("article",{className:"prose max-w-none bg-[rgb(var(--color-surface))] p-8 mb-8 rounded-2xl border border-[rgb(var(--color-border))]",children:a.jsx(d5,{remarkPlugins:[j6],children:t})}),a.jsx("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl p-6 border border-[rgb(var(--color-border))] shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:l?.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=liaotian",alt:"liaotian",className:"w-16 h-16 rounded-full border-2 border-[rgb(var(--color-primary))]"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold",children:l?.display_name||"LiaoTian"}),l?.verified&&a.jsx(en,{size:20,className:"text-[rgb(var(--color-accent))]"})]}),a.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",l?.username||"liaotian"]}),a.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-1",children:[a.jsx("a",{href:"/",className:"text-[rgb(var(--color-accent))]",children:"Sign Up"})," for LiaoTian"]})]})]})}),a.jsxs("div",{className:"mt-10 text-center text-sm text-[rgb(var(--color-text-secondary))]",children:[" Mux ",new Date().getFullYear()]})]})})},N6="2025-11-07T12:51:03.751Z",C6=[{key:"profiles",icon:_o,description:"Total User Accounts",type:"count",table:"profiles"},{key:"posts",icon:ms,description:"Total Content Posts",type:"count",table:"posts"},{key:"messages",icon:go,description:"(Your) Total Messages",type:"count",table:"messages"},{key:"likes",icon:hi,description:"Total Likes/Reactions",type:"count",table:"likes"},{key:"comments",icon:go,description:"Total Comments",type:"count",table:"comments"}],E6=[{key:"online_now",icon:Hn,description:"Currently Online (Last 5 min)",type:"activity",minutes:5},{key:"online_24h",icon:Hn,description:"Online in last 24 hours",type:"activity",minutes:1440},{key:"online_7d",icon:Hn,description:"Online in last 7 days",type:"activity",minutes:10080},{key:"online_30d",icon:Hn,description:"Online in last 30 days",type:"activity",minutes:720*60},{key:"online_1y",icon:Hn,description:"Online in last year",type:"activity",minutes:365*24*60}],M1=5,P6=e=>{const t=new Date;return t.setMinutes(t.getMinutes()-e),t.toISOString()},Bm=e=>{if(!e)return"Never";const t=new Date(e),i=Math.floor((new Date().getTime()-t.getTime())/1e3);if(i<60)return`${i}s ago`;const o=Math.floor(i/60);if(o<60)return`${o}m ago`;const l=Math.floor(o/60);if(l<24)return`${l}h ago`;const u=Math.floor(l/24);return u<30?`${u}d ago`:`${Math.floor(u/30)}mo ago`},T6=e=>{const t=new Date(e).getTime();let i=new Date().getTime()-t;if(i<0)return"Platform launching soon!";const o=1e3*60*60,l=o*24;let u=i;const d=[],h=Math.floor(u/(l*365.25));h>0&&(d.push(`${h} year(s)`),u%=l*365.25);const p=Math.floor(u/(l*30.44));p>0&&(d.push(`${p} month(s)`),u%=l*30.44);const m=Math.floor(u/l);u%=l;const g=Math.floor(u/o);return h>0||p>0?(m>0&&d.push(`${m} day(s)`),g>0&&d.push(`${g} hour(s)`),d.join(" ")):`${m} day(s) and ${g} hour(s)`},L6=async()=>{const e=C6.map(async t=>{try{const{count:n,error:i}=await V.from(t.table).select("*",{count:"exact",head:!0});if(i){const o=i.code==="42P01"?`(Table "${t.table}" not found)`:`(DB Error: ${i.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:o,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:n||0,error:!1,type:t.type}}catch(n){const i=n instanceof Error?n.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${i})`,type:t.type}}});return Promise.all(e)},I6=async()=>{const e=E6.map(async t=>{try{const n=P6(t.minutes),{count:i,error:o}=await V.from("profiles").select("*",{count:"exact",head:!0}).gte("last_seen",n);if(o){const l=`(DB Error: ${o.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:l,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:i||0,error:!1,type:t.type}}catch(n){const i=n instanceof Error?n.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${i})`,type:t.type}}});return Promise.all(e)},A6=async()=>{const e="highest_followers",t="Highest Followers",n=Qa;try{const{data:i,error:o}=await V.from("profiles").select("id, username, display_name, avatar_url");if(o)throw o;const{data:l,error:u}=await V.from("follows").select("following_id");if(u)throw u;const d={};for(const y of l){const b=y.following_id;d[b]=(d[b]||0)+1}let h=null,p=-1;for(const[y,b]of Object.entries(d))b>p&&(p=b,h=y);const m=i.find(y=>y.id===h);let g;return m&&h?g={id:h,username:m.username,display_name:m.display_name,avatar_url:m.avatar_url,follower_count:p}:g={id:"N/A",username:"system",display_name:"No Followers Yet",avatar_url:"https://placehold.co/64x64/60A5FA/FFFFFF?text=NA",follower_count:0},{key:e,label:t,icon:n,value:{profile:g},error:!1,type:"highest_follower"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to calculate top profile: ${o})`,type:"highest_follower"}}},R6=async()=>{const e="time_since_launch",t="Time Since Launch",n=Hn;try{const i=T6(N6);return{key:e,label:t,icon:n,value:i,error:!1,type:"time_since_launch"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to calculate time: ${o})`,type:"time_since_launch"}}},z6=async()=>{const e="recently_joined",t="5 Most Recently Joined Users",n=Pg;try{const{data:i,error:o}=await V.from("profiles").select("id, username, display_name, avatar_url, created_at").order("created_at",{ascending:!1}).limit(M1);if(o)throw o;return{key:e,label:t,icon:n,value:{list:i},error:!1,type:"recent_users"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to fetch recent users: ${o})`,type:"recent_users"}}},M6=async()=>{const e="recently_online",t="5 Most Recently Online Users",n=bg;try{const{data:i,error:o}=await V.from("profiles").select("id, username, display_name, avatar_url, last_seen").not("last_seen","is",null).order("last_seen",{ascending:!1}).limit(M1);if(o)throw o;return{key:e,label:t,icon:n,value:{list:i},error:!1,type:"recent_online"}}catch(i){const o=i instanceof Error?i.message:"Unknown Error";return{key:e,label:t,icon:n,value:"Error",error:!0,errorMessage:`(Failed to fetch recent online users: ${o})`,type:"recent_online"}}},qm=()=>{const[e,t]=k.useState([]),[n,i]=k.useState(!0),[o,l]=k.useState(null);if(k.useEffect(()=>{(async()=>{i(!0),l(null);try{const[P,A,I,D,G,z]=await Promise.all([L6(),I6(),A6(),R6(),z6(),M6()]),J=[...P,...A,I,D,G,z];t(J)}catch{l("Failed to fetch statistics due to a critical, unexpected error.")}finally{i(!1)}})()},[]),o)return a.jsxs("div",{className:"max-w-4xl mx-auto mt-10 p-6 bg-red-100 border border-red-400 rounded-xl shadow-xl",children:[a.jsxs("h2",{className:"flex items-center text-xl font-bold text-red-800 mb-4",children:[a.jsx(Zi,{className:"mr-2 h-6 w-6"})," Statistics Load Error"]}),a.jsx("p",{className:"text-red-700",children:o})]});const u=j=>{const P=j.icon,A=j.error||j.value==="Error";return a.jsxs("div",{className:`p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl
              ${A?"bg-red-50 border border-red-200":"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]"}
            `,children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{className:`p-3 rounded-full ${A?"bg-red-500":"bg-[rgba(var(--color-primary),0.1)]"}`,children:a.jsx(P,{className:`h-6 w-6 ${A?"text-white":"text-[rgb(var(--color-primary))]"}`})})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider",children:j.label}),A?a.jsxs("div",{className:"flex items-center mt-1 text-2xl font-bold text-red-600",children:[a.jsx(Zi,{className:"h-5 w-5 mr-1"}),"ERROR"]}):a.jsx("p",{className:"mt-1 text-4xl font-extrabold text-[rgb(var(--color-text))]",children:j.value.toLocaleString()}),A&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:j.errorMessage})]})]},j.key)},d=j=>{const P=j.icon,A=j.error||j.value==="Error",I=!A&&typeof j.value!="number"&&typeof j.value!="string"&&"list"in j.value?j.value.list:[],D=j.key==="recently_online";return a.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full",children:[a.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-4 border-b pb-2 border-[rgb(var(--color-border))]",children:[a.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),A?a.jsxs("div",{className:"text-red-500 flex items-center",children:[a.jsx(Zi,{className:"h-4 w-4 mr-1"})," ",j.errorMessage||"Error fetching list."]}):I.length===0?a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"No users found."}):a.jsx("ul",{className:"space-y-3",children:I.map((G,z)=>a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:G.avatar_url||`https://placehold.co/40x40/60A5FA/FFFFFF?text=${G.display_name.charAt(0)}`,alt:`${G.username}'s avatar`,className:"w-8 h-8 rounded-full object-cover flex-shrink-0",onError:J=>{J.target.onerror=null,J.target.src=`https://placehold.co/40x40/60A5FA/FFFFFF?text=${G.display_name.charAt(0)}`}}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-[rgb(var(--color-text))] truncate",children:G.display_name}),a.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate",children:["@",G.username]})]})]}),a.jsx("p",{className:"text-xs font-semibold text-[rgb(var(--color-primary))] flex-shrink-0 ml-2",children:Bm(D?G.last_seen:G.created_at)})]},G.id))})]},j.key)},h=j=>{const P=j.icon,A=j.error||j.value==="Error",D=!A&&typeof j.value!="number"&&typeof j.value!="string"&&"profile"in j.value?j.value.profile:null;return A?a.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-red-50 border border-red-200",children:[a.jsxs("h3",{className:"text-sm font-medium text-red-800 uppercase tracking-wider flex items-center mb-4",children:[a.jsx(Zi,{className:"h-4 w-4 mr-2"})," ",j.label]}),a.jsx("p",{className:"text-red-600",children:j.errorMessage||"Failed to fetch top profile."})]},j.key):D?a.jsxs("div",{className:"p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center",children:[a.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),a.jsx(Qa,{className:"h-6 w-6 text-[rgb(var(--color-primary))]"})]}),a.jsxs("div",{className:"flex items-center space-x-6 p-4 rounded-lg bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))]",children:[a.jsx("img",{src:D.avatar_url,alt:`${D.username}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-4 border-[rgb(var(--color-accent))]",onError:G=>{G.target.onerror=null,G.target.src=`https://placehold.co/64x64/60A5FA/FFFFFF?text=${D.display_name.charAt(0)}`}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:D.display_name}),a.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",D.username]}),a.jsxs("p",{className:"mt-1 text-3xl font-extrabold text-[rgb(var(--color-text))]",children:[D.follower_count?D.follower_count.toLocaleString():"N/A",a.jsx("span",{className:"ml-2 text-base font-normal text-[rgb(var(--color-primary))]",children:"Followers"})]})]})]})]},j.key):null},p=j=>{const P=j.icon;return j.error||j.value==="Error"?a.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-red-50 border border-red-200 h-full",children:[a.jsxs("h4",{className:"text-xs font-medium text-red-800 uppercase tracking-wider flex items-center mb-1",children:[a.jsx(Zi,{className:"h-3 w-3 mr-1"})," ",j.label]}),a.jsx("p",{className:"text-red-600 text-sm",children:j.errorMessage||"Failed to fetch time."})]},j.key):a.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full flex flex-col justify-center",children:[a.jsxs("h4",{className:"text-xs font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-1",children:[a.jsx(P,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",j.label]}),a.jsx("p",{className:"text-base font-bold text-[rgb(var(--color-text))] break-words",children:j.value})]},j.key)},m=e.filter(j=>j.type==="count"),g=e.filter(j=>j.type==="activity"),y=e.find(j=>j.type==="highest_follower"),b=e.find(j=>j.type==="time_since_launch"),w=e.find(j=>j.type==="recent_users"),C=e.find(j=>j.type==="recent_online");return a.jsxs("div",{className:"max-w-6xl bg-[rgb(var(--color-background))] mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center mb-10",children:[a.jsx("h2",{className:"text-4xl font-extrabold text-[rgb(var(--color-text))] tracking-tight",children:"Platform Statistics"}),a.jsx("p",{className:"ml-3 mt-1 text-lg text-[rgb(var(--color-text-secondary))]",children:"Database counts and user activity."})]}),n?a.jsxs("div",{className:"col-span-full flex justify-center items-center py-20",children:[a.jsx(ly,{className:"h-8 w-8 animate-spin text-[rgb(var(--color-primary))]"}),a.jsx("span",{className:"ml-3 text-lg text-[rgb(var(--color-text-secondary))]",children:"Loading Platform Stats..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[a.jsx(Qa,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Community & Recent Activity"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[a.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6",children:[y&&h(y),b&&p(b)]}),w&&a.jsx("div",{className:"lg:col-span-1",children:d(w)}),C&&a.jsx("div",{className:"lg:col-span-1",children:d(C)})]}),a.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[a.jsx(Hn,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," User Activity Counts"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-10",children:g.map(u)}),a.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[a.jsx(ey,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Core Database Entries"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:m.map(u)})]})]})};eg();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wo.apply(this,arguments)}var ps;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ps||(ps={}));const Vm="popstate";function O6(e){e===void 0&&(e={});function t(i,o){let{pathname:l,search:u,hash:d}=i.location;return Yu("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:O1(o)}return F6(t,n,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function D6(e,t){{typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $6(){return Math.random().toString(36).substr(2,8)}function Hm(e,t){return{usr:e.state,key:e.key,idx:t}}function Yu(e,t,n,i){return n===void 0&&(n=null),wo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ul(t):t,{state:n,key:t&&t.key||i||$6()})}function O1(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ul(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function F6(e,t,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,u=o.history,d=ps.Pop,h=null,p=m();p==null&&(p=0,u.replaceState(wo({},u.state,{idx:p}),""));function m(){return(u.state||{idx:null}).idx}function g(){d=ps.Pop;let j=m(),P=j==null?null:j-p;p=j,h&&h({action:d,location:C.location,delta:P})}function y(j,P){d=ps.Push;let A=Yu(C.location,j,P);p=m()+1;let I=Hm(A,p),D=C.createHref(A);try{u.pushState(I,"",D)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;o.location.assign(D)}l&&h&&h({action:d,location:C.location,delta:1})}function b(j,P){d=ps.Replace;let A=Yu(C.location,j,P);p=m();let I=Hm(A,p),D=C.createHref(A);u.replaceState(I,"",D),l&&h&&h({action:d,location:C.location,delta:0})}function w(j){let P=o.location.origin!=="null"?o.location.origin:o.location.href,A=typeof j=="string"?j:O1(j);return A=A.replace(/ $/,"%20"),Zr(P,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,P)}let C={get action(){return d},get location(){return e(o,u)},listen(j){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Vm,g),h=j,()=>{o.removeEventListener(Vm,g),h=null}},createHref(j){return t(o,j)},createURL:w,encodeLocation(j){let P=w(j);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:y,replace:b,go(j){return u.go(j)}};return C}var Wm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wm||(Wm={}));function U6(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const B6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q6=e=>B6.test(e);function V6(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:o=""}=typeof e=="string"?ul(e):e,l;if(n)if(q6(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),D6(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+n))}n.startsWith("/")?l=Gm(n.substring(1),"/"):l=Gm(n,t)}else l=t;return{pathname:l,search:Q6(i),hash:J6(o)}}function Gm(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bu(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H6(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function W6(e,t){let n=H6(e);return t?n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function G6(e,t,n,i){i===void 0&&(i=!1);let o;typeof e=="string"?o=ul(e):(o=wo({},e),Zr(!o.pathname||!o.pathname.includes("?"),bu("?","pathname","search",o)),Zr(!o.pathname||!o.pathname.includes("#"),bu("#","pathname","hash",o)),Zr(!o.search||!o.search.includes("#"),bu("#","search","hash",o)));let l=e===""||o.pathname==="",u=l?"/":o.pathname,d;if(u==null)d=n;else{let g=t.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),g-=1;o.pathname=y.join("/")}d=g>=0?t[g]:"/"}let h=V6(o,d),p=u&&u!=="/"&&u.endsWith("/"),m=(l||u===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}const K6=e=>e.join("/").replace(/\/\/+/g,"/"),Q6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,J6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,D1=["post","put","patch","delete"];new Set(D1);const Y6=["get",...D1];new Set(Y6);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},el.apply(this,arguments)}const $1=k.createContext(null),Ed=k.createContext(null),Pd=k.createContext(null),Td=k.createContext({outlet:null,matches:[],isDataRoute:!1});function Ld(){return k.useContext(Pd)!=null}function F1(){return Ld()||Zr(!1),k.useContext(Pd).location}function U1(e){k.useContext(Ed).static||k.useLayoutEffect(e)}function Id(){let{isDataRoute:e}=k.useContext(Td);return e?r8():X6()}function X6(){Ld()||Zr(!1);let e=k.useContext($1),{basename:t,future:n,navigator:i}=k.useContext(Ed),{matches:o}=k.useContext(Td),{pathname:l}=F1(),u=JSON.stringify(W6(o,n.v7_relativeSplatPath)),d=k.useRef(!1);return U1(()=>{d.current=!0}),k.useCallback(function(p,m){if(m===void 0&&(m={}),!d.current)return;if(typeof p=="number"){i.go(p);return}let g=G6(p,JSON.parse(u),l,m.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:K6([t,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[t,i,u,l,e])}var B1=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(B1||{}),q1=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(q1||{});function Z6(e){let t=k.useContext($1);return t||Zr(!1),t}function e8(e){let t=k.useContext(Td);return t||Zr(!1),t}function t8(e){let t=e8(),n=t.matches[t.matches.length-1];return n.route.id||Zr(!1),n.route.id}function r8(){let{router:e}=Z6(B1.UseNavigateStable),t=t8(q1.UseNavigateStable),n=k.useRef(!1);return U1(()=>{n.current=!0}),k.useCallback(function(o,l){l===void 0&&(l={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,el({fromRouteId:t},l)))},[e,t])}function n8(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function s8(e){let{basename:t="/",children:n=null,location:i,navigationType:o=ps.Pop,navigator:l,static:u=!1,future:d}=e;Ld()&&Zr(!1);let h=t.replace(/^\/*/,"/"),p=k.useMemo(()=>({basename:h,navigator:l,static:u,future:el({v7_relativeSplatPath:!1},d)}),[h,d,l,u]);typeof i=="string"&&(i=ul(i));let{pathname:m="/",search:g="",hash:y="",state:b=null,key:w="default"}=i,C=k.useMemo(()=>{let j=U6(m,h);return j==null?null:{location:{pathname:j,search:g,hash:y,state:b,key:w},navigationType:o}},[h,m,g,y,b,w,o]);return C==null?null:k.createElement(Ed.Provider,{value:p},k.createElement(Pd.Provider,{children:n,value:C}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const i8="6";try{window.__reactRouterVersion=i8}catch{}const o8="startTransition",Km=Ax[o8];function a8(e){let{basename:t,children:n,future:i,window:o}=e,l=k.useRef();l.current==null&&(l.current=O6({window:o,v5Compat:!0}));let u=l.current,[d,h]=k.useState({action:u.action,location:u.location}),{v7_startTransition:p}=i||{},m=k.useCallback(g=>{p&&Km?Km(()=>h(g)):h(g)},[h,p]);return k.useLayoutEffect(()=>u.listen(m),[u,m]),k.useEffect(()=>n8(i),[i]),k.createElement(s8,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:u,future:i})}var Qm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qm||(Qm={}));var Jm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Jm||(Jm={}));const l8=({show:e,onClose:t})=>{const n=Id(),i=(o,l=!1)=>{l?window.open(o,"_blank"):(n(o),t())};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 bg-black/50 z-[98] transition-opacity ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),a.jsxs("div",{className:`fixed left-0 top-0 h-full w-72 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] z-[99] ${e?"translate-x-0":"-translate-x-full"} transition-transform duration-300 shadow-lg flex flex-col`,children:[a.jsxs("div",{className:"p-8 pb-6",children:[a.jsx("h1",{className:"text-3xl font-black text-[rgb(var(--color-primary))] tracking-tighter",children:"Liaoverse"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:"text-sm font-semibold text-[rgb(var(--color-text))]",children:"running LiaoTian"})}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1 font-mono",children:"v1.1.X"})]}),a.jsx("div",{className:"h-px bg-[rgb(var(--color-border))] mx-6 mb-4"}),a.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto",children:[a.jsxs("button",{onClick:()=>i("https://github.com/huanmux/liaotian",!0),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] transition group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(iy,{size:20,className:"text-[rgb(var(--color-text-secondary))] group-hover:text-black dark:group-hover:text-white transition-colors"}),a.jsx("span",{className:"font-medium",children:"Make your own!"})]}),a.jsx(X2,{size:16,className:"text-[rgb(var(--color-border))] group-hover:text-[rgb(var(--color-text-secondary))]"})]}),a.jsx("button",{onClick:()=>i("/terms-of-service"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] transition group",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ms,{size:20,className:"text-[rgb(var(--color-text-secondary))] group-hover:text-blue-500 transition-colors"}),a.jsx("span",{className:"font-medium",children:"Terms of Service"})]})}),a.jsx("button",{onClick:()=>i("/privacy-policy"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] transition group",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(xy,{size:20,className:"text-[rgb(var(--color-text-secondary))] group-hover:text-green-500 transition-colors"}),a.jsx("span",{className:"font-medium",children:"Privacy Policy"})]})}),a.jsx("button",{onClick:()=>i("/download"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] transition group",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ty,{size:20,className:"text-[rgb(var(--color-text-secondary))] group-hover:text-orange-500 transition-colors"}),a.jsx("span",{className:"font-medium",children:"Download Liaoverse"})]})})]}),a.jsx("div",{className:"p-4 border-t border-[rgb(var(--color-border))]",children:a.jsxs("button",{onClick:()=>i("https://stats.uptimerobot.com/b7TIAsQhon",!0),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-green-50 text-green-700 hover:bg-green-100 transition border border-green-200",children:[a.jsx(bg,{size:20}),a.jsx("span",{className:"font-bold text-sm",children:"Server status"}),a.jsxs("span",{className:"flex h-2 w-2 relative ml-auto",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]})})]})]})},c8=({show:e,onClose:t,setView:n,view:i,onSignOut:o})=>{const l=[{icon:a.jsx(jg,{size:20}),label:"Home",view:"feed",onClick:()=>{n("feed"),t()}},{icon:a.jsx(_o,{size:20}),label:"Groups",view:"groups",onClick:()=>{n("groups"),t()}},{icon:a.jsx(fy,{size:20}),label:"Forums",view:"forums",onClick:()=>{n("forums"),t()}},{icon:a.jsx(kg,{size:20}),label:"Status Archive",view:"archive",onClick:()=>{n("archive"),t()}}];return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 bg-black/50 z-[98] transition-opacity ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),a.jsx("div",{className:`fixed right-0 top-0 h-full w-64 bg-[rgb(var(--color-surface))] border-l border-[rgb(var(--color-border))] z-[99] ${e?"translate-x-0":"translate-x-full"} transition-transform duration-300 shadow-lg flex-shrink-0`,children:a.jsxs("nav",{className:"p-4 space-y-2 h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 space-y-2",children:l.map((u,d)=>a.jsxs("button",{onClick:u.onClick,className:`w-full flex items-center space-x-3 p-3 rounded-lg transition ${i===u.view?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))] font-bold":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[u.icon,a.jsx("span",{children:u.label})]},d))}),a.jsx("div",{className:"pt-4 border-t border-[rgb(var(--color-border))]",children:a.jsxs("button",{onClick:()=>{o(),t()},className:"w-full flex items-center space-x-3 p-3 rounded-lg text-red-600 hover:bg-[rgba(239,68,68,0.1)] transition",children:[a.jsx(uy,{size:20}),a.jsx("span",{children:"Sign Out"})]})})]})})]})},u8=e=>{switch(e){case"like":return a.jsx(hi,{size:16,className:"text-red-500 fill-red-500"});case"comment":return a.jsx(ys,{size:16,className:"text-blue-500 fill-blue-500"});case"follow":return a.jsx(Pg,{size:16,className:"text-green-500"});default:return a.jsx(_y,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})}},d8=e=>{switch(e.type){case"like":return"liked your post.";case"comment":return"commented on your post.";case"follow":return"started following you.";default:return"sent you a notification."}},f8=({onClose:e})=>{const{user:t}=Nt(),n=Id(),[i,o]=k.useState([]),[l,u]=k.useState(!1),[d,h]=k.useState(!1);k.useEffect(()=>{if(!t)return;u(!0);const g=async()=>{const{data:b,error:w}=await V.from("notifications").select(`
          *,
          actor:profiles!notifications_actor_id_fkey (username, display_name, avatar_url)
        `).eq("recipient_id",t.id).order("created_at",{ascending:!1}).limit(50);w?console.error("Error fetching notifications:",w):o(b||[]),u(!1)};g();const y=V.channel(`notifications-${t.id}`);return y.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},()=>{g()}),y.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(w=>w.map(C=>C.id===b.new.id?{...C,is_read:b.new.is_read}:C))}),y.on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(w=>w.filter(C=>C.id!==b.old.id))}),y.subscribe(),()=>{V.removeChannel(y)}},[t]);const p=async()=>{if(!t||d)return;h(!0);const{error:g}=await V.from("notifications").delete().eq("recipient_id",t.id).eq("is_read",!0);g?console.error("Error clearing notifications:",g):o(y=>y.filter(b=>!b.is_read)),h(!1)},m=g=>{g.is_read||o(y=>y.map(b=>b.id===g.id?{...b,is_read:!0}:b)),e(),g.type==="follow"&&g.actor?.username&&n(`/?${g.actor.username}`)};return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",onClick:e,children:a.jsxs("div",{className:"w-full max-w-sm h-full bg-[rgb(var(--color-background))] shadow-xl overflow-y-auto",onClick:g=>g.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center z-10",children:[a.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"Notifications"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:p,disabled:d||!i.some(g=>g.is_read),className:"text-sm p-1 px-3 rounded-full text-red-600 border border-red-600 hover:bg-red-600 hover:text-[rgb(var(--color-text-on-primary))] transition disabled:opacity-50",title:"Clear all seen notifications",children:[a.jsx(vo,{size:16,className:"inline mr-1"}),d?"Clearing...":"Clear All Seen"]}),a.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text))]",children:a.jsx(Ze,{size:24})})]})]}),a.jsxs("div",{className:"flex flex-col",children:[l&&a.jsx("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:"Loading notifications..."}),!l&&i.length===0&&a.jsx("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:"You're all caught up! No notifications."}),!l&&i.length>0&&a.jsx("div",{children:i.map(g=>a.jsxs("div",{onClick:()=>m(g),className:`flex items-start gap-4 p-3 border-b border-[rgb(var(--color-border))] cursor-pointer hover:bg-[rgb(var(--color-surface-hover))] transition ${g.is_read?"":"bg-[rgba(var(--color-primary),0.05)]"}`,children:[a.jsx("div",{className:"w-6 h-6 flex items-center justify-center pt-1",children:u8(g.type)}),a.jsxs("div",{className:"flex-1 min-w-0 flex items-start gap-3",children:[a.jsx("img",{src:g.actor?.avatar_url||"/default-avatar.png",alt:g.actor?.username||"user",className:"w-10 h-10 rounded-full object-cover",onClick:y=>{y.stopPropagation(),g.actor?.username&&(e(),n(`/?${g.actor.username}`))}}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-[rgb(var(--color-text))] break-words",children:[a.jsxs("span",{className:"font-bold cursor-pointer hover:underline",onClick:y=>{y.stopPropagation(),g.actor?.username&&(e(),n(`/?${g.actor.username}`))},children:[g.actor?.display_name||"User"," "]})," ",d8(g)]}),a.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]\\",children:new Date(g.created_at).toLocaleDateString()})]})]})]},g.id))})]})]})})},Ym=["Gaming","Hobbies","Study","Trade","Reviews","Other"],h8=()=>{const{user:e}=Nt(),[t,n]=k.useState("list"),[i,o]=k.useState(null);k.useEffect(()=>{const d=()=>{const p=new URLSearchParams(window.location.search).get("group");p?(o(p),n("detail")):(n("list"),o(null))};return window.addEventListener("popstate",d),d(),()=>window.removeEventListener("popstate",d)},[]);const l=d=>{window.history.pushState({},"",`/?group=${d}`),o(d),n("detail")},u=()=>{window.history.pushState({},"","/"),n("list"),o(null)};return t==="detail"&&i?a.jsx(m8,{groupId:i,onBack:u}):a.jsx(p8,{onOpenGroup:l})},p8=({onOpenGroup:e})=>{const{user:t}=Nt(),[n,i]=k.useState([]),[o,l]=k.useState(new Set),[u,d]=k.useState(!1),[h,p]=k.useState(!0),[m,g]=k.useState(""),y=async()=>{if(p(!0),!t)return;const{data:w}=await V.from("groups").select("*, group_members(count)"),{data:C}=await V.from("groups").select("*").order("created_at",{ascending:!1}),{data:j}=await V.from("group_members").select("group_id").eq("user_id",t.id),P=new Set(j?.map(I=>I.group_id));l(P);const A=(C||[]).filter(I=>I.type!=="secret"||P.has(I.id)||I.owner_id===t.id);i(A),p(!1)};k.useEffect(()=>{y()},[t]);const b=n.filter(w=>w.name.toLowerCase().includes(m.toLowerCase())||w.tag.toLowerCase().includes(m.toLowerCase()));return a.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-[rgb(var(--color-text))] flex items-center gap-2",children:[a.jsx(_o,{className:"text-[rgb(var(--color-primary))]"})," Groups"]}),a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:"Discover and join communities"})]}),a.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:flex-initial",children:[a.jsx(pn,{className:"absolute left-3 top-2.5 text-[rgb(var(--color-text-secondary))]",size:16}),a.jsx("input",{type:"text",placeholder:"Search groups...",value:m,onChange:w=>g(w.target.value),className:"pl-9 pr-4 py-2 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-full text-sm w-full md:w-64 text-[rgb(var(--color-text))]"})]}),a.jsxs("button",{onClick:()=>d(!0),className:"bg-[rgb(var(--color-primary))] text-white px-4 py-2 rounded-full font-bold flex items-center gap-2 hover:opacity-90 transition whitespace-nowrap shadow-md",children:[a.jsx(nl,{size:18})," ",a.jsx("span",{className:"hidden sm:inline",children:"Create Group"})]})]})]}),h?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(w=>a.jsx("div",{className:"h-48 bg-[rgb(var(--color-surface))] animate-pulse rounded-xl"},w))}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.length===0&&a.jsx("div",{className:"col-span-full text-center py-10 text-[rgb(var(--color-text-secondary))]",children:"No groups found."}),b.map(w=>a.jsxs("div",{onClick:()=>e(w.id),className:"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-xl overflow-hidden cursor-pointer hover:border-[rgb(var(--color-primary))] transition group shadow-sm hover:shadow-md",children:[a.jsxs("div",{className:"h-28 bg-[rgb(var(--color-surface-hover))] relative",children:[w.banner_url?a.jsx("img",{src:w.banner_url,className:"w-full h-full object-cover",alt:"Banner"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[rgb(var(--color-surface-hover))] to-[rgb(var(--color-border))]"}),a.jsxs("div",{className:"absolute top-2 right-2 bg-black/40 backdrop-blur-sm px-2 py-1 rounded-md text-white text-xs font-bold uppercase flex items-center gap-1",children:[w.type==="private"&&a.jsx(ad,{size:12}),w.type==="public"&&a.jsx(Va,{size:12}),w.type]})]}),a.jsxs("div",{className:"px-4 pb-4 relative",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"-mt-8 mb-2",children:a.jsx("img",{src:w.icon_url||`https://ui-avatars.com/api/?name=${w.name}&background=random`,className:"w-16 h-16 rounded-xl border-4 border-[rgb(var(--color-surface))] shadow-sm object-cover bg-[rgb(var(--color-surface))]",alt:"Icon"})}),a.jsx("div",{className:"mt-2",children:o.has(w.id)?a.jsx("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold border border-green-200",children:"Joined"}):a.jsx("span",{className:"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] px-3 py-1 rounded-full text-xs font-bold border border-[rgb(var(--color-border))]",children:"View"})})]}),a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))] leading-tight",children:w.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 mb-2",children:[a.jsx("span",{className:"text-xs px-2 py-0.5 rounded text-[rgb(var(--color-primary))] bg-[rgba(var(--color-primary),0.1)] font-medium",children:w.tag}),a.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:" Community"})]}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] line-clamp-2",children:w.description})]})]},w.id))]}),u&&a.jsx(g8,{onClose:()=>d(!1),onCreated:y})]})},m8=({groupId:e,onBack:t})=>{const{user:n}=Nt(),[i,o]=k.useState(null),[l,u]=k.useState([]),[d,h]=k.useState(!0),[p,m]=k.useState("discussion"),[g,y]=k.useState(!1),[b,w]=k.useState(!1),[C,j]=k.useState(""),[P,A]=k.useState(!1),[I,D]=k.useState(new Set),G=async()=>{const{data:oe}=await V.from("groups").select("*").eq("id",e).single();if(!oe)return;let O=!1,$=!1;if(n){const{data:ue}=await V.from("group_members").select("role").eq("group_id",e).eq("user_id",n.id).maybeSingle();ue&&(O=!0,$=ue.role==="admin"||ue.role==="owner")}const{count:Z}=await V.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",e);o({...oe,member_count:Z||0}),y(O),w($),(oe.type!=="secret"||O)&&z(),h(!1)},z=async()=>{const{data:oe}=await V.from("posts").select("*, profiles(*)").eq("group_id",e).order("created_at",{ascending:!1});u(oe||[])};k.useEffect(()=>{G()},[e,n]);const J=async()=>{if(!(!n||!i)){if(g){if(!confirm("Leave this group?"))return;await V.from("group_members").delete().eq("group_id",e).eq("user_id",n.id),y(!1)}else await V.from("group_members").insert({group_id:e,user_id:n.id}),y(!0);G()}},K=async oe=>{oe.preventDefault(),!(!C.trim()||!n)&&(A(!0),await V.from("posts").insert({user_id:n.id,group_id:e,content:C,media_type:"image"}),j(""),A(!1),z())};return d||!i?a.jsx("div",{className:"p-8 text-center",children:"Loading Group..."}):a.jsxs("div",{className:"pb-24 bg-[rgb(var(--color-background))] min-h-screen",children:[a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] shadow-sm pb-0 relative z-10",children:[a.jsxs("div",{className:"h-48 md:h-80 w-full relative bg-[rgb(var(--color-surface-hover))]",children:[i.banner_url?a.jsx("img",{src:i.banner_url,className:"w-full h-full object-cover",alt:"Cover"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] opacity-20"}),a.jsx("button",{onClick:t,className:"absolute top-4 left-4 bg-black/40 hover:bg-black/60 text-white p-2 rounded-full backdrop-blur-md transition",children:a.jsx(Ka,{size:20})})]}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start relative -mt-6 md:-mt-10 mb-4",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:i.icon_url||`https://ui-avatars.com/api/?name=${i.name}&background=random`,className:"w-24 h-24 md:w-32 md:h-32 rounded-xl border-4 border-[rgb(var(--color-surface))] shadow-md object-cover bg-white"})}),a.jsxs("div",{className:"flex-1 mt-2 md:mt-12",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-black text-[rgb(var(--color-text))]",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-[rgb(var(--color-text-secondary))] text-sm mt-1 items-center",children:[i.type==="private"?a.jsx(ad,{size:14}):a.jsx(Va,{size:14}),a.jsxs("span",{className:"capitalize",children:[i.type," Group"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"font-semibold text-[rgb(var(--color-text))]",children:[i.member_count," Members"]})]})]}),a.jsxs("div",{className:"mt-2 md:mt-12 flex gap-2 w-full md:w-auto",children:[a.jsx("button",{onClick:J,className:`flex-1 md:flex-initial px-6 py-2.5 rounded-lg font-bold transition flex items-center justify-center gap-2 ${g?"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))]":"bg-[rgb(var(--color-primary))] text-white shadow-lg shadow-[rgba(var(--color-primary),0.3)]"}`,children:g?"Joined":"Join Group"}),g&&a.jsx("button",{className:"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))] p-2.5 rounded-lg border border-[rgb(var(--color-border))]",children:a.jsx(hy,{size:20})})]})]}),a.jsx("div",{className:"flex border-t border-[rgb(var(--color-border))] mt-6",children:["discussion","members","about"].map(oe=>a.jsx("button",{onClick:()=>m(oe),className:`px-4 py-3 font-semibold text-sm capitalize border-b-2 transition ${p===oe?"border-[rgb(var(--color-primary))] text-[rgb(var(--color-primary))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:oe},oe))})]})]}),a.jsxs("div",{className:"max-w-5xl mx-auto px-0 md:px-4 py-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-2 space-y-4",children:[p==="discussion"&&a.jsxs(a.Fragment,{children:[g&&a.jsx("div",{className:"bg-[rgb(var(--color-surface))] p-4 md:rounded-xl border-y md:border border-[rgb(var(--color-border))] shadow-sm",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgb(var(--color-surface-hover))] overflow-hidden flex-shrink-0",children:a.jsx(_o,{className:"w-full h-full p-2 text-[rgb(var(--color-text-secondary))]"})}),a.jsxs("form",{onSubmit:K,className:"flex-1",children:[a.jsx("input",{value:C,onChange:oe=>j(oe.target.value),placeholder:"Write something...",className:"w-full bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-full px-4 py-2.5 focus:outline-none focus:border-[rgb(var(--color-primary))] transition text-[rgb(var(--color-text))]"}),C&&a.jsx("div",{className:"flex justify-end mt-2",children:a.jsx("button",{disabled:P,className:"bg-[rgb(var(--color-primary))] text-white px-4 py-1.5 rounded-full text-sm font-bold",children:P?"Posting...":"Post"})})]})]})}),l.length===0?a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-8 md:rounded-xl border-y md:border border-[rgb(var(--color-border))] text-center",children:[a.jsx("div",{className:"inline-block p-4 rounded-full bg-[rgb(var(--color-surface-hover))] mb-3",children:a.jsx(od,{size:32,className:"text-[rgb(var(--color-text-secondary))]"})}),a.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"No posts yet"}),a.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Be the first to share something!"})]}):l.map(oe=>a.jsx(co,{post:oe,currentUserId:n?.id,isLiked:I.has(oe.id),onLikeToggle:()=>{},onCommentUpdate:()=>{},onNavigateToProfile:()=>{}},oe.id))]}),p==="about"&&a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-6 md:rounded-xl border-y md:border border-[rgb(var(--color-border))]",children:[a.jsx("h3",{className:"font-bold text-xl mb-4 text-[rgb(var(--color-text))]",children:"About this Group"}),a.jsx("p",{className:"text-[rgb(var(--color-text))] whitespace-pre-wrap",children:i.description}),a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-[rgb(var(--color-text-secondary))]",children:[a.jsx(Va,{size:20}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-[rgb(var(--color-text))] capitalize",children:i.type}),a.jsx("div",{className:"text-sm",children:"Anyone can find this group."})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-[rgb(var(--color-text-secondary))]",children:[a.jsx(J2,{size:20}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-[rgb(var(--color-text))]",children:"History"}),a.jsxs("div",{className:"text-sm",children:["Created ",new Date(i.created_at).toLocaleDateString()]})]})]})]})]})]}),a.jsxs("div",{className:"hidden md:block space-y-4",children:[a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-4 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsx("h4",{className:"font-bold text-[rgb(var(--color-text))] mb-3",children:"About"}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mb-4 line-clamp-3",children:i.description}),a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[rgb(var(--color-text))]",children:[a.jsx(Va,{size:16})," ",i.type," Group"]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[rgb(var(--color-text))] mt-2",children:[a.jsx(ay,{size:16})," ",i.tag]})]}),g&&a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-4 rounded-xl border border-[rgb(var(--color-border))]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"font-bold text-[rgb(var(--color-text))]",children:"Members"}),a.jsx("button",{onClick:()=>m("members"),className:"text-sm text-[rgb(var(--color-primary))] hover:underline",children:"See all"})]}),a.jsxs("div",{className:"flex -space-x-2 overflow-hidden",children:[[1,2,3].map(oe=>a.jsx("div",{className:"inline-block h-8 w-8 rounded-full ring-2 ring-[rgb(var(--color-surface))] bg-gray-300"},oe)),a.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-[rgb(var(--color-surface))] bg-[rgb(var(--color-surface-hover))] flex items-center justify-center text-xs font-bold text-[rgb(var(--color-text-secondary))]",children:["+",i.member_count||0]})]})]})]})]})]})},g8=({onClose:e,onCreated:t})=>{const{user:n}=Nt(),[i,o]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(Ym[0]),[p,m]=k.useState("public"),[g,y]=k.useState(!1),b=async w=>{if(w.preventDefault(),!n)return;y(!0);const{data:C,error:j}=await V.from("groups").insert({name:i,description:l,tag:d,type:p,owner_id:n.id}).select().single();C?(await V.from("group_members").insert({group_id:C.id,user_id:n.id,role:"admin"}),t(),e()):alert("Failed to create group"),y(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl overflow-hidden shadow-2xl border border-[rgb(var(--color-border))]",children:[a.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[a.jsx("h2",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Create New Group"}),a.jsx("button",{onClick:e,children:a.jsx(Ze,{className:"text-[rgb(var(--color-text))]"})})]}),a.jsxs("form",{onSubmit:b,className:"p-5 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Group Name"}),a.jsx("input",{required:!0,value:i,onChange:w=>o(w.target.value),className:"w-full p-2.5 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",placeholder:"e.g. Gazebo Gamers"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Description"}),a.jsx("textarea",{required:!0,value:l,onChange:w=>u(w.target.value),rows:3,className:"w-full p-2.5 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",placeholder:"What's this group about?"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Category"}),a.jsx("select",{value:d,onChange:w=>h(w.target.value),className:"w-full p-2.5 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",children:Ym.map(w=>a.jsx("option",{value:w,children:w},w))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase mb-1",children:"Privacy"}),a.jsxs("select",{value:p,onChange:w=>m(w.target.value),className:"w-full p-2.5 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",children:[a.jsx("option",{value:"public",children:"Public"}),a.jsx("option",{value:"private",children:"Private"})]})]})]}),a.jsx("button",{disabled:g,type:"submit",className:"w-full py-3 bg-[rgb(var(--color-primary))] text-white font-bold rounded-lg mt-2 shadow-lg shadow-[rgba(var(--color-primary),0.2)] disabled:opacity-50 transition hover:scale-[1.02]",children:g?"Creating...":"Create Group"})]})]})})},x8=()=>{const{user:e}=Nt(),[t,n]=k.useState([]),[i,o]=k.useState(null),[l,u]=k.useState("feed"),[d,h]=k.useState(null),[p,m]=k.useState(!1),[g,y]=k.useState(!1),[b,w]=k.useState(!1),C=async()=>{const{data:I}=await V.from("forums").select("*").order("name");n(I||[])};k.useEffect(()=>{C()},[]);const j=I=>{o(I),u("feed"),h(null),m(!1)},P=I=>{h(I),u("detail")},A=()=>{l==="detail"&&(u("feed"),h(null))};return a.jsxs("div",{className:"flex h-[calc(100vh-4rem)] max-w-7xl mx-auto",children:[a.jsx("aside",{className:"hidden md:flex w-64 flex-col border-r border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] p-4 sticky top-16 h-full overflow-y-auto",children:a.jsx(Xm,{forums:t,activeForum:i,onSelect:j,onCreateForum:()=>y(!0)})}),p&&a.jsxs("div",{className:"fixed inset-0 z-50 flex md:hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>m(!1)}),a.jsx("div",{className:"relative w-64 bg-[rgb(var(--color-surface))] h-full p-4 shadow-xl",children:a.jsx(Xm,{forums:t,activeForum:i,onSelect:j,onCreateForum:()=>y(!0)})})]}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-[rgb(var(--color-background))]",children:[a.jsx("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-0 z-10",children:l==="detail"?a.jsxs("button",{onClick:A,className:"flex items-center gap-2 text-[rgb(var(--color-text))] font-bold",children:[a.jsx(Ka,{size:20})," Back"]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>m(!0),children:a.jsx(Sg,{size:24,className:"text-[rgb(var(--color-text))]"})}),a.jsx("h1",{className:"font-bold text-lg text-[rgb(var(--color-text))] truncate",children:i?`f/${i.name}`:"Forums"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto pb-20 md:pb-0",children:l==="feed"?a.jsx(v8,{activeForum:i,onPostClick:P,onCreatePost:()=>w(!0)}):d?a.jsx(y8,{post:d,onBack:A}):null})]}),a.jsx("aside",{className:"hidden lg:block w-80 p-6 sticky top-16 h-full border-l border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))]",children:i?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 bg-[rgb(var(--color-primary))] text-white rounded-t-xl h-12"}),a.jsxs("div",{className:"px-4",children:[a.jsxs("h2",{className:"font-bold text-xl text-[rgb(var(--color-text))]",children:["f/",i.name]}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-2",children:i.description}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-[rgb(var(--color-border))]",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[rgb(var(--color-text-secondary))] mb-2",children:[a.jsx(Hn,{size:16})," ",a.jsx("span",{className:"text-sm",children:"Created recently"})]}),a.jsx("div",{className:"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))] text-xs font-bold px-3 py-1 rounded-full inline-block",children:i.tag})]}),a.jsx("button",{onClick:()=>w(!0),className:"w-full mt-6 bg-[rgb(var(--color-primary))] hover:brightness-110 text-white font-bold py-2 rounded-full transition",children:"Create Post"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-[rgb(var(--color-primary))] to-[rgb(var(--color-accent))] rounded-xl text-white",children:[a.jsx("h2",{className:"font-bold text-lg mb-2",children:"Home"}),a.jsx("p",{className:"text-sm opacity-90",children:"Your personal Gazebo frontpage. Come here to check in with your favorite communities."})]}),a.jsx("button",{onClick:()=>w(!0),className:"w-full bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] font-bold py-2 rounded-full hover:opacity-90 transition",children:"Create Post"}),a.jsx("button",{onClick:()=>y(!0),className:"w-full border border-[rgb(var(--color-text))] text-[rgb(var(--color-text))] font-bold py-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:"Create Community"})]})}),g&&a.jsx(b8,{onClose:()=>y(!1),onSuccess:C}),b&&a.jsx(w8,{activeForum:i,forums:t,onClose:()=>w(!1),onSuccess:()=>{u("feed")}})]})},Xm=({forums:e,activeForum:t,onSelect:n,onCreateForum:i})=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-1",children:a.jsxs("button",{onClick:()=>n(null),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition ${t?"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))]"}`,children:[a.jsx(Qa,{size:20})," Home"]})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between px-3 mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-[rgb(var(--color-text-secondary))] uppercase tracking-wider",children:"Communities"}),a.jsx("button",{onClick:i,className:"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-primary))]",children:a.jsx(nl,{size:16})})]}),a.jsx("div",{className:"space-y-0.5",children:e.map(o=>a.jsxs("button",{onClick:()=>n(o),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition truncate ${t?.id===o.id?"bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-[rgb(var(--color-border))] flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:["f/",o.name]})]},o.id))})]})]}),v8=({activeForum:e,onPostClick:t,onCreatePost:n})=>{const[i,o]=k.useState([]),{user:l}=Nt(),[u,d]=k.useState(new Set),h=k.useCallback(async()=>{let m=V.from("forum_posts").select("*, profiles(*)").order("created_at",{ascending:!1});e&&(m=m.eq("forum_id",e.id));const{data:g}=await m;if(o(g||[]),g&&l){const y=g.map(w=>w.id),{data:b}=await V.from("likes").select("entity_id").eq("user_id",l.id).eq("entity_type","forum_post").in("entity_id",y);b&&d(new Set(b.map(w=>w.entity_id)))}},[e,l]);k.useEffect(()=>{h()},[h]);const p=async(m,g)=>{if(m.stopPropagation(),!l)return;const y=u.has(g.id);d(b=>{const w=new Set(b);return y?w.delete(g.id):w.add(g.id),w}),o(b=>b.map(w=>w.id===g.id?{...w,like_count:w.like_count+(y?-1:1)}:w)),y?await V.from("likes").delete().match({user_id:l.id,entity_id:g.id,entity_type:"forum_post"}):await V.from("likes").insert({user_id:l.id,entity_id:g.id,entity_type:"forum_post"})};return a.jsxs("div",{className:"p-0 md:p-6 space-y-4",children:[a.jsxs("div",{className:"md:hidden p-4 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-[rgb(var(--color-surface-hover))]"}),a.jsx("input",{readOnly:!0,onClick:n,placeholder:"Create a post...",className:"flex-1 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-full px-4 py-2 text-sm"}),a.jsx(id,{className:"text-[rgb(var(--color-text-secondary))]"})]}),i.map(m=>{const g=u.has(m.id);return a.jsxs("div",{onClick:()=>t(m),className:"bg-[rgb(var(--color-surface))] hover:bg-[rgb(var(--color-surface-hover))] border-y md:border border-[rgb(var(--color-border))] md:rounded-xl cursor-pointer transition flex overflow-hidden",children:[a.jsxs("div",{className:"hidden md:flex flex-col items-center gap-1 p-3 bg-[rgba(var(--color-surface),0.5)] w-12 flex-shrink-0 border-r border-transparent",children:[a.jsx("button",{onClick:y=>p(y,m),className:`p-1 rounded hover:bg-[rgba(var(--color-border),0.5)] ${g?"text-[rgb(var(--color-primary))]":"text-[rgb(var(--color-text-secondary))]"}`,children:a.jsx(Au,{size:24,fill:g?"currentColor":"none"})}),a.jsx("span",{className:`text-xs font-bold ${g?"text-[rgb(var(--color-primary))]":"text-[rgb(var(--color-text))]"}`,children:m.like_count||0})]}),a.jsxs("div",{className:"flex-1 p-3 pb-1 md:p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text-secondary))] mb-2",children:[!e&&a.jsx("span",{className:"font-bold text-[rgb(var(--color-text))]",children:"f/ForumName"}),a.jsxs("span",{className:"hidden md:inline",children:["Posted by u/",m.profiles.username]}),a.jsxs("span",{className:"md:hidden",children:["u/",m.profiles.username]}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(m.created_at).toLocaleDateString()})]}),a.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))] mb-2 leading-snug",children:m.title}),m.media_url&&a.jsx("div",{className:"mb-3 rounded-lg overflow-hidden border border-[rgb(var(--color-border))] bg-black/5 max-h-[400px] flex items-center justify-center",children:a.jsx("img",{src:m.media_url,className:"max-w-full max-h-[400px] object-contain",loading:"lazy"})}),!m.media_url&&a.jsx("p",{className:"text-sm text-[rgb(var(--color-text))] line-clamp-3 mb-3",children:m.content}),a.jsxs("div",{className:"flex items-center gap-1 text-[rgb(var(--color-text-secondary))] text-xs font-bold",children:[a.jsxs("button",{onClick:y=>p(y,m),className:`md:hidden flex items-center gap-1 px-2 py-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] ${g?"text-[rgb(var(--color-primary))]":""}`,children:[a.jsx(Au,{size:20,fill:g?"currentColor":"none"}),a.jsx("span",{children:m.like_count||0})]}),a.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:[a.jsx(ys,{size:18}),a.jsxs("span",{children:[m.comment_count||0," Comments"]})]}),a.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:[a.jsx(sl,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Share"})]})]})]})]},m.id)})]})},y8=({post:e,onBack:t})=>{const{user:n}=Nt(),[i,o]=k.useState([]),[l,u]=k.useState(""),[d,h]=k.useState(!1),p=async()=>{const{data:g}=await V.from("forum_comments").select("*, profiles(*)").eq("post_id",e.id).order("created_at",{ascending:!0});o(g||[])};k.useEffect(()=>{p()},[e.id]);const m=async()=>{!n||!l.trim()||(h(!0),await V.from("forum_comments").insert({post_id:e.id,user_id:n.id,content:l}),await V.rpc("increment_forum_comment_count",{post_id:e.id}),u(""),p(),h(!1))};return a.jsxs("div",{className:"bg-[rgb(var(--color-background))] min-h-full",children:[a.jsx("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] md:m-4 md:rounded-xl md:border",children:a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"hidden md:flex flex-col items-center gap-2 p-4 w-14 border-r border-[rgb(var(--color-border))]",children:[a.jsx(Au,{size:28,className:"text-[rgb(var(--color-text-secondary))]"}),a.jsx("span",{className:"font-bold text-[rgb(var(--color-text))]",children:e.like_count})]}),a.jsxs("div",{className:"flex-1 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-[rgb(var(--color-text-secondary))] mb-2",children:[a.jsx("img",{src:e.profiles.avatar_url||`https://ui-avatars.com/api/?name=${e.profiles.username}`,className:"w-5 h-5 rounded-full"}),a.jsxs("span",{className:"font-bold text-[rgb(var(--color-text))]",children:["u/",e.profiles.username]}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(e.created_at).toLocaleString()})]}),a.jsx("h1",{className:"text-xl md:text-2xl font-bold text-[rgb(var(--color-text))] mb-4",children:e.title}),a.jsx("div",{className:"text-[rgb(var(--color-text))] whitespace-pre-wrap mb-4 text-sm md:text-base leading-relaxed",children:e.content}),e.media_url&&a.jsx("img",{src:e.media_url,className:"w-full rounded-lg mb-4"}),a.jsxs("div",{className:"flex items-center gap-4 text-[rgb(var(--color-text-secondary))] text-sm font-bold border-t border-[rgb(var(--color-border))] pt-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{size:20})," ",e.comment_count," Comments"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sl,{size:20})," Share"]})]})]})]})}),a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] p-4 md:mx-4 md:rounded-xl border border-[rgb(var(--color-border))] mb-4",children:[a.jsxs("span",{className:"text-sm text-[rgb(var(--color-text))] mb-2 block",children:["Comment as ",a.jsx("span",{className:"text-[rgb(var(--color-primary))]",children:n?.email})]}),a.jsx("textarea",{value:l,onChange:g=>u(g.target.value),className:"w-full bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg p-3 text-[rgb(var(--color-text))] focus:outline-none focus:border-[rgb(var(--color-primary))] min-h-[100px]",placeholder:"What are your thoughts?"}),a.jsx("div",{className:"flex justify-end mt-2",children:a.jsx("button",{disabled:!l.trim()||d,onClick:m,className:"bg-[rgb(var(--color-primary))] text-white font-bold py-1.5 px-4 rounded-full disabled:opacity-50",children:"Comment"})})]}),a.jsx("div",{className:"md:mx-4 pb-20",children:i.map(g=>a.jsxs("div",{className:"bg-[rgb(var(--color-surface))] md:rounded-xl border-b md:border border-[rgb(var(--color-border))] md:mb-2 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("img",{src:g.profiles.avatar_url||`https://ui-avatars.com/api/?name=${g.profiles.username}`,className:"w-6 h-6 rounded-full"}),a.jsx("span",{className:"text-xs font-bold text-[rgb(var(--color-text))]",children:g.profiles.display_name}),a.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:new Date(g.created_at).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-[rgb(var(--color-text))] pl-8",children:g.content})]},g.id))})]})},b8=({onClose:e,onSuccess:t})=>{const{user:n}=Nt(),[i,o]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState("General"),p=async m=>{m.preventDefault(),n&&(await V.from("forums").insert({name:i,description:l,tag:d,owner_id:n.id}),t(),e())};return a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[100]",children:a.jsxs("form",{onSubmit:p,className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-xl p-6 space-y-4 border border-[rgb(var(--color-border))]",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"Create Community"}),a.jsx("button",{type:"button",onClick:e,children:a.jsx(Ze,{className:"text-[rgb(var(--color-text))]"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] mb-1",children:"Name"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2 text-[rgb(var(--color-text-secondary))]",children:"f/"}),a.jsx("input",{required:!0,className:"w-full pl-7 pr-3 py-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",value:i,onChange:m=>o(m.target.value.replace(/\s+/g,"")),maxLength:20})]}),a.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Community names cannot be changed."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] mb-1",children:"Description"}),a.jsx("textarea",{required:!0,className:"w-full p-3 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",rows:3,value:l,onChange:m=>u(m.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-[rgb(var(--color-text-secondary))] mb-1",children:"Tag"}),a.jsx("select",{value:d,onChange:m=>h(m.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))]",children:["General","Gaming","Hobbies","Tech","Music"].map(m=>a.jsx("option",{value:m,children:m},m))})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-full border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] font-bold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 rounded-full bg-[rgb(var(--color-primary))] text-white font-bold",children:"Create Community"})]})]})})},w8=({activeForum:e,forums:t,onClose:n,onSuccess:i})=>{const{user:o}=Nt(),[l,u]=k.useState(e?.id||t[0]?.id||""),[d,h]=k.useState(""),[p,m]=k.useState(""),[g,y]=k.useState(!1),b=async w=>{w.preventDefault(),!(!o||!l)&&(y(!0),await V.from("forum_posts").insert({forum_id:l,user_id:o.id,title:d,content:p}),i(),n(),y(!1))};return a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-[100]",children:a.jsxs("form",{onSubmit:b,className:"bg-[rgb(var(--color-surface))] w-full max-w-2xl rounded-xl p-6 space-y-4 border border-[rgb(var(--color-border))] flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-[rgb(var(--color-border))] pb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"Create a post"}),a.jsx("button",{type:"button",onClick:n,children:a.jsx(Ze,{className:"text-[rgb(var(--color-text))]"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[a.jsx("div",{children:a.jsxs("select",{value:l,onChange:w=>u(w.target.value),className:"w-1/2 p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded text-[rgb(var(--color-text))]",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a community"}),t.map(w=>a.jsxs("option",{value:w.id,children:["f/",w.name]},w.id))]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{required:!0,placeholder:"Title",className:"w-full p-3 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))] font-bold",value:d,onChange:w=>h(w.target.value),maxLength:300}),a.jsx("textarea",{required:!0,placeholder:"Body text",className:"w-full p-3 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))] min-h-[200px]",value:p,onChange:w=>m(w.target.value)})]})]}),a.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-[rgb(var(--color-border))]",children:a.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 rounded-full bg-[rgb(var(--color-primary))] text-white font-bold disabled:opacity-50",children:"Post"})})]})})};var Zm={},k8="@vercel/analytics",_8="1.5.0",j8=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function V1(){return typeof window<"u"}function H1(){try{const e="production"}catch{}return"production"}function S8(e="auto"){if(e==="auto"){window.vam=H1();return}window.vam=e}function N8(){return(V1()?window.vam:H1())||"production"}function Xu(){return N8()==="development"}function C8(e){return e.scriptSrc?e.scriptSrc:Xu()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function E8(e={debug:!0}){var t;if(!V1())return;S8(e.mode),j8(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=C8(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const i=document.createElement("script");i.src=n,i.defer=!0,i.dataset.sdkn=k8+(e.framework?`/${e.framework}`:""),i.dataset.sdkv=_8,e.disableAutoTrack&&(i.dataset.disableAutoTrack="1"),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(i.dataset.dsn=e.dsn),i.onerror=()=>{const o=Xu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${o}`)},Xu()&&e.debug===!1&&(i.dataset.debug="false"),document.head.appendChild(i)}function P8({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function T8(){if(!(typeof process>"u"||typeof Zm>"u"))return Zm.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function L8(e){return k.useEffect(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),k.useEffect(()=>{E8({framework:e.framework||"react",basePath:e.basePath??T8(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),k.useEffect(()=>{e.route&&e.path&&P8({route:e.route,path:e.path})},[e.route,e.path]),null}const qa="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",wu="0 0 784 1168",Ad=!1,I8=()=>{const[e,t]=k.useState("feed"),[n,i]=k.useState(!1),[o,l]=k.useState(!1),[u,d]=k.useState(""),[h,p]=k.useState(),[m,g]=k.useState(!1),[y,b]=k.useState(),[w,C]=k.useState(null),[j,P]=k.useState(null),[A,I]=k.useState("chats"),{user:D,profile:G,loading:z,signOut:J}=Nt(),K=F1(),oe=Id();k.useEffect(()=>{},[]);const[O,$]=k.useState(0),[Z,ue]=k.useState(0),[re,ee]=k.useState(!1);if(k.useEffect(()=>{(async()=>{const S=K.pathname,L=new URLSearchParams(K.search),H=S.match(/^\/invite\/([a-zA-Z0-9-]{3,20})$/),E=L.get("invite"),ke=H?H[1]:E;if(ke&&D){C(ke),t("messages"),I("gazebos"),H&&oe("/message",{replace:!0});return}const fe=S.match(/^\/gazebo\/?([a-zA-Z0-9-]{0,})?$/),pe=L.get("gazebo"),Pe=fe?fe[1]:pe;if((Pe||fe)&&D){I("gazebos"),Pe&&P(Pe),t("messages"),fe&&window.history.replaceState({},"","/message");return}const _e=L.get("user");if(S==="/message"&&_e&&D){const{data:De}=await V.from("profiles").select("*").eq("username",_e).single();De&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:De}))},500),t("messages");return}const ne=L.get("status");if(ne&&D){const{data:De}=await V.from("statuses").select("*, profiles!user_id(*)").eq("id",ne).single();if(De){const rt={...De.profiles,statuses:[De],hasUnseen:!1};window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{users:[rt],initialUserId:De.user_id}})),t("feed")}return}const Ne=L.get("post");if(Ne){const{data:De}=await V.from("posts").select("user_id").eq("id",Ne).maybeSingle();if(De){p(De.user_id),b(Ne),t("profile");return}}const Re=L.get("user");if(S==="/"&&Re){const{data:De}=await V.from("profiles").select("id").eq("username",Re.toLowerCase()).single();if(De){p(De.id),t("profile");return}}if(S==="/message"){t("messages");return}if(S==="/stats"){t("stats");return}const qe=S.match(/^\/([^/]+)\/?$/);if(qe){const De=qe[1],rt=decodeURIComponent(De);if(!["user","invite","gazebo","message","stats","groups","forums","archive","settings"].includes(De.toLowerCase())){const{data:mt}=await V.from("profiles").select("id").ilike("username",rt).maybeSingle();if(mt){p(mt.id),t("profile");return}t("page"),d(rt);return}}if(S==="/"){if(Re){const De=decodeURIComponent(Re),{data:rt}=await V.from("profiles").select("id").ilike("username",De).maybeSingle();if(rt){p(rt.id),t("profile");return}}t("feed"),p(void 0),b(void 0)}})()},[K.pathname,K.search,D,oe]),k.useEffect(()=>{G?.theme&&(document.body.className=`theme-${G.theme}`)},[G?.theme]),k.useEffect(()=>{if(!D)return;const ae=async()=>{const{count:H}=await V.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",D.id).eq("read",!1);$(H||0);try{const{count:E}=await V.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",D.id).eq("is_read",!1);ue(E||0)}catch{console.warn("Could not fetch notifications.")}};ae();const S=()=>{ae()};window.addEventListener("messagesRead",S);const L=V.channel(`user-notifications:${D.id}`);return L.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${D.id}`},H=>{H.new.read===!1&&$(E=>E+1)}),L.on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`recipient_id=eq.${D.id}`},H=>{ae()}),L.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${D.id}`},()=>{ue(H=>H+1)}),L.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${D.id}`},H=>{H.old.is_read===!1&&H.new.is_read===!0&&ue(E=>Math.max(0,E-1))}),L.subscribe(),()=>{V.removeChannel(L),window.removeEventListener("messagesRead",S)}},[D]),k.useEffect(()=>{const ae=S=>{const L=S.detail;V.from("profiles").select("username").eq("id",L).single().then(({data:H})=>{H&&(oe(`/?user=${H.username}`),p(L),t("profile"))})};return window.addEventListener("navigateToProfile",ae),()=>window.removeEventListener("navigateToProfile",ae)},[oe]),k.useEffect(()=>{if(!D)return;const ae=async()=>{await V.from("profiles").update({last_seen:new Date().toISOString()}).eq("id",D.id)};ae();const S=setInterval(ae,3e4);return()=>clearInterval(S)},[D]),z)return a.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex flex-col items-center justify-center text-2xl font-bold text-[rgb(var(--color-text))]",style:{background:"linear-gradient(to bottom right, rgba(var(--color-surface),0.05), rgba(var(--color-primary),0.05))"},children:[a.jsx("div",{className:"logo-loading-container w-[150px] h-auto relative mb-4",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:wu,className:"logo-svg",children:[a.jsx("defs",{children:a.jsx("clipPath",{id:"logo-clip",children:a.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),a.jsx("path",{d:qa,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),a.jsx("path",{d:qa,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),"Loading..."]});if(e==="page"&&u)return a.jsx(S6,{slug:u});if(e==="stats")return a.jsx(qm,{});if(!D||!G)return e==="profile"&&h?a.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[a.jsx("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:a.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:wu,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>oe("/"),children:a.jsx("path",{d:qa,fill:"rgb(var(--color-primary))"})}),a.jsx("a",{href:"/",className:"text-[rgb(var(--color-primary))] hover:text-[rgba(var(--color-primary),0.8)] font-bold",children:" Back to Home"})]})}),a.jsx(Yp,{userId:h,initialPostId:y})]}):e==="messages"?a.jsx(qp,{}):a.jsx(qp,{});const ve=ae=>{t("messages"),p(void 0),oe(`/message?user=${ae.username}`),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:ae}))},100)},Se=()=>{t("settings"),p(void 0)},X=async()=>{ee(!0);try{await V.from("notifications").update({is_read:!0}).eq("recipient_id",D.id).eq("is_read",!1),ue(0)}catch{console.warn("Could not mark notifications as read.")}};return a.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[a.jsx(l8,{show:o,onClose:()=>l(!1)}),a.jsx(c8,{show:n,onClose:()=>i(!1),setView:t,view:e,onSignOut:J}),a.jsx("nav",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:a.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:wu,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>l(!0),children:a.jsx("path",{d:qa,fill:"rgb(var(--color-primary))"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>g(!0),className:"p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:a.jsx(pn,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})}),a.jsx("button",{onClick:()=>{t("feed"),p(void 0),b(void 0),oe("/")},className:`p-3 rounded-full transition ${e==="feed"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:a.jsx(jg,{size:20})}),a.jsxs("button",{onClick:()=>{t("messages"),p(void 0),b(void 0),oe("/message")},className:`relative p-3 rounded-full transition ${e==="messages"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:[a.jsx(go,{size:20}),O>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),a.jsxs("button",{onClick:X,className:"relative p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:[a.jsx(Q2,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),Z>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),a.jsx("button",{onClick:()=>{G?.username&&(oe(`/?user=${G.username}`),p(void 0),t("profile"))},className:`p-3 rounded-full transition ${e==="profile"&&!h?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:a.jsx(Tg,{size:20})}),a.jsx("button",{onClick:()=>i(!0),className:"p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] transition",children:a.jsx(Sg,{size:20})})]})]})}),a.jsxs("main",{className:"h-[90vh] overflow-auto",children:[e==="feed"&&a.jsx(Fy,{}),e==="messages"&&a.jsx(Gy,{initialInviteCode:w,onInviteHandled:()=>C(null),initialTab:A,initialGazeboId:j}),e==="profile"&&a.jsx(Yp,{userId:h,initialPostId:y,onMessage:ve,onSettings:!h||h===D.id?Se:void 0},h||"own-profile"),e==="settings"&&a.jsx(eb,{}),re&&a.jsx(f8,{onClose:()=>ee(!1)}),m&&a.jsx(Yy,{onClose:()=>g(!1)}),e==="stats"&&D&&a.jsx(qm,{}),e==="groups"&&a.jsx(h8,{setView:t}),e==="forums"&&a.jsx(x8,{}),e==="archive"&&a.jsx(zy,{})]}),e!=="messages"&&a.jsxs("footer",{className:"text-center text-[rgb(var(--color-text-secondary))] text-xs py-4 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))]",children:[" Mux ",new Date().getFullYear()]}),Ad]})};function A8(){return a.jsx(W2,{children:a.jsxs(a8,{children:[a.jsx(I8,{}),a.jsx(My,{}),a.jsx(L8,{})]})})}Dx.createRoot(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(A8,{})}));export{wg as A,en as B,Op as C,$p as F,id as I,uy as L,Fp as M,my as P,Ix as R,Eg as S,vo as T,_o as U,ky as V,Ze as X,Id as a,nl as b,we as c,Sg as d,cd as e,yy as f,Cg as g,zu as h,gi as i,a as j,Z2 as k,sy as l,py as m,ms as n,Ng as o,ld as p,mo as q,k as r,V as s,xy as t,Nt as u,wy as v,tl as w};
