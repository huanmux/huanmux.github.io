const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calls-ErJQeN9k.js","assets/bundler-v5uTwFHc.js","assets/Gazebos-vSRUefgd.js"])))=>i.map(i=>d[i]);
function f2(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(s,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function Gl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h2(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),r}var zu={exports:{}},Vs={},Mu={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function p2(){if(qh)return We;qh=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function k(R,U,C){this.props=R,this.context=U,this.refs=N,this.updater=C||b}k.prototype.isReactComponent={},k.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},k.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function E(){}E.prototype=k.prototype;function L(R,U,C){this.props=R,this.context=U,this.refs=N,this.updater=C||b}var I=L.prototype=new E;I.constructor=L,_(I,k.prototype),I.isPureReactComponent=!0;var q=Array.isArray,H=Object.prototype.hasOwnProperty,P={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function X(R,U,C){var ie,me={},pe=null,ze=null;if(U!=null)for(ie in U.ref!==void 0&&(ze=U.ref),U.key!==void 0&&(pe=""+U.key),U)H.call(U,ie)&&!te.hasOwnProperty(ie)&&(me[ie]=U[ie]);var Le=arguments.length-2;if(Le===1)me.children=C;else if(1<Le){for(var we=Array(Le),Je=0;Je<Le;Je++)we[Je]=arguments[Je+2];me.children=we}if(R&&R.defaultProps)for(ie in Le=R.defaultProps,Le)me[ie]===void 0&&(me[ie]=Le[ie]);return{$$typeof:e,type:R,key:pe,ref:ze,props:me,_owner:P.current}}function ge(R,U){return{$$typeof:e,type:R.type,key:U,ref:R.ref,props:R.props,_owner:R._owner}}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function F(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(C){return U[C]})}var J=/\/+/g;function ae(R,U){return typeof R=="object"&&R!==null&&R.key!=null?F(""+R.key):U.toString(36)}function Y(R,U,C,ie,me){var pe=typeof R;(pe==="undefined"||pe==="boolean")&&(R=null);var ze=!1;if(R===null)ze=!0;else switch(pe){case"string":case"number":ze=!0;break;case"object":switch(R.$$typeof){case e:case t:ze=!0}}if(ze)return ze=R,me=me(ze),R=ie===""?"."+ae(ze,0):ie,q(me)?(C="",R!=null&&(C=R.replace(J,"$&/")+"/"),Y(me,U,C,"",function(Je){return Je})):me!=null&&($(me)&&(me=ge(me,C+(!me.key||ze&&ze.key===me.key?"":(""+me.key).replace(J,"$&/")+"/")+R)),U.push(me)),1;if(ze=0,ie=ie===""?".":ie+":",q(R))for(var Le=0;Le<R.length;Le++){pe=R[Le];var we=ie+ae(pe,Le);ze+=Y(pe,U,C,we,me)}else if(we=x(R),typeof we=="function")for(R=we.call(R),Le=0;!(pe=R.next()).done;)pe=pe.value,we=ie+ae(pe,Le++),ze+=Y(pe,U,C,we,me);else if(pe==="object")throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ze}function K(R,U,C){if(R==null)return R;var ie=[],me=0;return Y(R,ie,"","",function(pe){return U.call(C,pe,me++)}),ie}function oe(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(C){(R._status===0||R._status===-1)&&(R._status=1,R._result=C)},function(C){(R._status===0||R._status===-1)&&(R._status=2,R._result=C)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var Z={current:null},M={transition:null},ee={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:M,ReactCurrentOwner:P};function S(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:K,forEach:function(R,U,C){K(R,function(){U.apply(this,arguments)},C)},count:function(R){var U=0;return K(R,function(){U++}),U},toArray:function(R){return K(R,function(U){return U})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},We.Component=k,We.Fragment=r,We.Profiler=o,We.PureComponent=L,We.StrictMode=s,We.Suspense=h,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,We.act=S,We.cloneElement=function(R,U,C){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ie=_({},R.props),me=R.key,pe=R.ref,ze=R._owner;if(U!=null){if(U.ref!==void 0&&(pe=U.ref,ze=P.current),U.key!==void 0&&(me=""+U.key),R.type&&R.type.defaultProps)var Le=R.type.defaultProps;for(we in U)H.call(U,we)&&!te.hasOwnProperty(we)&&(ie[we]=U[we]===void 0&&Le!==void 0?Le[we]:U[we])}var we=arguments.length-2;if(we===1)ie.children=C;else if(1<we){Le=Array(we);for(var Je=0;Je<we;Je++)Le[Je]=arguments[Je+2];ie.children=Le}return{$$typeof:e,type:R.type,key:me,ref:pe,props:ie,_owner:ze}},We.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:a,_context:R},R.Consumer=R},We.createElement=X,We.createFactory=function(R){var U=X.bind(null,R);return U.type=R,U},We.createRef=function(){return{current:null}},We.forwardRef=function(R){return{$$typeof:f,render:R}},We.isValidElement=$,We.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:oe}},We.memo=function(R,U){return{$$typeof:p,type:R,compare:U===void 0?null:U}},We.startTransition=function(R){var U=M.transition;M.transition={};try{R()}finally{M.transition=U}},We.unstable_act=S,We.useCallback=function(R,U){return Z.current.useCallback(R,U)},We.useContext=function(R){return Z.current.useContext(R)},We.useDebugValue=function(){},We.useDeferredValue=function(R){return Z.current.useDeferredValue(R)},We.useEffect=function(R,U){return Z.current.useEffect(R,U)},We.useId=function(){return Z.current.useId()},We.useImperativeHandle=function(R,U,C){return Z.current.useImperativeHandle(R,U,C)},We.useInsertionEffect=function(R,U){return Z.current.useInsertionEffect(R,U)},We.useLayoutEffect=function(R,U){return Z.current.useLayoutEffect(R,U)},We.useMemo=function(R,U){return Z.current.useMemo(R,U)},We.useReducer=function(R,U,C){return Z.current.useReducer(R,U,C)},We.useRef=function(R){return Z.current.useRef(R)},We.useState=function(R){return Z.current.useState(R)},We.useSyncExternalStore=function(R,U,C){return Z.current.useSyncExternalStore(R,U,C)},We.useTransition=function(){return Z.current.useTransition()},We.version="18.3.1",We}var Vh;function Vc(){return Vh||(Vh=1,Mu.exports=p2()),Mu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function m2(){if(Hh)return Vs;Hh=1;var e=Vc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(f,h,p){var v,g={},x=null,b=null;p!==void 0&&(x=""+p),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(b=h.ref);for(v in h)s.call(h,v)&&!a.hasOwnProperty(v)&&(g[v]=h[v]);if(f&&f.defaultProps)for(v in h=f.defaultProps,h)g[v]===void 0&&(g[v]=h[v]);return{$$typeof:t,type:f,key:x,ref:b,props:g,_owner:o.current}}return Vs.Fragment=r,Vs.jsx=u,Vs.jsxs=u,Vs}var Wh;function g2(){return Wh||(Wh=1,zu.exports=m2()),zu.exports}var c=g2(),j=Vc();const v2=Gl(j),y2=f2({__proto__:null,default:v2},[j]);var kl={},Du={exports:{}},ln={},$u={exports:{}},Fu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function x2(){return Gh||(Gh=1,(function(e){function t(M,ee){var S=M.length;M.push(ee);e:for(;0<S;){var R=S-1>>>1,U=M[R];if(0<o(U,ee))M[R]=ee,M[S]=U,S=R;else break e}}function r(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var ee=M[0],S=M.pop();if(S!==ee){M[0]=S;e:for(var R=0,U=M.length,C=U>>>1;R<C;){var ie=2*(R+1)-1,me=M[ie],pe=ie+1,ze=M[pe];if(0>o(me,S))pe<U&&0>o(ze,me)?(M[R]=ze,M[pe]=S,R=pe):(M[R]=me,M[ie]=S,R=ie);else if(pe<U&&0>o(ze,S))M[R]=ze,M[pe]=S,R=pe;else break e}}return ee}function o(M,ee){var S=M.sortIndex-ee.sortIndex;return S!==0?S:M.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var h=[],p=[],v=1,g=null,x=3,b=!1,_=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var ee=r(p);ee!==null;){if(ee.callback===null)s(p);else if(ee.startTime<=M)s(p),ee.sortIndex=ee.expirationTime,t(h,ee);else break;ee=r(p)}}function q(M){if(N=!1,I(M),!_)if(r(h)!==null)_=!0,oe(H);else{var ee=r(p);ee!==null&&Z(q,ee.startTime-M)}}function H(M,ee){_=!1,N&&(N=!1,E(X),X=-1),b=!0;var S=x;try{for(I(ee),g=r(h);g!==null&&(!(g.expirationTime>ee)||M&&!F());){var R=g.callback;if(typeof R=="function"){g.callback=null,x=g.priorityLevel;var U=R(g.expirationTime<=ee);ee=e.unstable_now(),typeof U=="function"?g.callback=U:g===r(h)&&s(h),I(ee)}else s(h);g=r(h)}if(g!==null)var C=!0;else{var ie=r(p);ie!==null&&Z(q,ie.startTime-ee),C=!1}return C}finally{g=null,x=S,b=!1}}var P=!1,te=null,X=-1,ge=5,$=-1;function F(){return!(e.unstable_now()-$<ge)}function J(){if(te!==null){var M=e.unstable_now();$=M;var ee=!0;try{ee=te(!0,M)}finally{ee?ae():(P=!1,te=null)}}else P=!1}var ae;if(typeof L=="function")ae=function(){L(J)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=J,ae=function(){K.postMessage(null)}}else ae=function(){k(J,0)};function oe(M){te=M,P||(P=!0,ae())}function Z(M,ee){X=k(function(){M(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){_||b||(_=!0,oe(H))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(M){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var S=x;x=ee;try{return M()}finally{x=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,ee){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var S=x;x=M;try{return ee()}finally{x=S}},e.unstable_scheduleCallback=function(M,ee,S){var R=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?R+S:R):S=R,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=S+U,M={id:v++,callback:ee,priorityLevel:M,startTime:S,expirationTime:U,sortIndex:-1},S>R?(M.sortIndex=S,t(p,M),r(h)===null&&M===r(p)&&(N?(E(X),X=-1):N=!0,Z(q,S-R))):(M.sortIndex=U,t(h,M),_||b||(_=!0,oe(H))),M},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(M){var ee=x;return function(){var S=x;x=ee;try{return M.apply(this,arguments)}finally{x=S}}}})(Fu)),Fu}var Kh;function b2(){return Kh||(Kh=1,$u.exports=x2()),$u.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function w2(){if(Qh)return ln;Qh=1;var e=Vc(),t=b2();function r(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function x(n){return h.call(g,n)?!0:h.call(v,n)?!1:p.test(n)?g[n]=!0:(v[n]=!0,!1)}function b(n,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,i,l,d){if(i===null||typeof i>"u"||b(n,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(n,i,l,d,m,y,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=y,this.removeEmptyString=w}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];k[i]=new N(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function L(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(E,L);k[i]=new N(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(E,L);k[i]=new N(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(E,L);k[i]=new N(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function I(n,i,l,d){var m=k.hasOwnProperty(i)?k[i]:null;(m!==null?m.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(_(i,l,m,d)&&(l=null),d||m===null?x(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(i=m.attributeName,d=m.attributeNamespace,l===null?n.removeAttribute(i):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?n.setAttributeNS(d,i,l):n.setAttribute(i,l))))}var q=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),P=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),F=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),M=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var S=Object.assign,R;function U(n){if(R===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+n}var C=!1;function ie(n,i){if(!n||C)return"";C=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var d=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){d=W}n.call(i.prototype)}else{try{throw Error()}catch(W){d=W}n()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=d.stack.split(`
`),w=m.length-1,T=y.length-1;1<=w&&0<=T&&m[w]!==y[T];)T--;for(;1<=w&&0<=T;w--,T--)if(m[w]!==y[T]){if(w!==1||T!==1)do if(w--,T--,0>T||m[w]!==y[T]){var A=`
`+m[w].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=w&&0<=T);break}}}finally{C=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?U(n):""}function me(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=ie(n.type,!1),n;case 11:return n=ie(n.type.render,!1),n;case 1:return n=ie(n.type,!0),n;default:return""}}function pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case te:return"Fragment";case P:return"Portal";case ge:return"Profiler";case X:return"StrictMode";case ae:return"Suspense";case Y:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case F:return(n.displayName||"Context")+".Consumer";case $:return(n._context.displayName||"Context")+".Provider";case J:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case K:return i=n.displayName||null,i!==null?i:pe(n.type)||"Memo";case oe:i=n._payload,n=n._init;try{return pe(n(i))}catch{}}return null}function ze(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(i);case 8:return i===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function we(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Je(n){var i=we(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){d=""+w,y.call(this,w)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ht(n){n._valueTracker||(n._valueTracker=Je(n))}function ye(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return n&&(d=we(n)?n.checked?"true":"false":n.value),n=d,n!==l?(i.setValue(n),!0):!1}function zt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ve(n,i){var l=i.checked;return S({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function rt(n,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=Le(i.value!=null?i.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function pt(n,i){i=i.checked,i!=null&&I(n,"checked",i,!1)}function Mt(n,i){pt(n,i);var l=Le(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ln(n,i.type,l):i.hasOwnProperty("defaultValue")&&Ln(n,i.type,Le(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function cn(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Ln(n,i,l){(i!=="number"||zt(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Ut=Array.isArray;function en(n,i,l,d){if(n=n.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=i.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+Le(l),i=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function Dt(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(r(91));return S({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function In(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(r(92));if(Ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:Le(l)}}function Qt(n,i){var l=Le(i.value),d=Le(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function bn(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function G(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?G(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Te,Ue=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,m){MSApp.execUnsafeLocalFunction(function(){return n(i,l,d,m)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Te.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function $e(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];Object.keys(Ye).forEach(function(n){vt.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ye[i]=Ye[n]})});function at(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Ye.hasOwnProperty(n)&&Ye[n]?(""+i).trim():i+"px"}function dn(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=at(l,i[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,m):n[l]=m}}var wn=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(n,i){if(i){if(wn[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(r(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(r(61))}if(i.style!=null&&typeof i.style!="object")throw Error(r(62))}}function Qe(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Be=null;function dt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var kn=null,fn=null,An=null;function hn(n){if(n=Ts(n)){if(typeof kn!="function")throw Error(r(280));var i=n.stateNode;i&&(i=Mo(i),kn(n.stateNode,n.type,i))}}function Hr(n){fn?An?An.push(n):An=[n]:fn=n}function mi(){if(fn){var n=fn,i=An;if(An=fn=null,hn(n),i)for(n=0;n<i.length;n++)hn(i[n])}}function gi(n,i){return n(i)}function vr(){}var Rn=!1;function yr(n,i,l){if(Rn)return n(i,l);Rn=!0;try{return gi(n,i,l)}finally{Rn=!1,(fn!==null||An!==null)&&(vr(),mi())}}function On(n,i){var l=n.stateNode;if(l===null)return null;var d=Mo(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var Kn=!1;if(f)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{Kn=!1}function z(n,i,l,d,m,y,w,T,A){var W=Array.prototype.slice.call(arguments,3);try{i.apply(l,W)}catch(re){this.onError(re)}}var je=!1,De=null,he=!1,_e=null,Me={onError:function(n){je=!0,De=n}};function Ie(n,i,l,d,m,y,w,T,A){je=!1,De=null,z.apply(Me,arguments)}function He(n,i,l,d,m,y,w,T,A){if(Ie.apply(this,arguments),je){if(je){var W=De;je=!1,De=null}else throw Error(r(198));he||(he=!0,_e=W)}}function et(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function Lt(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function yt(n){if(et(n)!==n)throw Error(r(188))}function vi(n){var i=n.alternate;if(!i){if(i=et(n),i===null)throw Error(r(188));return i!==n?null:n}for(var l=n,d=i;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return yt(m),n;if(y===d)return yt(m),i;y=y.sibling}throw Error(r(188))}if(l.return!==d.return)l=m,d=y;else{for(var w=!1,T=m.child;T;){if(T===l){w=!0,l=m,d=y;break}if(T===d){w=!0,d=m,l=y;break}T=T.sibling}if(!w){for(T=y.child;T;){if(T===l){w=!0,l=y,d=m;break}if(T===d){w=!0,d=y,l=m;break}T=T.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:i}function vo(n){return n=vi(n),n!==null?sr(n):null}function sr(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=sr(n);if(i!==null)return i;n=n.sibling}return null}var yi=t.unstable_scheduleCallback,cs=t.unstable_cancelCallback,yo=t.unstable_shouldYield,ta=t.unstable_requestPaint,D=t.unstable_now,ce=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,be=t.unstable_UserBlockingPriority,Pe=t.unstable_NormalPriority,xt=t.unstable_LowPriority,Bt=t.unstable_IdlePriority,_n=null,bt=null;function na(n){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(_n,n,void 0,(n.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:P1,E1=Math.log,T1=Math.LN2;function P1(n){return n>>>=0,n===0?32:31-(E1(n)/T1|0)|0}var xo=64,bo=4194304;function ds(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wo(n,i){var l=n.pendingLanes;if(l===0)return 0;var d=0,m=n.suspendedLanes,y=n.pingedLanes,w=l&268435455;if(w!==0){var T=w&~m;T!==0?d=ds(T):(y&=w,y!==0&&(d=ds(y)))}else w=l&~m,w!==0?d=ds(w):y!==0&&(d=ds(y));if(d===0)return 0;if(i!==0&&i!==d&&(i&m)===0&&(m=d&-d,y=i&-i,m>=y||m===16&&(y&4194240)!==0))return i;if((d&4)!==0&&(d|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)l=31-Mn(i),m=1<<l,d|=n[l],i&=~m;return d}function L1(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I1(n,i){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes;0<y;){var w=31-Mn(y),T=1<<w,A=m[w];A===-1?((T&l)===0||(T&d)!==0)&&(m[w]=L1(T,i)):A<=i&&(n.expiredLanes|=T),y&=~T}}function ra(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xd(){var n=xo;return xo<<=1,(xo&4194240)===0&&(xo=64),n}function ia(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function fs(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Mn(i),n[i]=l}function A1(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-Mn(l),y=1<<m;i[m]=0,d[m]=-1,n[m]=-1,l&=~y}}function sa(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var d=31-Mn(l),m=1<<d;m&i|n[d]&i&&(n[d]|=i),l&=~m}}var nt=0;function bd(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var wd,oa,kd,_d,Sd,la=!1,ko=[],xr=null,br=null,wr=null,hs=new Map,ps=new Map,kr=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(n,i){switch(n){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":hs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(i.pointerId)}}function ms(n,i,l,d,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},i!==null&&(i=Ts(i),i!==null&&oa(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function O1(n,i,l,d,m){switch(i){case"focusin":return xr=ms(xr,n,i,l,d,m),!0;case"dragenter":return br=ms(br,n,i,l,d,m),!0;case"mouseover":return wr=ms(wr,n,i,l,d,m),!0;case"pointerover":var y=m.pointerId;return hs.set(y,ms(hs.get(y)||null,n,i,l,d,m)),!0;case"gotpointercapture":return y=m.pointerId,ps.set(y,ms(ps.get(y)||null,n,i,l,d,m)),!0}return!1}function Cd(n){var i=Wr(n.target);if(i!==null){var l=et(i);if(l!==null){if(i=l.tag,i===13){if(i=Lt(l),i!==null){n.blockedOn=i,Sd(n.priority,function(){kd(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _o(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=ua(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Be=d,l.target.dispatchEvent(d),Be=null}else return i=Ts(l),i!==null&&oa(i),n.blockedOn=l,!1;i.shift()}return!0}function Nd(n,i,l){_o(n)&&l.delete(i)}function z1(){la=!1,xr!==null&&_o(xr)&&(xr=null),br!==null&&_o(br)&&(br=null),wr!==null&&_o(wr)&&(wr=null),hs.forEach(Nd),ps.forEach(Nd)}function gs(n,i){n.blockedOn===i&&(n.blockedOn=null,la||(la=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z1)))}function vs(n){function i(m){return gs(m,n)}if(0<ko.length){gs(ko[0],n);for(var l=1;l<ko.length;l++){var d=ko[l];d.blockedOn===n&&(d.blockedOn=null)}}for(xr!==null&&gs(xr,n),br!==null&&gs(br,n),wr!==null&&gs(wr,n),hs.forEach(i),ps.forEach(i),l=0;l<kr.length;l++)d=kr[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<kr.length&&(l=kr[0],l.blockedOn===null);)Cd(l),l.blockedOn===null&&kr.shift()}var xi=q.ReactCurrentBatchConfig,So=!0;function M1(n,i,l,d){var m=nt,y=xi.transition;xi.transition=null;try{nt=1,aa(n,i,l,d)}finally{nt=m,xi.transition=y}}function D1(n,i,l,d){var m=nt,y=xi.transition;xi.transition=null;try{nt=4,aa(n,i,l,d)}finally{nt=m,xi.transition=y}}function aa(n,i,l,d){if(So){var m=ua(n,i,l,d);if(m===null)Ca(n,i,d,jo,l),jd(n,d);else if(O1(m,n,i,l,d))d.stopPropagation();else if(jd(n,d),i&4&&-1<R1.indexOf(n)){for(;m!==null;){var y=Ts(m);if(y!==null&&wd(y),y=ua(n,i,l,d),y===null&&Ca(n,i,d,jo,l),y===m)break;m=y}m!==null&&d.stopPropagation()}else Ca(n,i,d,null,l)}}var jo=null;function ua(n,i,l,d){if(jo=null,n=dt(d),n=Wr(n),n!==null)if(i=et(n),i===null)n=null;else if(l=i.tag,l===13){if(n=Lt(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return jo=n,null}function Ed(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ce()){case fe:return 1;case be:return 4;case Pe:case xt:return 16;case Bt:return 536870912;default:return 16}default:return 16}}var _r=null,ca=null,Co=null;function Td(){if(Co)return Co;var n,i=ca,l=i.length,d,m="value"in _r?_r.value:_r.textContent,y=m.length;for(n=0;n<l&&i[n]===m[n];n++);var w=l-n;for(d=1;d<=w&&i[l-d]===m[y-d];d++);return Co=m.slice(n,1<d?1-d:void 0)}function No(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Eo(){return!0}function Pd(){return!1}function pn(n){function i(l,d,m,y,w){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(l=n[T],this[T]=l?l(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Eo:Pd,this.isPropagationStopped=Pd,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),i}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=pn(bi),ys=S({},bi,{view:0,detail:0}),$1=pn(ys),fa,ha,xs,To=S({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(fa=n.screenX-xs.screenX,ha=n.screenY-xs.screenY):ha=fa=0,xs=n),fa)},movementY:function(n){return"movementY"in n?n.movementY:ha}}),Ld=pn(To),F1=S({},To,{dataTransfer:0}),U1=pn(F1),B1=S({},ys,{relatedTarget:0}),pa=pn(B1),q1=S({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),V1=pn(q1),H1=S({},bi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),W1=pn(H1),G1=S({},bi,{data:0}),Id=pn(G1),K1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y1(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=J1[n])?!!i[n]:!1}function ma(){return Y1}var X1=S({},ys,{key:function(n){if(n.key){var i=K1[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=No(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Q1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(n){return n.type==="keypress"?No(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?No(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Z1=pn(X1),e0=S({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ad=pn(e0),t0=S({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),n0=pn(t0),r0=S({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),i0=pn(r0),s0=S({},To,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),o0=pn(s0),l0=[9,13,27,32],ga=f&&"CompositionEvent"in window,bs=null;f&&"documentMode"in document&&(bs=document.documentMode);var a0=f&&"TextEvent"in window&&!bs,Rd=f&&(!ga||bs&&8<bs&&11>=bs),Od=" ",zd=!1;function Md(n,i){switch(n){case"keyup":return l0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wi=!1;function u0(n,i){switch(n){case"compositionend":return Dd(i);case"keypress":return i.which!==32?null:(zd=!0,Od);case"textInput":return n=i.data,n===Od&&zd?null:n;default:return null}}function c0(n,i){if(wi)return n==="compositionend"||!ga&&Md(n,i)?(n=Td(),Co=ca=_r=null,wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rd&&i.locale!=="ko"?null:i.data;default:return null}}var d0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!d0[n.type]:i==="textarea"}function Fd(n,i,l,d){Hr(d),i=Ro(i,"onChange"),0<i.length&&(l=new da("onChange","change",null,l,d),n.push({event:l,listeners:i}))}var ws=null,ks=null;function f0(n){sf(n,0)}function Po(n){var i=Ci(n);if(ye(i))return n}function h0(n,i){if(n==="change")return i}var Ud=!1;if(f){var va;if(f){var ya="oninput"in document;if(!ya){var Bd=document.createElement("div");Bd.setAttribute("oninput","return;"),ya=typeof Bd.oninput=="function"}va=ya}else va=!1;Ud=va&&(!document.documentMode||9<document.documentMode)}function qd(){ws&&(ws.detachEvent("onpropertychange",Vd),ks=ws=null)}function Vd(n){if(n.propertyName==="value"&&Po(ks)){var i=[];Fd(i,ks,n,dt(n)),yr(f0,i)}}function p0(n,i,l){n==="focusin"?(qd(),ws=i,ks=l,ws.attachEvent("onpropertychange",Vd)):n==="focusout"&&qd()}function m0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Po(ks)}function g0(n,i){if(n==="click")return Po(i)}function v0(n,i){if(n==="input"||n==="change")return Po(i)}function y0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Dn=typeof Object.is=="function"?Object.is:y0;function _s(n,i){if(Dn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!h.call(i,m)||!Dn(n[m],i[m]))return!1}return!0}function Hd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wd(n,i){var l=Hd(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=i&&d>=i)return{node:l,offset:i-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hd(l)}}function Gd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Gd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Kd(){for(var n=window,i=zt();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=zt(n.document)}return i}function xa(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function x0(n){var i=Kd(),l=n.focusedElem,d=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Gd(l.ownerDocument.documentElement,l)){if(d!==null&&xa(l)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!n.extend&&y>d&&(m=d,d=y,y=m),m=Wd(l,y);var w=Wd(l,d);m&&w&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),n.removeAllRanges(),y>d?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var b0=f&&"documentMode"in document&&11>=document.documentMode,ki=null,ba=null,Ss=null,wa=!1;function Qd(n,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wa||ki==null||ki!==zt(d)||(d=ki,"selectionStart"in d&&xa(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ss&&_s(Ss,d)||(Ss=d,d=Ro(ba,"onSelect"),0<d.length&&(i=new da("onSelect","select",null,i,l),n.push({event:i,listeners:d}),i.target=ki)))}function Lo(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var _i={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},ka={},Jd={};f&&(Jd=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Io(n){if(ka[n])return ka[n];if(!_i[n])return n;var i=_i[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Jd)return ka[n]=i[l];return n}var Yd=Io("animationend"),Xd=Io("animationiteration"),Zd=Io("animationstart"),ef=Io("transitionend"),tf=new Map,nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(n,i){tf.set(n,i),a(i,[n])}for(var _a=0;_a<nf.length;_a++){var Sa=nf[_a],w0=Sa.toLowerCase(),k0=Sa[0].toUpperCase()+Sa.slice(1);Sr(w0,"on"+k0)}Sr(Yd,"onAnimationEnd"),Sr(Xd,"onAnimationIteration"),Sr(Zd,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(ef,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_0=new Set("cancel close invalid load scroll toggle".split(" ").concat(js));function rf(n,i,l){var d=n.type||"unknown-event";n.currentTarget=l,He(d,i,void 0,n),n.currentTarget=null}function sf(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var w=d.length-1;0<=w;w--){var T=d[w],A=T.instance,W=T.currentTarget;if(T=T.listener,A!==y&&m.isPropagationStopped())break e;rf(m,T,W),y=A}else for(w=0;w<d.length;w++){if(T=d[w],A=T.instance,W=T.currentTarget,T=T.listener,A!==y&&m.isPropagationStopped())break e;rf(m,T,W),y=A}}}if(he)throw n=_e,he=!1,_e=null,n}function ut(n,i){var l=i[Ia];l===void 0&&(l=i[Ia]=new Set);var d=n+"__bubble";l.has(d)||(of(i,n,2,!1),l.add(d))}function ja(n,i,l){var d=0;i&&(d|=4),of(l,n,d,i)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Cs(n){if(!n[Ao]){n[Ao]=!0,s.forEach(function(l){l!=="selectionchange"&&(_0.has(l)||ja(l,!1,n),ja(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ao]||(i[Ao]=!0,ja("selectionchange",!1,i))}}function of(n,i,l,d){switch(Ed(i)){case 1:var m=M1;break;case 4:m=D1;break;default:m=aa}l=m.bind(null,i,l,n),m=void 0,!Kn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(i,l,{capture:!0,passive:m}):n.addEventListener(i,l,!0):m!==void 0?n.addEventListener(i,l,{passive:m}):n.addEventListener(i,l,!1)}function Ca(n,i,l,d,m){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var T=d.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(w===4)for(w=d.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===m||A.nodeType===8&&A.parentNode===m))return;w=w.return}for(;T!==null;){if(w=Wr(T),w===null)return;if(A=w.tag,A===5||A===6){d=y=w;continue e}T=T.parentNode}}d=d.return}yr(function(){var W=y,re=dt(l),le=[];e:{var ne=tf.get(n);if(ne!==void 0){var xe=da,Se=n;switch(n){case"keypress":if(No(l)===0)break e;case"keydown":case"keyup":xe=Z1;break;case"focusin":Se="focus",xe=pa;break;case"focusout":Se="blur",xe=pa;break;case"beforeblur":case"afterblur":xe=pa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=U1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=n0;break;case Yd:case Xd:case Zd:xe=V1;break;case ef:xe=i0;break;case"scroll":xe=$1;break;case"wheel":xe=o0;break;case"copy":case"cut":case"paste":xe=W1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Ad}var Ce=(i&4)!==0,St=!Ce&&n==="scroll",B=Ce?ne!==null?ne+"Capture":null:ne;Ce=[];for(var O=W,V;O!==null;){V=O;var de=V.stateNode;if(V.tag===5&&de!==null&&(V=de,B!==null&&(de=On(O,B),de!=null&&Ce.push(Ns(O,de,V)))),St)break;O=O.return}0<Ce.length&&(ne=new xe(ne,Se,null,l,re),le.push({event:ne,listeners:Ce}))}}if((i&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",xe=n==="mouseout"||n==="pointerout",ne&&l!==Be&&(Se=l.relatedTarget||l.fromElement)&&(Wr(Se)||Se[or]))break e;if((xe||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,xe?(Se=l.relatedTarget||l.toElement,xe=W,Se=Se?Wr(Se):null,Se!==null&&(St=et(Se),Se!==St||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(xe=null,Se=W),xe!==Se)){if(Ce=Ld,de="onMouseLeave",B="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=Ad,de="onPointerLeave",B="onPointerEnter",O="pointer"),St=xe==null?ne:Ci(xe),V=Se==null?ne:Ci(Se),ne=new Ce(de,O+"leave",xe,l,re),ne.target=St,ne.relatedTarget=V,de=null,Wr(re)===W&&(Ce=new Ce(B,O+"enter",Se,l,re),Ce.target=V,Ce.relatedTarget=St,de=Ce),St=de,xe&&Se)t:{for(Ce=xe,B=Se,O=0,V=Ce;V;V=Si(V))O++;for(V=0,de=B;de;de=Si(de))V++;for(;0<O-V;)Ce=Si(Ce),O--;for(;0<V-O;)B=Si(B),V--;for(;O--;){if(Ce===B||B!==null&&Ce===B.alternate)break t;Ce=Si(Ce),B=Si(B)}Ce=null}else Ce=null;xe!==null&&lf(le,ne,xe,Ce,!1),Se!==null&&St!==null&&lf(le,St,Se,Ce,!0)}}e:{if(ne=W?Ci(W):window,xe=ne.nodeName&&ne.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ne.type==="file")var Ne=h0;else if($d(ne))if(Ud)Ne=v0;else{Ne=m0;var Ae=p0}else(xe=ne.nodeName)&&xe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ne=g0);if(Ne&&(Ne=Ne(n,W))){Fd(le,Ne,l,re);break e}Ae&&Ae(n,ne,W),n==="focusout"&&(Ae=ne._wrapperState)&&Ae.controlled&&ne.type==="number"&&Ln(ne,"number",ne.value)}switch(Ae=W?Ci(W):window,n){case"focusin":($d(Ae)||Ae.contentEditable==="true")&&(ki=Ae,ba=W,Ss=null);break;case"focusout":Ss=ba=ki=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,Qd(le,l,re);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":Qd(le,l,re)}var Re;if(ga)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else wi?Md(n,l)&&(Fe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Rd&&l.locale!=="ko"&&(wi||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&wi&&(Re=Td()):(_r=re,ca="value"in _r?_r.value:_r.textContent,wi=!0)),Ae=Ro(W,Fe),0<Ae.length&&(Fe=new Id(Fe,n,null,l,re),le.push({event:Fe,listeners:Ae}),Re?Fe.data=Re:(Re=Dd(l),Re!==null&&(Fe.data=Re)))),(Re=a0?u0(n,l):c0(n,l))&&(W=Ro(W,"onBeforeInput"),0<W.length&&(re=new Id("onBeforeInput","beforeinput",null,l,re),le.push({event:re,listeners:W}),re.data=Re))}sf(le,i)})}function Ns(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Ro(n,i){for(var l=i+"Capture",d=[];n!==null;){var m=n,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=On(n,l),y!=null&&d.unshift(Ns(n,y,m)),y=On(n,i),y!=null&&d.push(Ns(n,y,m))),n=n.return}return d}function Si(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lf(n,i,l,d,m){for(var y=i._reactName,w=[];l!==null&&l!==d;){var T=l,A=T.alternate,W=T.stateNode;if(A!==null&&A===d)break;T.tag===5&&W!==null&&(T=W,m?(A=On(l,y),A!=null&&w.unshift(Ns(l,A,T))):m||(A=On(l,y),A!=null&&w.push(Ns(l,A,T)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var S0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function af(n){return(typeof n=="string"?n:""+n).replace(S0,`
`).replace(j0,"")}function Oo(n,i,l){if(i=af(i),af(n)!==i&&l)throw Error(r(425))}function zo(){}var Na=null,Ea=null;function Ta(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,C0=typeof clearTimeout=="function"?clearTimeout:void 0,uf=typeof Promise=="function"?Promise:void 0,N0=typeof queueMicrotask=="function"?queueMicrotask:typeof uf<"u"?function(n){return uf.resolve(null).then(n).catch(E0)}:Pa;function E0(n){setTimeout(function(){throw n})}function La(n,i){var l=i,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){n.removeChild(m),vs(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);vs(i)}function jr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function cf(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var ji=Math.random().toString(36).slice(2),Qn="__reactFiber$"+ji,Es="__reactProps$"+ji,or="__reactContainer$"+ji,Ia="__reactEvents$"+ji,T0="__reactListeners$"+ji,P0="__reactHandles$"+ji;function Wr(n){var i=n[Qn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[or]||l[Qn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=cf(n);n!==null;){if(l=n[Qn])return l;n=cf(n)}return i}n=l,l=n.parentNode}return null}function Ts(n){return n=n[Qn]||n[or],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ci(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Mo(n){return n[Es]||null}var Aa=[],Ni=-1;function Cr(n){return{current:n}}function ct(n){0>Ni||(n.current=Aa[Ni],Aa[Ni]=null,Ni--)}function st(n,i){Ni++,Aa[Ni]=n.current,n.current=i}var Nr={},qt=Cr(Nr),tn=Cr(!1),Gr=Nr;function Ei(n,i){var l=n.type.contextTypes;if(!l)return Nr;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in l)m[y]=i[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=m),m}function nn(n){return n=n.childContextTypes,n!=null}function Do(){ct(tn),ct(qt)}function df(n,i,l){if(qt.current!==Nr)throw Error(r(168));st(qt,i),st(tn,l)}function ff(n,i,l){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in i))throw Error(r(108,ze(n)||"Unknown",m));return S({},l,d)}function $o(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Nr,Gr=qt.current,st(qt,n),st(tn,tn.current),!0}function hf(n,i,l){var d=n.stateNode;if(!d)throw Error(r(169));l?(n=ff(n,i,Gr),d.__reactInternalMemoizedMergedChildContext=n,ct(tn),ct(qt),st(qt,n)):ct(tn),st(tn,l)}var lr=null,Fo=!1,Ra=!1;function pf(n){lr===null?lr=[n]:lr.push(n)}function L0(n){Fo=!0,pf(n)}function Er(){if(!Ra&&lr!==null){Ra=!0;var n=0,i=nt;try{var l=lr;for(nt=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}lr=null,Fo=!1}catch(m){throw lr!==null&&(lr=lr.slice(n+1)),yi(fe,Er),m}finally{nt=i,Ra=!1}}return null}var Ti=[],Pi=0,Uo=null,Bo=0,Sn=[],jn=0,Kr=null,ar=1,ur="";function Qr(n,i){Ti[Pi++]=Bo,Ti[Pi++]=Uo,Uo=n,Bo=i}function mf(n,i,l){Sn[jn++]=ar,Sn[jn++]=ur,Sn[jn++]=Kr,Kr=n;var d=ar;n=ur;var m=32-Mn(d)-1;d&=~(1<<m),l+=1;var y=32-Mn(i)+m;if(30<y){var w=m-m%5;y=(d&(1<<w)-1).toString(32),d>>=w,m-=w,ar=1<<32-Mn(i)+m|l<<m|d,ur=y+n}else ar=1<<y|l<<m|d,ur=n}function Oa(n){n.return!==null&&(Qr(n,1),mf(n,1,0))}function za(n){for(;n===Uo;)Uo=Ti[--Pi],Ti[Pi]=null,Bo=Ti[--Pi],Ti[Pi]=null;for(;n===Kr;)Kr=Sn[--jn],Sn[jn]=null,ur=Sn[--jn],Sn[jn]=null,ar=Sn[--jn],Sn[jn]=null}var mn=null,gn=null,ft=!1,$n=null;function gf(n,i){var l=Tn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function vf(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,mn=n,gn=jr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,mn=n,gn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Kr!==null?{id:ar,overflow:ur}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Tn(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,mn=n,gn=null,!0):!1;default:return!1}}function Ma(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Da(n){if(ft){var i=gn;if(i){var l=i;if(!vf(n,i)){if(Ma(n))throw Error(r(418));i=jr(l.nextSibling);var d=mn;i&&vf(n,i)?gf(d,l):(n.flags=n.flags&-4097|2,ft=!1,mn=n)}}else{if(Ma(n))throw Error(r(418));n.flags=n.flags&-4097|2,ft=!1,mn=n}}}function yf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mn=n}function qo(n){if(n!==mn)return!1;if(!ft)return yf(n),ft=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ta(n.type,n.memoizedProps)),i&&(i=gn)){if(Ma(n))throw xf(),Error(r(418));for(;i;)gf(n,i),i=jr(i.nextSibling)}if(yf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){gn=jr(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}gn=null}}else gn=mn?jr(n.stateNode.nextSibling):null;return!0}function xf(){for(var n=gn;n;)n=jr(n.nextSibling)}function Li(){gn=mn=null,ft=!1}function $a(n){$n===null?$n=[n]:$n.push(n)}var I0=q.ReactCurrentBatchConfig;function Ps(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var d=l.stateNode}if(!d)throw Error(r(147,n));var m=d,y=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(w){var T=m.refs;w===null?delete T[y]:T[y]=w},i._stringRef=y,i)}if(typeof n!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,n))}return n}function Vo(n,i){throw n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function bf(n){var i=n._init;return i(n._payload)}function wf(n){function i(B,O){if(n){var V=B.deletions;V===null?(B.deletions=[O],B.flags|=16):V.push(O)}}function l(B,O){if(!n)return null;for(;O!==null;)i(B,O),O=O.sibling;return null}function d(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function m(B,O){return B=zr(B,O),B.index=0,B.sibling=null,B}function y(B,O,V){return B.index=V,n?(V=B.alternate,V!==null?(V=V.index,V<O?(B.flags|=2,O):V):(B.flags|=2,O)):(B.flags|=1048576,O)}function w(B){return n&&B.alternate===null&&(B.flags|=2),B}function T(B,O,V,de){return O===null||O.tag!==6?(O=Pu(V,B.mode,de),O.return=B,O):(O=m(O,V),O.return=B,O)}function A(B,O,V,de){var Ne=V.type;return Ne===te?re(B,O,V.props.children,de,V.key):O!==null&&(O.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===oe&&bf(Ne)===O.type)?(de=m(O,V.props),de.ref=Ps(B,O,V),de.return=B,de):(de=pl(V.type,V.key,V.props,null,B.mode,de),de.ref=Ps(B,O,V),de.return=B,de)}function W(B,O,V,de){return O===null||O.tag!==4||O.stateNode.containerInfo!==V.containerInfo||O.stateNode.implementation!==V.implementation?(O=Lu(V,B.mode,de),O.return=B,O):(O=m(O,V.children||[]),O.return=B,O)}function re(B,O,V,de,Ne){return O===null||O.tag!==7?(O=ri(V,B.mode,de,Ne),O.return=B,O):(O=m(O,V),O.return=B,O)}function le(B,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Pu(""+O,B.mode,V),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return V=pl(O.type,O.key,O.props,null,B.mode,V),V.ref=Ps(B,null,O),V.return=B,V;case P:return O=Lu(O,B.mode,V),O.return=B,O;case oe:var de=O._init;return le(B,de(O._payload),V)}if(Ut(O)||ee(O))return O=ri(O,B.mode,V,null),O.return=B,O;Vo(B,O)}return null}function ne(B,O,V,de){var Ne=O!==null?O.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return Ne!==null?null:T(B,O,""+V,de);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case H:return V.key===Ne?A(B,O,V,de):null;case P:return V.key===Ne?W(B,O,V,de):null;case oe:return Ne=V._init,ne(B,O,Ne(V._payload),de)}if(Ut(V)||ee(V))return Ne!==null?null:re(B,O,V,de,null);Vo(B,V)}return null}function xe(B,O,V,de,Ne){if(typeof de=="string"&&de!==""||typeof de=="number")return B=B.get(V)||null,T(O,B,""+de,Ne);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case H:return B=B.get(de.key===null?V:de.key)||null,A(O,B,de,Ne);case P:return B=B.get(de.key===null?V:de.key)||null,W(O,B,de,Ne);case oe:var Ae=de._init;return xe(B,O,V,Ae(de._payload),Ne)}if(Ut(de)||ee(de))return B=B.get(V)||null,re(O,B,de,Ne,null);Vo(O,de)}return null}function Se(B,O,V,de){for(var Ne=null,Ae=null,Re=O,Fe=O=0,Rt=null;Re!==null&&Fe<V.length;Fe++){Re.index>Fe?(Rt=Re,Re=null):Rt=Re.sibling;var tt=ne(B,Re,V[Fe],de);if(tt===null){Re===null&&(Re=Rt);break}n&&Re&&tt.alternate===null&&i(B,Re),O=y(tt,O,Fe),Ae===null?Ne=tt:Ae.sibling=tt,Ae=tt,Re=Rt}if(Fe===V.length)return l(B,Re),ft&&Qr(B,Fe),Ne;if(Re===null){for(;Fe<V.length;Fe++)Re=le(B,V[Fe],de),Re!==null&&(O=y(Re,O,Fe),Ae===null?Ne=Re:Ae.sibling=Re,Ae=Re);return ft&&Qr(B,Fe),Ne}for(Re=d(B,Re);Fe<V.length;Fe++)Rt=xe(Re,B,Fe,V[Fe],de),Rt!==null&&(n&&Rt.alternate!==null&&Re.delete(Rt.key===null?Fe:Rt.key),O=y(Rt,O,Fe),Ae===null?Ne=Rt:Ae.sibling=Rt,Ae=Rt);return n&&Re.forEach(function(Mr){return i(B,Mr)}),ft&&Qr(B,Fe),Ne}function Ce(B,O,V,de){var Ne=ee(V);if(typeof Ne!="function")throw Error(r(150));if(V=Ne.call(V),V==null)throw Error(r(151));for(var Ae=Ne=null,Re=O,Fe=O=0,Rt=null,tt=V.next();Re!==null&&!tt.done;Fe++,tt=V.next()){Re.index>Fe?(Rt=Re,Re=null):Rt=Re.sibling;var Mr=ne(B,Re,tt.value,de);if(Mr===null){Re===null&&(Re=Rt);break}n&&Re&&Mr.alternate===null&&i(B,Re),O=y(Mr,O,Fe),Ae===null?Ne=Mr:Ae.sibling=Mr,Ae=Mr,Re=Rt}if(tt.done)return l(B,Re),ft&&Qr(B,Fe),Ne;if(Re===null){for(;!tt.done;Fe++,tt=V.next())tt=le(B,tt.value,de),tt!==null&&(O=y(tt,O,Fe),Ae===null?Ne=tt:Ae.sibling=tt,Ae=tt);return ft&&Qr(B,Fe),Ne}for(Re=d(B,Re);!tt.done;Fe++,tt=V.next())tt=xe(Re,B,Fe,tt.value,de),tt!==null&&(n&&tt.alternate!==null&&Re.delete(tt.key===null?Fe:tt.key),O=y(tt,O,Fe),Ae===null?Ne=tt:Ae.sibling=tt,Ae=tt);return n&&Re.forEach(function(d2){return i(B,d2)}),ft&&Qr(B,Fe),Ne}function St(B,O,V,de){if(typeof V=="object"&&V!==null&&V.type===te&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case H:e:{for(var Ne=V.key,Ae=O;Ae!==null;){if(Ae.key===Ne){if(Ne=V.type,Ne===te){if(Ae.tag===7){l(B,Ae.sibling),O=m(Ae,V.props.children),O.return=B,B=O;break e}}else if(Ae.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===oe&&bf(Ne)===Ae.type){l(B,Ae.sibling),O=m(Ae,V.props),O.ref=Ps(B,Ae,V),O.return=B,B=O;break e}l(B,Ae);break}else i(B,Ae);Ae=Ae.sibling}V.type===te?(O=ri(V.props.children,B.mode,de,V.key),O.return=B,B=O):(de=pl(V.type,V.key,V.props,null,B.mode,de),de.ref=Ps(B,O,V),de.return=B,B=de)}return w(B);case P:e:{for(Ae=V.key;O!==null;){if(O.key===Ae)if(O.tag===4&&O.stateNode.containerInfo===V.containerInfo&&O.stateNode.implementation===V.implementation){l(B,O.sibling),O=m(O,V.children||[]),O.return=B,B=O;break e}else{l(B,O);break}else i(B,O);O=O.sibling}O=Lu(V,B.mode,de),O.return=B,B=O}return w(B);case oe:return Ae=V._init,St(B,O,Ae(V._payload),de)}if(Ut(V))return Se(B,O,V,de);if(ee(V))return Ce(B,O,V,de);Vo(B,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,O!==null&&O.tag===6?(l(B,O.sibling),O=m(O,V),O.return=B,B=O):(l(B,O),O=Pu(V,B.mode,de),O.return=B,B=O),w(B)):l(B,O)}return St}var Ii=wf(!0),kf=wf(!1),Ho=Cr(null),Wo=null,Ai=null,Fa=null;function Ua(){Fa=Ai=Wo=null}function Ba(n){var i=Ho.current;ct(Ho),n._currentValue=i}function qa(n,i,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===l)break;n=n.return}}function Ri(n,i){Wo=n,Fa=Ai=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(rn=!0),n.firstContext=null)}function Cn(n){var i=n._currentValue;if(Fa!==n)if(n={context:n,memoizedValue:i,next:null},Ai===null){if(Wo===null)throw Error(r(308));Ai=n,Wo.dependencies={lanes:0,firstContext:n}}else Ai=Ai.next=n;return i}var Jr=null;function Va(n){Jr===null?Jr=[n]:Jr.push(n)}function _f(n,i,l,d){var m=i.interleaved;return m===null?(l.next=l,Va(i)):(l.next=m.next,m.next=l),i.interleaved=l,cr(n,d)}function cr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Tr=!1;function Ha(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function dr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Pr(n,i,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ze&2)!==0){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,cr(n,l)}return m=d.interleaved,m===null?(i.next=i,Va(d)):(i.next=m.next,m.next=i),d.interleaved=i,cr(n,l)}function Go(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,sa(n,l)}}function jf(n,i){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?m=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?m=y=i:y=y.next=i}else m=y=i;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Ko(n,i,l,d){var m=n.updateQueue;Tr=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var A=T,W=A.next;A.next=null,w===null?y=W:w.next=W,w=A;var re=n.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==w&&(T===null?re.firstBaseUpdate=W:T.next=W,re.lastBaseUpdate=A))}if(y!==null){var le=m.baseState;w=0,re=W=A=null,T=y;do{var ne=T.lane,xe=T.eventTime;if((d&ne)===ne){re!==null&&(re=re.next={eventTime:xe,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var Se=n,Ce=T;switch(ne=i,xe=l,Ce.tag){case 1:if(Se=Ce.payload,typeof Se=="function"){le=Se.call(xe,le,ne);break e}le=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ce.payload,ne=typeof Se=="function"?Se.call(xe,le,ne):Se,ne==null)break e;le=S({},le,ne);break e;case 2:Tr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,ne=m.effects,ne===null?m.effects=[T]:ne.push(T))}else xe={eventTime:xe,lane:ne,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(W=re=xe,A=le):re=re.next=xe,w|=ne;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;ne=T,T=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);if(re===null&&(A=le),m.baseState=A,m.firstBaseUpdate=W,m.lastBaseUpdate=re,i=m.shared.interleaved,i!==null){m=i;do w|=m.lane,m=m.next;while(m!==i)}else y===null&&(m.shared.lanes=0);Zr|=w,n.lanes=w,n.memoizedState=le}}function Cf(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(r(191,m));m.call(d)}}}var Ls={},Jn=Cr(Ls),Is=Cr(Ls),As=Cr(Ls);function Yr(n){if(n===Ls)throw Error(r(174));return n}function Wa(n,i){switch(st(As,i),st(Is,n),st(Jn,Ls),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:se(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=se(i,n)}ct(Jn),st(Jn,i)}function Oi(){ct(Jn),ct(Is),ct(As)}function Nf(n){Yr(As.current);var i=Yr(Jn.current),l=se(i,n.type);i!==l&&(st(Is,n),st(Jn,l))}function Ga(n){Is.current===n&&(ct(Jn),ct(Is))}var mt=Cr(0);function Qo(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ka=[];function Qa(){for(var n=0;n<Ka.length;n++)Ka[n]._workInProgressVersionPrimary=null;Ka.length=0}var Jo=q.ReactCurrentDispatcher,Ja=q.ReactCurrentBatchConfig,Xr=0,gt=null,Nt=null,It=null,Yo=!1,Rs=!1,Os=0,A0=0;function Vt(){throw Error(r(321))}function Ya(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Dn(n[l],i[l]))return!1;return!0}function Xa(n,i,l,d,m,y){if(Xr=y,gt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Jo.current=n===null||n.memoizedState===null?M0:D0,n=l(d,m),Rs){y=0;do{if(Rs=!1,Os=0,25<=y)throw Error(r(301));y+=1,It=Nt=null,i.updateQueue=null,Jo.current=$0,n=l(d,m)}while(Rs)}if(Jo.current=el,i=Nt!==null&&Nt.next!==null,Xr=0,It=Nt=gt=null,Yo=!1,i)throw Error(r(300));return n}function Za(){var n=Os!==0;return Os=0,n}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?gt.memoizedState=It=n:It=It.next=n,It}function Nn(){if(Nt===null){var n=gt.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var i=It===null?gt.memoizedState:It.next;if(i!==null)It=i,Nt=n;else{if(n===null)throw Error(r(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},It===null?gt.memoizedState=It=n:It=It.next=n}return It}function zs(n,i){return typeof i=="function"?i(n):i}function eu(n){var i=Nn(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var d=Nt,m=d.baseQueue,y=l.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}d.baseQueue=m=y,l.pending=null}if(m!==null){y=m.next,d=d.baseState;var T=w=null,A=null,W=y;do{var re=W.lane;if((Xr&re)===re)A!==null&&(A=A.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:n(d,W.action);else{var le={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};A===null?(T=A=le,w=d):A=A.next=le,gt.lanes|=re,Zr|=re}W=W.next}while(W!==null&&W!==y);A===null?w=d:A.next=T,Dn(d,i.memoizedState)||(rn=!0),i.memoizedState=d,i.baseState=w,i.baseQueue=A,l.lastRenderedState=d}if(n=l.interleaved,n!==null){m=n;do y=m.lane,gt.lanes|=y,Zr|=y,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function tu(n){var i=Nn(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,y=i.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do y=n(y,w.action),w=w.next;while(w!==m);Dn(y,i.memoizedState)||(rn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,d]}function Ef(){}function Tf(n,i){var l=gt,d=Nn(),m=i(),y=!Dn(d.memoizedState,m);if(y&&(d.memoizedState=m,rn=!0),d=d.queue,nu(If.bind(null,l,d,n),[n]),d.getSnapshot!==i||y||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,Ms(9,Lf.bind(null,l,d,m,i),void 0,null),At===null)throw Error(r(349));(Xr&30)!==0||Pf(l,i,m)}return m}function Pf(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=gt.updateQueue,i===null?(i={lastEffect:null,stores:null},gt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Lf(n,i,l,d){i.value=l,i.getSnapshot=d,Af(i)&&Rf(n)}function If(n,i,l){return l(function(){Af(i)&&Rf(n)})}function Af(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Dn(n,l)}catch{return!0}}function Rf(n){var i=cr(n,1);i!==null&&qn(i,n,1,-1)}function Of(n){var i=Yn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:n},i.queue=n,n=n.dispatch=z0.bind(null,gt,n),[i.memoizedState,n]}function Ms(n,i,l,d){return n={tag:n,create:i,destroy:l,deps:d,next:null},i=gt.updateQueue,i===null?(i={lastEffect:null,stores:null},gt.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,i.lastEffect=n)),n}function zf(){return Nn().memoizedState}function Xo(n,i,l,d){var m=Yn();gt.flags|=n,m.memoizedState=Ms(1|i,l,void 0,d===void 0?null:d)}function Zo(n,i,l,d){var m=Nn();d=d===void 0?null:d;var y=void 0;if(Nt!==null){var w=Nt.memoizedState;if(y=w.destroy,d!==null&&Ya(d,w.deps)){m.memoizedState=Ms(i,l,y,d);return}}gt.flags|=n,m.memoizedState=Ms(1|i,l,y,d)}function Mf(n,i){return Xo(8390656,8,n,i)}function nu(n,i){return Zo(2048,8,n,i)}function Df(n,i){return Zo(4,2,n,i)}function $f(n,i){return Zo(4,4,n,i)}function Ff(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Uf(n,i,l){return l=l!=null?l.concat([n]):null,Zo(4,4,Ff.bind(null,i,n),l)}function ru(){}function Bf(n,i){var l=Nn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Ya(i,d[1])?d[0]:(l.memoizedState=[n,i],n)}function qf(n,i){var l=Nn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Ya(i,d[1])?d[0]:(n=n(),l.memoizedState=[n,i],n)}function Vf(n,i,l){return(Xr&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=l):(Dn(l,i)||(l=xd(),gt.lanes|=l,Zr|=l,n.baseState=!0),i)}function R0(n,i){var l=nt;nt=l!==0&&4>l?l:4,n(!0);var d=Ja.transition;Ja.transition={};try{n(!1),i()}finally{nt=l,Ja.transition=d}}function Hf(){return Nn().memoizedState}function O0(n,i,l){var d=Rr(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Wf(n))Gf(i,l);else if(l=_f(n,i,l,d),l!==null){var m=Yt();qn(l,n,d,m),Kf(l,i,d)}}function z0(n,i,l){var d=Rr(n),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wf(n))Gf(i,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,T=y(w,l);if(m.hasEagerState=!0,m.eagerState=T,Dn(T,w)){var A=i.interleaved;A===null?(m.next=m,Va(i)):(m.next=A.next,A.next=m),i.interleaved=m;return}}catch{}finally{}l=_f(n,i,m,d),l!==null&&(m=Yt(),qn(l,n,d,m),Kf(l,i,d))}}function Wf(n){var i=n.alternate;return n===gt||i!==null&&i===gt}function Gf(n,i){Rs=Yo=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Kf(n,i,l){if((l&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,sa(n,l)}}var el={readContext:Cn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},M0={readContext:Cn,useCallback:function(n,i){return Yn().memoizedState=[n,i===void 0?null:i],n},useContext:Cn,useEffect:Mf,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Xo(4194308,4,Ff.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Xo(4194308,4,n,i)},useInsertionEffect:function(n,i){return Xo(4,2,n,i)},useMemo:function(n,i){var l=Yn();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var d=Yn();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=O0.bind(null,gt,n),[d.memoizedState,n]},useRef:function(n){var i=Yn();return n={current:n},i.memoizedState=n},useState:Of,useDebugValue:ru,useDeferredValue:function(n){return Yn().memoizedState=n},useTransition:function(){var n=Of(!1),i=n[0];return n=R0.bind(null,n[1]),Yn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var d=gt,m=Yn();if(ft){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),At===null)throw Error(r(349));(Xr&30)!==0||Pf(d,i,l)}m.memoizedState=l;var y={value:l,getSnapshot:i};return m.queue=y,Mf(If.bind(null,d,y,n),[n]),d.flags|=2048,Ms(9,Lf.bind(null,d,y,l,i),void 0,null),l},useId:function(){var n=Yn(),i=At.identifierPrefix;if(ft){var l=ur,d=ar;l=(d&~(1<<32-Mn(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=Os++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=A0++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},D0={readContext:Cn,useCallback:Bf,useContext:Cn,useEffect:nu,useImperativeHandle:Uf,useInsertionEffect:Df,useLayoutEffect:$f,useMemo:qf,useReducer:eu,useRef:zf,useState:function(){return eu(zs)},useDebugValue:ru,useDeferredValue:function(n){var i=Nn();return Vf(i,Nt.memoizedState,n)},useTransition:function(){var n=eu(zs)[0],i=Nn().memoizedState;return[n,i]},useMutableSource:Ef,useSyncExternalStore:Tf,useId:Hf,unstable_isNewReconciler:!1},$0={readContext:Cn,useCallback:Bf,useContext:Cn,useEffect:nu,useImperativeHandle:Uf,useInsertionEffect:Df,useLayoutEffect:$f,useMemo:qf,useReducer:tu,useRef:zf,useState:function(){return tu(zs)},useDebugValue:ru,useDeferredValue:function(n){var i=Nn();return Nt===null?i.memoizedState=n:Vf(i,Nt.memoizedState,n)},useTransition:function(){var n=tu(zs)[0],i=Nn().memoizedState;return[n,i]},useMutableSource:Ef,useSyncExternalStore:Tf,useId:Hf,unstable_isNewReconciler:!1};function Fn(n,i){if(n&&n.defaultProps){i=S({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function iu(n,i,l,d){i=n.memoizedState,l=l(d,i),l=l==null?i:S({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var tl={isMounted:function(n){return(n=n._reactInternals)?et(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var d=Yt(),m=Rr(n),y=dr(d,m);y.payload=i,l!=null&&(y.callback=l),i=Pr(n,y,m),i!==null&&(qn(i,n,m,d),Go(i,n,m))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var d=Yt(),m=Rr(n),y=dr(d,m);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=Pr(n,y,m),i!==null&&(qn(i,n,m,d),Go(i,n,m))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Yt(),d=Rr(n),m=dr(l,d);m.tag=2,i!=null&&(m.callback=i),i=Pr(n,m,d),i!==null&&(qn(i,n,d,l),Go(i,n,d))}};function Qf(n,i,l,d,m,y,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,w):i.prototype&&i.prototype.isPureReactComponent?!_s(l,d)||!_s(m,y):!0}function Jf(n,i,l){var d=!1,m=Nr,y=i.contextType;return typeof y=="object"&&y!==null?y=Cn(y):(m=nn(i)?Gr:qt.current,d=i.contextTypes,y=(d=d!=null)?Ei(n,m):Nr),i=new i(l,y),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=tl,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=y),i}function Yf(n,i,l,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==n&&tl.enqueueReplaceState(i,i.state,null)}function su(n,i,l,d){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},Ha(n);var y=i.contextType;typeof y=="object"&&y!==null?m.context=Cn(y):(y=nn(i)?Gr:qt.current,m.context=Ei(n,y)),m.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(iu(n,i,y,l),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(i=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),i!==m.state&&tl.enqueueReplaceState(m,m.state,null),Ko(n,l,m,d),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function zi(n,i){try{var l="",d=i;do l+=me(d),d=d.return;while(d);var m=l}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:i,stack:m,digest:null}}function ou(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function lu(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var F0=typeof WeakMap=="function"?WeakMap:Map;function Xf(n,i,l){l=dr(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){al||(al=!0,ku=d),lu(n,i)},l}function Zf(n,i,l){l=dr(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var m=i.value;l.payload=function(){return d(m)},l.callback=function(){lu(n,i)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){lu(n,i),typeof d!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function eh(n,i,l){var d=n.pingCache;if(d===null){d=n.pingCache=new F0;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(l)||(m.add(l),n=e2.bind(null,n,i,l),i.then(n,n))}function th(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function nh(n,i,l,d,m){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=dr(-1,1),i.tag=2,Pr(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var U0=q.ReactCurrentOwner,rn=!1;function Jt(n,i,l,d){i.child=n===null?kf(i,null,l,d):Ii(i,n.child,l,d)}function rh(n,i,l,d,m){l=l.render;var y=i.ref;return Ri(i,m),d=Xa(n,i,l,d,y,m),l=Za(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,fr(n,i,m)):(ft&&l&&Oa(i),i.flags|=1,Jt(n,i,d,m),i.child)}function ih(n,i,l,d,m){if(n===null){var y=l.type;return typeof y=="function"&&!Tu(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,sh(n,i,y,d,m)):(n=pl(l.type,null,d,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,(n.lanes&m)===0){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:_s,l(w,d)&&n.ref===i.ref)return fr(n,i,m)}return i.flags|=1,n=zr(y,d),n.ref=i.ref,n.return=i,i.child=n}function sh(n,i,l,d,m){if(n!==null){var y=n.memoizedProps;if(_s(y,d)&&n.ref===i.ref)if(rn=!1,i.pendingProps=d=y,(n.lanes&m)!==0)(n.flags&131072)!==0&&(rn=!0);else return i.lanes=n.lanes,fr(n,i,m)}return au(n,i,l,d,m)}function oh(n,i,l){var d=i.pendingProps,m=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Di,vn),vn|=l;else{if((l&1073741824)===0)return n=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,st(Di,vn),vn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,st(Di,vn),vn|=d}else y!==null?(d=y.baseLanes|l,i.memoizedState=null):d=l,st(Di,vn),vn|=d;return Jt(n,i,m,l),i.child}function lh(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function au(n,i,l,d,m){var y=nn(l)?Gr:qt.current;return y=Ei(i,y),Ri(i,m),l=Xa(n,i,l,d,y,m),d=Za(),n!==null&&!rn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m,fr(n,i,m)):(ft&&d&&Oa(i),i.flags|=1,Jt(n,i,l,m),i.child)}function ah(n,i,l,d,m){if(nn(l)){var y=!0;$o(i)}else y=!1;if(Ri(i,m),i.stateNode===null)rl(n,i),Jf(i,l,d),su(i,l,d,m),d=!0;else if(n===null){var w=i.stateNode,T=i.memoizedProps;w.props=T;var A=w.context,W=l.contextType;typeof W=="object"&&W!==null?W=Cn(W):(W=nn(l)?Gr:qt.current,W=Ei(i,W));var re=l.getDerivedStateFromProps,le=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==d||A!==W)&&Yf(i,w,d,W),Tr=!1;var ne=i.memoizedState;w.state=ne,Ko(i,d,w,m),A=i.memoizedState,T!==d||ne!==A||tn.current||Tr?(typeof re=="function"&&(iu(i,l,re,d),A=i.memoizedState),(T=Tr||Qf(i,l,T,d,ne,A,W))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=A),w.props=d,w.state=A,w.context=W,d=T):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,Sf(n,i),T=i.memoizedProps,W=i.type===i.elementType?T:Fn(i.type,T),w.props=W,le=i.pendingProps,ne=w.context,A=l.contextType,typeof A=="object"&&A!==null?A=Cn(A):(A=nn(l)?Gr:qt.current,A=Ei(i,A));var xe=l.getDerivedStateFromProps;(re=typeof xe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==le||ne!==A)&&Yf(i,w,d,A),Tr=!1,ne=i.memoizedState,w.state=ne,Ko(i,d,w,m);var Se=i.memoizedState;T!==le||ne!==Se||tn.current||Tr?(typeof xe=="function"&&(iu(i,l,xe,d),Se=i.memoizedState),(W=Tr||Qf(i,l,W,d,ne,Se,A)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Se,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Se,A)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Se),w.props=d,w.state=Se,w.context=A,d=W):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),d=!1)}return uu(n,i,l,d,y,m)}function uu(n,i,l,d,m,y){lh(n,i);var w=(i.flags&128)!==0;if(!d&&!w)return m&&hf(i,l,!1),fr(n,i,y);d=i.stateNode,U0.current=i;var T=w&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&w?(i.child=Ii(i,n.child,null,y),i.child=Ii(i,null,T,y)):Jt(n,i,T,y),i.memoizedState=d.state,m&&hf(i,l,!0),i.child}function uh(n){var i=n.stateNode;i.pendingContext?df(n,i.pendingContext,i.pendingContext!==i.context):i.context&&df(n,i.context,!1),Wa(n,i.containerInfo)}function ch(n,i,l,d,m){return Li(),$a(m),i.flags|=256,Jt(n,i,l,d),i.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function du(n){return{baseLanes:n,cachePool:null,transitions:null}}function dh(n,i,l){var d=i.pendingProps,m=mt.current,y=!1,w=(i.flags&128)!==0,T;if((T=w)||(T=n!==null&&n.memoizedState===null?!1:(m&2)!==0),T?(y=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),st(mt,m&1),n===null)return Da(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=d.children,n=d.fallback,y?(d=i.mode,y=i.child,w={mode:"hidden",children:w},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=ml(w,d,0,null),n=ri(n,d,l,null),y.return=i,n.return=i,y.sibling=n,i.child=y,i.child.memoizedState=du(l),i.memoizedState=cu,n):fu(i,w));if(m=n.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return B0(n,i,w,d,T,m,l);if(y){y=d.fallback,w=i.mode,m=n.child,T=m.sibling;var A={mode:"hidden",children:d.children};return(w&1)===0&&i.child!==m?(d=i.child,d.childLanes=0,d.pendingProps=A,i.deletions=null):(d=zr(m,A),d.subtreeFlags=m.subtreeFlags&14680064),T!==null?y=zr(T,y):(y=ri(y,w,l,null),y.flags|=2),y.return=i,d.return=i,d.sibling=y,i.child=d,d=y,y=i.child,w=n.child.memoizedState,w=w===null?du(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=n.childLanes&~l,i.memoizedState=cu,d}return y=n.child,n=y.sibling,d=zr(y,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=l),d.return=i,d.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=d,i.memoizedState=null,d}function fu(n,i){return i=ml({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function nl(n,i,l,d){return d!==null&&$a(d),Ii(i,n.child,null,l),n=fu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function B0(n,i,l,d,m,y,w){if(l)return i.flags&256?(i.flags&=-257,d=ou(Error(r(422))),nl(n,i,w,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(y=d.fallback,m=i.mode,d=ml({mode:"visible",children:d.children},m,0,null),y=ri(y,m,w,null),y.flags|=2,d.return=i,y.return=i,d.sibling=y,i.child=d,(i.mode&1)!==0&&Ii(i,n.child,null,w),i.child.memoizedState=du(w),i.memoizedState=cu,y);if((i.mode&1)===0)return nl(n,i,w,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var T=d.dgst;return d=T,y=Error(r(419)),d=ou(y,d,void 0),nl(n,i,w,d)}if(T=(w&n.childLanes)!==0,rn||T){if(d=At,d!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|w))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,cr(n,m),qn(d,n,m,-1))}return Eu(),d=ou(Error(r(421))),nl(n,i,w,d)}return m.data==="$?"?(i.flags|=128,i.child=n.child,i=t2.bind(null,n),m._reactRetry=i,null):(n=y.treeContext,gn=jr(m.nextSibling),mn=i,ft=!0,$n=null,n!==null&&(Sn[jn++]=ar,Sn[jn++]=ur,Sn[jn++]=Kr,ar=n.id,ur=n.overflow,Kr=i),i=fu(i,d.children),i.flags|=4096,i)}function fh(n,i,l){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),qa(n.return,i,l)}function hu(n,i,l,d,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=m)}function hh(n,i,l){var d=i.pendingProps,m=d.revealOrder,y=d.tail;if(Jt(n,i,d.children,l),d=mt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fh(n,l,i);else if(n.tag===19)fh(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(st(mt,d),(i.mode&1)===0)i.memoizedState=null;else switch(m){case"forwards":for(l=i.child,m=null;l!==null;)n=l.alternate,n!==null&&Qo(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),hu(i,!1,m,l,y);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Qo(n)===null){i.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}hu(i,!0,l,null,y);break;case"together":hu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function rl(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function fr(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Zr|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,l=zr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=zr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function q0(n,i,l){switch(i.tag){case 3:uh(i),Li();break;case 5:Nf(i);break;case 1:nn(i.type)&&$o(i);break;case 4:Wa(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,m=i.memoizedProps.value;st(Ho,d._currentValue),d._currentValue=m;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(st(mt,mt.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?dh(n,i,l):(st(mt,mt.current&1),n=fr(n,i,l),n!==null?n.sibling:null);st(mt,mt.current&1);break;case 19:if(d=(l&i.childLanes)!==0,(n.flags&128)!==0){if(d)return hh(n,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),st(mt,mt.current),d)break;return null;case 22:case 23:return i.lanes=0,oh(n,i,l)}return fr(n,i,l)}var ph,pu,mh,gh;ph=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},pu=function(){},mh=function(n,i,l,d){var m=n.memoizedProps;if(m!==d){n=i.stateNode,Yr(Jn.current);var y=null;switch(l){case"input":m=ve(n,m),d=ve(n,d),y=[];break;case"select":m=S({},m,{value:void 0}),d=S({},d,{value:void 0}),y=[];break;case"textarea":m=Dt(n,m),d=Dt(n,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=zo)}_t(l,d);var w;l=null;for(W in m)if(!d.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var T=m[W];for(w in T)T.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in d){var A=d[W];if(T=m?.[W],d.hasOwnProperty(W)&&A!==T&&(A!=null||T!=null))if(W==="style")if(T){for(w in T)!T.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in A)A.hasOwnProperty(w)&&T[w]!==A[w]&&(l||(l={}),l[w]=A[w])}else l||(y||(y=[]),y.push(W,l)),l=A;else W==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,T=T?T.__html:void 0,A!=null&&T!==A&&(y=y||[]).push(W,A)):W==="children"?typeof A!="string"&&typeof A!="number"||(y=y||[]).push(W,""+A):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(A!=null&&W==="onScroll"&&ut("scroll",n),y||T===A||(y=[])):(y=y||[]).push(W,A))}l&&(y=y||[]).push("style",l);var W=y;(i.updateQueue=W)&&(i.flags|=4)}},gh=function(n,i,l,d){l!==d&&(i.flags|=4)};function Ds(n,i){if(!ft)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(i)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,i}function V0(n,i,l){var d=i.pendingProps;switch(za(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(i),null;case 1:return nn(i.type)&&Do(),Ht(i),null;case 3:return d=i.stateNode,Oi(),ct(tn),ct(qt),Qa(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(qo(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,$n!==null&&(ju($n),$n=null))),pu(n,i),Ht(i),null;case 5:Ga(i);var m=Yr(As.current);if(l=i.type,n!==null&&i.stateNode!=null)mh(n,i,l,d,m),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(r(166));return Ht(i),null}if(n=Yr(Jn.current),qo(i)){d=i.stateNode,l=i.type;var y=i.memoizedProps;switch(d[Qn]=i,d[Es]=y,n=(i.mode&1)!==0,l){case"dialog":ut("cancel",d),ut("close",d);break;case"iframe":case"object":case"embed":ut("load",d);break;case"video":case"audio":for(m=0;m<js.length;m++)ut(js[m],d);break;case"source":ut("error",d);break;case"img":case"image":case"link":ut("error",d),ut("load",d);break;case"details":ut("toggle",d);break;case"input":rt(d,y),ut("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ut("invalid",d);break;case"textarea":In(d,y),ut("invalid",d)}_t(l,y),m=null;for(var w in y)if(y.hasOwnProperty(w)){var T=y[w];w==="children"?typeof T=="string"?d.textContent!==T&&(y.suppressHydrationWarning!==!0&&Oo(d.textContent,T,n),m=["children",T]):typeof T=="number"&&d.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&Oo(d.textContent,T,n),m=["children",""+T]):o.hasOwnProperty(w)&&T!=null&&w==="onScroll"&&ut("scroll",d)}switch(l){case"input":ht(d),cn(d,y,!0);break;case"textarea":ht(d),bn(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=zo)}d=m,i.updateQueue=d,d!==null&&(i.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=G(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=w.createElement(l,{is:d.is}):(n=w.createElement(l),l==="select"&&(w=n,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):n=w.createElementNS(n,l),n[Qn]=i,n[Es]=d,ph(n,i,!1,!1),i.stateNode=n;e:{switch(w=Qe(l,d),l){case"dialog":ut("cancel",n),ut("close",n),m=d;break;case"iframe":case"object":case"embed":ut("load",n),m=d;break;case"video":case"audio":for(m=0;m<js.length;m++)ut(js[m],n);m=d;break;case"source":ut("error",n),m=d;break;case"img":case"image":case"link":ut("error",n),ut("load",n),m=d;break;case"details":ut("toggle",n),m=d;break;case"input":rt(n,d),m=ve(n,d),ut("invalid",n);break;case"option":m=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},m=S({},d,{value:void 0}),ut("invalid",n);break;case"textarea":In(n,d),m=Dt(n,d),ut("invalid",n);break;default:m=d}_t(l,m),T=m;for(y in T)if(T.hasOwnProperty(y)){var A=T[y];y==="style"?dn(n,A):y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Ue(n,A)):y==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&$e(n,A):typeof A=="number"&&$e(n,""+A):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?A!=null&&y==="onScroll"&&ut("scroll",n):A!=null&&I(n,y,A,w))}switch(l){case"input":ht(n),cn(n,d,!1);break;case"textarea":ht(n),bn(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Le(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?en(n,!!d.multiple,y,!1):d.defaultValue!=null&&en(n,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=zo)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ht(i),null;case 6:if(n&&i.stateNode!=null)gh(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(l=Yr(As.current),Yr(Jn.current),qo(i)){if(d=i.stateNode,l=i.memoizedProps,d[Qn]=i,(y=d.nodeValue!==l)&&(n=mn,n!==null))switch(n.tag){case 3:Oo(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Oo(d.nodeValue,l,(n.mode&1)!==0)}y&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Qn]=i,i.stateNode=d}return Ht(i),null;case 13:if(ct(mt),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ft&&gn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)xf(),Li(),i.flags|=98560,y=!1;else if(y=qo(i),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(r(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Qn]=i}else Li(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ht(i),y=!1}else $n!==null&&(ju($n),$n=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(mt.current&1)!==0?Et===0&&(Et=3):Eu())),i.updateQueue!==null&&(i.flags|=4),Ht(i),null);case 4:return Oi(),pu(n,i),n===null&&Cs(i.stateNode.containerInfo),Ht(i),null;case 10:return Ba(i.type._context),Ht(i),null;case 17:return nn(i.type)&&Do(),Ht(i),null;case 19:if(ct(mt),y=i.memoizedState,y===null)return Ht(i),null;if(d=(i.flags&128)!==0,w=y.rendering,w===null)if(d)Ds(y,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Qo(n),w!==null){for(i.flags|=128,Ds(y,!1),d=w.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)y=l,n=d,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,n=w.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return st(mt,mt.current&1|2),i.child}n=n.sibling}y.tail!==null&&D()>$i&&(i.flags|=128,d=!0,Ds(y,!1),i.lanes=4194304)}else{if(!d)if(n=Qo(w),n!==null){if(i.flags|=128,d=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Ds(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!ft)return Ht(i),null}else 2*D()-y.renderingStartTime>$i&&l!==1073741824&&(i.flags|=128,d=!0,Ds(y,!1),i.lanes=4194304);y.isBackwards?(w.sibling=i.child,i.child=w):(l=y.last,l!==null?l.sibling=w:i.child=w,y.last=w)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=D(),i.sibling=null,l=mt.current,st(mt,d?l&1|2:l&1),i):(Ht(i),null);case 22:case 23:return Nu(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(vn&1073741824)!==0&&(Ht(i),i.subtreeFlags&6&&(i.flags|=8192)):Ht(i),null;case 24:return null;case 25:return null}throw Error(r(156,i.tag))}function H0(n,i){switch(za(i),i.tag){case 1:return nn(i.type)&&Do(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Oi(),ct(tn),ct(qt),Qa(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Ga(i),null;case 13:if(ct(mt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Li()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ct(mt),null;case 4:return Oi(),null;case 10:return Ba(i.type._context),null;case 22:case 23:return Nu(),null;case 24:return null;default:return null}}var il=!1,Wt=!1,W0=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Mi(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){wt(n,i,d)}else l.current=null}function mu(n,i,l){try{l()}catch(d){wt(n,i,d)}}var vh=!1;function G0(n,i){if(Na=So,n=Kd(),xa(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,T=-1,A=-1,W=0,re=0,le=n,ne=null;t:for(;;){for(var xe;le!==l||m!==0&&le.nodeType!==3||(T=w+m),le!==y||d!==0&&le.nodeType!==3||(A=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(xe=le.firstChild)!==null;)ne=le,le=xe;for(;;){if(le===n)break t;if(ne===l&&++W===m&&(T=w),ne===y&&++re===d&&(A=w),(xe=le.nextSibling)!==null)break;le=ne,ne=le.parentNode}le=xe}l=T===-1||A===-1?null:{start:T,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ea={focusedElem:n,selectionRange:l},So=!1,ke=i;ke!==null;)if(i=ke,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ke=n;else for(;ke!==null;){i=ke;try{var Se=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ce=Se.memoizedProps,St=Se.memoizedState,B=i.stateNode,O=B.getSnapshotBeforeUpdate(i.elementType===i.type?Ce:Fn(i.type,Ce),St);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var V=i.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(de){wt(i,i.return,de)}if(n=i.sibling,n!==null){n.return=i.return,ke=n;break}ke=i.return}return Se=vh,vh=!1,Se}function $s(n,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&n)===n){var y=m.destroy;m.destroy=void 0,y!==void 0&&mu(i,l,y)}m=m.next}while(m!==d)}}function sl(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function gu(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function yh(n){var i=n.alternate;i!==null&&(n.alternate=null,yh(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Qn],delete i[Es],delete i[Ia],delete i[T0],delete i[P0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xh(n){return n.tag===5||n.tag===3||n.tag===4}function bh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vu(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=zo));else if(d!==4&&(n=n.child,n!==null))for(vu(n,i,l),n=n.sibling;n!==null;)vu(n,i,l),n=n.sibling}function yu(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(yu(n,i,l),n=n.sibling;n!==null;)yu(n,i,l),n=n.sibling}var $t=null,Un=!1;function Lr(n,i,l){for(l=l.child;l!==null;)wh(n,i,l),l=l.sibling}function wh(n,i,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(_n,l)}catch{}switch(l.tag){case 5:Wt||Mi(l,i);case 6:var d=$t,m=Un;$t=null,Lr(n,i,l),$t=d,Un=m,$t!==null&&(Un?(n=$t,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):$t.removeChild(l.stateNode));break;case 18:$t!==null&&(Un?(n=$t,l=l.stateNode,n.nodeType===8?La(n.parentNode,l):n.nodeType===1&&La(n,l),vs(n)):La($t,l.stateNode));break;case 4:d=$t,m=Un,$t=l.stateNode.containerInfo,Un=!0,Lr(n,i,l),$t=d,Un=m;break;case 0:case 11:case 14:case 15:if(!Wt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&mu(l,i,w),m=m.next}while(m!==d)}Lr(n,i,l);break;case 1:if(!Wt&&(Mi(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(T){wt(l,i,T)}Lr(n,i,l);break;case 21:Lr(n,i,l);break;case 22:l.mode&1?(Wt=(d=Wt)||l.memoizedState!==null,Lr(n,i,l),Wt=d):Lr(n,i,l);break;default:Lr(n,i,l)}}function kh(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new W0),i.forEach(function(d){var m=n2.bind(null,n,d);l.has(d)||(l.add(d),d.then(m,m))})}}function Bn(n,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var y=n,w=i,T=w;e:for(;T!==null;){switch(T.tag){case 5:$t=T.stateNode,Un=!1;break e;case 3:$t=T.stateNode.containerInfo,Un=!0;break e;case 4:$t=T.stateNode.containerInfo,Un=!0;break e}T=T.return}if($t===null)throw Error(r(160));wh(y,w,m),$t=null,Un=!1;var A=m.alternate;A!==null&&(A.return=null),m.return=null}catch(W){wt(m,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_h(i,n),i=i.sibling}function _h(n,i){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Bn(i,n),Xn(n),d&4){try{$s(3,n,n.return),sl(3,n)}catch(Ce){wt(n,n.return,Ce)}try{$s(5,n,n.return)}catch(Ce){wt(n,n.return,Ce)}}break;case 1:Bn(i,n),Xn(n),d&512&&l!==null&&Mi(l,l.return);break;case 5:if(Bn(i,n),Xn(n),d&512&&l!==null&&Mi(l,l.return),n.flags&32){var m=n.stateNode;try{$e(m,"")}catch(Ce){wt(n,n.return,Ce)}}if(d&4&&(m=n.stateNode,m!=null)){var y=n.memoizedProps,w=l!==null?l.memoizedProps:y,T=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&pt(m,y),Qe(T,w);var W=Qe(T,y);for(w=0;w<A.length;w+=2){var re=A[w],le=A[w+1];re==="style"?dn(m,le):re==="dangerouslySetInnerHTML"?Ue(m,le):re==="children"?$e(m,le):I(m,re,le,W)}switch(T){case"input":Mt(m,y);break;case"textarea":Qt(m,y);break;case"select":var ne=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var xe=y.value;xe!=null?en(m,!!y.multiple,xe,!1):ne!==!!y.multiple&&(y.defaultValue!=null?en(m,!!y.multiple,y.defaultValue,!0):en(m,!!y.multiple,y.multiple?[]:"",!1))}m[Es]=y}catch(Ce){wt(n,n.return,Ce)}}break;case 6:if(Bn(i,n),Xn(n),d&4){if(n.stateNode===null)throw Error(r(162));m=n.stateNode,y=n.memoizedProps;try{m.nodeValue=y}catch(Ce){wt(n,n.return,Ce)}}break;case 3:if(Bn(i,n),Xn(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{vs(i.containerInfo)}catch(Ce){wt(n,n.return,Ce)}break;case 4:Bn(i,n),Xn(n);break;case 13:Bn(i,n),Xn(n),m=n.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(wu=D())),d&4&&kh(n);break;case 22:if(re=l!==null&&l.memoizedState!==null,n.mode&1?(Wt=(W=Wt)||re,Bn(i,n),Wt=W):Bn(i,n),Xn(n),d&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!re&&(n.mode&1)!==0)for(ke=n,re=n.child;re!==null;){for(le=ke=re;ke!==null;){switch(ne=ke,xe=ne.child,ne.tag){case 0:case 11:case 14:case 15:$s(4,ne,ne.return);break;case 1:Mi(ne,ne.return);var Se=ne.stateNode;if(typeof Se.componentWillUnmount=="function"){d=ne,l=ne.return;try{i=d,Se.props=i.memoizedProps,Se.state=i.memoizedState,Se.componentWillUnmount()}catch(Ce){wt(d,l,Ce)}}break;case 5:Mi(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Ch(le);continue}}xe!==null?(xe.return=ne,ke=xe):Ch(le)}re=re.sibling}e:for(re=null,le=n;;){if(le.tag===5){if(re===null){re=le;try{m=le.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=le.stateNode,A=le.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,T.style.display=at("display",w))}catch(Ce){wt(n,n.return,Ce)}}}else if(le.tag===6){if(re===null)try{le.stateNode.nodeValue=W?"":le.memoizedProps}catch(Ce){wt(n,n.return,Ce)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===n)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===n)break e;for(;le.sibling===null;){if(le.return===null||le.return===n)break e;re===le&&(re=null),le=le.return}re===le&&(re=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Bn(i,n),Xn(n),d&4&&kh(n);break;case 21:break;default:Bn(i,n),Xn(n)}}function Xn(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(xh(l)){var d=l;break e}l=l.return}throw Error(r(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&($e(m,""),d.flags&=-33);var y=bh(n);yu(n,y,m);break;case 3:case 4:var w=d.stateNode.containerInfo,T=bh(n);vu(n,T,w);break;default:throw Error(r(161))}}catch(A){wt(n,n.return,A)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function K0(n,i,l){ke=n,Sh(n)}function Sh(n,i,l){for(var d=(n.mode&1)!==0;ke!==null;){var m=ke,y=m.child;if(m.tag===22&&d){var w=m.memoizedState!==null||il;if(!w){var T=m.alternate,A=T!==null&&T.memoizedState!==null||Wt;T=il;var W=Wt;if(il=w,(Wt=A)&&!W)for(ke=m;ke!==null;)w=ke,A=w.child,w.tag===22&&w.memoizedState!==null?Nh(m):A!==null?(A.return=w,ke=A):Nh(m);for(;y!==null;)ke=y,Sh(y),y=y.sibling;ke=m,il=T,Wt=W}jh(n)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ke=y):jh(n)}}function jh(n){for(;ke!==null;){var i=ke;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Wt||sl(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Wt)if(l===null)d.componentDidMount();else{var m=i.elementType===i.type?l.memoizedProps:Fn(i.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Cf(i,y,d);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Cf(i,w,l)}break;case 5:var T=i.stateNode;if(l===null&&i.flags&4){l=T;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var le=re.dehydrated;le!==null&&vs(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Wt||i.flags&512&&gu(i)}catch(ne){wt(i,i.return,ne)}}if(i===n){ke=null;break}if(l=i.sibling,l!==null){l.return=i.return,ke=l;break}ke=i.return}}function Ch(n){for(;ke!==null;){var i=ke;if(i===n){ke=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ke=l;break}ke=i.return}}function Nh(n){for(;ke!==null;){var i=ke;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{sl(4,i)}catch(A){wt(i,l,A)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var m=i.return;try{d.componentDidMount()}catch(A){wt(i,m,A)}}var y=i.return;try{gu(i)}catch(A){wt(i,y,A)}break;case 5:var w=i.return;try{gu(i)}catch(A){wt(i,w,A)}}}catch(A){wt(i,i.return,A)}if(i===n){ke=null;break}var T=i.sibling;if(T!==null){T.return=i.return,ke=T;break}ke=i.return}}var Q0=Math.ceil,ol=q.ReactCurrentDispatcher,xu=q.ReactCurrentOwner,En=q.ReactCurrentBatchConfig,Ze=0,At=null,jt=null,Ft=0,vn=0,Di=Cr(0),Et=0,Fs=null,Zr=0,ll=0,bu=0,Us=null,sn=null,wu=0,$i=1/0,hr=null,al=!1,ku=null,Ir=null,ul=!1,Ar=null,cl=0,Bs=0,_u=null,dl=-1,fl=0;function Yt(){return(Ze&6)!==0?D():dl!==-1?dl:dl=D()}function Rr(n){return(n.mode&1)===0?1:(Ze&2)!==0&&Ft!==0?Ft&-Ft:I0.transition!==null?(fl===0&&(fl=xd()),fl):(n=nt,n!==0||(n=window.event,n=n===void 0?16:Ed(n.type)),n)}function qn(n,i,l,d){if(50<Bs)throw Bs=0,_u=null,Error(r(185));fs(n,l,d),((Ze&2)===0||n!==At)&&(n===At&&((Ze&2)===0&&(ll|=l),Et===4&&Or(n,Ft)),on(n,d),l===1&&Ze===0&&(i.mode&1)===0&&($i=D()+500,Fo&&Er()))}function on(n,i){var l=n.callbackNode;I1(n,i);var d=wo(n,n===At?Ft:0);if(d===0)l!==null&&cs(l),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(l!=null&&cs(l),i===1)n.tag===0?L0(Th.bind(null,n)):pf(Th.bind(null,n)),N0(function(){(Ze&6)===0&&Er()}),l=null;else{switch(bd(d)){case 1:l=fe;break;case 4:l=be;break;case 16:l=Pe;break;case 536870912:l=Bt;break;default:l=Pe}l=Mh(l,Eh.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Eh(n,i){if(dl=-1,fl=0,(Ze&6)!==0)throw Error(r(327));var l=n.callbackNode;if(Fi()&&n.callbackNode!==l)return null;var d=wo(n,n===At?Ft:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=hl(n,d);else{i=d;var m=Ze;Ze|=2;var y=Lh();(At!==n||Ft!==i)&&(hr=null,$i=D()+500,ti(n,i));do try{X0();break}catch(T){Ph(n,T)}while(!0);Ua(),ol.current=y,Ze=m,jt!==null?i=0:(At=null,Ft=0,i=Et)}if(i!==0){if(i===2&&(m=ra(n),m!==0&&(d=m,i=Su(n,m))),i===1)throw l=Fs,ti(n,0),Or(n,d),on(n,D()),l;if(i===6)Or(n,d);else{if(m=n.current.alternate,(d&30)===0&&!J0(m)&&(i=hl(n,d),i===2&&(y=ra(n),y!==0&&(d=y,i=Su(n,y))),i===1))throw l=Fs,ti(n,0),Or(n,d),on(n,D()),l;switch(n.finishedWork=m,n.finishedLanes=d,i){case 0:case 1:throw Error(r(345));case 2:ni(n,sn,hr);break;case 3:if(Or(n,d),(d&130023424)===d&&(i=wu+500-D(),10<i)){if(wo(n,0)!==0)break;if(m=n.suspendedLanes,(m&d)!==d){Yt(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Pa(ni.bind(null,n,sn,hr),i);break}ni(n,sn,hr);break;case 4:if(Or(n,d),(d&4194240)===d)break;for(i=n.eventTimes,m=-1;0<d;){var w=31-Mn(d);y=1<<w,w=i[w],w>m&&(m=w),d&=~y}if(d=m,d=D()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Q0(d/1960))-d,10<d){n.timeoutHandle=Pa(ni.bind(null,n,sn,hr),d);break}ni(n,sn,hr);break;case 5:ni(n,sn,hr);break;default:throw Error(r(329))}}}return on(n,D()),n.callbackNode===l?Eh.bind(null,n):null}function Su(n,i){var l=Us;return n.current.memoizedState.isDehydrated&&(ti(n,i).flags|=256),n=hl(n,i),n!==2&&(i=sn,sn=l,i!==null&&ju(i)),n}function ju(n){sn===null?sn=n:sn.push.apply(sn,n)}function J0(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],y=m.getSnapshot;m=m.value;try{if(!Dn(y(),m))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Or(n,i){for(i&=~bu,i&=~ll,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Mn(i),d=1<<l;n[l]=-1,i&=~d}}function Th(n){if((Ze&6)!==0)throw Error(r(327));Fi();var i=wo(n,0);if((i&1)===0)return on(n,D()),null;var l=hl(n,i);if(n.tag!==0&&l===2){var d=ra(n);d!==0&&(i=d,l=Su(n,d))}if(l===1)throw l=Fs,ti(n,0),Or(n,i),on(n,D()),l;if(l===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ni(n,sn,hr),on(n,D()),null}function Cu(n,i){var l=Ze;Ze|=1;try{return n(i)}finally{Ze=l,Ze===0&&($i=D()+500,Fo&&Er())}}function ei(n){Ar!==null&&Ar.tag===0&&(Ze&6)===0&&Fi();var i=Ze;Ze|=1;var l=En.transition,d=nt;try{if(En.transition=null,nt=1,n)return n()}finally{nt=d,En.transition=l,Ze=i,(Ze&6)===0&&Er()}}function Nu(){vn=Di.current,ct(Di)}function ti(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,C0(l)),jt!==null)for(l=jt.return;l!==null;){var d=l;switch(za(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Do();break;case 3:Oi(),ct(tn),ct(qt),Qa();break;case 5:Ga(d);break;case 4:Oi();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:Ba(d.type._context);break;case 22:case 23:Nu()}l=l.return}if(At=n,jt=n=zr(n.current,null),Ft=vn=i,Et=0,Fs=null,bu=ll=Zr=0,sn=Us=null,Jr!==null){for(i=0;i<Jr.length;i++)if(l=Jr[i],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,y=l.pending;if(y!==null){var w=y.next;y.next=m,d.next=w}l.pending=d}Jr=null}return n}function Ph(n,i){do{var l=jt;try{if(Ua(),Jo.current=el,Yo){for(var d=gt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Yo=!1}if(Xr=0,It=Nt=gt=null,Rs=!1,Os=0,xu.current=null,l===null||l.return===null){Et=1,Fs=i,jt=null;break}e:{var y=n,w=l.return,T=l,A=i;if(i=Ft,T.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var W=A,re=T,le=re.tag;if((re.mode&1)===0&&(le===0||le===11||le===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var xe=th(w);if(xe!==null){xe.flags&=-257,nh(xe,w,T,y,i),xe.mode&1&&eh(y,W,i),i=xe,A=W;var Se=i.updateQueue;if(Se===null){var Ce=new Set;Ce.add(A),i.updateQueue=Ce}else Se.add(A);break e}else{if((i&1)===0){eh(y,W,i),Eu();break e}A=Error(r(426))}}else if(ft&&T.mode&1){var St=th(w);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),nh(St,w,T,y,i),$a(zi(A,T));break e}}y=A=zi(A,T),Et!==4&&(Et=2),Us===null?Us=[y]:Us.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var B=Xf(y,A,i);jf(y,B);break e;case 1:T=A;var O=y.type,V=y.stateNode;if((y.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ir===null||!Ir.has(V)))){y.flags|=65536,i&=-i,y.lanes|=i;var de=Zf(y,T,i);jf(y,de);break e}}y=y.return}while(y!==null)}Ah(l)}catch(Ne){i=Ne,jt===l&&l!==null&&(jt=l=l.return);continue}break}while(!0)}function Lh(){var n=ol.current;return ol.current=el,n===null?el:n}function Eu(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||(Zr&268435455)===0&&(ll&268435455)===0||Or(At,Ft)}function hl(n,i){var l=Ze;Ze|=2;var d=Lh();(At!==n||Ft!==i)&&(hr=null,ti(n,i));do try{Y0();break}catch(m){Ph(n,m)}while(!0);if(Ua(),Ze=l,ol.current=d,jt!==null)throw Error(r(261));return At=null,Ft=0,Et}function Y0(){for(;jt!==null;)Ih(jt)}function X0(){for(;jt!==null&&!yo();)Ih(jt)}function Ih(n){var i=zh(n.alternate,n,vn);n.memoizedProps=n.pendingProps,i===null?Ah(n):jt=i,xu.current=null}function Ah(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=V0(l,i,vn),l!==null){jt=l;return}}else{if(l=H0(l,i),l!==null){l.flags&=32767,jt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,jt=null;return}}if(i=i.sibling,i!==null){jt=i;return}jt=i=n}while(i!==null);Et===0&&(Et=5)}function ni(n,i,l){var d=nt,m=En.transition;try{En.transition=null,nt=1,Z0(n,i,l,d)}finally{En.transition=m,nt=d}return null}function Z0(n,i,l,d){do Fi();while(Ar!==null);if((Ze&6)!==0)throw Error(r(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(A1(n,y),n===At&&(jt=At=null,Ft=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ul||(ul=!0,Mh(Pe,function(){return Fi(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=En.transition,En.transition=null;var w=nt;nt=1;var T=Ze;Ze|=4,xu.current=null,G0(n,l),_h(l,n),x0(Ea),So=!!Na,Ea=Na=null,n.current=l,K0(l),ta(),Ze=T,nt=w,En.transition=y}else n.current=l;if(ul&&(ul=!1,Ar=n,cl=m),y=n.pendingLanes,y===0&&(Ir=null),na(l.stateNode),on(n,D()),i!==null)for(d=n.onRecoverableError,l=0;l<i.length;l++)m=i[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(al)throw al=!1,n=ku,ku=null,n;return(cl&1)!==0&&n.tag!==0&&Fi(),y=n.pendingLanes,(y&1)!==0?n===_u?Bs++:(Bs=0,_u=n):Bs=0,Er(),null}function Fi(){if(Ar!==null){var n=bd(cl),i=En.transition,l=nt;try{if(En.transition=null,nt=16>n?16:n,Ar===null)var d=!1;else{if(n=Ar,Ar=null,cl=0,(Ze&6)!==0)throw Error(r(331));var m=Ze;for(Ze|=4,ke=n.current;ke!==null;){var y=ke,w=y.child;if((ke.flags&16)!==0){var T=y.deletions;if(T!==null){for(var A=0;A<T.length;A++){var W=T[A];for(ke=W;ke!==null;){var re=ke;switch(re.tag){case 0:case 11:case 15:$s(8,re,y)}var le=re.child;if(le!==null)le.return=re,ke=le;else for(;ke!==null;){re=ke;var ne=re.sibling,xe=re.return;if(yh(re),re===W){ke=null;break}if(ne!==null){ne.return=xe,ke=ne;break}ke=xe}}}var Se=y.alternate;if(Se!==null){var Ce=Se.child;if(Ce!==null){Se.child=null;do{var St=Ce.sibling;Ce.sibling=null,Ce=St}while(Ce!==null)}}ke=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,ke=w;else e:for(;ke!==null;){if(y=ke,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:$s(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ke=B;break e}ke=y.return}}var O=n.current;for(ke=O;ke!==null;){w=ke;var V=w.child;if((w.subtreeFlags&2064)!==0&&V!==null)V.return=w,ke=V;else e:for(w=O;ke!==null;){if(T=ke,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:sl(9,T)}}catch(Ne){wt(T,T.return,Ne)}if(T===w){ke=null;break e}var de=T.sibling;if(de!==null){de.return=T.return,ke=de;break e}ke=T.return}}if(Ze=m,Er(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(_n,n)}catch{}d=!0}return d}finally{nt=l,En.transition=i}}return!1}function Rh(n,i,l){i=zi(l,i),i=Xf(n,i,1),n=Pr(n,i,1),i=Yt(),n!==null&&(fs(n,1,i),on(n,i))}function wt(n,i,l){if(n.tag===3)Rh(n,n,l);else for(;i!==null;){if(i.tag===3){Rh(i,n,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))){n=zi(l,n),n=Zf(i,n,1),i=Pr(i,n,1),n=Yt(),i!==null&&(fs(i,1,n),on(i,n));break}}i=i.return}}function e2(n,i,l){var d=n.pingCache;d!==null&&d.delete(i),i=Yt(),n.pingedLanes|=n.suspendedLanes&l,At===n&&(Ft&l)===l&&(Et===4||Et===3&&(Ft&130023424)===Ft&&500>D()-wu?ti(n,0):bu|=l),on(n,i)}function Oh(n,i){i===0&&((n.mode&1)===0?i=1:(i=bo,bo<<=1,(bo&130023424)===0&&(bo=4194304)));var l=Yt();n=cr(n,i),n!==null&&(fs(n,i,l),on(n,l))}function t2(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Oh(n,l)}function n2(n,i){var l=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(r(314))}d!==null&&d.delete(i),Oh(n,l)}var zh;zh=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||tn.current)rn=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return rn=!1,q0(n,i,l);rn=(n.flags&131072)!==0}else rn=!1,ft&&(i.flags&1048576)!==0&&mf(i,Bo,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;rl(n,i),n=i.pendingProps;var m=Ei(i,qt.current);Ri(i,l),m=Xa(null,i,d,n,m,l);var y=Za();return i.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,nn(d)?(y=!0,$o(i)):y=!1,i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Ha(i),m.updater=tl,i.stateNode=m,m._reactInternals=i,su(i,d,n,l),i=uu(null,i,d,!0,y,l)):(i.tag=0,ft&&y&&Oa(i),Jt(null,i,m,l),i=i.child),i;case 16:d=i.elementType;e:{switch(rl(n,i),n=i.pendingProps,m=d._init,d=m(d._payload),i.type=d,m=i.tag=i2(d),n=Fn(d,n),m){case 0:i=au(null,i,d,n,l);break e;case 1:i=ah(null,i,d,n,l);break e;case 11:i=rh(null,i,d,n,l);break e;case 14:i=ih(null,i,d,Fn(d.type,n),l);break e}throw Error(r(306,d,""))}return i;case 0:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Fn(d,m),au(n,i,d,m,l);case 1:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Fn(d,m),ah(n,i,d,m,l);case 3:e:{if(uh(i),n===null)throw Error(r(387));d=i.pendingProps,y=i.memoizedState,m=y.element,Sf(n,i),Ko(i,d,null,l);var w=i.memoizedState;if(d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){m=zi(Error(r(423)),i),i=ch(n,i,d,l,m);break e}else if(d!==m){m=zi(Error(r(424)),i),i=ch(n,i,d,l,m);break e}else for(gn=jr(i.stateNode.containerInfo.firstChild),mn=i,ft=!0,$n=null,l=kf(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Li(),d===m){i=fr(n,i,l);break e}Jt(n,i,d,l)}i=i.child}return i;case 5:return Nf(i),n===null&&Da(i),d=i.type,m=i.pendingProps,y=n!==null?n.memoizedProps:null,w=m.children,Ta(d,m)?w=null:y!==null&&Ta(d,y)&&(i.flags|=32),lh(n,i),Jt(n,i,w,l),i.child;case 6:return n===null&&Da(i),null;case 13:return dh(n,i,l);case 4:return Wa(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Ii(i,null,d,l):Jt(n,i,d,l),i.child;case 11:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Fn(d,m),rh(n,i,d,m,l);case 7:return Jt(n,i,i.pendingProps,l),i.child;case 8:return Jt(n,i,i.pendingProps.children,l),i.child;case 12:return Jt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,m=i.pendingProps,y=i.memoizedProps,w=m.value,st(Ho,d._currentValue),d._currentValue=w,y!==null)if(Dn(y.value,w)){if(y.children===m.children&&!tn.current){i=fr(n,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var T=y.dependencies;if(T!==null){w=y.child;for(var A=T.firstContext;A!==null;){if(A.context===d){if(y.tag===1){A=dr(-1,l&-l),A.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?A.next=A:(A.next=re.next,re.next=A),W.pending=A}}y.lanes|=l,A=y.alternate,A!==null&&(A.lanes|=l),qa(y.return,l,i),T.lanes|=l;break}A=A.next}}else if(y.tag===10)w=y.type===i.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=l,T=w.alternate,T!==null&&(T.lanes|=l),qa(w,l,i),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Jt(n,i,m.children,l),i=i.child}return i;case 9:return m=i.type,d=i.pendingProps.children,Ri(i,l),m=Cn(m),d=d(m),i.flags|=1,Jt(n,i,d,l),i.child;case 14:return d=i.type,m=Fn(d,i.pendingProps),m=Fn(d.type,m),ih(n,i,d,m,l);case 15:return sh(n,i,i.type,i.pendingProps,l);case 17:return d=i.type,m=i.pendingProps,m=i.elementType===d?m:Fn(d,m),rl(n,i),i.tag=1,nn(d)?(n=!0,$o(i)):n=!1,Ri(i,l),Jf(i,d,m),su(i,d,m,l),uu(null,i,d,!0,n,l);case 19:return hh(n,i,l);case 22:return oh(n,i,l)}throw Error(r(156,i.tag))};function Mh(n,i){return yi(n,i)}function r2(n,i,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,i,l,d){return new r2(n,i,l,d)}function Tu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function i2(n){if(typeof n=="function")return Tu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===J)return 11;if(n===K)return 14}return 2}function zr(n,i){var l=n.alternate;return l===null?(l=Tn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function pl(n,i,l,d,m,y){var w=2;if(d=n,typeof n=="function")Tu(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case te:return ri(l.children,m,y,i);case X:w=8,m|=8;break;case ge:return n=Tn(12,l,i,m|2),n.elementType=ge,n.lanes=y,n;case ae:return n=Tn(13,l,i,m),n.elementType=ae,n.lanes=y,n;case Y:return n=Tn(19,l,i,m),n.elementType=Y,n.lanes=y,n;case Z:return ml(l,m,y,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:w=10;break e;case F:w=9;break e;case J:w=11;break e;case K:w=14;break e;case oe:w=16,d=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return i=Tn(w,l,i,m),i.elementType=n,i.type=d,i.lanes=y,i}function ri(n,i,l,d){return n=Tn(7,n,d,i),n.lanes=l,n}function ml(n,i,l,d){return n=Tn(22,n,d,i),n.elementType=Z,n.lanes=l,n.stateNode={isHidden:!1},n}function Pu(n,i,l){return n=Tn(6,n,null,i),n.lanes=l,n}function Lu(n,i,l){return i=Tn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function s2(n,i,l,d,m){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ia(0),this.expirationTimes=ia(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Iu(n,i,l,d,m,y,w,T,A){return n=new s2(n,i,l,T,A),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Tn(3,null,null,i),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ha(y),n}function o2(n,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:d==null?null:""+d,children:n,containerInfo:i,implementation:l}}function Dh(n){if(!n)return Nr;n=n._reactInternals;e:{if(et(n)!==n||n.tag!==1)throw Error(r(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(nn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(r(171))}if(n.tag===1){var l=n.type;if(nn(l))return ff(n,l,i)}return i}function $h(n,i,l,d,m,y,w,T,A){return n=Iu(l,d,!0,n,m,y,w,T,A),n.context=Dh(null),l=n.current,d=Yt(),m=Rr(l),y=dr(d,m),y.callback=i??null,Pr(l,y,m),n.current.lanes=m,fs(n,m,d),on(n,d),n}function gl(n,i,l,d){var m=i.current,y=Yt(),w=Rr(m);return l=Dh(l),i.context===null?i.context=l:i.pendingContext=l,i=dr(y,w),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Pr(m,i,w),n!==null&&(qn(n,m,w,y),Go(n,m,w)),w}function vl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Fh(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Au(n,i){Fh(n,i),(n=n.alternate)&&Fh(n,i)}function l2(){return null}var Uh=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ru(n){this._internalRoot=n}yl.prototype.render=Ru.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));gl(n,i,null,null)},yl.prototype.unmount=Ru.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ei(function(){gl(null,n,null,null)}),i[or]=null}};function yl(n){this._internalRoot=n}yl.prototype.unstable_scheduleHydration=function(n){if(n){var i=_d();n={blockedOn:null,target:n,priority:i};for(var l=0;l<kr.length&&i!==0&&i<kr[l].priority;l++);kr.splice(l,0,n),l===0&&Cd(n)}};function Ou(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function xl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function a2(n,i,l,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var W=vl(w);y.call(W)}}var w=$h(i,d,n,0,null,!1,!1,"",Bh);return n._reactRootContainer=w,n[or]=w.current,Cs(n.nodeType===8?n.parentNode:n),ei(),w}for(;m=n.lastChild;)n.removeChild(m);if(typeof d=="function"){var T=d;d=function(){var W=vl(A);T.call(W)}}var A=Iu(n,0,!1,null,null,!1,!1,"",Bh);return n._reactRootContainer=A,n[or]=A.current,Cs(n.nodeType===8?n.parentNode:n),ei(function(){gl(i,A,l,d)}),A}function bl(n,i,l,d,m){var y=l._reactRootContainer;if(y){var w=y;if(typeof m=="function"){var T=m;m=function(){var A=vl(w);T.call(A)}}gl(i,w,n,m)}else w=a2(l,i,n,m,d);return vl(w)}wd=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=ds(i.pendingLanes);l!==0&&(sa(i,l|1),on(i,D()),(Ze&6)===0&&($i=D()+500,Er()))}break;case 13:ei(function(){var d=cr(n,1);if(d!==null){var m=Yt();qn(d,n,1,m)}}),Au(n,1)}},oa=function(n){if(n.tag===13){var i=cr(n,134217728);if(i!==null){var l=Yt();qn(i,n,134217728,l)}Au(n,134217728)}},kd=function(n){if(n.tag===13){var i=Rr(n),l=cr(n,i);if(l!==null){var d=Yt();qn(l,n,i,d)}Au(n,i)}},_d=function(){return nt},Sd=function(n,i){var l=nt;try{return nt=n,i()}finally{nt=l}},kn=function(n,i,l){switch(i){case"input":if(Mt(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==n&&d.form===n.form){var m=Mo(d);if(!m)throw Error(r(90));ye(d),Mt(d,m)}}}break;case"textarea":Qt(n,l);break;case"select":i=l.value,i!=null&&en(n,!!l.multiple,i,!1)}},gi=Cu,vr=ei;var u2={usingClientEntryPoint:!1,Events:[Ts,Ci,Mo,Hr,mi,Cu]},qs={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c2={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=vo(n),n===null?null:n.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||l2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{_n=wl.inject(c2),bt=wl}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2,ln.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(i))throw Error(r(200));return o2(n,i,null,l)},ln.createRoot=function(n,i){if(!Ou(n))throw Error(r(299));var l=!1,d="",m=Uh;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=Iu(n,1,!1,null,null,l,!1,d,m),n[or]=i.current,Cs(n.nodeType===8?n.parentNode:n),new Ru(i)},ln.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=vo(i),n=n===null?null:n.stateNode,n},ln.flushSync=function(n){return ei(n)},ln.hydrate=function(n,i,l){if(!xl(i))throw Error(r(200));return bl(null,n,i,!0,l)},ln.hydrateRoot=function(n,i,l){if(!Ou(n))throw Error(r(405));var d=l!=null&&l.hydratedSources||null,m=!1,y="",w=Uh;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=$h(i,null,n,1,l??null,m,!1,y,w),n[or]=i.current,Cs(n),d)for(n=0;n<d.length;n++)l=d[n],m=l._getVersion,m=m(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,m]:i.mutableSourceEagerHydrationData.push(l,m);return new yl(i)},ln.render=function(n,i,l){if(!xl(i))throw Error(r(200));return bl(null,n,i,!1,l)},ln.unmountComponentAtNode=function(n){if(!xl(n))throw Error(r(40));return n._reactRootContainer?(ei(function(){bl(null,null,n,!1,function(){n._reactRootContainer=null,n[or]=null})}),!0):!1},ln.unstable_batchedUpdates=Cu,ln.unstable_renderSubtreeIntoContainer=function(n,i,l,d){if(!xl(l))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return bl(n,i,l,!1,d)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var Jh;function Mm(){if(Jh)return Du.exports;Jh=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Du.exports=w2(),Du.exports}var Yh;function k2(){if(Yh)return kl;Yh=1;var e=Mm();return kl.createRoot=e.createRoot,kl.hydrateRoot=e.hydrateRoot,kl}var _2=k2();const S2="modulepreload",j2=function(e){return"/"+e},Xh={},fi=function(t,r,s){let o=Promise.resolve();if(r&&r.length>0){let h=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");o=h(r.map(p=>{if(p=j2(p),p in Xh)return;Xh[p]=!0;const v=p.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const x=document.createElement("link");if(x.rel=v?"stylesheet":S2,v||(x.as="script"),x.crossOrigin="",x.href=p,f&&x.setAttribute("nonce",f),document.head.appendChild(x),v)return new Promise((b,_)=>{x.addEventListener("load",b),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return t().catch(a)})},C2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:s}=await Promise.resolve().then(()=>os);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class Hc extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class N2 extends Hc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zh extends Hc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ep extends Hc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var mc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(mc||(mc={}));var E2=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class T2{constructor(t,{headers:r={},customFetch:s,region:o=mc.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=C2(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return E2(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:u}=r;let f={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${t}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)));const g=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v}).catch(N=>{throw new N2(N)}),x=g.headers.get("x-relay-error");if(x&&x==="true")throw new Zh(g);if(!g.ok)throw new ep(g);let b=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield g.json():b==="application/octet-stream"?_=yield g.blob():b==="text/event-stream"?_=g:b==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof ep||o instanceof Zh?o.context:void 0}}})}}var Ot={},Ui={},Bi={},qi={},Vi={},Hi={},P2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rs=P2();const L2=rs.fetch,Dm=rs.fetch.bind(rs),$m=rs.Headers,I2=rs.Request,A2=rs.Response,os=Object.freeze(Object.defineProperty({__proto__:null,Headers:$m,Request:I2,Response:A2,default:Dm,fetch:L2},Symbol.toStringTag,{value:"Module"})),R2=h2(os);var _l={},tp;function Fm(){if(tp)return _l;tp=1,Object.defineProperty(_l,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return _l.default=e,_l}var np;function Um(){if(np)return Hi;np=1;var e=Hi&&Hi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Hi,"__esModule",{value:!0});const t=e(R2),r=e(Fm());class s{constructor(a){var u,f;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(f=a.isMaybeSingle)!==null&&f!==void 0?f:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,g,x,b;let _=null,N=null,k=null,E=p.status,L=p.statusText;if(p.ok){if(this.method!=="HEAD"){const P=await p.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?N=P:N=JSON.parse(P))}const q=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),H=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");q&&H&&H.length>1&&(k=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(_={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,k=null,E=406,L="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const q=await p.text();try{_=JSON.parse(q),Array.isArray(_)&&p.status===404&&(N=[],_=null,E=200,L="OK")}catch{p.status===404&&q===""?(E=204,L="No Content"):_={message:q}}if(_&&this.isMaybeSingle&&(!((b=_?.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,E=200,L="OK"),_&&this.shouldThrowOnError)throw new r.default(_)}return{error:_,data:N,count:k,status:E,statusText:L}});return this.shouldThrowOnError||(h=h.catch(p=>{var v,g,x;return{error:{message:`${(v=p?.name)!==null&&v!==void 0?v:"FetchError"}: ${p?.message}`,details:`${(g=p?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=p?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,u)}returns(){return this}overrideTypes(){return this}}return Hi.default=s,Hi}var rp;function Bm(){if(rp)return Vi;rp=1;var e=Vi&&Vi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Vi,"__esModule",{value:!0});const t=e(Um());class r extends t.default{select(o){let a=!1;const u=(o??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:f=u}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var v;const g=[o?"analyze":null,a?"verbose":null,u?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),x=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Vi.default=r,Vi}var ip;function Wc(){if(ip)return qi;ip=1;var e=qi&&qi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(qi,"__esModule",{value:!0});const t=e(Bm());class r extends t.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const u=Array.from(new Set(a)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:u,type:f}={}){let h="";f==="plain"?h="pl":f==="phrase"?h="ph":f==="websearch"&&(h="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${h}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,u])=>{this.url.searchParams.append(a,`eq.${u}`)}),this}not(o,a,u){return this.url.searchParams.append(o,`not.${a}.${u}`),this}or(o,{foreignTable:a,referencedTable:u=a}={}){const f=u?`${u}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,a,u){return this.url.searchParams.append(o,`${a}.${u}`),this}}return qi.default=r,qi}var sp;function qm(){if(sp)return Bi;sp=1;var e=Bi&&Bi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Bi,"__esModule",{value:!0});const t=e(Wc());class r{constructor(o,{headers:a={},schema:u,fetch:f}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=f}select(o,{head:a=!1,count:u}={}){const f=a?"HEAD":"GET";let h=!1;const p=(o??"*").split("").map(v=>/\s/.test(v)&&!h?"":(v==='"'&&(h=!h),v)).join("");return this.url.searchParams.set("select",p),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var f;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:f,defaultToNull:h=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var u;const f="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Bi.default=r,Bi}var op;function O2(){if(op)return Ui;op=1;var e=Ui&&Ui.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ui,"__esModule",{value:!0});const t=e(qm()),r=e(Wc());class s{constructor(a,{headers:u={},schema:f,fetch:h}={}){this.url=a,this.headers=new Headers(u),this.schemaName=f,this.fetch=h}from(a){const u=new URL(`${this.url}/${a}`);return new t.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:f=!1,get:h=!1,count:p}={}){var v;let g;const x=new URL(`${this.url}/rpc/${a}`);let b;f||h?(g=f?"HEAD":"GET",Object.entries(u).filter(([N,k])=>k!==void 0).map(([N,k])=>[N,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([N,k])=>{x.searchParams.append(N,k)})):(g="POST",b=u);const _=new Headers(this.headers);return p&&_.set("Prefer",`count=${p}`),new r.default({method:g,url:x,headers:_,schema:this.schemaName,body:b,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Ui.default=s,Ui}var lp;function z2(){if(lp)return Ot;lp=1;var e=Ot&&Ot.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const t=e(O2());Ot.PostgrestClient=t.default;const r=e(qm());Ot.PostgrestQueryBuilder=r.default;const s=e(Wc());Ot.PostgrestFilterBuilder=s.default;const o=e(Bm());Ot.PostgrestTransformBuilder=o.default;const a=e(Um());Ot.PostgrestBuilder=a.default;const u=e(Fm());return Ot.PostgrestError=u.default,Ot.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:a.default,PostgrestError:u.default},Ot}var M2=z2();const D2=Gl(M2),{PostgrestClient:$2,PostgrestQueryBuilder:Zk,PostgrestFilterBuilder:e8,PostgrestTransformBuilder:t8,PostgrestBuilder:n8,PostgrestError:r8}=D2;class F2{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const U2="2.15.5",B2=`realtime-js/${U2}`,q2="1.0.0",gc=1e4,V2=1e3,H2=100;var Xs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Xs||(Xs={}));var Tt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Tt||(Tt={}));var Hn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Hn||(Hn={}));var vc;(function(e){e.websocket="websocket"})(vc||(vc={}));var ai;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ai||(ai={}));class W2{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const o=r.getUint8(1),a=r.getUint8(2);let u=this.HEADER_LENGTH+2;const f=s.decode(t.slice(u,u+o));u=u+o;const h=s.decode(t.slice(u,u+a));u=u+a;const p=JSON.parse(s.decode(t.slice(u,t.byteLength)));return{ref:null,topic:f,event:h,payload:p}}}class Vm{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ot||(ot={}));const ap=(e,t,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((a,u)=>(a[u]=G2(u,e,t,o),a),{})},G2=(e,t,r,s)=>{const o=t.find(f=>f.name===e),a=o?.type,u=r[e];return a&&!s.includes(a)?Hm(a,u):yc(u)},Hm=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Y2(t,r)}switch(e){case ot.bool:return K2(t);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return Q2(t);case ot.json:case ot.jsonb:return J2(t);case ot.timestamp:return X2(t);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return yc(t);default:return yc(t)}},yc=e=>e,K2=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Q2=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},J2=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Y2=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let a;const u=e.slice(1,r);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(f=>Hm(t,f))}return e},X2=e=>typeof e=="string"?e.replace(" ","T"):e,Wm=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Uu{constructor(t,r,s={},o=gc){this.channel=t,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var up;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(up||(up={}));class Zs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:a,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zs.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=Zs.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Zs.syncDiff(this.state,o,a,u),f())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,o){const a=this.cloneDeep(t),u=this.transformState(r),f={},h={};return this.map(a,(p,v)=>{u[p]||(h[p]=v)}),this.map(u,(p,v)=>{const g=a[p];if(g){const x=v.map(k=>k.presence_ref),b=g.map(k=>k.presence_ref),_=v.filter(k=>b.indexOf(k.presence_ref)<0),N=g.filter(k=>x.indexOf(k.presence_ref)<0);_.length>0&&(f[p]=_),N.length>0&&(h[p]=N)}else f[p]=v}),this.syncDiff(a,{joins:f,leaves:h},s,o)}static syncDiff(t,r,s,o){const{joins:a,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(a,(f,h)=>{var p;const v=(p=t[f])!==null&&p!==void 0?p:[];if(t[f]=this.cloneDeep(h),v.length>0){const g=t[f].map(b=>b.presence_ref),x=v.filter(b=>g.indexOf(b.presence_ref)<0);t[f].unshift(...x)}s(f,v,h)}),this.map(u,(f,h)=>{let p=t[f];if(!p)return;const v=h.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),t[f]=p,o(f,p,h),p.length===0&&delete t[f]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const o=t[s];return"metas"in o?r[s]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cp||(cp={}));var eo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(eo||(eo={}));var mr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class Gc{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Uu(this,Hn.join,this.params,this.timeout),this.rejoinTimer=new Vm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Zs(this),this.broadcastEndpointURL=Wm(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:u,presence:f,private:h}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[eo.PRESENCE]&&this.bindings[eo.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},x={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(mr.CHANNEL_ERROR,b)),this._onClose(()=>t?.(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket.setAuth(),b===void 0){t?.(mr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,k=(_=N?.length)!==null&&_!==void 0?_:0,E=[];for(let L=0;L<k;L++){const I=N[L],{filter:{event:q,schema:H,table:P,filter:te}}=I,X=b&&b[L];if(X&&X.event===q&&X.schema===H&&X.table===P&&X.filter===te)E.push(Object.assign(Object.assign({},I),{id:X.id}));else{this.unsubscribe(),this.state=Tt.errored,t?.(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(mr.SUBSCRIBED);return}}).receive("error",b=>{this.state=Tt.errored,t?.(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Tt.joined&&t===eo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,o;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:u}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,f,h;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Uu(this,Hn.leave,{},t),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const o=new AbortController,a=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(a),u}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Uu(this,t,r,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>H2){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var o,a;const u=t.toLocaleLowerCase(),{close:f,error:h,leave:p,join:v}=Hn;if(s&&[f,h,p,v].indexOf(u)>=0&&s!==this._joinRef())return;let x=this._onMessage(u,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var _,N,k;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((k=(N=b.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===u}).map(b=>b.callback(x,s)):(a=this.bindings[u])===null||a===void 0||a.filter(b=>{var _,N,k,E,L,I;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const q=b.id,H=(_=b.filter)===null||_===void 0?void 0:_.event;return q&&((N=r.ids)===null||N===void 0?void 0:N.includes(q))&&(H==="*"||H?.toLocaleLowerCase()===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const q=(L=(E=b?.filter)===null||E===void 0?void 0:E.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return q==="*"||q===((I=r?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof x=="object"&&"ids"in x){const _=x.data,{schema:N,table:k,commit_timestamp:E,type:L,errors:I}=_;x=Object.assign(Object.assign({},{schema:N,table:k,commit_timestamp:E,eventType:L,new:{},old:{},errors:I}),this._getPayloadRecords(_))}b.callback(x,s)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const o=t.toLocaleLowerCase(),a={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Gc.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Hn.close,{},t)}_onError(t){this._on(Hn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ap(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ap(t.columns,t.old_record)),r}}const Bu=()=>{},Sl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Z2=[1e3,2e3,5e3,1e4],ev=1e4,tv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nv{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gc,this.transport=null,this.heartbeatIntervalMs=Sl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bu,this.ref=0,this.reconnectTimer=null,this.logger=Bu,this.conn=null,this.sendBuffer=[],this.serializer=new W2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>fi(async()=>{const{default:f}=await Promise.resolve().then(()=>os);return{default:f}},void 0).then(({default:f})=>f(...u)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${vc.websocket}`,this.httpEndpoint=Wm(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=F2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:q2}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Xs.connecting:return ai.Connecting;case Xs.open:return ai.Open;case Xs.closing:return ai.Closing;default:return ai.Closed}}isConnected(){return this.connectionState()===ai.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===s);if(o)return o;{const a=new Gc(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:s,payload:o,ref:a}=t,u=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${r} ${s} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(V2,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Sl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:a,ref:u}=r,f=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${s} ${o} ${f}`.trim(),a),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Hn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${s}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([tv],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:B2};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Hn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Vm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,o,a,u,f,h,p,v;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:gc,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Sl.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Bu,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>Z2[g-1]||ev),this.encode=(p=t?.encode)!==null&&p!==void 0?p:((g,x)=>x(JSON.stringify(g))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Kc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rv extends Kc{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xc extends Kc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var iv=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const Gm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:s}=await Promise.resolve().then(()=>os);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},sv=()=>iv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fi(()=>Promise.resolve().then(()=>os),void 0)).Response:Response}),bc=e=>{if(Array.isArray(e))return e.map(r=>bc(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=bc(s)}),t},ov=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var hi=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const qu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lv=(e,t,r)=>hi(void 0,void 0,void 0,function*(){const s=yield sv();e instanceof s&&!r?.noResolveJson?e.json().then(o=>{const a=e.status||500,u=o?.statusCode||a+"";t(new rv(qu(o),a,u))}).catch(o=>{t(new xc(qu(o),o))}):t(new xc(qu(e),e))}),av=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||!s?o:(ov(s)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(s)):o.body=s,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function co(e,t,r,s,o,a){return hi(this,void 0,void 0,function*(){return new Promise((u,f)=>{e(r,av(t,s,o,a)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>lv(h,f,s))})})}function Dl(e,t,r,s){return hi(this,void 0,void 0,function*(){return co(e,"GET",t,r,s)})}function Zn(e,t,r,s,o){return hi(this,void 0,void 0,function*(){return co(e,"POST",t,s,o,r)})}function wc(e,t,r,s,o){return hi(this,void 0,void 0,function*(){return co(e,"PUT",t,s,o,r)})}function uv(e,t,r,s){return hi(this,void 0,void 0,function*(){return co(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Km(e,t,r,s,o){return hi(this,void 0,void 0,function*(){return co(e,"DELETE",t,s,o,r)})}var Xt=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const cv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dv{constructor(t,r={},s,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=Gm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,o){return Xt(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},dp),o);let f=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=s,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(r),v=this._getFinalPath(p),g=yield(t=="PUT"?wc:Zn)(this.fetch,`${this.url}/object/${v}`,a,Object.assign({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}upload(t,r,s){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,o){return Xt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",r);try{let h;const p=Object.assign({upsert:dp.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",p.cacheControl)):(h=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const g=yield wc(this.fetch,f.toString(),h,{headers:v});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Pt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return Xt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const a=yield Zn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+a.url),f=u.searchParams.get("token");if(!f)throw new Kc("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}update(t,r,s){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Xt(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}})}copy(t,r,s){return Xt(this,void 0,void 0,function*(){try{return{data:{path:(yield Zn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,s){return Xt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield Zn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,s){return Xt(this,void 0,void 0,function*(){try{const o=yield Zn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}})}download(t,r){return Xt(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),u=a?`?${a}`:"";try{const f=this._getFinalPath(t);return{data:yield(yield Dl(this.fetch,`${this.url}/${o}/${f}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Pt(f))return{data:null,error:f};throw f}})}info(t){return Xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Dl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:bc(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}exists(t){return Xt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield uv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s)&&s instanceof xc){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),o=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&o.push(a);const f=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield Km(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}list(t,r,s){return Xt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},cv),r),{prefix:t||""});return{data:yield Zn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}})}listV2(t,r){return Xt(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Zn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const fv="2.12.1",hv={"X-Client-Info":`storage-js/${fv}`};var Wi=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class pv{constructor(t,r={},s,o){this.shouldThrowOnError=!1;const a=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},hv),r),this.fetch=Gm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Wi(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}getBucket(t){return Wi(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Wi(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Wi(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Wi(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Wi(this,void 0,void 0,function*(){try{return{data:yield Km(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}}class mv extends pv{constructor(t,r={},s,o){super(t,r,s,o)}from(t){return new dv(this.url,this.headers,t,this.fetch)}}const gv="2.57.4";let Ys="";typeof Deno<"u"?Ys="deno":typeof document<"u"?Ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ys="react-native":Ys="node";const vv={"X-Client-Info":`supabase-js-${Ys}/${gv}`},yv={headers:vv},xv={schema:"public"},bv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wv={};var kv=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};const _v=e=>{let t;return e?t=e:typeof fetch>"u"?t=Dm:t=fetch,(...r)=>t(...r)},Sv=()=>typeof Headers>"u"?$m:Headers,jv=(e,t,r)=>{const s=_v(r),o=Sv();return(a,u)=>kv(void 0,void 0,void 0,function*(){var f;const h=(f=yield t())!==null&&f!==void 0?f:e;let p=new o(u?.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(a,Object.assign(Object.assign({},u),{headers:p}))})};var Cv=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};function Nv(e){return e.endsWith("/")?e:e+"/"}function Ev(e,t){var r,s;const{db:o,auth:a,realtime:u,global:f}=e,{db:h,auth:p,realtime:v,global:g}=t,x={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),f),{headers:Object.assign(Object.assign({},(r=g?.headers)!==null&&r!==void 0?r:{}),(s=f?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Cv(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function Tv(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Nv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qm="2.71.1",Zi=30*1e3,kc=3,Vu=kc*Zi,Pv="http://localhost:9999",Lv="supabase.auth.token",Iv={"X-Client-Info":`gotrue-js/${Qm}`},_c="X-Supabase-Api-Version",Jm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Av=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rv=600*1e3;class Qc extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ov extends Qc{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function zv(e){return qe(e)&&e.name==="AuthApiError"}class Ym extends Qc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class qr extends Qc{constructor(t,r,s,o){super(t,s,o),this.name=r,this.status=s}}class Fr extends qr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mv(e){return qe(e)&&e.name==="AuthSessionMissingError"}class jl extends qr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cl extends qr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nl extends qr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dv(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class fp extends qr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sc extends qr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Hu(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class hp extends qr{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class jc extends qr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pp=` 	
\r=`.split(""),$v=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pp.length;t+=1)e[pp[t].charCodeAt(0)]=-2;for(let t=0;t<$l.length;t+=1)e[$l[t].charCodeAt(0)]=t;return e})();function mp(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r($l[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r($l[s]),t.queuedBits-=6}}function Xm(e,t,r){const s=$v[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gp(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{Bv(u,s,r)};for(let u=0;u<e.length;u+=1)Xm(e.charCodeAt(u),o,a);return t.join("")}function Fv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Uv(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Fv(s,t)}}function Bv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function qv(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)Xm(e.charCodeAt(o),r,s);return new Uint8Array(t)}function Vv(e){const t=[];return Uv(e,r=>t.push(r)),new Uint8Array(t)}function Hv(e){const t=[],r={queue:0,queuedBits:0},s=o=>{t.push(o)};return e.forEach(o=>mp(o,r,s)),mp(null,r,s),t.join("")}function Wv(e){return Math.round(Date.now()/1e3)+e}function Gv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Vn=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},Zm=()=>{if(!Vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function Kv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return r.searchParams.forEach((s,o)=>{t[o]=s}),t}const eg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:s}=await Promise.resolve().then(()=>os);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},Qv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",es=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},si=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Dr=async(e,t)=>{await e.removeItem(t)};class Kl{constructor(){this.promise=new Kl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Kl.promiseConstructor=Promise;function Wu(e){const t=e.split(".");if(t.length!==3)throw new jc("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Av.test(t[s]))throw new jc("JWT not in base64url format");return{header:JSON.parse(gp(t[0])),payload:JSON.parse(gp(t[1])),signature:qv(t[2]),raw:{header:t[0],payload:t[1]}}}async function Jv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yv(e,t){return new Promise((s,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await e(a);if(!t(a,null,u)){s(u);return}}catch(u){if(!t(a,u)){o(u);return}}})()})}function Xv(e){return("0"+e.toString(16)).substr(-2)}function Zv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let a=0;a<56;a++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(t),Array.from(t,Xv).join("")}async function ey(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function ty(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ey(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gi(e,t,r=!1){const s=Zv();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await es(e,`${t}-code-verifier`,o);const a=await ty(s);return[a,s===a?"plain":"s256"]}const ny=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ry(e){const t=e.headers.get(_c);if(!t||!t.match(ny))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const oy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ki(e){if(!oy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vp(e){return JSON.parse(JSON.stringify(e))}var ly=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};const li=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ay=[502,503,504];async function yp(e){var t;if(!Qv(e))throw new Sc(li(e),0);if(ay.includes(e.status))throw new Sc(li(e),e.status);let r;try{r=await e.json()}catch(a){throw new Ym(li(a),a)}let s;const o=ry(e);if(o&&o.getTime()>=Jm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new hp(li(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Fr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new hp(li(r),e.status,r.weak_password.reasons);throw new Ov(li(r),e.status||500,s)}const uy=(e,t,r,s)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function Ge(e,t,r,s){var o;const a=Object.assign({},s?.headers);a[_c]||(a[_c]=Jm["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await cy(e,t,r+f,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function cy(e,t,r,s,o,a){const u=uy(t,s,o,a);let f;try{f=await e(r,Object.assign({},u))}catch(h){throw console.error(h),new Sc(li(h),0)}if(f.ok||await yp(f),s?.noResolveJson)return f;try{return await f.json()}catch(h){await yp(h)}}function pr(e){var t;let r=null;py(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Wv(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function xp(e){const t=pr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ur(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dy(e){return{data:e,error:null}}function fy(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:a}=e,u=ly(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:r,hashed_token:s,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:f,user:h},error:null}}function hy(e){return e}function py(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ku=["global","local","others"];var my=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r};class gy{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=eg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ku[0]){if(Ku.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ku.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ur})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=my(t,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:fy,redirectTo:r?.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ur})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,o,a,u,f,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:hy});if(v.error)throw v.error;const g=await v.json(),x=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(_=>{const N=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);p[`${k}Page`]=N}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(qe(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Ki(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ur})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ki(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ur})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Ki(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ur})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Ki(t.userId);try{const{data:r,error:s}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ki(t.userId),Ki(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function bp(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function vy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qi={debug:!!(globalThis&&Zm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class yy extends tg{}async function xy(e,t,r){Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new yy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}vy();const by={url:Pv,storageKey:Lv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Iv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wp(e,t,r){return await r()}const Ji={};class so{constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=so.nextInstanceID,so.nextInstanceID+=1,this.instanceID>0&&Vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},by),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new gy({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=eg(o.fetch),this.lock=o.lock||wp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Vn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=xy:this.lock=wp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Zm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bp(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=bp(this.memoryStorage)),Vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Ji[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ji[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qm}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Kv(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Vn()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Dv(a)){const h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?{error:r}:{error:new Ym("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,o;try{const a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:pr}),{data:u,error:f}=a;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,s,o;try{let a;if("email"in t){const{email:v,password:g,options:x}=t;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await Gi(this.storage,this.storageKey)),a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:v,password:g,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:b,code_challenge_method:_},xform:pr})}else if("phone"in t){const{phone:v,password:g,options:x}=t;a=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:pr})}else throw new Cl("You must provide either an email or phone number and a password");const{data:u,error:f}=a;if(f||!u)return{data:{user:null,session:null},error:f};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:u,options:f}=t;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:xp})}else if("phone"in t){const{phone:a,password:u,options:f}=t;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:xp})}else throw new Cl("You must provide either an email or phone number and a password");const{data:s,error:o}=r;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new jl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,o,a,u,f,h,p,v,g,x,b;let _,N;if("message"in t)_=t.message,N=t.signature;else{const{chain:k,wallet:E,statement:L,options:I}=t;let q;if(Vn())if(typeof E=="object")q=E;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))q=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=E}const H=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in q&&q.signIn){const P=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),L?{statement:L}:null));let te;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")te=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)te=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)_=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),N=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${H.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(s=I?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=I?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((u=I?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((h=I?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((g=(v=I?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...I.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const P=await q.signMessage(new TextEncoder().encode(_),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=P}}try{const{data:k,error:E}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Hv(N)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:pr});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new jl}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(qe(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await si(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{const{data:a,error:u}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:pr});if(await Dr(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new jl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(qe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:s,token:o,access_token:a,nonce:u}=t,f=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:pr}),{data:h,error:p}=f;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new jl}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,o,a,u;try{if("email"in t){const{email:f,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Gi(this.storage,this.storageKey));const{error:g}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:f,options:h}=t,{data:p,error:v}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:v}}throw new Cl("You must provide either an email or phone number.")}catch(f){if(qe(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(t){var r,s;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:f}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:pr});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(qe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,s,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await Gi(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:dy})}catch(a){if(qe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Fr;const{error:o}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:o,options:a}=t,{error:u}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:s,type:o,options:a}=t,{data:u,error:f}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:f}}throw new Cl("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await si(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Vu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const u=await si(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=Gu()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(h,p,v)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,v))})}return{data:{session:t},error:null}}const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ur}):await this._useSession(async r=>{var s,o,a;const{data:u,error:f}=r;if(f)throw f;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fr}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Ur})})}catch(r){if(qe(r))return Mv(r)&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new Fr;const u=o.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await Gi(this.storage,this.storageKey));const{data:p,error:v}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:u.access_token,xform:Ur});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fr;const r=Date.now()/1e3;let s=r,o=!0,a=null;const{payload:u}=Wu(t.access_token);if(u.exp&&(s=u.exp,o=s<=r),o){const{session:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!f)return{data:{user:null,session:null},error:null};a=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)throw h;a={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(qe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:u,error:f}=r;if(f)throw f;t=(s=u.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new Fr;const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(qe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Vn())throw new Nl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fp("No code detected.");const{data:L,error:I}=await this._exchangeCodeForSession(t.code);if(I)throw I;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:f,expires_at:h,token_type:p}=t;if(!a||!f||!u||!p)throw new Nl("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(f);let x=v+g;h&&(x=parseInt(h));const b=x-v;b*1e3<=Zi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const _=x-g;v-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,x,v):v-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,x,v);const{data:N,error:k}=await this._getUser(a);if(k)throw k;const E={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:g,expires_at:x,refresh_token:u,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(s){if(qe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await si(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:a}=r;if(a)return{error:a};const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:f}=await this.admin.signOut(u,t);if(f&&!(zv(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return t!=="others"&&(await this._removeSession(),await Dr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Gv(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,o;try{const{data:{session:a},error:u}=r;if(u)throw u;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Gi(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(qe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:o}=await this._useSession(async a=>{var u,f,h,p,v;const{data:g,error:x}=a;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",b,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return Vn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:t.provider,url:s?.url},error:null}}catch(s){if(qe(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,o;const{data:a,error:u}=r;if(u)throw u;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Yv(async o=>(o>0&&await Jv(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pr})),(o,a)=>{const u=200*Math.pow(2,o);return a&&Hu(a)&&Date.now()+u-s<Zi})}catch(s){if(this._debug(r,"error",s),qe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Vn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await si(this.storage,this.storageKey);if(o&&this.userStorage){let u=await si(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await es(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:Gu()}else if(o&&!o.user&&!o.user){const u=await si(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Dr(this.storage,this.storageKey+"-user"),await es(this.storage,this.storageKey,o)):o.user=Gu()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vu;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Vu}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Hu(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Kl;const{data:a,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!a.session)throw new Fr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const f={session:a.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(a){if(this._debug(o,"error",a),qe(a)){const u={session:null,error:a};return Hu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,s=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,r)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let f=0;f<a.length;f+=1)console.error(a[f]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await es(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const a=vp(o);await es(this.storage,this.storageKey,a)}else{const o=vp(r);await es(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Dr(this.storage,this.storageKey),await Dr(this.storage,this.storageKey+"-code-verifier"),await Dr(this.storage,this.storageKey+"-user"),this.userStorage&&await Dr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-t)/Zi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Zi}ms, refresh threshold is ${kc} ticks`),o<=kc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,u]=await Gi(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);o.push(a.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:o,error:a}=r;return a?{data:null,error:a}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,o;const{data:a,error:u}=r;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:h,error:p}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:a}=r;if(a)return{data:null,error:a};const{data:u,error:f}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(r){if(qe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:a}=r;return a?{data:null,error:a}:await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(qe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=t?.factors||[],o=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),a=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:o},error:a}=t;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Wu(o.access_token);let f=null;u.aal&&(f=u.aal);let h=f;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const v=u.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(f=>f.kid===t);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===t),s&&this.jwks_cached_at+Rv>o)return s;const{data:a,error:u}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,s=a.keys.find(f=>f.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};s=b.session.access_token}const{header:o,payload:a,signature:u,raw:{header:f,payload:h}}=Wu(s);r?.allowExpired||iy(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:o,signature:u},error:null}}const v=sy(o.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,Vv(`${f}.${h}`)))throw new jc("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}}}so.nextInstanceID=0;const wy=so;class ky extends wy{constructor(t){super(t)}}var _y=function(e,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function f(v){try{p(s.next(v))}catch(g){u(g)}}function h(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(f,h)}p((s=s.apply(e,t||[])).next())})};class Sy{constructor(t,r,s){var o,a,u;this.supabaseUrl=t,this.supabaseKey=r;const f=Tv(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:xv,realtime:wv,auth:Object.assign(Object.assign({},bv),{storageKey:h}),global:yv},v=Ev(s??{},p);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=jv(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new $2(new URL("rest/v1",f).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new mv(this.storageUrl.href,this.headers,this.fetch,s?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new T2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return _y(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:a,storageKey:u,flowType:f,lock:h,debug:p},v,g){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ky({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),v),storageKey:u,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:o,userStorage:a,flowType:f,lock:h,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new nv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jy=(e,t,r)=>new Sy(e,t,r);function Cy(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Cy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ny="https://uhtieumdogkgagbxvlda.supabase.co",Ey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVodGlldW1kb2drZ2FnYnh2bGRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MTg2NTcsImV4cCI6MjA3ODA5NDY1N30.-Q6XYb8XH8GIKJYgVyfPRfhQJp4RRLOmZcgoIhX7Ss4",Q=jy(Ny,Ey),Ty=100*1024*1024,Py=async(e,t)=>oo(e,"statuses"),oo=async(e,t,r)=>{const s=(await Q.auth.getUser())?.data.user;if(!s)return null;if(e.size>Ty)return alert("File too large. Max 100 MB."),null;const o=e.name.split(".").pop()?.toLowerCase()||"",a=["jpg","jpeg","png","gif","webp","svg","bmp"],u=["mp4","webm","mov","avi"],f=["mp3","weba","ogg","wav","m4a"],h=["pdf","doc","docx","txt","json","rtf","exe","zip"];let p;if(a.includes(o))p="image";else if(u.includes(o))o==="webm"&&e.type.startsWith("audio/")?p="audio":p="video";else if(f.includes(o))p="audio";else if(h.includes(o))p="document";else return alert("Unsupported file type"),null;if(t==="profiles"&&p!=="image")return alert("Images only for profiles"),null;const v=`${t}/${s.id}/${Date.now()}_${Math.random().toString(36).slice(2)}.${o}`,{data:g,error:x}=await Q.storage.from("media").upload(v,e,{upsert:!0,contentType:e.type});if(x&&x.message!=="The resource already exists")return console.error("Upload error:",x),null;const{data:{publicUrl:b}}=Q.storage.from("media").getPublicUrl(v);return{url:b,type:p}},ng=j.createContext(void 0),Ly=({children:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(null),[a,u]=j.useState(!0),f=async x=>{const{data:b}=await Q.from("profiles").select("*").eq("id",x).maybeSingle();o(b),u(!1)},h=x=>{o(x)};j.useEffect(()=>{Q.auth.getSession().then(({data:{session:b}})=>{r(b?.user??null),b?.user?f(b.user.id):u(!1)});const{data:{subscription:x}}=Q.auth.onAuthStateChange((b,_)=>{r(_?.user??null),_?.user?f(_.user.id):(o(null),u(!1))});return()=>x.unsubscribe()},[]);const p=async(x,b,_,N)=>{const{data:k,error:E}=await Q.auth.signUp({email:x,password:b});if(E)throw E;k.user&&await Q.from("profiles").insert({id:k.user.id,username:_,display_name:N})},v=async(x,b)=>{const{error:_}=await Q.auth.signInWithPassword({email:x,password:b});if(_)throw _},g=async()=>{await Q.auth.signOut()};return c.jsx(ng.Provider,{value:{user:t,profile:s,loading:a,signUp:p,signIn:v,signOut:g,updateProfile:h},children:e})},Gn=()=>{const e=j.useContext(ng);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Iy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ee=(e,t)=>{const r=j.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:f="",children:h,...p},v)=>j.createElement("svg",{ref:v,...Iy,width:o,height:o,stroke:s,strokeWidth:u?Number(a)*24/Number(o):a,className:["lucide",`lucide-${Ay(e)}`,f].join(" "),...p},[...t.map(([g,x])=>j.createElement(g,x)),...Array.isArray(h)?h:[h]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Ee("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Ee("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Ee("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Ee("CornerUpLeft",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Ee("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Ee("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Ee("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=Ee("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ee("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Ee("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=Ee("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Ee("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Ee("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Ee("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Ee("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ee("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Ee("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Ee("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=Ee("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Ee("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Ee("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=Ee("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),sx=({isOpen:e,title:t,slug:r,onClose:s})=>{if(!e)return null;const o=`/${r}`;return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm p-4",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col transform transition-all duration-300 scale-100 opacity-100",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-orange-200 bg-orange-50 rounded-t-3xl",children:[c.jsx("h2",{className:"text-2xl font-black text-gray-800",children:t}),c.jsx("button",{onClick:s,className:"p-3 text-red-600 hover:text-white hover:bg-red-600 rounded-full transition","aria-label":"Close modal",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"flex-grow overflow-hidden p-0",children:c.jsx("iframe",{src:o,title:t,className:"w-full h-full border-0 rounded-b-3xl"})})]})})},Np=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(""),[o,a]=j.useState(""),[u,f]=j.useState(""),[h,p]=j.useState(""),[v,g]=j.useState(""),[x,b]=j.useState(!1),[_,N]=j.useState(!1),{signUp:k,signIn:E}=Gn(),[L,I]=j.useState(!1),[q,H]=j.useState(""),[P,te]=j.useState("");j.useEffect(()=>{g("")},[r,o,u,h]);const X=(F,J)=>{H(F),te(J),I(!0)},ge=()=>{I(!1),H(""),te("")},$=async F=>{F.preventDefault(),g(""),b(!1),N(!0);try{if(e){if(!u.trim()){g("Username is required"),N(!1);return}if(!h.trim()){g("Display name is required"),N(!1);return}if(u.includes(" ")){g("Username cannot contain spaces"),N(!1);return}await k(r,o,u,h),b(!0),setTimeout(()=>{t(!1),s(""),a(""),f(""),p(""),b(!1)},1800)}else await E(r,o)}catch(J){const ae=J.message?.toLowerCase()||"";ae.includes("invalid login credentials")||ae.includes("invalid credentials")?g("Wrong email or password. Please try again."):ae.includes("email not confirmed")?g("Please check your email and click the confirmation link."):ae.includes("user already registered")||ae.includes("already exists")?g("An account with this email already exists. Try signing in."):ae.includes("password should be at least")?g("Password must be at least 6 characters long."):ae.includes("unable to validate email address")?g("Please enter a valid email address."):ae.includes("rate limit")||ae.includes("too many requests")?g("Too many attempts. Please wait a minute and try again."):ae.includes("network")||ae.includes("fetch")?g("Network error. Please check your connection."):g(J.message||"Something went wrong. Please try again.")}finally{N(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 -z-10",children:[c.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 1440 1024",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff6b6b"}),c.jsx("stop",{offset:"50%",stopColor:"#ffa726"}),c.jsx("stop",{offset:"100%",stopColor:"#ff8a65"})]}),c.jsxs("linearGradient",{id:"grad2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff5252"}),c.jsx("stop",{offset:"50%",stopColor:"#ff9800"}),c.jsx("stop",{offset:"100%",stopColor:"#ff6b6b"})]}),c.jsxs("linearGradient",{id:"grad3",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"#ff3d00"}),c.jsx("stop",{offset:"50%",stopColor:"#ff6d00"}),c.jsx("stop",{offset:"100%",stopColor:"#ff9100"})]})]}),c.jsx("path",{fill:"url(#grad1)",fillOpacity:"0.6",d:"M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z",className:"animate-wave1",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z;\r
                M0,200 C380,50 1060,350 1440,180 L1440,1024 L0,1024 Z;\r
                M0,160 C320,300 1120,50 1440,160 L1440,1024 L0,1024 Z\r
              `,dur:"20s",repeatCount:"indefinite"})}),c.jsx("path",{fill:"url(#grad2)",fillOpacity:"0.5",d:"M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z",className:"animate-wave2",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z;\r
                M0,250 C350,450 1090,-50 1440,320 L1440,1024 L0,1024 Z;\r
                M0,300 C280,100 1160,400 1440,280 L1440,1024 L0,1024 Z\r
              `,dur:"25s",repeatCount:"indefinite"})}),c.jsx("path",{fill:"url(#grad3)",fillOpacity:"0.4",d:"M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z",className:"animate-wave3",children:c.jsx("animate",{attributeName:"d",values:`\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z;\r
                M0,500 C250,200 1190,700 1440,350 L1440,1024 L0,1024 Z;\r
                M0,450 C300,600 1140,200 1440,400 L1440,1024 L0,1024 Z\r
              `,dur:"30s",repeatCount:"indefinite"})})]}),c.jsx("style",{jsx:!0,children:`
          @keyframes wave1 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-40px); }
          }
          @keyframes wave2 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(60px); }
          }
          @keyframes wave3 {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-80px); }
          }
          .animate-wave1 { animation: wave1 20s ease-in-out infinite; }
          .animate-wave2 { animation: wave2 25s ease-in-out infinite; }
          .animate-wave3 { animation: wave3 30s ease-in-out infinite; }
        `})]}),c.jsx("div",{className:"w-full max-w-md z-10",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl rounded-3xl shadow-2xl p-10 border border-white/40",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("img",{src:"https://mux8.com/assets/logo/liaotian-dragon.svg",alt:"LiaoTian logo",className:"mx-auto w-40 h-40 mb-1"}),c.jsx("p",{className:"text-gray-700 text-xl font-bold",children:"Liaoverse"})]}),c.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e&&c.jsxs(c.Fragment,{children:[c.jsxs("p",{class:"text-xs text-gray-500 text-center -mt-3",children:["By creating an account you agree to the ",c.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>X("Terms of Service","terms-of-service"),children:"Terms of Service"})," and ",c.jsx("button",{type:"button",class:"text-red-600 hover:underline font-medium",onClick:()=>X("Privacy Policy","privacy-policy"),children:"Privacy Policy"})]}),c.jsx("input",{type:"text",placeholder:"Username (no spaces)",value:u,onChange:F=>f(F.target.value),required:!0,disabled:_,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsx("input",{type:"text",placeholder:"Display Name",value:h,onChange:F=>p(F.target.value),required:!0,disabled:_,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"})]}),c.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:F=>s(F.target.value),required:!0,disabled:_,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:F=>a(F.target.value),required:!0,disabled:_,className:"w-full px-6 py-4 bg-white/80 border-2 border-orange-200 rounded-2xl focus:outline-none focus:border-red-500 focus:ring-4 focus:ring-red-100 transition text-gray-800 placeholder-gray-500 font-medium"}),c.jsxs("div",{className:"min-h-8",children:[v&&c.jsxs("div",{className:"flex items-center gap-3 text-red-600 bg-red-50/90 px-5 py-4 rounded-2xl border-2 border-red-300 backdrop-blur",children:[c.jsx(rg,{size:22}),c.jsx("span",{className:"font-semibold",children:v})]}),x&&c.jsxs("div",{className:"flex items-center gap-3 text-green-600 bg-green-50/90 px-5 py-4 rounded-2xl border-2 border-green-300 backdrop-blur",children:[c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),c.jsx("span",{className:"font-bold",children:"Account created! Switching to Sign In..."})]})]}),c.jsxs("button",{type:"submit",disabled:_,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 text-white py-5 rounded-2xl font-bold text-xl hover:from-red-700 hover:to-orange-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-70 disabled:cursor-not-allowed transition transform hover:scale-[1.02] active:scale-100 shadow-2xl flex items-center justify-center gap-4",children:[_?c.jsxs("svg",{className:"animate-spin h-7 w-7",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c.jsx(Hy,{size:28}),_?"Loading...":e?"Join Liaoverse":"Enter Liaoverse"]})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx("button",{onClick:()=>{t(!e),g(""),b(!1)},disabled:_,className:"text-red-600 hover:text-red-700 font-bold text-lg hover:underline disabled:opacity-50",children:e?"Already have an account? Sign In":"Need an account? Sign Up"})}),c.jsxs("div",{className:"text-center text-gray-600 text-sm mt-12 font-bold",children:[" Mux ",new Date().getFullYear()]})]})}),c.jsx(sx,{isOpen:L,title:q,slug:P,onClose:ge})]})},Ep="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",ox="0 0 784 1168",lx=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(!0),{user:o}=Gn(),a=j.useRef(null),u=j.useCallback(async F=>{if(!F.length)return{likeCounts:{},commentCounts:{}};const J={},ae={};for(const Y of F){const[{count:K},{count:oe}]=await Promise.all([Q.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",Y),Q.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",Y)]);J[Y]=K||0,ae[Y]=oe||0}return{likeCounts:J,commentCounts:ae}},[]),[f,h]=j.useState(new Set),[p,v]=j.useState(null),[g,x]=j.useState([]),[b,_]=j.useState(""),[N,k]=j.useState(null),[E,L]=j.useState([]),I=j.useCallback(async F=>{if(!o||F.length===0)return;const J=F.map(Y=>Y.id),{data:ae}=await Q.from("likes").select("entity_id").eq("user_id",o.id).eq("entity_type","post").in("entity_id",J);ae&&h(Y=>new Set([...Y,...ae.map(K=>K.entity_id)]))},[o]),q=j.useCallback(async()=>{s(!0);let F=Q.from("posts").select("*, profiles(*)").eq("media_type","video").order("created_at",{ascending:!1}).limit(20);if(o){const{data:M}=await Q.from("follows").select("following_id").eq("follower_id",o.id),S=[...M?.map(R=>R.following_id)||[],o.id];F=F.in("user_id",S)}const{data:J}=await F,ae=J||[],Y=ae.map(M=>M.id),{likeCounts:K,commentCounts:oe}=await u(Y),Z=ae.map(M=>({...M,like_count:K[M.id]||0,comment_count:oe[M.id]||0}));t(Z),I(Z),s(!1)},[o,I,u]);j.useEffect(()=>{q()},[q]),j.useEffect(()=>{const F={root:a.current,threshold:.6},J=new IntersectionObserver(Y=>{Y.forEach(K=>{const oe=K.target.querySelector("video");oe&&(K.isIntersecting?oe.play().catch(()=>{}):(oe.pause(),oe.currentTime=0))})},F);return document.querySelectorAll(".shot-item").forEach(Y=>J.observe(Y)),()=>J.disconnect()},[e]);const H=async F=>{if(o){if(!f.has(F.id)){const J=new Set(f);J.add(F.id),h(J),t(ae=>ae.map(Y=>Y.id===F.id?{...Y,like_count:Y.like_count+1}:Y)),await Q.from("likes").insert({user_id:o.id,entity_id:F.id,entity_type:"post"})}te(F.id)}},P=async F=>{if(!o)return;const J=new Set(f);J.delete(F),h(J),t(ae=>ae.map(Y=>Y.id===F?{...Y,like_count:Math.max(0,Y.like_count-1)}:Y)),await Q.from("likes").delete().match({user_id:o.id,entity_id:F,entity_type:"post"}),L(ae=>ae.filter(Y=>Y.user_id!==o.id))},te=async F=>{k(F);const{data:J}=await Q.from("likes").select("user_id, profiles(*)").eq("entity_id",F).eq("entity_type","post");J&&L(J)},X=async F=>{v(F);const{data:J}=await Q.from("comments").select("*, profiles(*)").eq("post_id",F).order("created_at",{ascending:!0});J&&x(J)},ge=async F=>{if(F.preventDefault(),!o||!p||!b.trim())return;const J=p,{data:ae,error:Y}=await Q.from("comments").insert({post_id:J,user_id:o.id,content:b.trim()}).select("*, profiles(*)").single();!Y&&ae&&(x(K=>[...K,ae]),_(""),t(K=>K.map(oe=>oe.id===J?{...oe,comment_count:(oe.comment_count||0)+1}:oe)))},$=F=>{window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:F}))};return r?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 w-full",children:[c.jsx("div",{className:"logo-loading-container w-[100px] h-auto relative mb-4",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:ox,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Ep,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Ep,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"Loading shots..."})]}):e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-[rgb(var(--color-text-secondary))] p-8 text-center",children:[c.jsx(jp,{size:48,className:"mb-4 opacity-50"}),c.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Shots Yet"}),c.jsx("p",{children:"No video content available in your feed. Follow people who post video content, or post a video yourself to see them here!"})]}):c.jsxs("div",{className:"relative w-full h-[calc(100vh-180px)] bg-black rounded-xl overflow-hidden",children:[c.jsx("div",{ref:a,className:"w-full h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide",style:{scrollBehavior:"smooth"},children:e.map(F=>c.jsxs("div",{className:"shot-item relative w-full h-full snap-start bg-black",children:[c.jsx("video",{src:F.media_url,className:"w-full h-full object-cover",playsInline:!0,loop:!0,muted:!1}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none"}),c.jsxs("div",{className:"absolute right-4 bottom-20 flex flex-col gap-6 items-center z-10",children:[c.jsx("div",{className:"flex flex-col items-center gap-1",children:c.jsx("button",{onClick:()=>$(F.user_id),className:"relative",children:c.jsx("img",{src:F.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${F.profiles?.username}`,className:"w-12 h-12 rounded-full border-2 border-white"})})}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx("button",{onClick:()=>H(F),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(is,{size:28,className:f.has(F.id)?"fill-red-500 text-red-500":"text-white"})}),c.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:F.like_count})]}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx("button",{onClick:()=>X(F.id),className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(ho,{size:28,className:"text-white"})}),c.jsx("span",{className:"text-white text-xs font-bold shadow-black drop-shadow-md",children:F.comment_count})]}),c.jsx("button",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-full transition active:scale-90",children:c.jsx(ug,{size:28,className:"text-white"})})]}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-16 z-10 text-white",children:[c.jsxs("button",{onClick:()=>$(F.user_id),className:"font-bold text-lg hover:underline flex items-center gap-1 mb-2 shadow-black drop-shadow-md",children:["@",F.profiles?.username,F.profiles?.verified&&c.jsx(rr,{size:16,className:"text-blue-400"})]}),c.jsx("p",{className:"text-sm line-clamp-2 opacity-90 mb-3 shadow-black drop-shadow-md",children:F.content}),c.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-70",children:[c.jsx(jp,{size:14,className:"animate-spin-slow"}),c.jsxs("span",{children:["Original Sound - ",F.profiles?.display_name]})]})]})]},F.id))}),N&&c.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[60vh] rounded-t-2xl sm:rounded-2xl flex flex-col",onClick:F=>F.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Likes"}),c.jsx("button",{onClick:()=>k(null),children:c.jsx(kt,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:E.map(F=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:F.profiles.avatar_url,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-sm text-[rgb(var(--color-text))]",children:F.profiles.display_name}),c.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["@",F.profiles.username]})]})]}),F.user_id===o?.id&&c.jsx("button",{onClick:()=>P(N),className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100",title:"Remove like",children:c.jsx(is,{size:16,className:"fill-current"})})]},F.user_id))})]})}),p&&c.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center p-4 animate-in fade-in",children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm h-[70vh] rounded-t-2xl sm:rounded-2xl flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Comments"}),c.jsx("button",{onClick:()=>v(null),children:c.jsx(kt,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4 flex-1",children:g.map(F=>c.jsxs("div",{className:"flex gap-3",children:[c.jsx("img",{src:F.profiles.avatar_url,className:"w-8 h-8 rounded-full flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex gap-2 items-baseline",children:[c.jsx("span",{className:"font-bold text-xs text-[rgb(var(--color-text))]",children:F.profiles.display_name}),c.jsx("span",{className:"text-[10px] text-[rgb(var(--color-text-secondary))]",children:new Date(F.created_at).toLocaleDateString()})]}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text))]",children:F.content})]})]},F.id))}),c.jsxs("form",{onSubmit:ge,className:"p-3 border-t border-[rgb(var(--color-border))] flex gap-2",children:[c.jsx("input",{value:b,onChange:F=>_(F.target.value),placeholder:"Say something...",className:"flex-1 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2 text-sm outline-none text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"submit",className:"text-[rgb(var(--color-accent))]",children:c.jsx(ls,{size:20})})]})]})})]})},ax=!0,Tp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",ux="0 0 784 1168",cx=()=>{const{user:e,profile:t}=Gn(),[r,s]=j.useState([]),[o,a]=j.useState(null),[u,f]=j.useState(null);j.useEffect(()=>{const x=b=>{const N=b.detail.progress;N===100?setTimeout(()=>f(null),1e3):f(N)};return window.addEventListener("statusUploadProgress",x),()=>{window.removeEventListener("statusUploadProgress",x)}},[]),j.useEffect(()=>{if(!e||!t)return;const x=async()=>{try{let N=Q.from("statuses").select("*, profiles!user_id(*)").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!0});if(ax){const{data:q}=await Q.from("follows").select("following_id").eq("follower_id",e.id),H=q?.map(P=>P.following_id)||[];N=N.in("user_id",[e.id,...H])}const{data:k}=await N;if(!k)return;const E=new Map;for(const q of k){if(!q.profiles)continue;const H=q.user_id,P={...q,viewed_by:q.viewed_by||[]};if(!E.has(H))E.set(H,{...q.profiles,statuses:[P],hasUnseen:!P.viewed_by.includes(e.id)});else{const te=E.get(H);te.statuses.push(P),P.viewed_by.includes(e.id)||(te.hasUnseen=!0)}}const L=E.get(e.id)||{...t,statuses:[],hasUnseen:!1};L.statuses.length>0&&(L.hasUnseen=L.statuses.some(q=>!q.viewed_by.includes(e.id))),E.delete(e.id);const I=Array.from(E.values()).sort((q,H)=>{if(q.hasUnseen!==H.hasUnseen)return q.hasUnseen?-1:1;const P=new Date(q.statuses[q.statuses.length-1].created_at).getTime();return new Date(H.statuses[H.statuses.length-1].created_at).getTime()-P});a(L),s(I)}catch(N){console.error("Error fetching statuses:",N)}};x();const b=Q.channel("status-tray-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"statuses"},x).subscribe(),_=setInterval(x,6e4);return()=>{clearInterval(_),Q.removeChannel(b)}},[e,t]);const h=x=>{if(!o)return;const b=[o,...r];window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{initialUserId:x,users:b}}))},p=()=>{o&&o.statuses.length>0?h(e.id):window.dispatchEvent(new CustomEvent("openStatusCreator"))},v=x=>{x.stopPropagation(),window.dispatchEvent(new CustomEvent("openStatusCreator"))};if(!e)return null;const g=x=>{const b=x.statuses.length>0;return x.id===t?.id?u!==null&&u<100?c.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10",style:{background:`conic-gradient(rgb(var(--color-primary)) ${u}%, rgb(var(--color-border)) ${u}%)`}}):b?c.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] -z-10 bg-[rgb(var(--color-border))]"}):c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-[rgb(var(--color-border))] -z-10"}):c.jsx("div",{className:`absolute inset-0 rounded-full p-[2px] -z-10 ${x.hasUnseen?"bg-gradient-to-tr from-[rgb(var(--color-accent))] to-[rgb(var(--color-primary))] group-hover:scale-105 transition-transform":"bg-[rgb(var(--color-border))]"}`})};return c.jsxs("div",{className:"flex space-x-4 p-4 overflow-x-auto scrollbar-hide bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))]",children:[o&&c.jsxs("div",{onClick:p,className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[c.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[c.jsx("img",{src:t?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t?.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:"Your avatar"}),g(o),c.jsx("div",{onClick:v,className:"absolute -bottom-1 -right-1 w-6 h-6 bg-[rgb(var(--color-primary))] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform cursor-pointer border-2 border-[rgb(var(--color-surface))]",children:c.jsx(Xy,{size:16,className:"text-[rgb(var(--color-text-on-primary))]"})})]}),c.jsx("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16",children:"Your Status"})]}),r.map(x=>c.jsxs("div",{onClick:()=>h(x.id),className:"flex flex-col items-center space-y-1 flex-shrink-0 cursor-pointer group",children:[c.jsxs("div",{className:"relative w-16 h-16 rounded-full",children:[c.jsx("img",{src:x.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${x.username}`,className:"w-full h-full rounded-full object-cover p-[2px] bg-[rgb(var(--color-surface))]",alt:x.display_name}),g(x)]}),c.jsxs("span",{className:"text-xs text-center text-[rgb(var(--color-text-secondary))] truncate w-16 flex items-center justify-center gap-1",children:[c.jsx("span",{className:"truncate",children:x.display_name||x.username}),x.verified&&c.jsx(rr,{size:12,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]})]},x.id))]})},dx=({onClose:e})=>{const{user:t}=Gn(),[r,s]=j.useState(null),[o,a]=j.useState(""),[u,f]=j.useState("image"),[h,p]=j.useState(""),[v,g]=j.useState(!1),[x,b]=j.useState("camera"),[_,N]=j.useState(!1),k=j.useRef(null),E=j.useRef(null),L=j.useRef(null),I=j.useRef(null),q=j.useRef([]),[H,P]=j.useState("user"),te=j.useRef(null),X=()=>{L.current&&(L.current.getTracks().forEach(Z=>Z.stop()),L.current=null)};j.useEffect(()=>()=>{X(),o&&URL.revokeObjectURL(o)},[o]);const ge=j.useCallback(async()=>{if(X(),!navigator.mediaDevices?.getUserMedia){alert("Camera is not supported on your device."),b("upload");return}try{const Z=await navigator.mediaDevices.getUserMedia({video:{facingMode:H},audio:x==="video"});L.current=Z,k.current&&(k.current.srcObject=Z)}catch(Z){console.error("Error accessing camera:",Z),alert("Could not access camera. Please check permissions."),b("upload")}},[H,x]);j.useEffect(()=>(x==="camera"||x==="video"?r||ge():X(),()=>X()),[x,ge,r]);const $=Z=>{const M=Z.target.files?.[0];if(M){if(!M.type.startsWith("image/")&&!M.type.startsWith("video/")){alert("Only image and video files are allowed.");return}f(M.type.startsWith("image/")?"image":"video"),s(M),a(URL.createObjectURL(M)),X()}},F=()=>{if(!k.current||!E.current)return;const Z=k.current,M=E.current;M.width=Z.videoWidth,M.height=Z.videoHeight;const ee=M.getContext("2d");ee&&(ee.drawImage(Z,0,0,M.width,M.height),M.toBlob(S=>{S&&(s(new File([S],"status.jpg",{type:"image/jpeg"})),a(URL.createObjectURL(S)),f("image"),X())},"image/jpeg"))},J=()=>{if(!L.current)return;N(!0),q.current=[];const Z=MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":"video/webm",M=Z.split("/")[1]||"webm";I.current=new MediaRecorder(L.current,{mimeType:Z}),I.current.ondataavailable=ee=>{q.current.push(ee.data)},I.current.onstop=()=>{const ee=new Blob(q.current,{type:Z});s(new File([ee],`status.${M}`,{type:Z})),a(URL.createObjectURL(ee)),f("video"),N(!1),X()},I.current.start()},ae=()=>{I.current?.stop()},Y=()=>{P(Z=>Z==="user"?"environment":"user")},K=async()=>{if(!t||!r)return;g(!0),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:1}}));let Z=1;const M=()=>{Z=Math.min(Z+10,95),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:Z}})),Z<95&&setTimeout(M,300)},ee=setTimeout(M,300);try{const S=await Py(r);if(clearTimeout(ee),Z=99,window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:Z}})),!S)throw new Error("Upload failed.");const R=new Date(Date.now()+1440*60*1e3).toISOString();await Q.from("statuses").insert({user_id:t.id,media_url:S.url,media_type:u,text_overlay:h?{text:h,x:50,y:50,color:"white",fontSize:24}:{},expires_at:R}),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:100}})),e()}catch(S){console.error("Error posting status:",S),alert("Failed to post status. Please try again."),window.dispatchEvent(new CustomEvent("statusUploadProgress",{detail:{progress:null}}))}finally{g(!1)}},oe=()=>{s(null),a(""),p(""),ge()};return c.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:[c.jsx("canvas",{ref:E,className:"hidden"})," ",c.jsxs("div",{className:"relative w-full h-full max-w-lg max-h-screen bg-black rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 z-20 flex justify-between items-center",children:[c.jsx("button",{onClick:r?oe:e,className:"p-2 bg-black/50 rounded-full text-white",children:c.jsx(kt,{size:24})}),r&&c.jsxs("button",{onClick:K,disabled:v,className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-full font-bold text-sm flex items-center gap-2 disabled:opacity-50",children:[v?"Posting...":"Post Status",!v&&c.jsx(ls,{size:16})]})]}),r&&c.jsxs("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center z-10",children:[u==="image"&&c.jsx("img",{src:o,className:"max-w-full max-h-full object-contain",alt:"Preview"}),u==="video"&&c.jsx("video",{src:o,className:"max-w-full max-h-full",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}),c.jsx("div",{className:"absolute w-full p-4 flex items-center justify-center pointer-events-none",children:c.jsx("input",{type:"text",value:h,onChange:Z=>p(Z.target.value),placeholder:"Add text...",className:"w-full text-center bg-black/60 text-white text-2xl font-bold p-2 outline-none border-none pointer-events-auto",style:{textShadow:"0px 0px 8px rgba(0,0,0,0.7)"}})})]}),!r&&c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center z-0",children:[(x==="camera"||x==="video")&&c.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),x==="upload"&&c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Upload a Status"}),c.jsx("p",{className:"text-gray-400 text-center",children:"Upload an image or a video from your device."}),c.jsxs("button",{onClick:()=>te.current?.click(),className:"mt-4 px-6 py-3 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-full font-bold flex items-center gap-2",children:[c.jsx(ig,{size:20})," Select Media"]}),c.jsx("input",{ref:te,type:"file",accept:"image/*,video/*",onChange:$,className:"hidden"})]})]}),!r&&c.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 z-20 flex justify-between items-center",children:[c.jsxs("div",{className:"flex gap-4 text-white font-medium",children:[c.jsx("button",{onClick:()=>b("upload"),className:x==="upload"?"text-[rgb(var(--color-primary))]":"text-gray-400",children:"Upload"}),c.jsx("button",{onClick:()=>b("camera"),className:x==="camera"?"text-[rgb(var(--color-primary))]":"text-gray-400",children:"Photo"}),c.jsx("button",{onClick:()=>b("video"),className:x==="video"?"text-[rgb(var(--color-primary))]":"text-gray-400",children:"Video"})]}),c.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2",children:[x==="camera"&&c.jsx("button",{onClick:F,className:"w-16 h-16 rounded-full bg-white border-4 border-white/50"}),x==="video"&&c.jsx("button",{onClick:_?ae:J,className:"w-16 h-16 rounded-full bg-red-500 border-4 border-white/50 flex items-center justify-center",children:_&&c.jsx("div",{className:"w-6 h-6 bg-white rounded-md"})})]}),(x==="camera"||x==="video")&&c.jsx("button",{onClick:Y,className:"p-3 bg-black/50 rounded-full text-white",children:c.jsx(Zy,{size:20})})]}),v&&c.jsx("div",{className:"absolute inset-0 z-30 bg-black/70 flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]})]})},fx=e=>{const t=new Date,r=new Date(e),s=Math.floor((t.getTime()-r.getTime())/1e3);if(s<60)return`${s}s ago`;const o=Math.floor(s/60);if(o<60)return`${o}m ago`;const a=Math.floor(o/60);if(a<24){const f=o%60;return f>0?`${a}h ${f}m ago`:`${a}h ago`}return`${Math.floor(a/24)}d ago`},hx=({duration:e,isActive:t,isPaused:r,onFinished:s})=>{const[o,a]=j.useState(0),u=j.useRef(Date.now()),f=j.useRef(0),h=j.useRef(0);j.useEffect(()=>{t?(a(0),u.current=Date.now(),f.current=0,h.current=0):a(v=>v<100?0:100)},[t]),j.useEffect(()=>{t&&(r?h.current===0&&(h.current=Date.now()):h.current>0&&(f.current+=Date.now()-h.current,h.current=0))},[r,t]),j.useEffect(()=>{if(!t||r||e===0)return;let v;const g=()=>{const _=(Date.now()-u.current-f.current)/e*100;_>=100?(a(100),s()):(a(_),v=requestAnimationFrame(g))};return v=requestAnimationFrame(g),()=>{cancelAnimationFrame(v)}},[t,r,e,s]);const p=!t&&o<100?0:o;return c.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-white",style:{width:`${p}%`,transition:p>0&&p<100?"width 50ms linear":"none"}})})},px=({statusId:e,onClose:t,onGoToProfile:r})=>{const[s,o]=j.useState([]),[a,u]=j.useState(!0);return j.useEffect(()=>{(async()=>{u(!0);try{const{data:h,error:p}=await Q.from("statuses").select("viewed_by").eq("id",e).single();if(p||!h||!h.viewed_by||h.viewed_by.length===0){u(!1);return}const{data:v,error:g}=await Q.from("profiles").select("*").in("id",h.viewed_by);if(g)throw g;o(v||[])}catch(h){console.error("Error fetching viewers:",h)}finally{u(!1)}})()},[e]),c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[1001] flex items-center justify-center p-4",onClick:t,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Viewed By"}),c.jsx("button",{onClick:t,className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(kt,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsxs("div",{className:"overflow-y-auto p-4 space-y-4",children:[a&&c.jsx("div",{className:"text-center p-4 text-[rgb(var(--color-text-secondary))]",children:"Loading..."}),!a&&s.length===0&&c.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No views yet."}),s.map(f=>c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:f.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${f.username}`,className:"w-10 h-10 rounded-full cursor-pointer",alt:"Avatar",onClick:()=>r(f.id)}),c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>r(f.id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm block",children:[f.display_name,f.verified&&c.jsx(rr,{size:14,className:"inline ml-1 text-[rgb(var(--color-accent))]"})]}),c.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",f.username]})]})]})},f.id))]})]})})},mx=({allStatusUsers:e,initialUserId:t,onClose:r})=>{const{user:s}=Gn(),[o,a]=j.useState(()=>Math.max(0,e.findIndex(M=>M.id===t))),[u,f]=j.useState(0),[h,p]=j.useState(!1),[v,g]=j.useState(!0),[x,b]=j.useState(""),[_,N]=j.useState(!1),[k,E]=j.useState(!1),[L,I]=j.useState(0),q=j.useRef(null),H=e[o],P=H?.statuses?.[u],te=j.useCallback(()=>{o<e.length-1?(a(M=>M+1),f(0),g(!0)):r()},[o,e.length,r]),X=j.useCallback(()=>{H&&u<H.statuses.length-1?f(M=>M+1):te()},[u,H,te]),ge=()=>{o>0&&(a(M=>M-1),f(0),g(!0))},$=()=>{u>0?f(M=>M-1):ge()};j.useEffect(()=>{if(!P||!s)return;g(!0),(async()=>{P.user_id===s.id||(P.viewed_by||[]).includes(s.id)||(P.viewed_by.push(s.id),await Q.rpc("mark_status_viewed",{status_id:P.id,viewer_id:s.id}))})();const ee=P.media_url;if(P.media_type==="image"){const S=new Image;S.src=ee,S.onload=()=>g(!1),S.onerror=()=>X()}else P.media_type==="video"&&q.current&&(q.current.src=ee,q.current.load(),I(0))},[P,s,X]),j.useEffect(()=>{const M=q.current;M&&(h||v?M.pause():M.play().catch(()=>{}))},[h,v,P]);const F=()=>p(!0),J=()=>p(!1),ae=M=>{const ee=M.currentTarget.getBoundingClientRect(),S=M.clientX-ee.left,R=ee.width*.3;S<R?$():X()},Y=M=>{r(),E(!1),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:M}))},K=async M=>{if(M.preventDefault(),!(!x.trim()||!s||!P||!H)){N(!0),p(!0);try{await Q.from("messages").insert({sender_id:s.id,recipient_id:H.id,content:x,media_url:P.media_url,media_type:P.media_type}),b(""),setTimeout(()=>{N(!1),p(!1)},1e3)}catch(ee){console.error("Error sending reply:",ee),N(!1),p(!1)}}};if(!H||!P)return c.jsx("div",{className:"fixed inset-0 z-[1000] bg-black flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})});const oe=P.text_overlay,Z=H.id===s?.id;return c.jsxs(j.Fragment,{children:[c.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center select-none",onPointerDown:F,onPointerUp:J,onPointerLeave:J,children:[c.jsx("div",{className:"absolute inset-0 z-20",onClick:ae}),c.jsxs("div",{className:"absolute top-0 left-0 w-full p-3 z-30",children:[c.jsx("div",{className:"flex space-x-1 mb-2",children:H.statuses.map((M,ee)=>c.jsx(hx,{duration:M.media_type==="image"?5e3:ee===u?L:0,isActive:ee===u,isPaused:h||v,onFinished:X},M.id))}),c.jsxs("button",{onClick:()=>Y(H.id),className:"flex items-center gap-3 group",children:[c.jsx("img",{src:H.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${H.username}`,className:"w-10 h-10 rounded-full group-hover:opacity-80 transition",alt:H.display_name}),c.jsxs("div",{className:"flex items-center gap-2",children:[" ",c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsxs("span",{className:"text-white font-bold text-sm group-hover:underline flex items-center gap-1",children:[H.display_name,H.verified&&c.jsx(rr,{size:14,className:"text-white"})]}),c.jsxs("span",{className:"text-white/70 text-xs",children:["@",H.username]})]}),c.jsx("span",{className:"text-white/70 text-xs",children:fx(P.created_at)})]})]})]}),c.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-40 text-white p-2 bg-black/30 rounded-full",children:c.jsx(kt,{size:24})}),c.jsxs("div",{className:"relative flex-1 w-full h-full max-w-lg max-h-screen flex items-center justify-center overflow-hidden bg-black",children:[v&&c.jsx("div",{className:"p-4 flex flex-col items-center justify-center border-b border-[rgb(var(--color-border))]",children:c.jsx("div",{className:"logo-loading-container w-[50px] h-auto relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:ux,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Tp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Tp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),c.jsx("img",{src:P.media_type==="image"?P.media_url:"",className:`w-full h-full object-contain mx-auto block transition-opacity ${P.media_type==="image"?"opacity-100":"opacity-0"}`,alt:""}),c.jsx("video",{ref:q,className:`w-full h-full object-contain mx-auto block transition-opacity ${P.media_type==="video"?"opacity-100":"opacity-0"}`,playsInline:!0,onEnded:X,onLoadedMetadata:M=>{g(!1),I(M.currentTarget.duration*1e3)},onCanPlay:()=>{g(!1),q.current&&L===0&&I(q.current.duration*1e3)},onError:()=>X()}),oe.text&&c.jsx("div",{className:"absolute text-white p-2 bg-black/60 rounded",style:{left:`${oe.x||50}%`,top:`${oe.y||50}%`,transform:`translate(-${oe.x||50}%, -${oe.y||50}%)`,fontSize:`${oe.fontSize||24}px`,color:oe.color||"white",textShadow:"0px 0px 8px rgba(0,0,0,0.7)"},children:oe.text})]}),Z?c.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 z-30",children:c.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-black/50 rounded-full text-white text-sm",children:[c.jsx(Dy,{size:16}),"Viewed by ",P.viewed_by?.length||0]})}):c.jsx("form",{onSubmit:K,className:"absolute bottom-0 left-0 w-full p-4 z-30",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:x,onChange:M=>b(M.target.value),placeholder:`Reply to ${H.display_name}...`,className:"flex-1 p-3 rounded-full bg-white/20 border border-white/30 text-white placeholder-white/70 outline-none text-sm",onClick:M=>M.stopPropagation(),onPointerDown:M=>M.stopPropagation()}),c.jsx("button",{type:"submit",disabled:_||!x.trim(),className:"p-3 rounded-full text-white bg-white/20 disabled:opacity-50",children:_?c.jsx(fo,{size:20}):c.jsx(ls,{size:20})})]})})]}),k&&Z&&c.jsx(px,{statusId:P.id,onClose:()=>E(!1),onGoToProfile:Y})]})},gx=()=>{const[e,t]=j.useState(!1),[r,s]=j.useState(null);return j.useEffect(()=>{const o=()=>t(!0),a=u=>{const f=u.detail;f&&f.users&&f.initialUserId&&s({users:f.users,initialUserId:f.initialUserId})};return window.addEventListener("openStatusCreator",o),window.addEventListener("openStatusViewer",a),()=>{window.removeEventListener("openStatusCreator",o),window.removeEventListener("openStatusViewer",a)}},[]),c.jsxs(j.Fragment,{children:[e&&c.jsx(dx,{onClose:()=>t(!1)}),r&&c.jsx(mx,{allStatusUsers:r.users,initialUserId:r.initialUserId,onClose:()=>s(null)})]})},Tc=({src:e})=>{const t=j.useRef(null),[r,s]=j.useState(!1),[o,a]=j.useState(0),[u,f]=j.useState(0),h="rgb(var(--color-accent))",p="rgb(var(--color-border))",v=b=>{const _=Math.floor(b/60),N=Math.floor(b%60);return`${_}:${N.toString().padStart(2,"0")}`};j.useEffect(()=>{const b=t.current;if(!b)return;const _=()=>{a(b.duration),f(b.currentTime)},N=()=>f(b.currentTime),k=()=>s(!b.paused);return b.addEventListener("loadedmetadata",_),b.addEventListener("timeupdate",N),b.addEventListener("play",k),b.addEventListener("pause",k),b.addEventListener("ended",()=>{s(!1),b.currentTime=0}),()=>{b.removeEventListener("loadedmetadata",_),b.removeEventListener("timeupdate",N),b.removeEventListener("play",k),b.removeEventListener("pause",k),b.removeEventListener("ended",()=>{})}},[]);const g=()=>{const b=t.current;b&&(r?b.pause():b.play())},x=b=>{const _=parseFloat(b.target.value),N=t.current;N&&(N.currentTime=_,f(_))};return c.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full p-2 bg-[rgb(var(--color-surface-hover))] rounded-xl",children:[c.jsx("audio",{ref:t,src:e,preload:"metadata",className:"hidden"}),c.jsx("button",{onClick:g,className:"flex-shrink-0 p-2 rounded-full transition-colors",style:{backgroundColor:h,color:"rgb(var(--color-text-on-primary))"},children:r?c.jsx(og,{size:16,fill:"currentColor"}):c.jsx(Jc,{size:16,fill:"currentColor"})}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:o,step:"0.01",value:u,onChange:x,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${h} 0%, ${h} ${u/o*100||0}%, ${p} ${u/o*100||0}%, ${p} 100%)`}}),c.jsxs("span",{className:"text-xs flex-shrink-0 text-[rgb(var(--color-text-secondary))]",children:[v(u),"/",v(o)]})]})]})},Pp=(e,t)=>{if(t)return null;const r=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,s=e.trim();if(r.test(s)){const o=s.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?.*v=|embed\/|v\/|shorts\/))([\w-]{11})/i);return o&&o[1]?c.jsx("iframe",{title:"YouTube",className:"rounded-2xl max-h-96 w-full aspect-video",src:`https://www.youtube.com/embed/${o[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):c.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-border))] transition inline-flex",children:[c.jsx(to,{size:20})," ",s.length>50?s.substring(0,47)+"...":s]})}return null},vx=({url:e,type:t,onClose:r})=>c.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:r,children:[c.jsxs("div",{className:"max-w-full max-h-full",onClick:s=>s.stopPropagation(),children:[t==="image"&&c.jsx("img",{src:e,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size"}),t==="video"&&c.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[c.jsx("source",{src:e})," Your browser does not support the video tag."]})]}),c.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:c.jsx(kt,{size:24})})]}),zl=({post:e,currentUserId:t,isLiked:r,onLikeToggle:s,onCommentUpdate:o,onDelete:a,onNavigateToProfile:u})=>{const[f,h]=j.useState(!1),[p,v]=j.useState(!1),[g,x]=j.useState(!1),[b,_]=j.useState(!1),[N,k]=j.useState(null),[E,L]=j.useState([]),[I,q]=j.useState([]),[H,P]=j.useState(""),[te,X]=j.useState(!1),[ge,$]=j.useState(!1),[F,J]=j.useState(!1),[ae,Y]=j.useState(!1),[K,oe]=j.useState(e.content),[Z,M]=j.useState(e.content),[ee,S]=j.useState(0),R=j.useRef(null),U=ve=>new Date(ve).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=ve=>ve?new Date().getTime()-new Date(ve).getTime()<3e5:!1;j.useEffect(()=>{M(e.content),oe(e.content)},[e.content]);const ie=()=>{const ve=`${window.location.origin}/?post=${e.id}`;navigator.clipboard.writeText(ve).then(()=>{J(!0),$(!1),setTimeout(()=>J(!1),2e3)})},me=async()=>{if(!K.trim()||K===e.content){Y(!1);return}const{error:ve}=await Q.from("posts").update({content:K}).eq("id",e.id);ve?alert("Failed to update post."):(M(K),Y(!1))},pe=async()=>{const{data:ve}=await Q.from("likes").select("user_id, profiles(*)").eq("entity_id",e.id).eq("entity_type","post");ve&&L(ve)},ze=async()=>{t&&(s(e),r||await Q.from("likes").insert({user_id:t,entity_id:e.id,entity_type:"post"}),h(!0),pe())},Le=async()=>{t&&(s(e),L(ve=>ve.filter(rt=>rt.user_id!==t)),await Q.from("likes").delete().match({user_id:t,entity_id:e.id,entity_type:"post"}))};j.useEffect(()=>{f&&pe()},[f]);const we=async()=>{const{data:ve}=await Q.from("comments").select("*, profiles(*)").eq("post_id",e.id).order("created_at",{ascending:!0});ve&&q(ve)},Je=async ve=>{if(ve.preventDefault(),!t||!H.trim())return;X(!0);const{data:rt,error:pt}=await Q.from("comments").insert({post_id:e.id,user_id:t,content:H.trim()}).select("*, profiles(*)").single();!pt&&rt&&(q(Mt=>[...Mt,rt]),P(""),o({...e,comment_count:(e.comment_count||0)+1})),X(!1)};j.useEffect(()=>{p&&we()},[p]);const ht=()=>{S(0);let ve=0;R.current=setInterval(()=>{if(ve+=2,ve>=100){clearInterval(R.current),a&&a(e),x(!1);return}S(ve)},50)},ye=()=>{R.current&&clearInterval(R.current),S(0)},zt=t===e.user_id;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-b border-[rgb(var(--color-border))] p-4 hover:bg-[rgb(var(--color-surface-hover))] transition bg-[rgb(var(--color-surface))]",children:c.jsxs("div",{className:"flex gap-4 items-start",children:[c.jsxs("button",{onClick:()=>u(e.user_id),className:"flex-shrink-0 relative",children:[c.jsx("img",{src:e.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.profiles?.username}`,className:"w-12 h-12 rounded-full hover:opacity-80 transition",alt:"Avatar"}),C(e.profiles?.last_seen)&&c.jsx("span",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[c.jsx("button",{onClick:()=>u(e.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))]",children:e.profiles?.display_name}),e.profiles?.verified&&c.jsx(rr,{size:16,className:"text-[rgb(var(--color-accent))]"}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:["@",e.profiles?.username]}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))] text-sm",children:[" ",new Date(e.created_at).toLocaleDateString()," at ",U(e.created_at)]})]}),ae?c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsx("textarea",{value:K,onChange:ve=>oe(ve.target.value),className:"w-full p-2 bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))] rounded-lg text-[rgb(var(--color-text))] outline-none resize-none focus:border-[rgb(var(--color-primary))]",rows:3,autoFocus:!0}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx("button",{onClick:()=>{Y(!1),oe(Z)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:"Cancel"}),c.jsx("button",{onClick:me,className:"text-sm bg-[rgb(var(--color-primary))] text-white px-3 py-1 rounded-full font-bold",children:"Save"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"mt-1 whitespace-pre-wrap break-words text-[rgb(var(--color-text))]",children:Z}),Pp(Z,e.media_url)&&c.jsx("div",{className:"mt-3",children:Pp(Z,e.media_url)})]}),e.media_url&&c.jsxs("div",{className:"mt-3",children:[e.media_type==="image"&&c.jsx("img",{src:e.media_url,className:"rounded-2xl max-h-96 object-cover w-full cursor-pointer transition hover:opacity-90",alt:"Post",onClick:()=>{k("image"),_(!0)}}),e.media_type==="video"&&c.jsxs("div",{className:"relative cursor-pointer",onClick:()=>{k("video"),_(!0)},children:[c.jsx("video",{src:e.media_url,className:"rounded-2xl max-h-96 w-full object-cover"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/10 transition rounded-2xl",children:c.jsx(Jc,{size:48,className:"text-white opacity-80"})})]}),e.media_type==="audio"&&c.jsx("div",{className:"rounded-2xl w-full",children:c.jsx(Tc,{src:e.media_url})}),e.media_type==="document"&&c.jsxs("a",{href:e.media_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg hover:bg-[rgb(var(--color-border))] transition inline-block text-[rgb(var(--color-text))]",children:[c.jsx(Br,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})," Download File"]})]}),c.jsxs("div",{className:"flex items-center gap-6 mt-3",children:[c.jsxs("div",{className:"flex items-center gap-1 group",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),ze()},className:`p-2 rounded-full transition ${r?"text-pink-500 bg-pink-500/10":"text-[rgb(var(--color-text-secondary))] hover:bg-pink-500/10 hover:text-pink-500"}`,children:c.jsx(is,{size:18,fill:r?"currentColor":"none"})}),e.like_count>0&&c.jsx("button",{onClick:ve=>{ve.stopPropagation(),h(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.like_count})]}),c.jsxs("div",{className:"flex items-center gap-1 group",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),v(!0)},className:"p-2 rounded-full transition text-[rgb(var(--color-text-secondary))] hover:bg-blue-500/10 hover:text-blue-500",children:c.jsx(ho,{size:18})}),e.comment_count>0&&c.jsx("button",{onClick:ve=>{ve.stopPropagation(),v(!0)},className:"text-sm text-[rgb(var(--color-text-secondary))] hover:underline",children:e.comment_count})]})]})]}),c.jsxs("div",{className:"relative flex-shrink-0",children:[c.jsx("button",{onClick:ve=>{ve.stopPropagation(),$(!ge)},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:F?c.jsx(fo,{size:20,className:"text-green-500"}):c.jsx(Ky,{size:20})}),ge&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>$(!1)}),c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-lg shadow-xl overflow-hidden z-10",children:[c.jsxs("button",{onClick:ie,className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[c.jsx(ug,{size:18})," Share Post"]}),zt&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{Y(!0),$(!1)},className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",children:[c.jsx(lg,{size:18})," Edit Post"]}),c.jsxs("button",{onClick:()=>{x(!0),$(!1)},className:"w-full text-left p-3 text-red-500 hover:bg-red-50 transition flex items-center gap-2",children:[c.jsx(Nc,{size:18})," Delete Post"]})]})]})]})]})]})}),b&&e.media_url&&c.jsx(vx,{url:e.media_url,type:N||"image",onClose:()=>_(!1)}),f&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>h(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-md rounded-2xl max-h-[70vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Likes"}),c.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(kt,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"overflow-y-auto p-4 space-y-4",children:E.length===0?c.jsx("p",{className:"text-center text-[rgb(var(--color-text-secondary))]",children:"No likes yet."}):E.map((ve,rt)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>u(ve.user_id),children:[c.jsx("img",{src:ve.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ve.profiles?.username}`,className:"w-10 h-10 rounded-full",alt:"Avatar"}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm flex items-center",children:[ve.profiles?.display_name," ",ve.profiles?.verified&&c.jsx(rr,{size:14,className:"ml-1 text-[rgb(var(--color-accent))]"})]}),c.jsxs("span",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",ve.profiles?.username]})]})]}),ve.user_id===t&&c.jsx("button",{onClick:Le,className:"p-2 rounded-full bg-red-50 text-red-500 hover:bg-red-100 transition",children:c.jsx(is,{size:16,className:"fill-current"})})]},`${ve.user_id}-${rt}`))})]})}),p&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[90] flex items-center justify-center p-4",onClick:()=>v(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-lg rounded-2xl h-[80vh] flex flex-col shadow-2xl border border-[rgb(var(--color-border))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex items-center justify-between",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:"Comments"}),c.jsx("button",{onClick:()=>v(!1),className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(kt,{size:20,className:"text-[rgb(var(--color-text))]"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:I.length===0?c.jsx("div",{className:"h-full flex items-center justify-center text-[rgb(var(--color-text-secondary))]",children:"No comments yet."}):I.map(ve=>c.jsxs("div",{className:"flex gap-3",children:[c.jsx("img",{src:ve.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ve.profiles?.username}`,className:"w-9 h-9 rounded-full cursor-pointer flex-shrink-0",alt:"Avatar",onClick:()=>u(ve.user_id)}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("button",{onClick:()=>u(ve.user_id),className:"font-bold hover:underline text-[rgb(var(--color-text))] text-sm",children:ve.profiles?.display_name}),c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:U(ve.created_at)})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] text-sm mt-0.5 whitespace-pre-wrap break-words bg-[rgb(var(--color-surface-hover))] p-2 rounded-r-xl rounded-bl-xl inline-block",children:ve.content})]})]},ve.id))}),c.jsx("form",{onSubmit:Je,className:"p-3 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-b-2xl",children:c.jsxs("div",{className:"flex items-center gap-2 bg-[rgb(var(--color-surface-hover))] rounded-full px-4 py-2",children:[c.jsx("input",{type:"text",value:H,onChange:ve=>P(ve.target.value),placeholder:"Add a comment...",className:"flex-1 bg-transparent border-none outline-none text-sm text-[rgb(var(--color-text))]",autoFocus:!0}),c.jsx("button",{type:"submit",disabled:!H.trim()||te,className:"text-[rgb(var(--color-accent))] disabled:opacity-50 hover:text-[rgb(var(--color-primary))] transition",children:c.jsx(ls,{size:18})})]})})]})}),g&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>{x(!1),ye()},children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-sm flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:ve=>ve.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Nc,{size:24,className:"text-red-500 flex-shrink-0"}),c.jsx("h3",{className:"font-bold text-xl",children:"Confirm Deletion"})]}),c.jsx("p",{className:"mb-6",children:"Are you sure? This action cannot be undone!"}),c.jsxs("button",{onMouseDown:ht,onMouseUp:ye,onMouseLeave:ye,onTouchStart:ht,onTouchEnd:ye,className:"relative w-full py-3 rounded-xl font-bold text-lg text-white bg-red-500 overflow-hidden disabled:opacity-50 transition duration-100",children:[c.jsx("div",{className:"absolute inset-0 bg-red-700 transition-all duration-50",style:{width:`${ee}%`}}),c.jsx("span",{className:"relative z-10",children:(ee>0,"Hold to Delete")})]}),c.jsx("button",{onClick:()=>{x(!1),ye()},className:"mt-3 w-full py-2 text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] rounded-xl transition",children:"Cancel"})]})})]})},Lp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",yx="0 0 784 1168",Ws=10,xx=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(""),[o,a]=j.useState(null),[u,f]=j.useState(""),[h,p]=j.useState(0),[v,g]=j.useState(!1),[x,b]=j.useState(!1),[_,N]=j.useState(!1),{user:k}=Gn(),E=j.useRef(null),L=j.useRef(null),[I,q]=j.useState("posts"),[H,P]=j.useState(new Set),[te,X]=j.useState(0),[ge,$]=j.useState(!0),[F,J]=j.useState(!1),ae=j.useCallback(async U=>{if(!U.length)return{likeCounts:{},commentCounts:{}};const C={},ie={};for(const me of U){const[{count:pe},{count:ze}]=await Promise.all([Q.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",me),Q.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",me)]);C[me]=pe||0,ie[me]=ze||0}return{likeCounts:C,commentCounts:ie}},[]),Y=j.useCallback(async U=>{if(!k||U.length===0)return;const C=U.map(me=>me.id),{data:ie}=await Q.from("likes").select("entity_id").eq("user_id",k.id).eq("entity_type","post").in("entity_id",C);ie&&P(me=>new Set([...me,...ie.map(pe=>pe.entity_id)]))},[k]),K=j.useCallback(async()=>{t([]),X(0),$(!0);let U=Q.from("posts").select("*, profiles(*)").order("created_at",{ascending:!1});if(k){const{data:we}=await Q.from("follows").select("following_id").eq("follower_id",k.id),Je=we?.map(ht=>ht.following_id)||[];U=U.in("user_id",[...Je,k.id])}const{data:C}=await U.range(0,Ws-1),ie=C||[],me=ie.map(we=>we.id),{likeCounts:pe,commentCounts:ze}=await ae(me),Le=ie.map(we=>({...we,like_count:pe[we.id]||0,comment_count:ze[we.id]||0}));t(Le),Le.length<Ws&&$(!1),Y(Le)},[k,Y,ae]),oe=j.useCallback(async()=>{if(F||!ge)return;J(!0);const U=te+1,C=U*Ws,ie=C+Ws-1;let me=Q.from("posts").select("*, profiles(*)").order("created_at",{ascending:!1});if(k){const{data:ye}=await Q.from("follows").select("following_id").eq("follower_id",k.id),zt=ye?.map(ve=>ve.following_id)||[];me=me.in("user_id",[...zt,k.id])}const{data:pe}=await me.range(C,ie),ze=pe||[],Le=ze.map(ye=>ye.id),{likeCounts:we,commentCounts:Je}=await ae(Le),ht=ze.map(ye=>({...ye,like_count:we[ye.id]||0,comment_count:Je[ye.id]||0}));t(ye=>[...ye,...ht]),X(U),ze.length<Ws&&$(!1),Y(ht),J(!1)},[F,ge,te,k,Y,ae]);j.useEffect(()=>{K();const U=Q.channel("feed-updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async C=>{const{data:ie}=await Q.from("posts").select("*, profiles(*)").eq("id",C.new.id).single();ie&&t(me=>[{...ie,like_count:0,comment_count:0},...me])}).subscribe();return()=>{Q.removeChannel(U)}},[k,K]),j.useEffect(()=>{const U=()=>{const C=window.scrollY>100;C&&x&&b(!1),N(C),I==="posts"&&window.innerHeight+document.documentElement.scrollTop+200>=document.documentElement.offsetHeight&&ge&&!F&&oe()};return window.addEventListener("scroll",U),()=>{window.removeEventListener("scroll",U)}},[x,ge,F,oe,I]);const Z=async U=>{if(U.preventDefault(),!r.trim()&&!o&&!u.trim())return;g(!0),p(0);let C=null,ie=null;if(o){const me=await oo(o,"posts");if(!me){g(!1);return}C=me.url,ie=me.type}else u.trim()&&(C=u.trim(),u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?ie="image":u.match(/\.(mp4|webm|mov|avi)$/i)?ie="video":u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?ie="audio":ie="document");await Q.from("posts").insert({user_id:k.id,content:r,media_url:C,media_type:ie}),s(""),a(null),f(""),b(!1),g(!1),p(0)},M=async U=>{const{data:C}=await Q.from("profiles").select("username").eq("id",U).single();C&&(window.history.replaceState({},"",`/?user=${C.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:U})))},ee=()=>{if(o){const U=URL.createObjectURL(o);return o.type.startsWith("image/")?c.jsx("img",{src:U,className:"max-h-48 rounded-lg object-cover",alt:"Preview"}):o.type.startsWith("video/")?c.jsx("video",{src:U,className:"max-h-48 rounded-lg",controls:!0}):o.type.startsWith("audio/")?c.jsx(Tc,{src:U}):c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx(Br,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-sm text-[rgb(var(--color-text))]",children:o.name})]})}return u?u.match(/\.(jpeg|jpg|gif|png|webp)$/i)?c.jsx("img",{src:u,className:"max-h-48 rounded-lg object-cover",alt:"Remote preview"}):u.match(/\.(mp4|webm|mov|avi)$/i)?c.jsx("video",{src:u,className:"max-h-48 rounded-lg",controls:!0}):u.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?c.jsx(Tc,{src:u}):c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx(tr,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-sm truncate max-w-[200px] text-[rgb(var(--color-text))]",children:u})]}):null},S=U=>{const C=H.has(U.id),ie=new Set(H);C?ie.delete(U.id):ie.add(U.id),P(ie),t(me=>me.map(pe=>pe.id===U.id?{...pe,like_count:Math.max(0,pe.like_count+(C?-1:1))}:pe))},R=U=>{t(C=>C.map(ie=>ie.id===U.id?U:ie))};return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[I==="posts"&&c.jsx(cx,{}),I==="posts"&&c.jsx("div",{ref:E,className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] shadow-sm",children:x?c.jsxs("form",{onSubmit:Z,className:"p-4 space-y-3",children:[c.jsx("textarea",{value:r,onChange:U=>s(U.target.value),placeholder:"What's happening?",rows:3,className:"w-full px-4 py-3 border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-2xl focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none text-[rgb(var(--color-text))]",autoFocus:!0}),(o||u)&&c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg",children:[c.jsx("div",{className:"flex-1",children:ee()}),c.jsx("button",{type:"button",onClick:()=>{a(null),f("")},className:"ml-2 p-1 hover:bg-[rgb(var(--color-border))] rounded-full transition",children:c.jsx(kt,{size:18,className:"text-[rgb(var(--color-text-secondary))]"})})]}),v&&c.jsx("div",{className:"w-full bg-[rgb(var(--color-border))] rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:"bg-[rgba(var(--color-accent),1)] h-full transition-all duration-300",style:{width:`${h}%`}})}),c.jsx("input",{ref:L,type:"file",accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt",onChange:U=>{a(U.target.files?.[0]||null),f("")},className:"hidden"}),c.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[c.jsxs("button",{type:"button",onClick:()=>L.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] rounded-full text-sm hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2 text-[rgb(var(--color-text))]",children:[c.jsx(tr,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})," ",o?"Change File":"Attach"]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:"or"}),c.jsx("input",{type:"url",value:u,onChange:U=>{f(U.target.value),a(null)},placeholder:"Paste image/video/audio/file URL...",className:"flex-1 min-w-0 px-3 py-1.5 text-sm border border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] text-[rgb(var(--color-text))]"})]}),c.jsxs("button",{type:"submit",disabled:v||!r.trim()&&!o&&!u.trim(),className:"ml-auto bg-[rgba(var(--color-accent),1)] disabled:bg-[rgb(var(--color-border))] text-[rgb(var(--color-text-on-primary))] px-6 py-2 rounded-full hover:bg-[rgba(var(--color-primary),1)] flex items-center gap-2 font-semibold transition",children:[c.jsx(ls,{size:16})," ",v?"Uploading...":"Post"]})]})]}):c.jsxs("button",{onClick:()=>b(!0),className:"w-full p-4 flex items-center gap-3 hover:bg-[rgb(var(--color-surface-hover))] transition",children:[c.jsx(lg,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Write a post..."})]})}),c.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-[0px] z-30",children:[c.jsxs("button",{onClick:()=>q("posts"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${I==="posts"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(sg,{size:18})," Posts"]}),c.jsxs("button",{onClick:()=>q("shots"),className:`flex-1 py-3 flex items-center justify-center gap-2 text-sm font-bold transition border-b-2 ${I==="shots"?"border-[rgb(var(--color-accent))] text-[rgb(var(--color-accent))]":"border-transparent text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(ex,{size:18})," Shots"]})]}),c.jsx("div",{children:I==="shots"?c.jsx(lx,{}):c.jsxs(c.Fragment,{children:[e.length===0&&!F&&c.jsx("div",{className:"text-center py-12 text-[rgb(var(--color-text-secondary))]",children:"No posts from people you follow yet."}),e.map(U=>c.jsx(zl,{post:U,currentUserId:k?.id,isLiked:H.has(U.id),onLikeToggle:S,onCommentUpdate:R,onNavigateToProfile:M},U.id)),F&&c.jsx("div",{className:"flex justify-center p-4",children:c.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:yx,className:"logo-svg",children:[c.jsx("path",{d:Lp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Lp,fill:"rgb(var(--color-primary))",className:"logo-fill-animated"})]})})}),!F&&!ge&&e.length>0&&c.jsx("div",{className:"text-center py-8 text-sm text-[rgb(var(--color-text-secondary))]",children:"You've reached the end of the feed."})]})})]})},bx=({url:e})=>{const[t,r]=j.useState(null),[s,o]=j.useState(!0),[a,u]=j.useState(!1);return j.useEffect(()=>{let f=!0;return o(!0),u(!1),fetch(`https://api.microlink.io/?url=${encodeURIComponent(e)}`).then(h=>h.json()).then(h=>{f&&(h.status==="success"?r(h.data):u(!0),o(!1))}).catch(()=>{f&&(u(!0),o(!1))}),()=>{f=!1}},[e]),s||a||!t?null:c.jsx("div",{className:"mt-2 w-full rounded-lg border border-[rgb(var(--color-border))] bg-[rgba(var(--color-surface-hover),0.5)] overflow-hidden transition hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"px-3 pt-3 flex items-center gap-2 text-[10px] uppercase font-bold text-[rgb(var(--color-text-secondary))]",children:[t.logo?.url&&c.jsx("img",{src:t.logo.url,alt:"",className:"w-3 h-3 rounded-sm"}),c.jsx("span",{children:t.publisher||new URL(e).hostname})]}),c.jsxs("div",{className:"flex gap-4 p-3",children:[c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[c.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-[rgb(var(--color-primary))] hover:underline line-clamp-2 leading-tight mb-1",children:t.title||e}),t.description&&c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] line-clamp-3",children:t.description})]}),t.image?.url&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("img",{src:t.image.url,alt:"Preview",className:"w-16 h-16 object-cover rounded-md border border-[rgb(var(--color-border))]"})})]})]})})},Ip=j.lazy(()=>fi(()=>import("./Calls-ErJQeN9k.js"),__vite__mapDeps([0,1])).then(e=>({default:e.Calls}))),wx=j.lazy(()=>fi(()=>import("./Gazebos-vSRUefgd.js"),__vite__mapDeps([2,1])).then(e=>({default:e.Gazebos}))),Ap=e=>{const t=/(https?:\/\/[^\s]+)/g,r=e.match(t);return r?r[0]:null},Rp="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",kx="0 0 784 1168",Pc=["","","","","",""],_x=(e,t)=>{if(!e)return[];const r=new Map;for(const s of e){const{emoji:o,user_id:a,profiles:u}=s;r.has(o)||r.set(o,{emoji:o,count:0,hasReacted:!1,userProfiles:[]});const f=r.get(o);f.count++,a===t&&(f.hasReacted=!0),u&&!Array.isArray(u)&&f.userProfiles.push(u)}return Array.from(r.values()).sort((s,o)=>{const a=Pc.indexOf(s.emoji),u=Pc.indexOf(o.emoji);return a!==-1&&u!==-1?a-u:a!==-1?-1:u!==-1?1:o.count-s.count})},Pl=({src:e,isOutgoing:t})=>{const r=j.useRef(null),[s,o]=j.useState(!1),[a,u]=j.useState(0),[f,h]=j.useState(0),p=t?"rgb(var(--color-text-on-primary))":"rgb(var(--color-accent))",v=t?"rgba(var(--color-text-on-primary), 0.3)":"rgb(var(--color-border))",g=_=>{const N=Math.floor(_/60),k=Math.floor(_%60);return`${N}:${k.toString().padStart(2,"0")}`};j.useEffect(()=>{const _=r.current;if(!_)return;const N=()=>{u(_.duration),h(_.currentTime)},k=()=>h(_.currentTime),E=()=>o(!_.paused),L=()=>{o(!1),_.currentTime=0};return _.addEventListener("loadedmetadata",N),_.addEventListener("timeupdate",k),_.addEventListener("play",E),_.addEventListener("pause",E),_.addEventListener("ended",L),()=>{_.removeEventListener("loadedmetadata",N),_.removeEventListener("timeupdate",k),_.removeEventListener("play",E),_.removeEventListener("pause",E),_.removeEventListener("ended",L)}},[]);const x=()=>{const _=r.current;_&&(s?_.pause():_.play())},b=_=>{const N=parseFloat(_.target.value),k=r.current;k&&(k.currentTime=N,h(N))};return c.jsxs("div",{className:"flex items-center space-x-2 w-full max-w-full mb-1",children:[c.jsx("audio",{ref:r,src:e,preload:"metadata",className:"hidden"}),c.jsx("button",{onClick:x,className:"flex-shrink-0 p-2 rounded-full transition-colors",style:{backgroundColor:t?"rgba(var(--color-text-on-primary), 0.15)":"rgb(var(--color-surface-hover))",color:p},children:s?c.jsx(og,{size:16,fill:p}):c.jsx(Jc,{size:16,fill:p})}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[c.jsx("input",{type:"range",min:"0",max:a,step:"0.01",value:f,onChange:b,className:"w-full h-1 appearance-none rounded-full cursor-pointer transition",style:{background:`linear-gradient(to right, ${p} 0%, ${p} ${f/a*100||0}%, ${v} ${f/a*100||0}%, ${v} 100%)`}}),c.jsxs("span",{className:"text-xs flex-shrink-0",style:{color:p},children:[g(f),"/",g(a)]})]})]})},Sx=({initialInviteCode:e,onInviteHandled:t,initialTab:r="chats",initialGazeboId:s})=>{const[o,a]=j.useState(r),[u,f]=j.useState([]),[h,p]=j.useState(null),[v,g]=j.useState([]),[x,b]=j.useState(""),[_,N]=j.useState(null),[k,E]=j.useState(null),[L,I]=j.useState(""),[q,H]=j.useState(0),[P,te]=j.useState(!1),[X,ge]=j.useState(""),[$,F]=j.useState(!0),[J,ae]=j.useState(!1),[Y,K]=j.useState(!1),[oe,Z]=j.useState(null),[M,ee]=j.useState(null),[S,R]=j.useState(null),[U,C]=j.useState(!1),[ie,me]=j.useState("image"),[pe,ze]=j.useState([]),[Le,we]=j.useState(!1),Je=async()=>{if(!ye||!h)return;we(!0);const{data:z}=await Q.from("messages").select("*").or(`and(sender_id.eq.${ye.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${ye.id})`).not("media_url","is",null).neq("media_url","").order("created_at",{ascending:!1});z&&ze(z),we(!1)},ht=(z,je)=>{if(z.length<=je)return z;const De=z.slice(0,Math.floor(je/2)),he=z.slice(-Math.floor(je/2));return`${De}...${he}`},{user:ye}=Gn(),zt=j.useCallback(async(z,je)=>{if(!ye)return;const he=v.find(_e=>_e.id===z)?.reactions?.find(_e=>_e.user_id===ye.id);he?he.emoji===je?await Q.from("message_reactions").delete().eq("id",he.id):await Q.from("message_reactions").update({emoji:je}).eq("id",he.id):await Q.from("message_reactions").insert({message_id:z,user_id:ye.id,emoji:je,message_type:"dm"}),ee(null)},[ye,v]),ve=async z=>{await Q.from("message_reactions").delete().eq("id",z)},[rt,pt]=j.useState(!1),Mt=j.useRef(null),cn=j.useRef([]),[Ln,Ut]=j.useState(0),[en,Dt]=j.useState(!0),[In,Qt]=j.useState(!1),bn=j.useRef(null),G=10,se=j.useRef(null),Te=j.useRef(null),Ue=j.useRef(null),$e=j.useRef(null),Ye=j.useRef(null),vt=async z=>{if(!ye)return;const{error:je}=await Q.from("messages").update({read:!0}).eq("recipient_id",ye.id).eq("sender_id",z).eq("read",!1);je||window.dispatchEvent(new CustomEvent("messagesRead"))},at=z=>{if(!z)return!1;const je=new Date(z);return new Date().getTime()-je.getTime()<6e4},dn=z=>{if(!z)return null;const je=new Date(z),he=new Date().getTime()-je.getTime();if(he<6e4)return null;const Me=Math.floor(he/1e3),Ie=Math.floor(Me/(3600*24)),He=Math.floor(Me%(3600*24)/3600),et=Math.floor(Me%3600/60);let Lt=[];return Ie>0?(Lt.push(`${Ie} day${Ie>1?"s":""}`),He>0?Lt.push(`${He} hour${He>1?"s":""}`):et>0&&Lt.push(`${et} minute${et>1?"s":""}`)):He>0?(Lt.push(`${He} hour${He>1?"s":""}`),et>0&&Lt.push(`${et} minute${et>1?"s":""}`)):et>0&&Lt.push(`${et} minute${et>1?"s":""}`),Lt.length===0?null:`Last seen ${Lt.join(" ")} ago`},wn=()=>{se.current?.scrollIntoView({behavior:"smooth"})},_t=async z=>{const{data:je}=await Q.from("profiles").select("username").eq("id",z).single();je&&window.history.replaceState({},"",`/?${je.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:z}))},Qe=async()=>{const{data:z}=await Q.from("messages").select(`
        id,
        sender_id,
        recipient_id,
        created_at,
        sender:profiles!sender_id(id, username, display_name, avatar_url, verified, last_seen),
        recipient:profiles!recipient_id(id, username, display_name, avatar_url, verified, last_seen)
      `).or(`sender_id.eq.${ye.id},recipient_id.eq.${ye.id}`).order("created_at",{ascending:!1}),je=new Map;z?.forEach(he=>{const _e=he.sender_id===ye.id?he.recipient:he.sender;if(_e){const Me=je.get(_e.id);(!Me||he.created_at>Me.latest)&&je.set(_e.id,{profile:_e,latest:he.created_at})}});const De=Array.from(je.values()).sort((he,_e)=>_e.latest.localeCompare(he.latest)).map(he=>he.profile);f(De)};j.useEffect(()=>{r&&a(r)},[r]),j.useEffect(()=>{const z=je=>{const De=je.detail;De&&De.id!==ye?.id&&(p(De),F(!1),ge(""))};return window.addEventListener("openDirectMessage",z),()=>window.removeEventListener("openDirectMessage",z)},[ye]),j.useEffect(()=>{ye&&Qe()},[ye]),j.useEffect(()=>{const je=new URLSearchParams(window.location.search).get("user");je&&ye&&(async()=>{const{data:he}=await Q.from("profiles").select("*").eq("username",je).single();he&&he.id!==ye.id&&(p(he),F(!1))})()},[ye]);const[Be,dt]=j.useState([]);j.useEffect(()=>{if(!X.trim()){dt([]);return}const je=setTimeout(async()=>{const{data:De}=await Q.from("profiles").select("*").or(`username.ilike.%${X}%,display_name.ilike.%${X}%`).neq("id",ye.id).limit(20);dt(De||[])},300);return()=>clearTimeout(je)},[X]),j.useEffect(()=>{if(!h){$e.current&&($e.current.unsubscribe(),$e.current=null),Ye.current&&(Ye.current.unsubscribe(),Ye.current=null);return}Hr(h.id),vt(h.id),F(!1);const z=Q.channel(`messages:${h.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async he=>{const _e=he.new;if(_e.sender_id===ye.id&&_e.recipient_id===h.id||_e.sender_id===h.id&&_e.recipient_id===ye.id){let Me=_e;if(Me.reply_to_id){const{data:Ie}=await Q.from("messages").select("id, content, sender_id, media_type").eq("id",Me.reply_to_id).single();Ie&&(Me={...Me,reply_to:Ie})}_e.sender_id===h.id&&_e.recipient_id===ye.id&&(vt(h.id),Me.read=!0),g(Ie=>[...Ie,Me]),wn(),Qe()}}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},async he=>{if(he.eventType==="DELETE"){const _e=he.old;g(Me=>Me.map(Ie=>Ie.reactions?.some(He=>He.id===_e.id)?{...Ie,reactions:Ie.reactions.filter(He=>He.id!==_e.id)}:Ie)),R(Me=>Me&&Me.reactions?.some(Ie=>Ie.id===_e.id)?{...Me,reactions:Me.reactions.filter(Ie=>Ie.id!==_e.id)}:Me)}else if(he.eventType==="INSERT"){const _e=he.new,Me=_e.message_id,{data:Ie}=await Q.from("message_reactions").select("*, profiles(id, username, display_name, avatar_url)").eq("id",_e.id).single();Ie&&(g(He=>He.map(et=>{if(et.id===Me){const Lt=et.reactions||[];return Lt.some(yt=>yt.id===Ie.id)?et:{...et,reactions:[...Lt,Ie]}}return et})),R(He=>He&&He.id===Me&&He.reactions?He.reactions.some(et=>et.id===Ie.id)?He:{...He,reactions:[...He.reactions,Ie]}:He))}else if(he.eventType==="UPDATE"){const _e=he.new;g(Me=>Me.map(Ie=>Ie.reactions?.some(He=>He.id===_e.id)?{...Ie,reactions:Ie.reactions.map(He=>He.id===_e.id?{...He,emoji:_e.emoji}:He)}:Ie)),R(Me=>Me&&Me.reactions?.some(Ie=>Ie.id===_e.id)?{...Me,reactions:Me.reactions.map(Ie=>Ie.id===_e.id?{...Ie,emoji:_e.emoji}:Ie)}:Me)}}).subscribe(),je=`typing:${h.id}:${ye.id}`;$e.current=Q.channel(je),$e.current.on("presence",{event:"sync"},()=>{const he=$e.current.presenceState(),_e=Object.values(he).flat().some(Me=>Me.typing===!0);ae(_e)}).subscribe();const De=`typing:${ye.id}:${h.id}`;return Ye.current=Q.channel(De),Ye.current.subscribe(async he=>{he==="SUBSCRIBED"&&await Ye.current.track({typing:!1})}),()=>{Q.removeChannel(z),$e.current&&($e.current.unsubscribe(),$e.current=null),Ye.current&&(Ye.current.untrack(),Ye.current.unsubscribe(),Ye.current=null)}},[h,ye]);const kn=async z=>{if(Ye.current)try{await Ye.current.track({typing:z})}catch{}},fn=z=>{const je=z.target.value;b(je),je.trim()?(kn(!0),Te.current&&clearTimeout(Te.current),Te.current=setTimeout(()=>{kn(!1)},1e3)):(kn(!1),Te.current&&clearTimeout(Te.current))},An=z=>{if(z.clipboardData.files.length>0){const je=z.clipboardData.files[0];E(je),I(""),Z(null),z.preventDefault();return}},hn=async z=>{if(z.preventDefault(),!x.trim()&&!k&&!L.trim()||!h)return;te(!0),H(0);let je=null,De=null;if(k){k.type.startsWith("audio/")&&(De="audio");const _e=await oo(k,"messages");if(!_e){te(!1);return}je=_e.url,De=De||_e.type}else L.trim()&&(je=L.trim(),L.match(/\.(jpeg|jpg|gif|png|webp)$/i)?De="image":L.match(/\.(mp4|webm|mov|avi)$/i)?De="video":L.match(/\.(mp3|wav|ogg|m4a|weba)$/i)?De="audio":De="document");kn(!1);const{data:he}=await Q.from("messages").insert({sender_id:ye.id,recipient_id:h.id,content:x,media_url:je,media_type:De,reply_to_id:_?_.id:null}).select().single();he&&(b(""),E(null),I(""),N(null),te(!1),H(0),Z(null))},Hr=async z=>{g([]),Ut(0),Dt(!0),Qt(!1);const{data:je,count:De}=await Q.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${ye.id},recipient_id.eq.${z}),and(sender_id.eq.${z},recipient_id.eq.${ye.id})`).order("created_at",{ascending:!1}).range(0,G-1);if(!je||je.length===0){Dt(!1);return}const he=je.map(Ie=>Ie.reply_to_id).filter(Ie=>Ie!=null);let _e=new Map;if(he.length>0){const{data:Ie}=await Q.from("messages").select("id, content, sender_id, media_type").in("id",he);Ie&&Ie.forEach(He=>_e.set(He.id,He))}const Me=je.map(Ie=>({...Ie,reply_to:Ie.reply_to_id&&_e.get(Ie.reply_to_id)||null}));g(Me.reverse()),(je.length<G||De!==null&&De<=G)&&Dt(!1),setTimeout(wn,100)},mi=async()=>{if(In||!en||!h)return;Qt(!0);const z=Ln+1,je=z*G,De=je+G-1,he=bn.current,_e=he?.scrollHeight,{data:Me,count:Ie}=await Q.from("messages").select(`
        id, sender_id, recipient_id, content, created_at, media_url, media_type, read, reply_to_id,
        reactions:message_reactions(
          id, emoji, user_id,
          profiles(id, username, display_name, avatar_url)
        )
      `,{count:"exact"}).or(`and(sender_id.eq.${ye.id},recipient_id.eq.${h.id}),and(sender_id.eq.${h.id},recipient_id.eq.${ye.id})`).order("created_at",{ascending:!1}).range(je,De);if(Me&&Me.length>0){const He=Me.map(yt=>yt.reply_to_id).filter(yt=>yt!=null);let et=new Map;if(He.length>0){const{data:yt}=await Q.from("messages").select("id, content, sender_id, media_type").in("id",He);yt&&yt.forEach(vi=>et.set(vi.id,vi))}const Lt=Me.map(yt=>({...yt,reply_to:yt.reply_to_id&&et.get(yt.reply_to_id)||null}));g(yt=>[...Lt.reverse(),...yt]),Ut(z),he&&_e&&setTimeout(()=>{const yt=he.scrollHeight;he.scrollTop=yt-_e},0)}(!Me||Me.length<G||Ie!==null&&v.length+(Me?.length||0)>=Ie)&&Dt(!1),Qt(!1)},gi=()=>{if(bn.current){const{scrollTop:z}=bn.current;z===0&&en&&!In&&mi()}},vr=(z,je)=>{window.dispatchEvent(new CustomEvent("startCall",{detail:{targetUser:z,type:je}}))},Rn=()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Audio recording is not supported by your browser.");return}navigator.mediaDevices.getUserMedia({audio:!0}).then(z=>{const je={mimeType:"audio/webm"};let De;try{De=new MediaRecorder(z,je)}catch{De=new MediaRecorder(z)}Mt.current=De,cn.current=[],De.ondataavailable=he=>{cn.current.push(he.data)},De.onstop=()=>{const he=De.mimeType||"audio/webm",_e=he.split("/")[1]?.split(";")[0]||"weba",Me=new Blob(cn.current,{type:he}),Ie=new File([Me],`voice-message.${_e}`,{type:he});E(Ie),pt(!1),z.getTracks().forEach(He=>He.stop())},De.start(),pt(!0),E(null),I(""),Z(null)}).catch(z=>{console.error("Mic error:",z),alert("Mic not found or permission was denied. Please check your browser settings.")})},yr=()=>{Mt.current&&rt&&Mt.current.stop()},On=()=>{rt?yr():Rn()},Kn=X?Be:u,zn=()=>{if(k){const z=URL.createObjectURL(k);return k.type.startsWith("image/")?c.jsx("img",{src:z,className:"max-h-32 rounded-lg",alt:"Preview"}):k.type.startsWith("video/")?c.jsx("video",{src:z,className:"max-h-32 rounded-lg",controls:!0}):k.type.startsWith("audio/")?c.jsx(Pl,{src:z,isOutgoing:!0}):c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[rgb(var(--color-text))]",children:[c.jsx(Br,{size:16}),c.jsx("span",{children:k.name})]})}return L?L.match(/\.(jpeg|jpg|gif|png|webp)$/i)?c.jsx("img",{src:L,className:"max-h-32 rounded-lg",alt:"Remote preview"}):L.match(/\.(mp4|webm|mov|avi)$/i)?c.jsx("video",{src:L,className:"max-h-32 rounded-lg",controls:!0}):L.match(/\.(mp3|wav|ogg|m4a)$/i)?c.jsx(Pl,{src:L,isOutgoing:!0}):c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[rgb(var(--color-text))]",children:[c.jsx(to,{size:16}),c.jsx("span",{className:"truncate max-w-[150px]",children:L})]}):null};return o==="gazebos"?c.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] flex-col md:flex-row text-[rgb(var(--color-text))]",children:[c.jsx(j.Suspense,{fallback:c.jsx("div",{className:"p-4",children:"Loading Calls..."}),children:c.jsx(Ip,{})}),c.jsxs("div",{className:"md:hidden flex-shrink-0 p-2 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] flex gap-2 z-50",children:[c.jsx("button",{onClick:()=>a("chats"),className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:"Chats"}),c.jsx("button",{className:"flex-1 p-2 rounded font-bold text-sm bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))]",children:"Gazebos"})]}),c.jsxs("div",{className:"hidden md:flex flex-col w-16 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] items-center py-4 gap-4 z-50 flex-shrink-0",children:[c.jsx("button",{onClick:()=>a("chats"),title:"Direct Messages",className:"p-3 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",children:c.jsx(Fl,{size:24})}),c.jsx("button",{title:"Gazebos",className:"p-3 rounded-full bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] shadow-md transition",children:c.jsx(fg,{size:24})})]}),c.jsx("div",{className:"flex-1 min-w-0 h-full relative overflow-hidden",children:c.jsx(j.Suspense,{fallback:c.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading Gazebos..."}),children:c.jsx(wx,{initialInviteCode:e,onInviteHandled:t,initialGazeboId:s})})})]}):c.jsxs("div",{className:"flex h-full bg-[rgb(var(--color-background))] overflow-hidden",children:[c.jsx(j.Suspense,{fallback:null,children:c.jsx(Ip,{})}),M&&c.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>ee(null),onContextMenu:z=>{z.preventDefault(),ee(null)},children:c.jsx("div",{className:"absolute p-1 bg-[rgb(var(--color-surface))] rounded-xl shadow-2xl flex gap-1 z-50 pointer-events-auto border border-[rgb(var(--color-border))]",style:{top:M.y,left:M.isOutgoing?M.x-(M.x>window.innerWidth/2?160:0):M.x},onClick:z=>z.stopPropagation(),children:Pc.map(z=>c.jsx("button",{onClick:()=>zt(M.messageId,z),className:"text-2xl p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition",children:z},z))})}),S&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm p-4",onClick:()=>R(null),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))]",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-[rgb(var(--color-text))]",children:"Reactions"}),c.jsx("button",{onClick:()=>R(null),className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:c.jsx(kt,{size:20})})]}),c.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[c.jsx("div",{className:"p-3 bg-[rgb(var(--color-surface-hover))] text-sm text-[rgb(var(--color-text-secondary))] truncate mx-4 mt-4 rounded-lg border border-[rgb(var(--color-border))] opacity-70",children:S.content||(S.media_type?`[${S.media_type}]`:"Message")}),c.jsx("div",{className:"p-2",children:S.reactions?.map(z=>c.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-[rgb(var(--color-surface-hover))] rounded-xl transition group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:z.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${z.profiles?.username}`,alt:z.profiles?.username,className:"w-10 h-10 rounded-full object-cover bg-[rgb(var(--color-background))]"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 text-lg leading-none drop-shadow-sm",children:z.emoji})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"font-semibold text-[rgb(var(--color-text))] flex items-center gap-1",children:[z.profiles?.display_name||"Unknown User",z.user_id===ye?.id&&c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))] font-normal",children:"(You)"})]}),c.jsxs("div",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:["@",z.profiles?.username]})]}),z.user_id===ye?.id&&c.jsx("button",{onClick:je=>{je.stopPropagation(),ve(z.id)},className:"opacity-0 group-hover:opacity-100 p-2 text-[rgb(var(--color-text-secondary))] hover:text-red-500 hover:bg-[rgb(var(--color-surface-hover))] rounded-full transition",title:"Remove reaction",children:c.jsx(kt,{size:16})})]},z.id))})]})]})}),U&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm p-4",onClick:()=>C(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-4xl h-[85vh] rounded-2xl shadow-2xl overflow-hidden border border-[rgb(var(--color-border))] flex flex-col",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))] flex justify-between items-center bg-[rgb(var(--color-surface))]",children:[c.jsx("h3",{className:"font-bold text-xl text-[rgb(var(--color-text))]",children:"Shared Media"}),c.jsx("button",{onClick:()=>C(!1),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]",children:c.jsx(kt,{size:24})})]}),c.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))]",children:[c.jsxs("button",{onClick:()=>me("image"),className:`flex-1 py-3 font-semibold flex items-center justify-center gap-2 transition ${ie==="image"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(ig,{size:18})," Images"]}),c.jsxs("button",{onClick:()=>me("video"),className:`flex-1 py-3 font-semibold flex items-center justify-center gap-2 transition ${ie==="video"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(Fy,{size:18})," Videos"]}),c.jsxs("button",{onClick:()=>me("audio"),className:`flex-1 py-3 font-semibold flex items-center justify-center gap-2 transition ${ie==="audio"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(Qy,{size:18})," Audio"]}),c.jsxs("button",{onClick:()=>me("document"),className:`flex-1 py-3 font-semibold flex items-center justify-center gap-2 transition ${ie==="document"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx($y,{size:18})," Files"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-[rgb(var(--color-background))]",children:Le?c.jsx("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))]",children:"Loading media..."}):c.jsx(c.Fragment,{children:pe.filter(z=>z.media_type===ie).length===0?c.jsxs("div",{className:"flex h-full items-center justify-center text-[rgb(var(--color-text-secondary))] flex-col gap-2",children:[c.jsx(Sp,{size:48,className:"opacity-20"}),c.jsxs("span",{children:["No ",ie,"s found"]})]}):c.jsxs(c.Fragment,{children:[(ie==="image"||ie==="video")&&c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1",children:pe.filter(z=>z.media_type===ie).map(z=>c.jsxs("div",{className:"aspect-square relative group bg-[rgb(var(--color-surface))]",children:[ie==="image"?c.jsx("a",{href:z.media_url,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:c.jsx("img",{src:z.media_url,className:"w-full h-full object-cover hover:opacity-90 transition",alt:"Shared"})}):c.jsx("video",{src:z.media_url,className:"w-full h-full object-cover",controls:!0}),c.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-end justify-between p-2 pointer-events-none",children:c.jsx("span",{className:"text-[10px] text-white",children:new Date(z.created_at).toLocaleDateString()})})]},z.id))}),ie==="audio"&&c.jsx("div",{className:"space-y-3",children:pe.filter(z=>z.media_type===ie).map(z=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[rgb(var(--color-surface))] rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[rgba(var(--color-accent),0.1)] flex items-center justify-center flex-shrink-0 text-[rgb(var(--color-accent))]",children:c.jsx(Tl,{size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"flex justify-between items-center mb-1",children:c.jsxs("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:[z.sender_id===ye?.id?"You":h?.display_name,"  ",new Date(z.created_at).toLocaleString()]})}),c.jsx(Pl,{src:z.media_url,isOutgoing:!1})]})]},z.id))}),ie==="document"&&c.jsx("div",{className:"space-y-2",children:pe.filter(z=>z.media_type===ie).map(z=>c.jsxs("a",{href:z.media_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-[rgb(var(--color-surface))] rounded-xl border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-surface-hover))] transition group",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-[rgba(var(--color-primary),0.1)] flex items-center justify-center flex-shrink-0 text-[rgb(var(--color-primary))]",children:c.jsx(Br,{size:20})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-sm text-[rgb(var(--color-text))] truncate",children:z.content||ht(z.media_url.split("/").pop()||"Unknown File",30)}),c.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))]",children:[new Date(z.created_at).toLocaleDateString(),"  ",z.sender_id===ye?.id?"Sent by you":`Sent by ${h?.display_name}`]})]}),c.jsx("div",{className:"p-2 text-[rgb(var(--color-text-secondary))] group-hover:text-[rgb(var(--color-accent))]",children:c.jsx(to,{size:18})})]},z.id))})]})})})]})}),c.jsxs("div",{className:`w-full md:w-96 bg-[rgb(var(--color-surface))] border-r border-[rgb(var(--color-border))] flex-shrink-0 flex flex-col transition-transform duration-300 ease-in-out ${$?"translate-x-0":"-translate-x-full md:translate-x-0"} md:relative fixed inset-y-0 left-0 z-40 md:z-auto`,children:[c.jsxs("div",{className:"px-4 pt-16 md:pt-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] z-10",children:[c.jsxs("div",{className:"flex gap-2 mb-4 bg-[rgb(var(--color-surface-hover))] p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>a("chats"),className:`flex-1 py-1.5 text-sm font-bold rounded-md transition ${o==="chats"?"bg-[rgb(var(--color-background))] shadow text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Chats"}),c.jsx("button",{onClick:()=>a("gazebos"),className:`flex-1 py-1.5 text-sm font-bold rounded-md transition ${o==="gazebos"?"bg-[rgb(var(--color-background))] shadow text-[rgb(var(--color-text))]":"text-[rgb(var(--color-text-secondary))] hover:text-[rgb(var(--color-text))]"}`,children:"Gazebos"})]}),c.jsx("h2",{className:"text-2xl font-extrabold text-[rgb(var(--color-text))] mb-4",children:"Chats"}),c.jsxs("div",{className:"relative",children:[c.jsx(Ul,{size:20,className:"absolute left-3 top-3.5 text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search people...",value:X,onChange:z=>ge(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[Kn.length===0&&c.jsx("div",{className:"p-8 text-center text-[rgb(var(--color-text-secondary))]",children:X?"No users found":"No conversations yet"}),Kn.map(z=>c.jsxs("button",{onClick:()=>{p(z),F(!1),ge("")},className:`w-full flex items-center gap-3 p-4 transition border-b border-[rgb(var(--color-border))] ${h?.id===z.id?"bg-[rgb(var(--color-surface-hover))]":"hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:z.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${z.username}`,className:"w-14 h-14 rounded-full object-cover",alt:""}),at(z.last_seen)&&c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),c.jsxs("div",{className:"text-left flex-1 min-w-0",children:[c.jsxs("div",{className:"font-semibold flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[z.display_name,z.verified&&c.jsx(rr,{size:16,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),c.jsx("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] truncate",children:at(z.last_seen)?"Online":dn(z.last_seen)||`@${z.username}`})]})]},z.id))]})]}),c.jsx("div",{className:`flex-1 flex flex-col bg-[rgb(var(--color-background))] transition-all duration-300 ease-in-out ${h?"":"hidden md:flex"}`,children:h?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-3 flex items-center gap-3 sticky top-0 z-20 shadow-sm",children:[c.jsx("button",{onClick:()=>F(!0),className:"md:hidden p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:c.jsx(kp,{size:24,className:"text-[rgb(var(--color-text-secondary))]"})}),c.jsxs("button",{onClick:()=>_t(h.id),className:"flex items-center gap-3 flex-1 min-w-0",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:h.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${h.username}`,className:"w-10 h-10 rounded-full object-cover",alt:""}),at(h.last_seen)&&c.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full ring-2 ring-[rgb(var(--color-surface))]"})]}),c.jsxs("div",{className:"text-left min-w-0",children:[c.jsxs("div",{className:"font-bold flex items-center gap-1 truncate text-[rgb(var(--color-text))]",children:[h.display_name,h.verified&&c.jsx(rr,{size:16,className:"text-[rgb(var(--color-accent))] flex-shrink-0"})]}),c.jsx("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] truncate",children:at(h.last_seen)?"Online":dn(h.last_seen)||`@${h.username}`})]})]}),c.jsxs("div",{className:"flex gap-1 pr-1",children:[c.jsx("button",{onClick:()=>vr(h,"audio"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))]",title:"Start audio call",children:c.jsx(Yy,{size:20})}),c.jsx("button",{onClick:()=>vr(h,"video"),className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))]",title:"Start video call",children:c.jsx(rx,{size:20})}),c.jsx("div",{className:"w-px h-6 bg-[rgb(var(--color-border))] mx-1 self-center"}),c.jsx("button",{onClick:()=>{C(!0),Je()},className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text-secondary))]",title:"View Media & Files",children:c.jsx(Sp,{size:20})})]})]}),c.jsxs("div",{ref:bn,onScroll:gi,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[rgb(var(--color-background))]",children:[In&&c.jsx("div",{className:"flex justify-center p-4",children:c.jsx("div",{className:"logo-loading-container w-6 h-6 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:kx,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Rp,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Rp,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),v.map(z=>{const De=z.media_type==="audio"&&!z.content.trim()?"max-w-[90%] sm:max-w-[60%] md:max-w-[70%]":"max-w-[90%] sm:max-w-[50%] md:max-w-[65%]";return c.jsxs("div",{className:`flex items-center gap-2 group ${z.sender_id===ye.id?"justify-end":"justify-start"}`,children:[z.sender_id===ye.id&&c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition",children:[c.jsx("button",{onClick:he=>{const _e=he.currentTarget.getBoundingClientRect();ee({messageId:z.id,x:_e.left,y:_e.top,isOutgoing:!0})},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",title:"Add Reaction",children:c.jsx(Cp,{size:16})}),c.jsx("button",{onClick:()=>N(z),className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",title:"Reply",children:c.jsx(Qu,{size:16})})]}),c.jsxs("div",{className:`${De} px-3 py-2 rounded-xl shadow-md relative ${z.sender_id===ye.id?"bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-br-none":"bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] rounded-tl-none"}`,children:[z.reply_to_id&&z.reply_to&&(()=>{const he=z.reply_to,_e=he.sender_id===ye.id;return c.jsxs("div",{className:`p-2 rounded-lg mb-2 ${z.sender_id===ye.id?"bg-[rgba(var(--color-surface),0.2)]":"bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx("div",{className:`font-bold text-xs mb-0.5 ${z.sender_id===ye.id?"text-[rgba(var(--color-text-on-primary),0.9)]":"text-[rgb(var(--color-accent))]"}`,children:_e?"You":h?.display_name}),c.jsx("p",{className:"text-xs opacity-90 truncate whitespace-pre-wrap break-words",children:he.content?he.content:c.jsxs("span",{className:"flex items-center gap-1 italic opacity-80",children:[he.media_type==="image"&&c.jsxs(c.Fragment,{children:[c.jsx(tr,{size:12,className:"inline-block"})," Image"]}),he.media_type==="video"&&c.jsxs(c.Fragment,{children:[c.jsx(tr,{size:12,className:"inline-block"})," Video"]}),he.media_type==="audio"&&c.jsxs(c.Fragment,{children:[c.jsx(Tl,{size:12,className:"inline-block"})," Voice Message"]}),he.media_type==="document"&&c.jsxs(c.Fragment,{children:[c.jsx(Br,{size:12,className:"inline-block"})," File"]}),!he.media_type&&"[Message]"]})})]})})(),z.media_url&&c.jsxs("div",{className:z.content.trim()?"mt-2":"",children:[z.media_type==="image"&&c.jsx("img",{src:z.media_url,className:`${z.content.trim()?"mb-2":""} rounded-lg max-w-full h-auto`,alt:"Message"}),z.media_type==="video"&&c.jsx("video",{controls:!0,className:`${z.content.trim()?"mb-2":""} rounded-lg max-w-full`,children:c.jsx("source",{src:z.media_url})}),z.media_type==="audio"&&c.jsx("div",{className:z.content.trim()?"mb-2":"",children:c.jsx(Pl,{src:z.media_url,isOutgoing:z.sender_id===ye.id})}),z.media_type==="document"&&c.jsxs("a",{href:z.media_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-[rgb(var(--color-primary))] underline",children:[c.jsx(Br,{size:14})," Open File"]})]}),c.jsx("p",{className:"whitespace-pre-wrap break-words text-sm",children:z.content}),z.content&&Ap(z.content)&&!z.media_url&&c.jsx(bx,{url:Ap(z.content)}),c.jsxs("div",{className:`text-[10px] flex items-center justify-end mt-1.5 ${z.sender_id===ye.id?"text-[rgba(var(--color-text-on-primary),0.9)]":"text-[rgb(var(--color-text-secondary))]"}`,children:[c.jsx("span",{className:"mr-1",children:new Date(z.created_at).toLocaleTimeString([],{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),z.sender_id===ye.id&&(z.read?c.jsx(zy,{size:14,className:"text-blue-400"}):c.jsx(fo,{size:14}))]}),z.reactions&&z.reactions.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-2 -ml-1",children:_x(z.reactions,ye.id).map(he=>c.jsxs("button",{onClick:_e=>{_e.stopPropagation(),R(z)},className:`flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] border transition ${he.hasReacted?z.sender_id===ye.id?"bg-[rgba(255,255,255,0.2)] border-[rgba(255,255,255,0.4)] text-white":"bg-[rgba(var(--color-primary),0.1)] border-[rgb(var(--color-primary))] text-[rgb(var(--color-primary))]":"bg-[rgb(var(--color-surface))] border-[rgb(var(--color-border))] text-[rgb(var(--color-text-secondary))]"}`,children:[c.jsx("span",{children:he.emoji}),c.jsx("span",{className:"font-bold",children:he.count})]},he.emoji))})]}),z.sender_id!==ye.id&&c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition",children:[c.jsx("button",{onClick:he=>{const _e=he.currentTarget.getBoundingClientRect();ee({messageId:z.id,x:_e.right,y:_e.top,isOutgoing:!1})},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",title:"Add Reaction",children:c.jsx(Cp,{size:16})}),c.jsx("button",{onClick:()=>N(z),className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]",title:"Reply",children:c.jsx(Qu,{size:16})})]})]},z.id)}),J&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-[rgb(var(--color-surface))] px-3 py-2 rounded-xl shadow-sm border border-[rgb(var(--color-border))] rounded-tl-none",children:c.jsxs("div",{className:"flex gap-1 items-end",children:[c.jsx("span",{className:"w-2 h-2 bg-[rgb(var(--color-text-secondary))] rounded-full animate-pulse",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"w-2 h-2 bg-[rgb(var(--color-text-secondary))] rounded-full animate-pulse",style:{animationDelay:"200ms"}}),c.jsx("span",{className:"w-2 h-2 bg-[rgb(var(--color-text-secondary))] rounded-full animate-pulse",style:{animationDelay:"400ms"}})]})})}),c.jsx("div",{ref:se})]}),c.jsxs("div",{className:"bg-[rgb(var(--color-surface))]",children:[_&&c.jsxs("div",{className:"p-3 bg-[rgb(var(--color-surface-hover))] flex items-center justify-between mx-3 mt-3 rounded-lg",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"text-xs font-bold text-[rgb(var(--color-text-secondary))] flex items-center gap-1",children:[c.jsx(Qu,{size:14}),"Replying to ",_.sender_id===ye.id?"yourself":h?.display_name]}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text))] truncate mt-0.5",children:_.content?_.content:c.jsxs("span",{className:"flex items-center gap-1 italic opacity-80",children:[_.media_type==="image"&&c.jsxs(c.Fragment,{children:[c.jsx(tr,{size:12,className:"inline-block"})," Image"]}),_.media_type==="video"&&c.jsxs(c.Fragment,{children:[c.jsx(tr,{size:12,className:"inline-block"})," Video"]}),_.media_type==="audio"&&c.jsxs(c.Fragment,{children:[c.jsx(Tl,{size:12,className:"inline-block"})," Voice Message"]}),_.media_type==="document"&&c.jsxs(c.Fragment,{children:[c.jsx(Br,{size:12,className:"inline-block"})," File"]}),!_.media_type&&"[Message]"]})})]}),c.jsx("button",{type:"button",onClick:()=>N(null),className:"p-1 hover:bg-[rgb(var(--color-surface))] rounded-full transition text-[rgb(var(--color-text))]",children:c.jsx(kt,{size:18})})]}),(k||L)&&c.jsxs("div",{className:"mb-3 p-3 bg-[rgb(var(--color-surface-hover))] rounded-lg flex items-center justify-between mx-3 mt-3",children:[c.jsx("div",{className:"flex-1 pr-2",children:zn()}),c.jsx("button",{type:"button",onClick:()=>{E(null),I(""),Z(null)},className:"p-1 hover:bg-[rgb(var(--color-surface-hover))] rounded-full transition text-[rgb(var(--color-text))]",children:c.jsx(kt,{size:18})})]}),oe==="url"&&!k&&!L&&c.jsx("div",{className:"p-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"url",value:L,onChange:z=>{I(z.target.value),E(null)},placeholder:"Paste media URL...",className:"flex-1 px-3 py-2 text-sm border border-[rgb(var(--color-border))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"button",onClick:()=>{I(""),Z(null)},className:"p-1 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",title:"Cancel URL input",children:c.jsx(kt,{size:20})})]})})]}),c.jsxs("form",{onSubmit:hn,className:"p-3 bg-[rgb(var(--color-surface))] border-t border-[rgb(var(--color-border))] relative",children:[P&&c.jsx("div",{className:"mb-3 w-full bg-[rgb(var(--color-border))] rounded-full h-2 overflow-hidden",children:c.jsx("div",{className:"bg-[rgba(var(--color-accent),1)] h-full transition-all duration-300",style:{width:`${q}%`}})}),c.jsx("input",{ref:Ue,type:"file",accept:"image/*,video/*,.pdf,.doc,.docx,.txt",onChange:z=>{E(z.target.files?.[0]||null),I("")},className:"hidden"}),Y&&c.jsxs("div",{className:"absolute bottom-full left-3 mb-2 w-48 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] rounded-lg shadow-xl overflow-hidden z-30",children:[c.jsxs("button",{type:"button",className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",onClick:()=>{K(!1),Ue.current?.click(),I(""),Z("file")},children:[c.jsx(tr,{size:18})," Upload file"]}),c.jsxs("button",{type:"button",className:"w-full text-left p-3 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] transition flex items-center gap-2",onClick:()=>{K(!1),E(null),I(""),Z("url")},children:[c.jsx(to,{size:18})," Fetch from URL"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),K(!Y)},className:"p-2 rounded-full text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))] transition",title:"Attach file or link",disabled:rt,children:c.jsx(tr,{size:20})}),c.jsx("button",{type:"button",onClick:On,className:`p-2 rounded-full transition ${rt?"text-red-500 bg-red-500/10 animate-pulse":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,title:rt?"Stop recording":"Start voice message",disabled:P,children:c.jsx(Tl,{size:20})}),c.jsx("input",{type:"text",placeholder:rt?"Recording... (press mic to stop)":"Type a message...",value:x,onChange:fn,onPaste:An,className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] text-base bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]",disabled:rt}),c.jsx("button",{type:"submit",disabled:P||rt||!x.trim()&&!k&&!L.trim(),className:`p-2 rounded-full transition ${P||rt||!x.trim()&&!k&&!L.trim()?"bg-[rgb(var(--color-border))] text-[rgb(var(--color-text-secondary))]":"bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] hover:bg-[rgba(var(--color-primary),1)]"}`,children:c.jsx(ls,{size:20})})]})]})]}):c.jsxs("div",{className:"flex-1 flex items-center justify-center text-[rgb(var(--color-text-secondary))] flex-col",children:[c.jsx("span",{className:"text-xl font-semibold mb-2",children:"Welcome to Messages"}),c.jsx("span",{className:"text-center px-8",children:$?"Select a chat on the left to start messaging.":"Tap the arrow to open the chat list."}),c.jsxs("button",{onClick:()=>F(!0),className:"md:hidden mt-4 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] px-4 py-2 rounded-full hover:bg-[rgba(var(--color-primary),1)] transition",children:[c.jsx(kp,{className:"mr-2 inline"})," Back to Chats"]})]})}),$&&!h&&c.jsx("div",{onClick:()=>F(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden"})]})},Op="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",jx="0 0 784 1168",Cx=(e,t,r)=>new Promise(s=>{const o=new Image,a=new FileReader;a.onload=u=>{o.onload=()=>{const f=document.createElement("canvas"),h=f.getContext("2d");if(!h)return console.error("Canvas context not available."),s(null);const p=t==="avatar"?256:500,v=t==="avatar"?256:200;f.width=p,f.height=v;const g=o.width/o.height,x=f.width/f.height;let b,_,N,k;g>x?(k=o.height,N=o.height*x,b=(o.width-N)/2,_=0):(N=o.width,k=o.width/x,b=0,_=(o.height-k)/2);const E=1/r;N*=E,k*=E,b=o.width/2-N/2,_=o.height/2-k/2,b=Math.max(0,b),_=Math.max(0,_),h.drawImage(o,b,_,N,k,0,0,f.width,f.height),f.toBlob(L=>{s(L)},e.type,.95)},o.onerror=()=>{console.error("Error loading image for cropping."),s(null)},o.src=u.target?.result},a.onerror=()=>{console.error("Error reading file for cropping."),s(null)},a.readAsDataURL(e)}),zp=({userId:e,initialPostId:t,onMessage:r,onSettings:s})=>{const[o,a]=j.useState(null),[u,f]=j.useState([]),[h,p]=j.useState(!1),[v,g]=j.useState(""),[x,b]=j.useState(""),[_,N]=j.useState(""),[k,E]=j.useState(""),[L,I]=j.useState(""),[q,H]=j.useState(!1),[P,te]=j.useState(0),[X,ge]=j.useState(0),[$,F]=j.useState(!1),[J,ae]=j.useState(!1),[Y,K]=j.useState([]),[oe,Z]=j.useState([]),[M,ee]=j.useState(!1),[S,R]=j.useState(""),[U,C]=j.useState(null),[ie,me]=j.useState(null),[pe,ze]=j.useState(null),[Le,we]=j.useState(""),[Je,ht]=j.useState(""),[ye,zt]=j.useState(!1),[ve,rt]=j.useState(!1),[pt,Mt]=j.useState(!1),[cn,Ln]=j.useState(1),[Ut,en]=j.useState(1),[Dt,In]=j.useState(new Set),[Qt,bn]=j.useState("posts"),[G,se]=j.useState([]),[Te,Ue]=j.useState(!1),[$e,Ye]=j.useState(!1),[vt,at]=j.useState(null),dn=(D,ce)=>{R(D),C(ce),ee(!0)},wn=D=>{if(!D)return"";let ce=D.replace(/^(https?:\/\/)?(www\.)?/,"");return ce.length>30?ce.substring(0,20)+"...":ce},_t=D=>D?/^(f|ht)tps?:\/\//i.test(D)?D:"https://"+D:"",{user:Qe}=Gn(),Be=e||Qe?.id,dt=Be===Qe?.id,kn=j.useRef(null),fn=j.useRef(null),An=D=>{if(!D)return!1;const ce=new Date().getTime(),fe=new Date(D).getTime();return ce-fe<3e5},hn=j.useCallback(async D=>{if(!D.length)return{likeCounts:{},commentCounts:{}};const ce={},fe={};for(const be of D){const[{count:Pe},{count:xt}]=await Promise.all([Q.from("likes").select("*",{count:"exact",head:!0}).eq("entity_type","post").eq("entity_id",be),Q.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",be)]);ce[be]=Pe||0,fe[be]=xt||0}return{likeCounts:ce,commentCounts:fe}},[]),Hr=async(D,ce)=>{Mt(!0);try{const fe=await oo(D,"profiles");fe&&(ce==="avatar"?E(fe.url):I(fe.url))}catch(fe){console.error("Direct upload failed:",fe)}finally{Mt(!1)}},mi=D=>{if(D){if(D.type==="image/gif"){Hr(D,"avatar");return}const ce=URL.createObjectURL(D);me(D),we(ce),Ln(1),zt(!0)}else me(null),we("")},gi=D=>{if(D){if(D.type==="image/gif"){Hr(D,"banner");return}const ce=URL.createObjectURL(D);ze(D),ht(ce),en(1),rt(!0)}else ze(null),ht("")},vr=async(D,ce)=>{if(!D)return;Mt(!0);const fe=ce==="avatar"?cn:Ut;try{const be=await Cx(D,ce,fe);if(!be){console.error("Cropping failed, received null Blob.");return}const Pe=new File([be],`cropped-${D.name}`,{type:be.type}),xt=await oo(Pe,"profiles");xt?ce==="avatar"?E(xt.url):I(xt.url):console.error("Media upload failed.")}catch(be){console.error("An error occurred during crop or upload:",be)}finally{Mt(!1),ce==="avatar"?(zt(!1),me(null),we("")):(rt(!1),ze(null),ht(""))}},Rn=j.useCallback(async D=>{if(!Qe||D.length===0)return;const ce=D.map(be=>be.id),{data:fe}=await Q.from("likes").select("entity_id").eq("user_id",Qe.id).eq("entity_type","post").in("entity_id",ce);fe&&In(be=>{const Pe=new Set(be);return fe.forEach(xt=>Pe.add(xt.entity_id)),Pe})},[Qe]),yr=D=>{In(ce=>{const fe=new Set(ce);return fe.has(D.id)?fe.delete(D.id):fe.add(D.id),fe}),f(ce=>ce.map(fe=>{if(fe.id===D.id){const be=Dt.has(fe.id);return{...fe,like_count:Math.max(0,fe.like_count+(be?-1:1))}}return fe})),se(ce=>ce.map(fe=>{if(fe.id===D.id){const be=Dt.has(fe.id);return{...fe,like_count:Math.max(0,fe.like_count+(be?-1:1))}}return fe})),vt&&vt.id===D.id&&at(ce=>{if(!ce)return null;const fe=Dt.has(ce.id);return{...ce,like_count:Math.max(0,ce.like_count+(fe?-1:1))}})},On=D=>{f(ce=>ce.map(fe=>fe.id===D.id?{...fe,comment_count:D.comment_count}:fe)),se(ce=>ce.map(fe=>fe.id===D.id?{...fe,comment_count:D.comment_count}:fe)),vt&&vt.id===D.id&&at(ce=>ce?{...ce,comment_count:D.comment_count}:null)},Kn=async D=>{f(fe=>fe.filter(be=>be.id!==D.id)),se(fe=>fe.filter(be=>be.id!==D.id)),vt&&vt.id===D.id&&at(null);const{error:ce}=await Q.from("posts").delete().eq("id",D.id);ce&&(console.error("Failed to delete post",ce),z())},zn=j.useCallback(async()=>{if(!Be)return;const{data:D}=await Q.from("profiles").select("*").eq("id",Be).single();a(D),D&&(g(D.display_name),b(D.bio||""),N(D.bio_link||""),E(D.avatar_url||""),I(D.banner_url||""))},[Be]),z=j.useCallback(async()=>{if(!Be)return;const{data:D}=await Q.from("posts").select("*, profiles(*)").eq("user_id",Be).order("created_at",{ascending:!1}),ce=D||[],fe=ce.map(Bt=>Bt.id),{likeCounts:be,commentCounts:Pe}=await hn(fe),xt=ce.map(Bt=>({...Bt,like_count:be[Bt.id]||0,comment_count:Pe[Bt.id]||0}));f(xt),Rn(xt)},[Be,Rn,hn]),je=j.useCallback(async()=>{if(!Be)return;Ue(!0);const{data:D}=await Q.from("likes").select("entity_id").eq("user_id",Be).eq("entity_type","post");if(!D||D.length===0){se([]),Ye(!0),Ue(!1);return}const ce=D.map(bt=>bt.entity_id),{data:fe}=await Q.from("posts").select("*, profiles(*)").in("id",ce).order("created_at",{ascending:!1}),be=fe||[],Pe=be.map(bt=>bt.id),{likeCounts:xt,commentCounts:Bt}=await hn(Pe),_n=be.map(bt=>({...bt,like_count:xt[bt.id]||0,comment_count:Bt[bt.id]||0}));se(_n),Rn(_n),Ye(!0),Ue(!1)},[Be,Rn,hn]),De=j.useCallback(async()=>{if(!Be)return;const{count:D}=await Q.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",Be),{count:ce}=await Q.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",Be);te(D||0),ge(ce||0)},[Be]),he=j.useCallback(async()=>{if(!Qe||!Be)return;const{data:D}=await Q.from("follows").select("follower_id").eq("follower_id",Qe.id).eq("following_id",Be).maybeSingle();H(!!D)},[Qe,Be]);j.useEffect(()=>{if(Be){bn("posts"),Ye(!1),se([]),zn(),z(),De(),dt||he();const D=Q.channel(`profile-${Be}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async ce=>{if(ce.new.user_id!==Be)return;const{data:fe}=await Q.from("posts").select("*, profiles(*)").eq("id",ce.new.id).single();if(fe){const be=[fe.id],{likeCounts:Pe,commentCounts:xt}=await hn(be),Bt={...fe,like_count:Pe[fe.id]||0,comment_count:xt[fe.id]||0};f(_n=>[Bt,..._n])}}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},ce=>{const fe=ce.old.id;f(be=>be.filter(Pe=>Pe.id!==fe)),se(be=>be.filter(Pe=>Pe.id!==fe))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"likes",filter:"entity_type=eq.post"},async ce=>{if(ce.new.user_id===Be){const{data:be}=await Q.from("posts").select("*, profiles(*)").eq("id",ce.new.entity_id).single();if(be){const Pe=[be.id],{likeCounts:xt,commentCounts:Bt}=await hn(Pe),_n={...be,like_count:xt[be.id]||0,comment_count:Bt[be.id]||0};se(bt=>bt.some(na=>na.id===_n.id)?bt:[_n,...bt])}}const fe=ce.new.entity_id;f(be=>be.map(Pe=>Pe.id===fe?{...Pe,like_count:(Pe.like_count||0)+1}:Pe)),se(be=>be.map(Pe=>Pe.id===fe?{...Pe,like_count:(Pe.like_count||0)+1}:Pe))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"likes",filter:"entity_type=eq.post"},ce=>{ce.old.user_id===Be&&se(be=>be.filter(Pe=>Pe.id!==ce.old.entity_id));const fe=ce.old.entity_id;f(be=>be.map(Pe=>Pe.id===fe?{...Pe,like_count:Math.max(0,(Pe.like_count||0)-1)}:Pe)),se(be=>be.map(Pe=>Pe.id===fe?{...Pe,like_count:Math.max(0,(Pe.like_count||0)-1)}:Pe))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},ce=>{const fe=ce.new.post_id;f(be=>be.map(Pe=>Pe.id===fe?{...Pe,comment_count:(Pe.comment_count||0)+1}:Pe)),se(be=>be.map(Pe=>Pe.id===fe?{...Pe,comment_count:(Pe.comment_count||0)+1}:Pe))}).subscribe();return()=>{Q.removeChannel(D)}}},[Be,dt,zn,z,De,he,hn]),j.useEffect(()=>{t&&(async()=>{const{data:ce}=await Q.from("posts").select("*, profiles(*)").eq("id",t).maybeSingle();if(ce){let fe=0,be=0;try{const{likeCounts:xt,commentCounts:Bt}=await hn([ce.id]);fe=xt[ce.id]||0,be=Bt[ce.id]||0}catch(xt){console.error("Error loading counts",xt)}const Pe={...ce,like_count:fe,comment_count:be};at(Pe),Qe&&Rn([Pe])}})()},[t]);const _e=async()=>{const{data:D}=await Q.from("follows").select("follower:profiles!follower_id(*)").eq("following_id",Be);K(D?.map(ce=>ce.follower)||[])},Me=async()=>{const{data:D}=await Q.from("follows").select("following:profiles!following_id(*)").eq("follower_id",Be);Z(D?.map(ce=>ce.following)||[])},Ie=async()=>{await _e(),F(!0),ae(!1)},He=async()=>{await Me(),ae(!0),F(!1)},et=()=>{F(!1),ae(!1)},Lt=async()=>{Qe&&(q?await Q.from("follows").delete().eq("follower_id",Qe.id).eq("following_id",Be):await Q.from("follows").insert({follower_id:Qe.id,following_id:Be}),H(!q),De())},yt=async D=>{if(!Qe)return;const{data:ce}=await Q.from("follows").select("follower_id").eq("follower_id",Qe.id).eq("following_id",D).maybeSingle();ce?await Q.from("follows").delete().eq("follower_id",Qe.id).eq("following_id",D):await Q.from("follows").insert({follower_id:Qe.id,following_id:D}),$&&await _e(),J&&await Me(),De()},vi=async D=>{const{error:ce}=await Q.rpc("remove_follower",{p_follower_id:D});ce?console.error("Error removing follower:",ce):(K(fe=>fe.filter(be=>be.id!==D)),te(fe=>fe-1))},vo=async()=>{await Q.from("profiles").update({display_name:v,bio:x,bio_link:_,avatar_url:k,banner_url:L}).eq("id",Qe.id),p(!1),zn()},sr=async D=>{et(),at(null);const{data:ce}=await Q.from("profiles").select("username").eq("id",D).single();ce&&(window.history.replaceState({},"",`/?user=${ce.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:D})))},yi=D=>{bn(D),D==="likes"&&!$e&&!Te&&je()},cs=j.useCallback(()=>u.filter(D=>D.media_url&&(D.media_type==="image"||D.media_type==="video")),[u])();if(!o)return c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text))]",children:"Loading..."});const yo=h&&Je?Je:L||o.banner_url,ta=h&&Le?Le:k||o.avatar_url;return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"bg-[rgb(var(--color-surface))]",children:[c.jsx("div",{className:"relative h-48 bg-[rgb(var(--color-border))]",children:yo?c.jsxs("button",{onClick:()=>dt&&h&&fn.current?.click(),className:`w-full h-full ${dt&&h?"cursor-pointer group":""}`,disabled:!dt||!h,children:[c.jsx("img",{src:yo,className:"w-full h-full object-cover",alt:"Banner"}),dt&&h&&c.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(El,{size:48,className:"text-white"})})]}):c.jsx("button",{onClick:()=>dt&&h&&fn.current?.click(),className:`w-full h-full ${dt&&h?"cursor-pointer group":""}`,disabled:!dt||!h,children:c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[rgba(var(--color-accent),1)] to-[rgba(var(--color-primary),1)] flex items-center justify-center",children:dt&&h&&c.jsx(El,{size:48,className:"text-white"})})})}),c.jsxs("div",{className:"relative px-4 pb-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end -mt-16",children:[c.jsxs("button",{onClick:()=>{dt&&h?kn.current?.click():dt||sr(o.id)},className:`relative ${dt&&h?"group cursor-pointer":""}`,children:[c.jsx("img",{src:ta||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.username}`,className:"w-32 h-32 rounded-full border-4 border-[rgb(var(--color-surface))] shadow-lg ring-4 ring-[rgb(var(--color-surface))] hover:opacity-90 transition object-cover",alt:"Avatar"}),An(o.last_seen)&&c.jsx("span",{className:"absolute bottom-2 right-2 w-5 h-5 bg-green-500 border-4 border-[rgb(var(--color-surface))] rounded-full"}),dt&&h&&c.jsx("div",{className:"absolute inset-0 w-32 h-32 rounded-full bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(El,{size:32,className:"text-white"})})]}),c.jsx("div",{className:"mt-4 sm:mt-0 flex gap-2",children:dt?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>h?vo():p(!0),className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[h?c.jsx(fo,{size:18}):c.jsx(Jy,{size:18}),h?"Save":"Edit Profile"]}),s&&c.jsxs("button",{onClick:s,className:"px-5 py-2.5 border border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-full font-semibold hover:bg-[rgb(var(--color-surface-hover))] flex items-center gap-2 transition",children:[c.jsx(ag,{size:18}),"Settings"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{o?.username&&(window.history.replaceState({},"",`/message?${o.username}`),r?.(o))},className:"flex items-center gap-2 px-5 py-2.5 bg-[rgb(var(--color-accent))] text-[rgb(var(--color-text-on-primary))] rounded-full hover:bg-[rgb(var(--color-primary))] transition font-medium",children:[c.jsx(ho,{size:18}),"Message"]}),c.jsx("button",{onClick:Lt,className:`px-6 py-2.5 rounded-full font-semibold transition ${q?"bg-[rgb(var(--color-surface))] text-[rgb(var(--color-text))] border border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:q?"Following":"Follow"})]})})]}),h?c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsx("input",{type:"text",value:v,onChange:D=>g(D.target.value),placeholder:"Display Name",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("textarea",{value:x,onChange:D=>b(D.target.value),placeholder:"Bio",rows:3,className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("input",{type:"url",value:_,onChange:D=>N(D.target.value),placeholder:"Bio Link (e.g., yourwebsite.com)",className:"w-full px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"url",value:k,onChange:D=>E(D.target.value),placeholder:"Avatar URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"button",onClick:()=>kn.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:c.jsx(tr,{size:16})}),c.jsx("input",{ref:kn,type:"file",accept:"image/*",onChange:D=>mi(D.target.files?.[0]||null),className:"hidden"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"url",value:L,onChange:D=>I(D.target.value),placeholder:"Banner URL",className:"flex-1 px-4 py-2.5 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]"}),c.jsx("button",{type:"button",onClick:()=>fn.current?.click(),className:"px-4 py-2 bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))] rounded-lg hover:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:c.jsx(tr,{size:16})}),c.jsx("input",{ref:fn,type:"file",accept:"image/*",onChange:D=>gi(D.target.files?.[0]||null),className:"hidden"})]})]}):c.jsxs("div",{className:"mt-5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>!dt&&sr(o.id),className:"font-bold text-2xl text-[rgb(var(--color-text))] hover:underline",children:o.display_name}),o.verified&&c.jsx(rr,{size:22,className:"text-[rgb(var(--color-accent))]"})]}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",o.username]}),o.bio&&c.jsx("p",{className:"mt-3 text-[rgb(var(--color-text))]",children:o.bio}),c.jsxs("div",{className:"mt-4 flex gap-8 items-center text-sm",children:[" ",c.jsxs("button",{onClick:He,className:"hover:underline text-[rgb(var(--color-text))]",children:[c.jsx("strong",{className:"text-lg",children:X})," ",c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Following"})]}),c.jsxs("button",{onClick:Ie,className:"hover:underline text-[rgb(var(--color-text))]",children:[c.jsx("strong",{className:"text-lg",children:P})," ",c.jsx("span",{className:"text-[rgb(var(--color-text-secondary))]",children:"Followers"})]}),o.bio_link&&c.jsxs("a",{href:_t(o.bio_link),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[rgb(var(--color-accent))] hover:underline hover:text-[rgb(var(--color-primary))] transition",children:[c.jsx(to,{size:16}),c.jsx("span",{className:"truncate max-w-[150px]",children:wn(o.bio_link)})]})]})]})]})]}),c.jsxs("div",{className:"flex border-b border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))] sticky top-0 z-30",children:[c.jsxs("button",{onClick:()=>yi("posts"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="posts"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(sg,{size:18}),"Posts"]}),c.jsxs("button",{onClick:()=>yi("media"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="media"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(Uy,{size:18}),"Media"]}),c.jsxs("button",{onClick:()=>yi("likes"),className:`flex-1 py-4 font-semibold flex items-center justify-center gap-2 transition-colors ${Qt==="likes"?"text-[rgb(var(--color-accent))] border-b-2 border-[rgb(var(--color-accent))]":"text-[rgb(var(--color-text-secondary))] hover:bg-[rgb(var(--color-surface-hover))]"}`,children:[c.jsx(tx,{size:18}),"Likes"]})]}),c.jsxs("div",{children:[Qt==="posts"&&c.jsxs("div",{children:[u.length===0&&c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted anything yet."}),u.map(D=>c.jsx(zl,{post:D,currentUserId:Qe?.id,isLiked:Dt.has(D.id),onLikeToggle:yr,onCommentUpdate:On,onNavigateToProfile:sr,onDelete:Kn},D.id))]}),Qt==="media"&&c.jsx("div",{children:cs.length===0?c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't posted any media."}):c.jsx("div",{className:"grid grid-cols-3 gap-1",children:cs.map(D=>c.jsxs("button",{className:"aspect-square relative bg-[rgb(var(--color-border))] hover:opacity-80 transition",onClick:()=>dn(D.media_url,D.media_type==="video"?"video":"image"),children:[D.media_type==="image"&&c.jsx("img",{src:D.media_url,alt:"Media",className:"w-full h-full object-cover"}),D.media_type==="video"&&c.jsxs(c.Fragment,{children:[c.jsx("video",{src:D.media_url,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 right-2 p-1.5 bg-black/50 rounded-full",children:c.jsx(El,{size:16,className:"text-white"})})]})]},D.id))})}),Qt==="likes"&&c.jsxs("div",{children:[Te&&c.jsx("div",{className:"flex justify-center p-8",children:c.jsx("div",{className:"logo-loading-container w-8 h-8 relative",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:jx,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Op,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Op,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})})}),!Te&&$e&&G.length===0&&c.jsx("div",{className:"text-center p-8 text-[rgb(var(--color-text-secondary))]",children:"This user hasn't liked any posts yet."}),!Te&&$e&&G.map(D=>c.jsx(zl,{post:D,currentUserId:Qe?.id,isLiked:Dt.has(D.id),onLikeToggle:yr,onCommentUpdate:On,onNavigateToProfile:sr,onDelete:Kn},D.id))]})]}),vt&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:()=>{at(null),window.history.replaceState({},"","/")},children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-2xl overflow-y-auto border border-[rgb(var(--color-border))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"sticky top-0 z-10 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-lg",children:"Post"}),c.jsx("button",{onClick:()=>{at(null),window.history.replaceState({},"","/")},className:"p-1 rounded-full hover:bg-[rgb(var(--color-surface-hover))]",children:c.jsx(kt,{size:24})})]}),c.jsx(zl,{post:vt,currentUserId:Qe?.id,isLiked:Dt.has(vt.id),onLikeToggle:yr,onCommentUpdate:On,onNavigateToProfile:sr,onDelete:Kn})]})}),ye&&ie&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!pt&&zt(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-lg flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[c.jsx(_p,{size:20})," Crop Avatar"]}),c.jsx("button",{onClick:()=>zt(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:pt,children:c.jsx(kt,{size:20})})]}),c.jsxs("div",{className:"flex justify-center items-center h-80 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[c.jsx("img",{src:Le,className:"max-w-full max-h-full object-contain",alt:"Avatar Crop Preview",style:{transform:`scale(${cn})`}}),c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"w-64 h-64 border-4 border-dashed border-white/80 rounded-full shadow-lg"}),c.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"circle(128px at center)",mixBlendMode:"saturation"}}),pt&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",cn.toFixed(1),"x)"]}),c.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:cn,onChange:D=>Ln(parseFloat(D.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:pt}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),c.jsx("button",{onClick:()=>vr(ie,"avatar"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:pt,children:pt?"Cropping & Uploading...":"Crop & Save Avatar"})]})}),ve&&pe&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>!pt&&rt(!1),children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-2xl flex flex-col p-6 text-[rgb(var(--color-text))]",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[c.jsx(_p,{size:20})," Crop Banner"]}),c.jsx("button",{onClick:()=>rt(!1),className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",disabled:pt,children:c.jsx(kt,{size:20})})]}),c.jsxs("div",{className:"flex justify-center items-center h-48 w-full bg-[rgb(var(--color-background))] rounded-lg overflow-hidden relative mb-4",children:[c.jsx("img",{src:Je,className:"w-full h-full object-cover",alt:"Banner Crop Preview",style:{transform:`scale(${Ut})`}}),c.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[c.jsx("div",{className:"w-11/12 h-3/5 border-4 border-dashed border-white/80 shadow-lg"}),c.jsx("div",{className:"absolute inset-0 bg-black/50",style:{clipPath:"polygon(0% 0%, 0% 100%, 5% 100%, 5% 20%, 95% 20%, 95% 80%, 5% 80%, 5% 100%, 100% 100%, 100% 0%)",mixBlendMode:"saturation"}}),pt&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xl font-bold",children:"Processing..."})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1 text-[rgb(var(--color-text))]",children:["Zoom Level (",Ut.toFixed(1),"x)"]}),c.jsx("input",{type:"range",min:"1.0",max:"3.0",step:"0.1",value:Ut,onChange:D=>en(parseFloat(D.target.value)),className:"w-full h-2 bg-[rgb(var(--color-border))] rounded-lg appearance-none cursor-pointer range-lg",disabled:pt}),c.jsx("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] mt-1",children:"Adjusting zoom scales the image content for the **center crop** area."})]}),c.jsx("button",{onClick:()=>vr(pe,"banner"),className:"w-full py-3 bg-[rgba(var(--color-accent),1)] text-[rgb(var(--color-text-on-primary))] rounded-full font-semibold hover:bg-[rgba(var(--color-primary),1)] transition disabled:opacity-50 mt-4",disabled:pt,children:pt?"Cropping & Uploading...":"Crop & Save Banner"})]})}),($||J)&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:et,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-md max-h-[80vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[rgb(var(--color-border))]",children:[c.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-text))]",children:$?"Followers":"Following"}),c.jsx("button",{onClick:et,className:"p-2 text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))] rounded-full",children:c.jsx(kt,{size:20})})]}),c.jsx("div",{className:"overflow-y-auto flex-1",children:($?Y:oe).map(D=>{const ce=oe.some(be=>be.id===D.id),fe=D.id===Qe?.id;return c.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-[rgb(var(--color-surface-hover))] border-b border-[rgb(var(--color-border))]",children:[c.jsxs("button",{onClick:()=>sr(D.id),className:"flex items-center gap-3 flex-1 text-left",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[c.jsx("img",{src:D.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${D.username}`,className:"w-10 h-10 rounded-full",alt:""}),An(D.last_seen)&&c.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-[rgb(var(--color-surface))] rounded-full"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))]",children:D.display_name}),c.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",D.username]})]})]}),dt&&!fe&&c.jsxs("div",{className:"flex gap-2",children:[$&&c.jsxs("button",{onClick:be=>{be.stopPropagation(),vi(D.id)},className:"px-3 py-1.5 text-sm font-medium rounded-full border border-red-300 text-red-600 hover:bg-red-50 transition",children:[c.jsx(nx,{size:16,className:"inline mr-1"}),"Remove"]}),J&&c.jsx("button",{onClick:be=>{be.stopPropagation(),yt(D.id)},className:`px-4 py-1.5 text-sm font-medium rounded-full border transition ${ce?"border-[rgb(var(--color-border))] text-[rgb(var(--color-text))] hover:bg-[rgb(var(--color-surface-hover))]":"bg-[rgb(var(--color-text))] text-[rgb(var(--color-background))] hover:bg-[rgb(var(--color-surface))]"}`,children:ce?"Following":"Follow"})]})]},D.id)})})]})}),M&&S&&c.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 cursor-pointer",onClick:()=>ee(!1),children:[c.jsxs("div",{className:"max-w-full max-h-full",onClick:D=>D.stopPropagation(),children:[U==="image"&&c.jsx("img",{src:S,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",alt:"Full size view"}),U==="video"&&c.jsxs("video",{controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl",children:[c.jsx("source",{src:S}),"Your browser does not support the video tag."]})]}),c.jsx("button",{onClick:()=>ee(!1),className:"absolute top-4 right-4 p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",children:c.jsx(kt,{size:24})})]})]})},Mp=async e=>{const{data:t}=await Q.from("profiles").select("username").eq("id",e).single();t&&(window.history.replaceState({},"",`/?${t.username}`),window.dispatchEvent(new CustomEvent("navigateToProfile",{detail:e})))},Nx=({onClose:e})=>{const[t,r]=j.useState(""),[s,o]=j.useState([]),[a,u]=j.useState([]),[f,h]=j.useState(!1);return j.useEffect(()=>{if(!t.trim()){o([]),u([]);return}const p=setTimeout(async()=>{h(!0);const v=t.toLowerCase(),{data:g}=await Q.from("profiles").select("*").or(`username.ilike.%${v}%,display_name.ilike.%${v}%`).limit(5),{data:x}=await Q.from("posts").select("*, profiles(*)").ilike("content",`%${v}%`).limit(10);o(g||[]),u(x||[]),h(!1)},300);return()=>clearTimeout(p)},[t]),c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center p-4 pt-10",onClick:e,children:c.jsxs("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl w-full max-w-xl max-h-[80vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center p-4 border-b border-[rgb(var(--color-border))] sticky top-0 bg-[rgb(var(--color-surface))] rounded-t-2xl z-10",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Ul,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[rgb(var(--color-text-secondary))]"}),c.jsx("input",{type:"text",placeholder:"Search users and posts...",value:t,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-[rgb(var(--color-border))] rounded-full focus:outline-none focus:border-[rgb(var(--color-accent))] bg-[rgb(var(--color-background))] text-[rgb(var(--color-text))]",autoFocus:!0})]}),c.jsx("button",{onClick:e,className:"p-2 ml-3 hover:bg-[rgb(var(--color-surface-hover))] rounded-full text-[rgb(var(--color-text))]",children:c.jsx(kt,{size:24})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[f&&t&&c.jsxs("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:['Loading results for "',t,'"...']}),t&&!f&&c.jsxs(c.Fragment,{children:[s.length>0&&c.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-border))]",children:[c.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[c.jsx(dg,{size:20,className:"text-[rgb(var(--color-primary))]"})," Users"]}),s.map(p=>c.jsxs("button",{onClick:()=>{e(),Mp(p.id)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left",children:[c.jsx("img",{src:p.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-semibold text-[rgb(var(--color-text))] truncate",children:p.display_name}),c.jsxs("div",{className:"text-sm text-[rgb(var(--color-text-secondary))] truncate",children:["@",p.username]})]})]},p.id))]}),a.length>0&&c.jsxs("div",{className:"p-4",children:[c.jsxs("h3",{className:"text-lg font-bold text-[rgb(var(--color-text))] flex items-center gap-2 mb-3",children:[c.jsx(ho,{size:20,className:"text-[rgb(var(--color-primary))]"})," Posts"]}),a.map(p=>c.jsxs("button",{onClick:()=>{e(),Mp(p.user_id)},className:"w-full flex gap-3 p-2 rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition text-left border-b border-[rgb(var(--color-border))] last:border-b-0",children:[c.jsx("img",{src:p.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${p.profiles?.username}`,className:"w-10 h-10 rounded-full flex-shrink-0 object-cover",alt:""}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx("span",{className:"font-bold text-[rgb(var(--color-text))]",children:p.profiles?.display_name}),c.jsxs("span",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",p.profiles?.username]})]}),c.jsx("p",{className:"text-[rgb(var(--color-text))] mt-1 line-clamp-2",children:p.content}),p.media_url&&c.jsx("img",{src:p.media_url,className:"mt-2 rounded-xl max-h-48 object-cover w-full",alt:""})]})]},p.id))]}),!s.length&&!a.length&&c.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:['No results found for "',t,'"']})]}),!t&&c.jsxs("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:[c.jsx(Ul,{size:48,className:"mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"Type to search users and posts"})]})]})]})})},Ex=[{value:"lt-classic",name:"LT Classic",desc:"Default theme. Fiery orange and reds."},{value:"lt-dark",name:"LT Dark",desc:"Dark mode. Fiery orange and reds."},{value:"muxday",name:"MuxDay",desc:"Alternate theme in honor of the previous MuxDay platform. Analogous shades of blue."},{value:"amrella",name:"Amrella",desc:"Alternate theme in honor of the previous Amrella platform. Analogous shades of green."},{value:"cooper-black",name:"Cooper Black",desc:"Special theme for Cooper Black fans and enthusiasts. Futuristic cyberpunk vibes."},{value:"knightspeak",name:"Knightspeak",desc:"Special theme for Knightspeak fans and enthusiasts. Medieval vibes."},{value:"wildest-dimensions",name:"Wildest Dimensions",desc:"Special theme for Radiyana, in the Wildest Dimensions. Feel the high life."},{value:"mahir-beats",name:"Mahir Beats",desc:"Special theme for Mahir. Deep dark blues. Enjoy the cruise."},{value:"dewan-mukto",name:"Dewan Mukto",desc:"Low contrast within pure black and white. Timeless."},{value:"marlizo",name:"Marlizo",desc:"Special theme for Marlizo. Dante from Devil May Cry will love this."},{value:"invincible",name:"Invincible",desc:"Not invisible, yet invincible. This is a theme for people like A.A.A. who are the role models of IT. Pure OLED darkness."}],Tx=({currentTheme:e,onChange:t,loading:r})=>c.jsx("div",{className:"space-y-2",children:Ex.map(s=>c.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all border ${e===s.value?"bg-[rgba(var(--color-primary),0.1)] border-[rgb(var(--color-primary))]":"bg-[rgb(var(--color-surface-hover))] border-[rgb(var(--color-border))] hover:bg-[rgb(var(--color-border))]"}`,onClick:()=>!r&&t(s.value),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[rgb(var(--color-text))]",children:s.name}),c.jsx("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:s.desc})]}),e===s.value&&c.jsx(Cc,{size:16,className:"text-[rgb(var(--color-primary))]"})]})},s.value))}),Px=()=>{const{user:e,profile:t,updateProfile:r}=Gn(),[s,o]=j.useState(""),[a,u]=j.useState(""),[f,h]=j.useState(""),[p,v]=j.useState(""),[g,x]=j.useState(""),[b,_]=j.useState(!1),[N,k]=j.useState(!1),[E,L]=j.useState(null),I=async X=>{if(!e?.id||!t)return;k(!0);const{error:ge}=await Q.from("profiles").update({theme:X}).eq("id",e.id);k(!1),ge?L({type:"error",text:"Failed to update theme."}):(r({...t,theme:X}),L({type:"success",text:"Theme updated!"})),setTimeout(()=>L(null),3e3)},q=async()=>{if(!e?.id||!t||s===t.username||!s.trim())return;k(!0);const{data:X}=await Q.from("profiles").select("id").eq("username",s.toLowerCase()).maybeSingle();if(X){L({type:"error",text:"Username already taken."}),k(!1);return}const{error:ge}=await Q.from("profiles").update({username:s.toLowerCase()}).eq("id",e.id);k(!1),ge?L({type:"error",text:"Failed to update username."}):(r({...t,username:s.toLowerCase()}),L({type:"success",text:"Username updated!"}),o("")),setTimeout(()=>L(null),3e3)},H=async()=>{if(!e?.id||!a.trim())return;k(!0);const{error:X}=await Q.auth.updateUser({email:a});k(!1),X?L({type:"error",text:X.message||"Failed to update email."}):(L({type:"success",text:"Email updated! Check your inbox for confirmation."}),u("")),setTimeout(()=>L(null),3e3)},P=async()=>{if(!e?.id||f!==p||f.length<6)return;k(!0);const{error:X}=await Q.auth.updateUser({password:f});k(!1),X?L({type:"error",text:X.message||"Failed to update password."}):(L({type:"success",text:"Password updated!"}),h(""),v("")),setTimeout(()=>L(null),3e3)},te=async()=>{if(!e?.id||!t||!g.trim())return;k(!0);const{error:X}=await Q.from("profiles").update({verification_request:g}).eq("id",e.id);k(!1),X?L({type:"error",text:"Failed to submit request."}):(r({...t,verification_request:g}),L({type:"success",text:"Verification request submitted!"}),x(""),_(!1)),setTimeout(()=>L(null),3e3)};return!t||!e?c.jsx("div",{className:"text-center p-8",children:"Loading..."}):c.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-8",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ag,{size:24,className:"text-[rgb(var(--color-text-secondary))]"}),c.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})]}),E&&c.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${E.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[E.type==="success"?c.jsx(Cc,{size:20}):c.jsx(rg,{size:20}),E.text]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Theme"}),c.jsx(Tx,{currentTheme:t.theme,onChange:I,loading:N})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Username"}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: @",t.username]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:s,onChange:X=>o(X.target.value),placeholder:"New username",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsx("button",{onClick:q,disabled:N||!s.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition",children:N?"...":"Change"})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Email"}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))] mb-2",children:["Current: ",e.email]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"email",value:a,onChange:X=>u(X.target.value),placeholder:"New email",className:"flex-1 px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsxs("button",{onClick:H,disabled:N||!a.trim(),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center gap-2",children:[c.jsx(Gy,{size:16}),N?"...":"Change"]})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Password"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"password",value:f,onChange:X=>h(X.target.value),placeholder:"New password (min 6 chars)",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsx("input",{type:"password",value:p,onChange:X=>v(X.target.value),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))]"}),c.jsxs("button",{onClick:P,disabled:N||f!==p||f.length<6,className:"w-full py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] disabled:bg-[rgb(var(--color-border))] transition flex items-center justify-center gap-2",children:[c.jsx(Vy,{size:16}),N?"...":"Change Password"]})]})]}),c.jsxs("section",{className:"bg-[rgb(var(--color-surface))] p-6 rounded-xl border border-[rgb(var(--color-border))]",children:[c.jsx("h2",{className:"text-lg text-[rgb(var(--color-text))] font-semibold mb-4",children:"Verification"}),t.verified?c.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[c.jsx(Cc,{size:20}),c.jsx("span",{children:"Verified"}),c.jsx(fo,{size:20,className:"text-[rgb(var(--color-primary))]"})]}):t.verification_request?c.jsxs("div",{className:"text-yellow-600",children:["Pending: ",t.verification_request]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))] mb-4",children:" Apply for verification badge."}),c.jsx("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-[rgb(var(--color-primary))] text-[rgb(var(--color-text-on-primary))] rounded-lg hover:bg-[rgb(var(--color-accent))] transition",children:"Apply for Verification"}),b&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("textarea",{value:g,onChange:X=>x(X.target.value),placeholder:"Reason for verification (e.g., public figure, brand, etc.)",rows:3,className:"w-full px-3 py-2 border border-[rgb(var(--color-border))] rounded-lg focus:outline-none focus:border-[rgb(var(--color-accent))] resize-none"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:te,disabled:N||!g.trim(),className:"flex-1 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-[rgb(var(--color-border))] transition",children:N?"...":"Submit"}),c.jsx("button",{onClick:()=>{_(!1),x("")},className:"px-4 py-2 bg-[rgb(var(--color-border))] text-[rgb(var(--color-text))] rounded-lg hover:bg-[rgb(var(--color-surface-hover))] transition",children:"Cancel"})]})]})]})]})]})};function Lx(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const Ix=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ax=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Rx={};function Dp(e,t){return(Rx.jsx?Ax:Ix).test(e)}const Ox=/[ \t\n\f\r]/g;function zx(e){return typeof e=="object"?e.type==="text"?$p(e.value):!1:$p(e)}function $p(e){return e.replace(Ox,"")===""}class po{constructor(t,r,s){this.normal=r,this.property=t,s&&(this.space=s)}}po.prototype.normal={};po.prototype.property={};po.prototype.space=void 0;function hg(e,t){const r={},s={};for(const o of e)Object.assign(r,o.property),Object.assign(s,o.normal);return new po(r,s,t)}function Lc(e){return e.toLowerCase()}class un{constructor(t,r){this.attribute=r,this.property=t}}un.prototype.attribute="";un.prototype.booleanish=!1;un.prototype.boolean=!1;un.prototype.commaOrSpaceSeparated=!1;un.prototype.commaSeparated=!1;un.prototype.defined=!1;un.prototype.mustUseProperty=!1;un.prototype.number=!1;un.prototype.overloadedBoolean=!1;un.prototype.property="";un.prototype.spaceSeparated=!1;un.prototype.space=void 0;let Mx=0;const Ve=pi(),Ct=pi(),Ic=pi(),ue=pi(),lt=pi(),ns=pi(),yn=pi();function pi(){return 2**++Mx}const Ac=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ve,booleanish:Ct,commaOrSpaceSeparated:yn,commaSeparated:ns,number:ue,overloadedBoolean:Ic,spaceSeparated:lt},Symbol.toStringTag,{value:"Module"})),Ju=Object.keys(Ac);class Yc extends un{constructor(t,r,s,o){let a=-1;if(super(t,r),Fp(this,"space",o),typeof s=="number")for(;++a<Ju.length;){const u=Ju[a];Fp(this,Ju[a],(s&Ac[u])===Ac[u])}}}Yc.prototype.defined=!0;function Fp(e,t,r){r&&(e[t]=r)}function as(e){const t={},r={};for(const[s,o]of Object.entries(e.properties)){const a=new Yc(s,e.transform(e.attributes||{},s),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),t[s]=a,r[Lc(s)]=s,r[Lc(a.attribute)]=s}return new po(t,r,e.space)}const pg=as({properties:{ariaActiveDescendant:null,ariaAtomic:Ct,ariaAutoComplete:null,ariaBusy:Ct,ariaChecked:Ct,ariaColCount:ue,ariaColIndex:ue,ariaColSpan:ue,ariaControls:lt,ariaCurrent:null,ariaDescribedBy:lt,ariaDetails:null,ariaDisabled:Ct,ariaDropEffect:lt,ariaErrorMessage:null,ariaExpanded:Ct,ariaFlowTo:lt,ariaGrabbed:Ct,ariaHasPopup:null,ariaHidden:Ct,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:lt,ariaLevel:ue,ariaLive:null,ariaModal:Ct,ariaMultiLine:Ct,ariaMultiSelectable:Ct,ariaOrientation:null,ariaOwns:lt,ariaPlaceholder:null,ariaPosInSet:ue,ariaPressed:Ct,ariaReadOnly:Ct,ariaRelevant:null,ariaRequired:Ct,ariaRoleDescription:lt,ariaRowCount:ue,ariaRowIndex:ue,ariaRowSpan:ue,ariaSelected:Ct,ariaSetSize:ue,ariaSort:null,ariaValueMax:ue,ariaValueMin:ue,ariaValueNow:ue,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function mg(e,t){return t in e?e[t]:t}function gg(e,t){return mg(e,t.toLowerCase())}const Dx=as({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ns,acceptCharset:lt,accessKey:lt,action:null,allow:null,allowFullScreen:Ve,allowPaymentRequest:Ve,allowUserMedia:Ve,alt:null,as:null,async:Ve,autoCapitalize:null,autoComplete:lt,autoFocus:Ve,autoPlay:Ve,blocking:lt,capture:null,charSet:null,checked:Ve,cite:null,className:lt,cols:ue,colSpan:null,content:null,contentEditable:Ct,controls:Ve,controlsList:lt,coords:ue|ns,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ve,defer:Ve,dir:null,dirName:null,disabled:Ve,download:Ic,draggable:Ct,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ve,formTarget:null,headers:lt,height:ue,hidden:Ic,high:ue,href:null,hrefLang:null,htmlFor:lt,httpEquiv:lt,id:null,imageSizes:null,imageSrcSet:null,inert:Ve,inputMode:null,integrity:null,is:null,isMap:Ve,itemId:null,itemProp:lt,itemRef:lt,itemScope:Ve,itemType:lt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ve,low:ue,manifest:null,max:null,maxLength:ue,media:null,method:null,min:null,minLength:ue,multiple:Ve,muted:Ve,name:null,nonce:null,noModule:Ve,noValidate:Ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ve,optimum:ue,pattern:null,ping:lt,placeholder:null,playsInline:Ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ve,referrerPolicy:null,rel:lt,required:Ve,reversed:Ve,rows:ue,rowSpan:ue,sandbox:lt,scope:null,scoped:Ve,seamless:Ve,selected:Ve,shadowRootClonable:Ve,shadowRootDelegatesFocus:Ve,shadowRootMode:null,shape:null,size:ue,sizes:null,slot:null,span:ue,spellCheck:Ct,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ue,step:null,style:null,tabIndex:ue,target:null,title:null,translate:null,type:null,typeMustMatch:Ve,useMap:null,value:Ct,width:ue,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:lt,axis:null,background:null,bgColor:null,border:ue,borderColor:null,bottomMargin:ue,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ve,declare:Ve,event:null,face:null,frame:null,frameBorder:null,hSpace:ue,leftMargin:ue,link:null,longDesc:null,lowSrc:null,marginHeight:ue,marginWidth:ue,noResize:Ve,noHref:Ve,noShade:Ve,noWrap:Ve,object:null,profile:null,prompt:null,rev:null,rightMargin:ue,rules:null,scheme:null,scrolling:Ct,standby:null,summary:null,text:null,topMargin:ue,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ue,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ve,disableRemotePlayback:Ve,prefix:null,property:null,results:ue,security:null,unselectable:null},space:"html",transform:gg}),$x=as({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:yn,accentHeight:ue,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ue,amplitude:ue,arabicForm:null,ascent:ue,attributeName:null,attributeType:null,azimuth:ue,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ue,by:null,calcMode:null,capHeight:ue,className:lt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ue,diffuseConstant:ue,direction:null,display:null,dur:null,divisor:ue,dominantBaseline:null,download:Ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:ue,enableBackground:null,end:null,event:null,exponent:ue,externalResourcesRequired:null,fill:null,fillOpacity:ue,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ns,g2:ns,glyphName:ns,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ue,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ue,horizOriginX:ue,horizOriginY:ue,id:null,ideographic:ue,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ue,k:ue,k1:ue,k2:ue,k3:ue,k4:ue,kernelMatrix:yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ue,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ue,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ue,overlineThickness:ue,paintOrder:null,panose1:null,path:null,pathLength:ue,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:lt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ue,pointsAtY:ue,pointsAtZ:ue,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:yn,rev:yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:yn,requiredFeatures:yn,requiredFonts:yn,requiredFormats:yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ue,specularExponent:ue,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ue,strikethroughThickness:ue,string:null,stroke:null,strokeDashArray:yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ue,strokeOpacity:ue,strokeWidth:null,style:null,surfaceScale:ue,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:yn,tabIndex:ue,tableValues:null,target:null,targetX:ue,targetY:ue,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ue,underlineThickness:ue,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ue,values:null,vAlphabetic:ue,vMathematical:ue,vectorEffect:null,vHanging:ue,vIdeographic:ue,version:null,vertAdvY:ue,vertOriginX:ue,vertOriginY:ue,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ue,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:mg}),vg=as({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),yg=as({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:gg}),xg=as({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Fx={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ux=/[A-Z]/g,Up=/-[a-z]/g,Bx=/^data[-\w.:]+$/i;function qx(e,t){const r=Lc(t);let s=t,o=un;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Bx.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Up,Hx);s="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Up.test(a)){let u=a.replace(Ux,Vx);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}o=Yc}return new o(s,t)}function Vx(e){return"-"+e.toLowerCase()}function Hx(e){return e.charAt(1).toUpperCase()}const Wx=hg([pg,Dx,vg,yg,xg],"html"),Xc=hg([pg,$x,vg,yg,xg],"svg");function Gx(e){return e.join(" ").trim()}var Yi={},Yu,Bp;function Kx(){if(Bp)return Yu;Bp=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,f=/^\s+|\s+$/g,h=`
`,p="/",v="*",g="",x="comment",b="declaration";function _(k,E){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];E=E||{};var L=1,I=1;function q(Y){var K=Y.match(t);K&&(L+=K.length);var oe=Y.lastIndexOf(h);I=~oe?Y.length-oe:I+Y.length}function H(){var Y={line:L,column:I};return function(K){return K.position=new P(Y),ge(),K}}function P(Y){this.start=Y,this.end={line:L,column:I},this.source=E.source}P.prototype.content=k;function te(Y){var K=new Error(E.source+":"+L+":"+I+": "+Y);if(K.reason=Y,K.filename=E.source,K.line=L,K.column=I,K.source=k,!E.silent)throw K}function X(Y){var K=Y.exec(k);if(K){var oe=K[0];return q(oe),k=k.slice(oe.length),K}}function ge(){X(r)}function $(Y){var K;for(Y=Y||[];K=F();)K!==!1&&Y.push(K);return Y}function F(){var Y=H();if(!(p!=k.charAt(0)||v!=k.charAt(1))){for(var K=2;g!=k.charAt(K)&&(v!=k.charAt(K)||p!=k.charAt(K+1));)++K;if(K+=2,g===k.charAt(K-1))return te("End of comment missing");var oe=k.slice(2,K-2);return I+=2,q(oe),k=k.slice(K),I+=2,Y({type:x,comment:oe})}}function J(){var Y=H(),K=X(s);if(K){if(F(),!X(o))return te("property missing ':'");var oe=X(a),Z=Y({type:b,property:N(K[0].replace(e,g)),value:oe?N(oe[0].replace(e,g)):g});return X(u),Z}}function ae(){var Y=[];$(Y);for(var K;K=J();)K!==!1&&(Y.push(K),$(Y));return Y}return ge(),ae()}function N(k){return k?k.replace(f,g):g}return Yu=_,Yu}var qp;function Qx(){if(qp)return Yi;qp=1;var e=Yi&&Yi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.default=r;const t=e(Kx());function r(s,o){let a=null;if(!s||typeof s!="string")return a;const u=(0,t.default)(s),f=typeof o=="function";return u.forEach(h=>{if(h.type!=="declaration")return;const{property:p,value:v}=h;f?o(p,v,h):v&&(a=a||{},a[p]=v)}),a}return Yi}var Gs={},Vp;function Jx(){if(Vp)return Gs;Vp=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(p){return!p||r.test(p)||e.test(p)},u=function(p,v){return v.toUpperCase()},f=function(p,v){return"".concat(v,"-")},h=function(p,v){return v===void 0&&(v={}),a(p)?p:(p=p.toLowerCase(),v.reactCompat?p=p.replace(o,f):p=p.replace(s,f),p.replace(t,u))};return Gs.camelCase=h,Gs}var Ks,Hp;function Yx(){if(Hp)return Ks;Hp=1;var e=Ks&&Ks.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(Qx()),r=Jx();function s(o,a){var u={};return!o||typeof o!="string"||(0,t.default)(o,function(f,h){f&&h&&(u[(0,r.camelCase)(f,a)]=h)}),u}return s.default=s,Ks=s,Ks}var Xx=Yx();const Zx=Gl(Xx),bg=wg("end"),Zc=wg("start");function wg(e){return t;function t(r){const s=r&&r.position&&r.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function eb(e){const t=Zc(e),r=bg(e);if(t&&r)return{start:t,end:r}}function no(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Wp(e.position):"start"in e||"end"in e?Wp(e):"line"in e||"column"in e?Rc(e):""}function Rc(e){return Gp(e&&e.line)+":"+Gp(e&&e.column)}function Wp(e){return Rc(e&&e.start)+"-"+Rc(e&&e.end)}function Gp(e){return e&&typeof e=="number"?e:1}class Kt extends Error{constructor(t,r,s){super(),typeof r=="string"&&(s=r,r=void 0);let o="",a={},u=!1;if(r&&("line"in r&&"column"in r?a={place:r}:"start"in r&&"end"in r?a={place:r}:"type"in r?a={ancestors:[r],place:r.position}:a={...r}),typeof t=="string"?o=t:!a.cause&&t&&(u=!0,o=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof s=="string"){const h=s.indexOf(":");h===-1?a.ruleId=s:(a.source=s.slice(0,h),a.ruleId=s.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const f=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=f?f.line:void 0,this.name=no(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=u&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Kt.prototype.file="";Kt.prototype.name="";Kt.prototype.reason="";Kt.prototype.message="";Kt.prototype.stack="";Kt.prototype.column=void 0;Kt.prototype.line=void 0;Kt.prototype.ancestors=void 0;Kt.prototype.cause=void 0;Kt.prototype.fatal=void 0;Kt.prototype.place=void 0;Kt.prototype.ruleId=void 0;Kt.prototype.source=void 0;const ed={}.hasOwnProperty,tb=new Map,nb=/[A-Z]/g,rb=new Set(["table","tbody","thead","tfoot","tr"]),ib=new Set(["td","th"]),kg="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sb(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=hb(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=fb(r,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Xc:Wx,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=_g(o,e,void 0);return a&&typeof a!="string"?a:o.create(e,o.Fragment,{children:a||void 0},void 0)}function _g(e,t,r){if(t.type==="element")return ob(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return lb(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ub(e,t,r);if(t.type==="mdxjsEsm")return ab(e,t);if(t.type==="root")return cb(e,t,r);if(t.type==="text")return db(e,t)}function ob(e,t,r){const s=e.schema;let o=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(o=Xc,e.schema=o),e.ancestors.push(t);const a=jg(e,t.tagName,!1),u=pb(e,t);let f=nd(e,t);return rb.has(t.tagName)&&(f=f.filter(function(h){return typeof h=="string"?!zx(h):!0})),Sg(e,u,a,t),td(u,f),e.ancestors.pop(),e.schema=s,e.create(t,a,u,r)}function lb(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}lo(e,t.position)}function ab(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);lo(e,t.position)}function ub(e,t,r){const s=e.schema;let o=s;t.name==="svg"&&s.space==="html"&&(o=Xc,e.schema=o),e.ancestors.push(t);const a=t.name===null?e.Fragment:jg(e,t.name,!0),u=mb(e,t),f=nd(e,t);return Sg(e,u,a,t),td(u,f),e.ancestors.pop(),e.schema=s,e.create(t,a,u,r)}function cb(e,t,r){const s={};return td(s,nd(e,t)),e.create(t,e.Fragment,s,r)}function db(e,t){return t.value}function Sg(e,t,r,s){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=s)}function td(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function fb(e,t,r){return s;function s(o,a,u,f){const p=Array.isArray(u.children)?r:t;return f?p(a,u,f):p(a,u)}}function hb(e,t){return r;function r(s,o,a,u){const f=Array.isArray(a.children),h=Zc(s);return t(o,a,u,f,{columnNumber:h?h.column-1:void 0,fileName:e,lineNumber:h?h.line:void 0},void 0)}}function pb(e,t){const r={};let s,o;for(o in t.properties)if(o!=="children"&&ed.call(t.properties,o)){const a=gb(e,o,t.properties[o]);if(a){const[u,f]=a;e.tableCellAlignToStyle&&u==="align"&&typeof f=="string"&&ib.has(t.tagName)?s=f:r[u]=f}}if(s){const a=r.style||(r.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return r}function mb(e,t){const r={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const a=s.data.estree.body[0];a.type;const u=a.expression;u.type;const f=u.properties[0];f.type,Object.assign(r,e.evaluater.evaluateExpression(f.argument))}else lo(e,t.position);else{const o=s.name;let a;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const f=s.value.data.estree.body[0];f.type,a=e.evaluater.evaluateExpression(f.expression)}else lo(e,t.position);else a=s.value===null?!0:s.value;r[o]=a}return r}function nd(e,t){const r=[];let s=-1;const o=e.passKeys?new Map:tb;for(;++s<t.children.length;){const a=t.children[s];let u;if(e.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const p=o.get(h)||0;u=h+"-"+p,o.set(h,p+1)}}const f=_g(e,a,u);f!==void 0&&r.push(f)}return r}function gb(e,t,r){const s=qx(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=s.commaSeparated?Lx(r):Gx(r)),s.property==="style"){let o=typeof r=="object"?r:vb(e,String(r));return e.stylePropertyNameCase==="css"&&(o=yb(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&s.space?Fx[s.property]||s.property:s.attribute,r]}}function vb(e,t){try{return Zx(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const s=r,o=new Kt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=kg+"#cannot-parse-style-attribute",o}}function jg(e,t,r){let s;if(!r)s={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let a=-1,u;for(;++a<o.length;){const f=Dp(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};u=u?{type:"MemberExpression",object:u,property:f,computed:!!(a&&f.type==="Literal"),optional:!1}:f}s=u}else s=Dp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const o=s.value;return ed.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(s);lo(e)}function lo(e,t){const r=new Kt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=kg+"#cannot-handle-mdx-estrees-without-createevaluater",r}function yb(e){const t={};let r;for(r in e)ed.call(e,r)&&(t[xb(r)]=e[r]);return t}function xb(e){let t=e.replace(nb,bb);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function bb(e){return"-"+e.toLowerCase()}const Xu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wb={};function rd(e,t){const r=wb,s=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,o=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return Cg(e,s,o)}function Cg(e,t,r){if(kb(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Kp(e.children,t,r)}return Array.isArray(e)?Kp(e,t,r):""}function Kp(e,t,r){const s=[];let o=-1;for(;++o<e.length;)s[o]=Cg(e[o],t,r);return s.join("")}function kb(e){return!!(e&&typeof e=="object")}const Qp=document.createElement("i");function id(e){const t="&"+e+";";Qp.innerHTML=t;const r=Qp.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function xn(e,t,r,s){const o=e.length;let a=0,u;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,r=r>0?r:0,s.length<1e4)u=Array.from(s),u.unshift(t,r),e.splice(...u);else for(r&&e.splice(t,r);a<s.length;)u=s.slice(a,a+1e4),u.unshift(t,0),e.splice(...u),a+=1e4,t+=1e4}function Pn(e,t){return e.length>0?(xn(e,e.length,0,t),e):t}const Jp={}.hasOwnProperty;function Ng(e){const t={};let r=-1;for(;++r<e.length;)_b(t,e[r]);return t}function _b(e,t){let r;for(r in t){const o=(Jp.call(e,r)?e[r]:void 0)||(e[r]={}),a=t[r];let u;if(a)for(u in a){Jp.call(o,u)||(o[u]=[]);const f=a[u];Sb(o[u],Array.isArray(f)?f:f?[f]:[])}}}function Sb(e,t){let r=-1;const s=[];for(;++r<t.length;)(t[r].add==="after"?e:s).push(t[r]);xn(e,0,0,s)}function Eg(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Wn(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zt=Vr(/[A-Za-z]/),Gt=Vr(/[\dA-Za-z]/),jb=Vr(/[#-'*+\--9=?A-Z^-~]/);function Bl(e){return e!==null&&(e<32||e===127)}const Oc=Vr(/\d/),Cb=Vr(/[\dA-Fa-f]/),Nb=Vr(/[!-/:-@[-`{-~]/);function Oe(e){return e!==null&&e<-2}function it(e){return e!==null&&(e<0||e===32)}function Ke(e){return e===-2||e===-1||e===32}const Ql=Vr(new RegExp("\\p{P}|\\p{S}","u")),di=Vr(/\s/);function Vr(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function us(e){const t=[];let r=-1,s=0,o=0;for(;++r<e.length;){const a=e.charCodeAt(r);let u="";if(a===37&&Gt(e.charCodeAt(r+1))&&Gt(e.charCodeAt(r+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(u=String.fromCharCode(a));else if(a>55295&&a<57344){const f=e.charCodeAt(r+1);a<56320&&f>56319&&f<57344?(u=String.fromCharCode(a,f),o=1):u=""}else u=String.fromCharCode(a);u&&(t.push(e.slice(s,r),encodeURIComponent(u)),s=r+o+1,u=""),o&&(r+=o,o=0)}return t.join("")+e.slice(s)}function Xe(e,t,r,s){const o=s?s-1:Number.POSITIVE_INFINITY;let a=0;return u;function u(h){return Ke(h)?(e.enter(r),f(h)):t(h)}function f(h){return Ke(h)&&a++<o?(e.consume(h),f):(e.exit(r),t(h))}}const Eb={tokenize:Tb};function Tb(e){const t=e.attempt(this.parser.constructs.contentInitial,s,o);let r;return t;function s(f){if(f===null){e.consume(f);return}return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Xe(e,t,"linePrefix")}function o(f){return e.enter("paragraph"),a(f)}function a(f){const h=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=h),r=h,u(f)}function u(f){if(f===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(f);return}return Oe(f)?(e.consume(f),e.exit("chunkText"),a):(e.consume(f),u)}}const Pb={tokenize:Lb},Yp={tokenize:Ib};function Lb(e){const t=this,r=[];let s=0,o,a,u;return f;function f(I){if(s<r.length){const q=r[s];return t.containerState=q[1],e.attempt(q[0].continuation,h,p)(I)}return p(I)}function h(I){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&L();const q=t.events.length;let H=q,P;for(;H--;)if(t.events[H][0]==="exit"&&t.events[H][1].type==="chunkFlow"){P=t.events[H][1].end;break}E(s);let te=q;for(;te<t.events.length;)t.events[te][1].end={...P},te++;return xn(t.events,H+1,0,t.events.slice(q)),t.events.length=te,p(I)}return f(I)}function p(I){if(s===r.length){if(!o)return x(I);if(o.currentConstruct&&o.currentConstruct.concrete)return _(I);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Yp,v,g)(I)}function v(I){return o&&L(),E(s),x(I)}function g(I){return t.parser.lazy[t.now().line]=s!==r.length,u=t.now().offset,_(I)}function x(I){return t.containerState={},e.attempt(Yp,b,_)(I)}function b(I){return s++,r.push([t.currentConstruct,t.containerState]),x(I)}function _(I){if(I===null){o&&L(),E(0),e.consume(I);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),N(I)}function N(I){if(I===null){k(e.exit("chunkFlow"),!0),E(0),e.consume(I);return}return Oe(I)?(e.consume(I),k(e.exit("chunkFlow")),s=0,t.interrupt=void 0,f):(e.consume(I),N)}function k(I,q){const H=t.sliceStream(I);if(q&&H.push(null),I.previous=a,a&&(a.next=I),a=I,o.defineSkip(I.start),o.write(H),t.parser.lazy[I.start.line]){let P=o.events.length;for(;P--;)if(o.events[P][1].start.offset<u&&(!o.events[P][1].end||o.events[P][1].end.offset>u))return;const te=t.events.length;let X=te,ge,$;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){if(ge){$=t.events[X][1].end;break}ge=!0}for(E(s),P=te;P<t.events.length;)t.events[P][1].end={...$},P++;xn(t.events,X+1,0,t.events.slice(te)),t.events.length=P}}function E(I){let q=r.length;for(;q-- >I;){const H=r[q];t.containerState=H[1],H[0].exit.call(t,e)}r.length=I}function L(){o.write([null]),a=void 0,o=void 0,t.containerState._closeFlow=void 0}}function Ib(e,t,r){return Xe(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ss(e){if(e===null||it(e)||di(e))return 1;if(Ql(e))return 2}function Jl(e,t,r){const s=[];let o=-1;for(;++o<e.length;){const a=e[o].resolveAll;a&&!s.includes(a)&&(t=a(t,r),s.push(a))}return t}const zc={name:"attention",resolveAll:Ab,tokenize:Rb};function Ab(e,t){let r=-1,s,o,a,u,f,h,p,v;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(s=r;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[s][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;h=e[s][1].end.offset-e[s][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const g={...e[s][1].end},x={...e[r][1].start};Xp(g,-h),Xp(x,h),u={type:h>1?"strongSequence":"emphasisSequence",start:g,end:{...e[s][1].end}},f={type:h>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:x},a={type:h>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[r][1].start}},o={type:h>1?"strong":"emphasis",start:{...u.start},end:{...f.end}},e[s][1].end={...u.start},e[r][1].start={...f.end},p=[],e[s][1].end.offset-e[s][1].start.offset&&(p=Pn(p,[["enter",e[s][1],t],["exit",e[s][1],t]])),p=Pn(p,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",a,t]]),p=Pn(p,Jl(t.parser.constructs.insideSpan.null,e.slice(s+1,r),t)),p=Pn(p,[["exit",a,t],["enter",f,t],["exit",f,t],["exit",o,t]]),e[r][1].end.offset-e[r][1].start.offset?(v=2,p=Pn(p,[["enter",e[r][1],t],["exit",e[r][1],t]])):v=0,xn(e,s-1,r-s+3,p),r=s+p.length-v-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function Rb(e,t){const r=this.parser.constructs.attentionMarkers.null,s=this.previous,o=ss(s);let a;return u;function u(h){return a=h,e.enter("attentionSequence"),f(h)}function f(h){if(h===a)return e.consume(h),f;const p=e.exit("attentionSequence"),v=ss(h),g=!v||v===2&&o||r.includes(h),x=!o||o===2&&v||r.includes(s);return p._open=!!(a===42?g:g&&(o||!x)),p._close=!!(a===42?x:x&&(v||!g)),t(h)}}function Xp(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ob={name:"autolink",tokenize:zb};function zb(e,t,r){let s=0;return o;function o(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(b){return Zt(b)?(e.consume(b),u):b===64?r(b):p(b)}function u(b){return b===43||b===45||b===46||Gt(b)?(s=1,f(b)):p(b)}function f(b){return b===58?(e.consume(b),s=0,h):(b===43||b===45||b===46||Gt(b))&&s++<32?(e.consume(b),f):(s=0,p(b))}function h(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Bl(b)?r(b):(e.consume(b),h)}function p(b){return b===64?(e.consume(b),v):jb(b)?(e.consume(b),p):r(b)}function v(b){return Gt(b)?g(b):r(b)}function g(b){return b===46?(e.consume(b),s=0,v):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):x(b)}function x(b){if((b===45||Gt(b))&&s++<63){const _=b===45?x:g;return e.consume(b),_}return r(b)}}const mo={partial:!0,tokenize:Mb};function Mb(e,t,r){return s;function s(a){return Ke(a)?Xe(e,o,"linePrefix")(a):o(a)}function o(a){return a===null||Oe(a)?t(a):r(a)}}const Tg={continuation:{tokenize:$b},exit:Fb,name:"blockQuote",tokenize:Db};function Db(e,t,r){const s=this;return o;function o(u){if(u===62){const f=s.containerState;return f.open||(e.enter("blockQuote",{_container:!0}),f.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),a}return r(u)}function a(u){return Ke(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function $b(e,t,r){const s=this;return o;function o(u){return Ke(u)?Xe(e,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):a(u)}function a(u){return e.attempt(Tg,t,r)(u)}}function Fb(e){e.exit("blockQuote")}const Pg={name:"characterEscape",tokenize:Ub};function Ub(e,t,r){return s;function s(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),o}function o(a){return Nb(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(a)}}const Lg={name:"characterReference",tokenize:Bb};function Bb(e,t,r){const s=this;let o=0,a,u;return f;function f(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),h}function h(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),a=31,u=Gt,v(g))}function p(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,u=Cb,v):(e.enter("characterReferenceValue"),a=7,u=Oc,v(g))}function v(g){if(g===59&&o){const x=e.exit("characterReferenceValue");return u===Gt&&!id(s.sliceSerialize(x))?r(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(g)&&o++<a?(e.consume(g),v):r(g)}}const Zp={partial:!0,tokenize:Vb},em={concrete:!0,name:"codeFenced",tokenize:qb};function qb(e,t,r){const s=this,o={partial:!0,tokenize:H};let a=0,u=0,f;return h;function h(P){return p(P)}function p(P){const te=s.events[s.events.length-1];return a=te&&te[1].type==="linePrefix"?te[2].sliceSerialize(te[1],!0).length:0,f=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),v(P)}function v(P){return P===f?(u++,e.consume(P),v):u<3?r(P):(e.exit("codeFencedFenceSequence"),Ke(P)?Xe(e,g,"whitespace")(P):g(P))}function g(P){return P===null||Oe(P)?(e.exit("codeFencedFence"),s.interrupt?t(P):e.check(Zp,N,q)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(P))}function x(P){return P===null||Oe(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(P)):Ke(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Xe(e,b,"whitespace")(P)):P===96&&P===f?r(P):(e.consume(P),x)}function b(P){return P===null||Oe(P)?g(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),_(P))}function _(P){return P===null||Oe(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(P)):P===96&&P===f?r(P):(e.consume(P),_)}function N(P){return e.attempt(o,q,k)(P)}function k(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),E}function E(P){return a>0&&Ke(P)?Xe(e,L,"linePrefix",a+1)(P):L(P)}function L(P){return P===null||Oe(P)?e.check(Zp,N,q)(P):(e.enter("codeFlowValue"),I(P))}function I(P){return P===null||Oe(P)?(e.exit("codeFlowValue"),L(P)):(e.consume(P),I)}function q(P){return e.exit("codeFenced"),t(P)}function H(P,te,X){let ge=0;return $;function $(K){return P.enter("lineEnding"),P.consume(K),P.exit("lineEnding"),F}function F(K){return P.enter("codeFencedFence"),Ke(K)?Xe(P,J,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):J(K)}function J(K){return K===f?(P.enter("codeFencedFenceSequence"),ae(K)):X(K)}function ae(K){return K===f?(ge++,P.consume(K),ae):ge>=u?(P.exit("codeFencedFenceSequence"),Ke(K)?Xe(P,Y,"whitespace")(K):Y(K)):X(K)}function Y(K){return K===null||Oe(K)?(P.exit("codeFencedFence"),te(K)):X(K)}}}function Vb(e,t,r){const s=this;return o;function o(u){return u===null?r(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a)}function a(u){return s.parser.lazy[s.now().line]?r(u):t(u)}}const Zu={name:"codeIndented",tokenize:Wb},Hb={partial:!0,tokenize:Gb};function Wb(e,t,r){const s=this;return o;function o(p){return e.enter("codeIndented"),Xe(e,a,"linePrefix",5)(p)}function a(p){const v=s.events[s.events.length-1];return v&&v[1].type==="linePrefix"&&v[2].sliceSerialize(v[1],!0).length>=4?u(p):r(p)}function u(p){return p===null?h(p):Oe(p)?e.attempt(Hb,u,h)(p):(e.enter("codeFlowValue"),f(p))}function f(p){return p===null||Oe(p)?(e.exit("codeFlowValue"),u(p)):(e.consume(p),f)}function h(p){return e.exit("codeIndented"),t(p)}}function Gb(e,t,r){const s=this;return o;function o(u){return s.parser.lazy[s.now().line]?r(u):Oe(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),o):Xe(e,a,"linePrefix",5)(u)}function a(u){const f=s.events[s.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(u):Oe(u)?o(u):r(u)}}const Kb={name:"codeText",previous:Jb,resolve:Qb,tokenize:Yb};function Qb(e){let t=e.length-4,r=3,s,o;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=r;++s<t;)if(e[s][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(s=r-1,t++;++s<=t;)o===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(o=s):(s===t||e[s][1].type==="lineEnding")&&(e[o][1].type="codeTextData",s!==o+2&&(e[o][1].end=e[s-1][1].end,e.splice(o+2,s-o-2),t-=s-o-2,s=o+2),o=void 0);return e}function Jb(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Yb(e,t,r){let s=0,o,a;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),f(g)}function f(g){return g===96?(e.consume(g),s++,f):(e.exit("codeTextSequence"),h(g))}function h(g){return g===null?r(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),h):g===96?(a=e.enter("codeTextSequence"),o=0,v(g)):Oe(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||Oe(g)?(e.exit("codeTextData"),h(g)):(e.consume(g),p)}function v(g){return g===96?(e.consume(g),o++,v):o===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(a.type="codeTextData",p(g))}}class Xb{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const s=r??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,r,s){const o=r||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return s&&Qs(this.left,s),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Qs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Qs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Qs(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Qs(this.left,r.reverse())}}}function Qs(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function Ig(e){const t={};let r=-1,s,o,a,u,f,h,p;const v=new Xb(e);for(;++r<v.length;){for(;r in t;)r=t[r];if(s=v.get(r),r&&s[1].type==="chunkFlow"&&v.get(r-1)[1].type==="listItemPrefix"&&(h=s[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,Zb(v,r)),r=t[r],p=!0);else if(s[1]._container){for(a=r,o=void 0;a--;)if(u=v.get(a),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(o&&(v.get(o)[1].type="lineEndingBlank"),u[1].type="lineEnding",o=a);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;o&&(s[1].end={...v.get(o)[1].start},f=v.slice(o,r),f.unshift(s),v.splice(o,r-o+1,f))}}return xn(e,0,Number.POSITIVE_INFINITY,v.slice(0)),!p}function Zb(e,t){const r=e.get(t)[1],s=e.get(t)[2];let o=t-1;const a=[];let u=r._tokenizer;u||(u=s.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const f=u.events,h=[],p={};let v,g,x=-1,b=r,_=0,N=0;const k=[N];for(;b;){for(;e.get(++o)[1]!==b;);a.push(o),b._tokenizer||(v=s.sliceStream(b),b.next||v.push(null),g&&u.defineSkip(b.start),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(v),b._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),g=b,b=b.next}for(b=r;++x<f.length;)f[x][0]==="exit"&&f[x-1][0]==="enter"&&f[x][1].type===f[x-1][1].type&&f[x][1].start.line!==f[x][1].end.line&&(N=x+1,k.push(N),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(u.events=[],b?(b._tokenizer=void 0,b.previous=void 0):k.pop(),x=k.length;x--;){const E=f.slice(k[x],k[x+1]),L=a.pop();h.push([L,L+E.length-1]),e.splice(L,2,E)}for(h.reverse(),x=-1;++x<h.length;)p[_+h[x][0]]=_+h[x][1],_+=h[x][1]-h[x][0]-1;return p}const ew={resolve:nw,tokenize:rw},tw={partial:!0,tokenize:iw};function nw(e){return Ig(e),e}function rw(e,t){let r;return s;function s(f){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),o(f)}function o(f){return f===null?a(f):Oe(f)?e.check(tw,u,a)(f):(e.consume(f),o)}function a(f){return e.exit("chunkContent"),e.exit("content"),t(f)}function u(f){return e.consume(f),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,o}}function iw(e,t,r){const s=this;return o;function o(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Xe(e,a,"linePrefix")}function a(u){if(u===null||Oe(u))return r(u);const f=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?t(u):e.interrupt(s.parser.constructs.flow,r,t)(u)}}function Ag(e,t,r,s,o,a,u,f,h){const p=h||Number.POSITIVE_INFINITY;let v=0;return g;function g(E){return E===60?(e.enter(s),e.enter(o),e.enter(a),e.consume(E),e.exit(a),x):E===null||E===32||E===41||Bl(E)?r(E):(e.enter(s),e.enter(u),e.enter(f),e.enter("chunkString",{contentType:"string"}),N(E))}function x(E){return E===62?(e.enter(a),e.consume(E),e.exit(a),e.exit(o),e.exit(s),t):(e.enter(f),e.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===62?(e.exit("chunkString"),e.exit(f),x(E)):E===null||E===60||Oe(E)?r(E):(e.consume(E),E===92?_:b)}function _(E){return E===60||E===62||E===92?(e.consume(E),b):b(E)}function N(E){return!v&&(E===null||E===41||it(E))?(e.exit("chunkString"),e.exit(f),e.exit(u),e.exit(s),t(E)):v<p&&E===40?(e.consume(E),v++,N):E===41?(e.consume(E),v--,N):E===null||E===32||E===40||Bl(E)?r(E):(e.consume(E),E===92?k:N)}function k(E){return E===40||E===41||E===92?(e.consume(E),N):N(E)}}function Rg(e,t,r,s,o,a){const u=this;let f=0,h;return p;function p(b){return e.enter(s),e.enter(o),e.consume(b),e.exit(o),e.enter(a),v}function v(b){return f>999||b===null||b===91||b===93&&!h||b===94&&!f&&"_hiddenFootnoteSupport"in u.parser.constructs?r(b):b===93?(e.exit(a),e.enter(o),e.consume(b),e.exit(o),e.exit(s),t):Oe(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),v):(e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||b===91||b===93||Oe(b)||f++>999?(e.exit("chunkString"),v(b)):(e.consume(b),h||(h=!Ke(b)),b===92?x:g)}function x(b){return b===91||b===92||b===93?(e.consume(b),f++,g):g(b)}}function Og(e,t,r,s,o,a){let u;return f;function f(x){return x===34||x===39||x===40?(e.enter(s),e.enter(o),e.consume(x),e.exit(o),u=x===40?41:x,h):r(x)}function h(x){return x===u?(e.enter(o),e.consume(x),e.exit(o),e.exit(s),t):(e.enter(a),p(x))}function p(x){return x===u?(e.exit(a),h(u)):x===null?r(x):Oe(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),Xe(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),v(x))}function v(x){return x===u||x===null||Oe(x)?(e.exit("chunkString"),p(x)):(e.consume(x),x===92?g:v)}function g(x){return x===u||x===92?(e.consume(x),v):v(x)}}function ro(e,t){let r;return s;function s(o){return Oe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),r=!0,s):Ke(o)?Xe(e,s,r?"linePrefix":"lineSuffix")(o):t(o)}}const sw={name:"definition",tokenize:lw},ow={partial:!0,tokenize:aw};function lw(e,t,r){const s=this;let o;return a;function a(b){return e.enter("definition"),u(b)}function u(b){return Rg.call(s,e,f,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function f(b){return o=Wn(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),h):r(b)}function h(b){return it(b)?ro(e,p)(b):p(b)}function p(b){return Ag(e,v,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function v(b){return e.attempt(ow,g,g)(b)}function g(b){return Ke(b)?Xe(e,x,"whitespace")(b):x(b)}function x(b){return b===null||Oe(b)?(e.exit("definition"),s.parser.defined.push(o),t(b)):r(b)}}function aw(e,t,r){return s;function s(f){return it(f)?ro(e,o)(f):r(f)}function o(f){return Og(e,a,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function a(f){return Ke(f)?Xe(e,u,"whitespace")(f):u(f)}function u(f){return f===null||Oe(f)?t(f):r(f)}}const uw={name:"hardBreakEscape",tokenize:cw};function cw(e,t,r){return s;function s(a){return e.enter("hardBreakEscape"),e.consume(a),o}function o(a){return Oe(a)?(e.exit("hardBreakEscape"),t(a)):r(a)}}const dw={name:"headingAtx",resolve:fw,tokenize:hw};function fw(e,t){let r=e.length-2,s=3,o,a;return e[s][1].type==="whitespace"&&(s+=2),r-2>s&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&e[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(o={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},a={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},xn(e,s,r-s+1,[["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t]])),e}function hw(e,t,r){let s=0;return o;function o(v){return e.enter("atxHeading"),a(v)}function a(v){return e.enter("atxHeadingSequence"),u(v)}function u(v){return v===35&&s++<6?(e.consume(v),u):v===null||it(v)?(e.exit("atxHeadingSequence"),f(v)):r(v)}function f(v){return v===35?(e.enter("atxHeadingSequence"),h(v)):v===null||Oe(v)?(e.exit("atxHeading"),t(v)):Ke(v)?Xe(e,f,"whitespace")(v):(e.enter("atxHeadingText"),p(v))}function h(v){return v===35?(e.consume(v),h):(e.exit("atxHeadingSequence"),f(v))}function p(v){return v===null||v===35||it(v)?(e.exit("atxHeadingText"),f(v)):(e.consume(v),p)}}const pw=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tm=["pre","script","style","textarea"],mw={concrete:!0,name:"htmlFlow",resolveTo:yw,tokenize:xw},gw={partial:!0,tokenize:ww},vw={partial:!0,tokenize:bw};function yw(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xw(e,t,r){const s=this;let o,a,u,f,h;return p;function p(C){return v(C)}function v(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),g}function g(C){return C===33?(e.consume(C),x):C===47?(e.consume(C),a=!0,N):C===63?(e.consume(C),o=3,s.interrupt?t:S):Zt(C)?(e.consume(C),u=String.fromCharCode(C),k):r(C)}function x(C){return C===45?(e.consume(C),o=2,b):C===91?(e.consume(C),o=5,f=0,_):Zt(C)?(e.consume(C),o=4,s.interrupt?t:S):r(C)}function b(C){return C===45?(e.consume(C),s.interrupt?t:S):r(C)}function _(C){const ie="CDATA[";return C===ie.charCodeAt(f++)?(e.consume(C),f===ie.length?s.interrupt?t:J:_):r(C)}function N(C){return Zt(C)?(e.consume(C),u=String.fromCharCode(C),k):r(C)}function k(C){if(C===null||C===47||C===62||it(C)){const ie=C===47,me=u.toLowerCase();return!ie&&!a&&tm.includes(me)?(o=1,s.interrupt?t(C):J(C)):pw.includes(u.toLowerCase())?(o=6,ie?(e.consume(C),E):s.interrupt?t(C):J(C)):(o=7,s.interrupt&&!s.parser.lazy[s.now().line]?r(C):a?L(C):I(C))}return C===45||Gt(C)?(e.consume(C),u+=String.fromCharCode(C),k):r(C)}function E(C){return C===62?(e.consume(C),s.interrupt?t:J):r(C)}function L(C){return Ke(C)?(e.consume(C),L):$(C)}function I(C){return C===47?(e.consume(C),$):C===58||C===95||Zt(C)?(e.consume(C),q):Ke(C)?(e.consume(C),I):$(C)}function q(C){return C===45||C===46||C===58||C===95||Gt(C)?(e.consume(C),q):H(C)}function H(C){return C===61?(e.consume(C),P):Ke(C)?(e.consume(C),H):I(C)}function P(C){return C===null||C===60||C===61||C===62||C===96?r(C):C===34||C===39?(e.consume(C),h=C,te):Ke(C)?(e.consume(C),P):X(C)}function te(C){return C===h?(e.consume(C),h=null,ge):C===null||Oe(C)?r(C):(e.consume(C),te)}function X(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||it(C)?H(C):(e.consume(C),X)}function ge(C){return C===47||C===62||Ke(C)?I(C):r(C)}function $(C){return C===62?(e.consume(C),F):r(C)}function F(C){return C===null||Oe(C)?J(C):Ke(C)?(e.consume(C),F):r(C)}function J(C){return C===45&&o===2?(e.consume(C),oe):C===60&&o===1?(e.consume(C),Z):C===62&&o===4?(e.consume(C),R):C===63&&o===3?(e.consume(C),S):C===93&&o===5?(e.consume(C),ee):Oe(C)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(gw,U,ae)(C)):C===null||Oe(C)?(e.exit("htmlFlowData"),ae(C)):(e.consume(C),J)}function ae(C){return e.check(vw,Y,U)(C)}function Y(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),K}function K(C){return C===null||Oe(C)?ae(C):(e.enter("htmlFlowData"),J(C))}function oe(C){return C===45?(e.consume(C),S):J(C)}function Z(C){return C===47?(e.consume(C),u="",M):J(C)}function M(C){if(C===62){const ie=u.toLowerCase();return tm.includes(ie)?(e.consume(C),R):J(C)}return Zt(C)&&u.length<8?(e.consume(C),u+=String.fromCharCode(C),M):J(C)}function ee(C){return C===93?(e.consume(C),S):J(C)}function S(C){return C===62?(e.consume(C),R):C===45&&o===2?(e.consume(C),S):J(C)}function R(C){return C===null||Oe(C)?(e.exit("htmlFlowData"),U(C)):(e.consume(C),R)}function U(C){return e.exit("htmlFlow"),t(C)}}function bw(e,t,r){const s=this;return o;function o(u){return Oe(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a):r(u)}function a(u){return s.parser.lazy[s.now().line]?r(u):t(u)}}function ww(e,t,r){return s;function s(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(mo,t,r)}}const kw={name:"htmlText",tokenize:_w};function _w(e,t,r){const s=this;let o,a,u;return f;function f(S){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(S),h}function h(S){return S===33?(e.consume(S),p):S===47?(e.consume(S),H):S===63?(e.consume(S),I):Zt(S)?(e.consume(S),X):r(S)}function p(S){return S===45?(e.consume(S),v):S===91?(e.consume(S),a=0,_):Zt(S)?(e.consume(S),L):r(S)}function v(S){return S===45?(e.consume(S),b):r(S)}function g(S){return S===null?r(S):S===45?(e.consume(S),x):Oe(S)?(u=g,Z(S)):(e.consume(S),g)}function x(S){return S===45?(e.consume(S),b):g(S)}function b(S){return S===62?oe(S):S===45?x(S):g(S)}function _(S){const R="CDATA[";return S===R.charCodeAt(a++)?(e.consume(S),a===R.length?N:_):r(S)}function N(S){return S===null?r(S):S===93?(e.consume(S),k):Oe(S)?(u=N,Z(S)):(e.consume(S),N)}function k(S){return S===93?(e.consume(S),E):N(S)}function E(S){return S===62?oe(S):S===93?(e.consume(S),E):N(S)}function L(S){return S===null||S===62?oe(S):Oe(S)?(u=L,Z(S)):(e.consume(S),L)}function I(S){return S===null?r(S):S===63?(e.consume(S),q):Oe(S)?(u=I,Z(S)):(e.consume(S),I)}function q(S){return S===62?oe(S):I(S)}function H(S){return Zt(S)?(e.consume(S),P):r(S)}function P(S){return S===45||Gt(S)?(e.consume(S),P):te(S)}function te(S){return Oe(S)?(u=te,Z(S)):Ke(S)?(e.consume(S),te):oe(S)}function X(S){return S===45||Gt(S)?(e.consume(S),X):S===47||S===62||it(S)?ge(S):r(S)}function ge(S){return S===47?(e.consume(S),oe):S===58||S===95||Zt(S)?(e.consume(S),$):Oe(S)?(u=ge,Z(S)):Ke(S)?(e.consume(S),ge):oe(S)}function $(S){return S===45||S===46||S===58||S===95||Gt(S)?(e.consume(S),$):F(S)}function F(S){return S===61?(e.consume(S),J):Oe(S)?(u=F,Z(S)):Ke(S)?(e.consume(S),F):ge(S)}function J(S){return S===null||S===60||S===61||S===62||S===96?r(S):S===34||S===39?(e.consume(S),o=S,ae):Oe(S)?(u=J,Z(S)):Ke(S)?(e.consume(S),J):(e.consume(S),Y)}function ae(S){return S===o?(e.consume(S),o=void 0,K):S===null?r(S):Oe(S)?(u=ae,Z(S)):(e.consume(S),ae)}function Y(S){return S===null||S===34||S===39||S===60||S===61||S===96?r(S):S===47||S===62||it(S)?ge(S):(e.consume(S),Y)}function K(S){return S===47||S===62||it(S)?ge(S):r(S)}function oe(S){return S===62?(e.consume(S),e.exit("htmlTextData"),e.exit("htmlText"),t):r(S)}function Z(S){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),M}function M(S){return Ke(S)?Xe(e,ee,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):ee(S)}function ee(S){return e.enter("htmlTextData"),u(S)}}const sd={name:"labelEnd",resolveAll:Nw,resolveTo:Ew,tokenize:Tw},Sw={tokenize:Pw},jw={tokenize:Lw},Cw={tokenize:Iw};function Nw(e){let t=-1;const r=[];for(;++t<e.length;){const s=e[t][1];if(r.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const o=s.type==="labelImage"?4:2;s.type="data",t+=o}}return e.length!==r.length&&xn(e,0,e.length,r),e}function Ew(e,t){let r=e.length,s=0,o,a,u,f;for(;r--;)if(o=e[r][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[r][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(u){if(e[r][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=r,o.type!=="labelLink")){s=2;break}}else o.type==="labelEnd"&&(u=r);const h={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[a][1].start},end:{...e[u][1].end}},v={type:"labelText",start:{...e[a+s+2][1].end},end:{...e[u-2][1].start}};return f=[["enter",h,t],["enter",p,t]],f=Pn(f,e.slice(a+1,a+s+3)),f=Pn(f,[["enter",v,t]]),f=Pn(f,Jl(t.parser.constructs.insideSpan.null,e.slice(a+s+4,u-3),t)),f=Pn(f,[["exit",v,t],e[u-2],e[u-1],["exit",p,t]]),f=Pn(f,e.slice(u+1)),f=Pn(f,[["exit",h,t]]),xn(e,a,e.length,f),e}function Tw(e,t,r){const s=this;let o=s.events.length,a,u;for(;o--;)if((s.events[o][1].type==="labelImage"||s.events[o][1].type==="labelLink")&&!s.events[o][1]._balanced){a=s.events[o][1];break}return f;function f(x){return a?a._inactive?g(x):(u=s.parser.defined.includes(Wn(s.sliceSerialize({start:a.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),h):r(x)}function h(x){return x===40?e.attempt(Sw,v,u?v:g)(x):x===91?e.attempt(jw,v,u?p:g)(x):u?v(x):g(x)}function p(x){return e.attempt(Cw,v,g)(x)}function v(x){return t(x)}function g(x){return a._balanced=!0,r(x)}}function Pw(e,t,r){return s;function s(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),o}function o(g){return it(g)?ro(e,a)(g):a(g)}function a(g){return g===41?v(g):Ag(e,u,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function u(g){return it(g)?ro(e,h)(g):v(g)}function f(g){return r(g)}function h(g){return g===34||g===39||g===40?Og(e,p,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):v(g)}function p(g){return it(g)?ro(e,v)(g):v(g)}function v(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):r(g)}}function Lw(e,t,r){const s=this;return o;function o(f){return Rg.call(s,e,a,u,"reference","referenceMarker","referenceString")(f)}function a(f){return s.parser.defined.includes(Wn(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(f):r(f)}function u(f){return r(f)}}function Iw(e,t,r){return s;function s(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),o}function o(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):r(a)}}const Aw={name:"labelStartImage",resolveAll:sd.resolveAll,tokenize:Rw};function Rw(e,t,r){const s=this;return o;function o(f){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(f),e.exit("labelImageMarker"),a}function a(f){return f===91?(e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelImage"),u):r(f)}function u(f){return f===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(f):t(f)}}const Ow={name:"labelStartLink",resolveAll:sd.resolveAll,tokenize:zw};function zw(e,t,r){const s=this;return o;function o(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),a}function a(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(u):t(u)}}const ec={name:"lineEnding",tokenize:Mw};function Mw(e,t){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Xe(e,t,"linePrefix")}}const Ml={name:"thematicBreak",tokenize:Dw};function Dw(e,t,r){let s=0,o;return a;function a(p){return e.enter("thematicBreak"),u(p)}function u(p){return o=p,f(p)}function f(p){return p===o?(e.enter("thematicBreakSequence"),h(p)):s>=3&&(p===null||Oe(p))?(e.exit("thematicBreak"),t(p)):r(p)}function h(p){return p===o?(e.consume(p),s++,h):(e.exit("thematicBreakSequence"),Ke(p)?Xe(e,f,"whitespace")(p):f(p))}}const an={continuation:{tokenize:Bw},exit:Vw,name:"list",tokenize:Uw},$w={partial:!0,tokenize:Hw},Fw={partial:!0,tokenize:qw};function Uw(e,t,r){const s=this,o=s.events[s.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,u=0;return f;function f(b){const _=s.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!s.containerState.marker||b===s.containerState.marker:Oc(b)){if(s.containerState.type||(s.containerState.type=_,e.enter(_,{_container:!0})),_==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Ml,r,p)(b):p(b);if(!s.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),h(b)}return r(b)}function h(b){return Oc(b)&&++u<10?(e.consume(b),h):(!s.interrupt||u<2)&&(s.containerState.marker?b===s.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):r(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||b,e.check(mo,s.interrupt?r:v,e.attempt($w,x,g))}function v(b){return s.containerState.initialBlankLine=!0,a++,x(b)}function g(b){return Ke(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),x):r(b)}function x(b){return s.containerState.size=a+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function Bw(e,t,r){const s=this;return s.containerState._closeFlow=void 0,e.check(mo,o,a);function o(f){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Xe(e,t,"listItemIndent",s.containerState.size+1)(f)}function a(f){return s.containerState.furtherBlankLines||!Ke(f)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,u(f)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(Fw,t,u)(f))}function u(f){return s.containerState._closeFlow=!0,s.interrupt=void 0,Xe(e,e.attempt(an,t,r),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function qw(e,t,r){const s=this;return Xe(e,o,"listItemIndent",s.containerState.size+1);function o(a){const u=s.events[s.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===s.containerState.size?t(a):r(a)}}function Vw(e){e.exit(this.containerState.type)}function Hw(e,t,r){const s=this;return Xe(e,o,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const u=s.events[s.events.length-1];return!Ke(a)&&u&&u[1].type==="listItemPrefixWhitespace"?t(a):r(a)}}const nm={name:"setextUnderline",resolveTo:Ww,tokenize:Gw};function Ww(e,t){let r=e.length,s,o,a;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){s=r;break}e[r][1].type==="paragraph"&&(o=r)}else e[r][1].type==="content"&&e.splice(r,1),!a&&e[r][1].type==="definition"&&(a=r);const u={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",a?(e.splice(o,0,["enter",u,t]),e.splice(a+1,0,["exit",e[s][1],t]),e[s][1].end={...e[a][1].end}):e[s][1]=u,e.push(["exit",u,t]),e}function Gw(e,t,r){const s=this;let o;return a;function a(p){let v=s.events.length,g;for(;v--;)if(s.events[v][1].type!=="lineEnding"&&s.events[v][1].type!=="linePrefix"&&s.events[v][1].type!=="content"){g=s.events[v][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||g)?(e.enter("setextHeadingLine"),o=p,u(p)):r(p)}function u(p){return e.enter("setextHeadingLineSequence"),f(p)}function f(p){return p===o?(e.consume(p),f):(e.exit("setextHeadingLineSequence"),Ke(p)?Xe(e,h,"lineSuffix")(p):h(p))}function h(p){return p===null||Oe(p)?(e.exit("setextHeadingLine"),t(p)):r(p)}}const Kw={tokenize:Qw};function Qw(e){const t=this,r=e.attempt(mo,s,e.attempt(this.parser.constructs.flowInitial,o,Xe(e,e.attempt(this.parser.constructs.flow,o,e.attempt(ew,o)),"linePrefix")));return r;function s(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function o(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const Jw={resolveAll:Mg()},Yw=zg("string"),Xw=zg("text");function zg(e){return{resolveAll:Mg(e==="text"?Zw:void 0),tokenize:t};function t(r){const s=this,o=this.parser.constructs[e],a=r.attempt(o,u,f);return u;function u(v){return p(v)?a(v):f(v)}function f(v){if(v===null){r.consume(v);return}return r.enter("data"),r.consume(v),h}function h(v){return p(v)?(r.exit("data"),a(v)):(r.consume(v),h)}function p(v){if(v===null)return!0;const g=o[v];let x=-1;if(g)for(;++x<g.length;){const b=g[x];if(!b.previous||b.previous.call(s,s.previous))return!0}return!1}}}function Mg(e){return t;function t(r,s){let o=-1,a;for(;++o<=r.length;)a===void 0?r[o]&&r[o][1].type==="data"&&(a=o,o++):(!r[o]||r[o][1].type!=="data")&&(o!==a+2&&(r[a][1].end=r[o-1][1].end,r.splice(a+2,o-a-2),o=a+2),a=void 0);return e?e(r,s):r}}function Zw(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const s=e[r-1][1],o=t.sliceStream(s);let a=o.length,u=-1,f=0,h;for(;a--;){const p=o[a];if(typeof p=="string"){for(u=p.length;p.charCodeAt(u-1)===32;)f++,u--;if(u)break;u=-1}else if(p===-2)h=!0,f++;else if(p!==-1){a++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(f=0),f){const p={type:r===e.length||h||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?u:s.start._bufferIndex+u,_index:s.start._index+a,line:s.end.line,column:s.end.column-f,offset:s.end.offset-f},end:{...s.end}};s.end={...p.start},s.start.offset===s.end.offset?Object.assign(s,p):(e.splice(r,0,["enter",p,t],["exit",p,t]),r+=2)}r++}return e}const e3={42:an,43:an,45:an,48:an,49:an,50:an,51:an,52:an,53:an,54:an,55:an,56:an,57:an,62:Tg},t3={91:sw},n3={[-2]:Zu,[-1]:Zu,32:Zu},r3={35:dw,42:Ml,45:[nm,Ml],60:mw,61:nm,95:Ml,96:em,126:em},i3={38:Lg,92:Pg},s3={[-5]:ec,[-4]:ec,[-3]:ec,33:Aw,38:Lg,42:zc,60:[Ob,kw],91:Ow,92:[uw,Pg],93:sd,95:zc,96:Kb},o3={null:[zc,Jw]},l3={null:[42,95]},a3={null:[]},u3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:l3,contentInitial:t3,disable:a3,document:e3,flow:r3,flowInitial:n3,insideSpan:o3,string:i3,text:s3},Symbol.toStringTag,{value:"Module"}));function c3(e,t,r){let s={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const o={},a=[];let u=[],f=[];const h={attempt:te(H),check:te(P),consume:L,enter:I,exit:q,interrupt:te(P,{interrupt:!0})},p={code:null,containerState:{},defineSkip:N,events:[],now:_,parser:e,previous:null,sliceSerialize:x,sliceStream:b,write:g};let v=t.tokenize.call(p,h);return t.resolveAll&&a.push(t),p;function g(F){return u=Pn(u,F),k(),u[u.length-1]!==null?[]:(X(t,0),p.events=Jl(a,p.events,p),p.events)}function x(F,J){return f3(b(F),J)}function b(F){return d3(u,F)}function _(){const{_bufferIndex:F,_index:J,line:ae,column:Y,offset:K}=s;return{_bufferIndex:F,_index:J,line:ae,column:Y,offset:K}}function N(F){o[F.line]=F.column,$()}function k(){let F;for(;s._index<u.length;){const J=u[s._index];if(typeof J=="string")for(F=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===F&&s._bufferIndex<J.length;)E(J.charCodeAt(s._bufferIndex));else E(J)}}function E(F){v=v(F)}function L(F){Oe(F)?(s.line++,s.column=1,s.offset+=F===-3?2:1,$()):F!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===u[s._index].length&&(s._bufferIndex=-1,s._index++)),p.previous=F}function I(F,J){const ae=J||{};return ae.type=F,ae.start=_(),p.events.push(["enter",ae,p]),f.push(ae),ae}function q(F){const J=f.pop();return J.end=_(),p.events.push(["exit",J,p]),J}function H(F,J){X(F,J.from)}function P(F,J){J.restore()}function te(F,J){return ae;function ae(Y,K,oe){let Z,M,ee,S;return Array.isArray(Y)?U(Y):"tokenize"in Y?U([Y]):R(Y);function R(pe){return ze;function ze(Le){const we=Le!==null&&pe[Le],Je=Le!==null&&pe.null,ht=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(Je)?Je:Je?[Je]:[]];return U(ht)(Le)}}function U(pe){return Z=pe,M=0,pe.length===0?oe:C(pe[M])}function C(pe){return ze;function ze(Le){return S=ge(),ee=pe,pe.partial||(p.currentConstruct=pe),pe.name&&p.parser.constructs.disable.null.includes(pe.name)?me():pe.tokenize.call(J?Object.assign(Object.create(p),J):p,h,ie,me)(Le)}}function ie(pe){return F(ee,S),K}function me(pe){return S.restore(),++M<Z.length?C(Z[M]):oe}}}function X(F,J){F.resolveAll&&!a.includes(F)&&a.push(F),F.resolve&&xn(p.events,J,p.events.length-J,F.resolve(p.events.slice(J),p)),F.resolveTo&&(p.events=F.resolveTo(p.events,p))}function ge(){const F=_(),J=p.previous,ae=p.currentConstruct,Y=p.events.length,K=Array.from(f);return{from:Y,restore:oe};function oe(){s=F,p.previous=J,p.currentConstruct=ae,p.events.length=Y,f=K,$()}}function $(){s.line in o&&s.column<2&&(s.column=o[s.line],s.offset+=o[s.line]-1)}}function d3(e,t){const r=t.start._index,s=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;let u;if(r===o)u=[e[r].slice(s,a)];else{if(u=e.slice(r,o),s>-1){const f=u[0];typeof f=="string"?u[0]=f.slice(s):u.shift()}a>0&&u.push(e[o].slice(0,a))}return u}function f3(e,t){let r=-1;const s=[];let o;for(;++r<e.length;){const a=e[r];let u;if(typeof a=="string")u=a;else switch(a){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&o)continue;u=" ";break}default:u=String.fromCharCode(a)}o=a===-2,s.push(u)}return s.join("")}function h3(e){const s={constructs:Ng([u3,...(e||{}).extensions||[]]),content:o(Eb),defined:[],document:o(Pb),flow:o(Kw),lazy:{},string:o(Yw),text:o(Xw)};return s;function o(a){return u;function u(f){return c3(s,a,f)}}}function p3(e){for(;!Ig(e););return e}const rm=/[\0\t\n\r]/g;function m3(){let e=1,t="",r=!0,s;return o;function o(a,u,f){const h=[];let p,v,g,x,b;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(u||void 0).decode(a)),g=0,t="",r&&(a.charCodeAt(0)===65279&&g++,r=void 0);g<a.length;){if(rm.lastIndex=g,p=rm.exec(a),x=p&&p.index!==void 0?p.index:a.length,b=a.charCodeAt(x),!p){t=a.slice(g);break}if(b===10&&g===x&&s)h.push(-3),s=void 0;else switch(s&&(h.push(-5),s=void 0),g<x&&(h.push(a.slice(g,x)),e+=x-g),b){case 0:{h.push(65533),e++;break}case 9:{for(v=Math.ceil(e/4)*4,h.push(-2);e++<v;)h.push(-1);break}case 10:{h.push(-4),e=1;break}default:s=!0,e=1}g=x+1}return f&&(s&&h.push(-5),t&&h.push(t),h.push(null)),h}}const g3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function v3(e){return e.replace(g3,y3)}function y3(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const o=r.charCodeAt(1),a=o===120||o===88;return Eg(r.slice(a?2:1),a?16:10)}return id(r)||e}const Dg={}.hasOwnProperty;function x3(e,t,r){return typeof t!="string"&&(r=t,t=void 0),b3(r)(p3(h3(r).document().write(m3()(e,t,!0))))}function b3(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ln),autolinkProtocol:ge,autolinkEmail:ge,atxHeading:a(rt),blockQuote:a(Je),characterEscape:ge,characterReference:ge,codeFenced:a(ht),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(ht,u),codeText:a(ye,u),codeTextData:ge,data:ge,codeFlowValue:ge,definition:a(zt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(ve),hardBreakEscape:a(pt),hardBreakTrailing:a(pt),htmlFlow:a(Mt,u),htmlFlowData:ge,htmlText:a(Mt,u),htmlTextData:ge,image:a(cn),label:u,link:a(Ln),listItem:a(en),listItemValue:x,listOrdered:a(Ut,g),listUnordered:a(Ut),paragraph:a(Dt),reference:C,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(rt),strong:a(In),thematicBreak:a(bn)},exit:{atxHeading:h(),atxHeadingSequence:H,autolink:h(),autolinkEmail:we,autolinkProtocol:Le,blockQuote:h(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:pe,characterReference:ze,codeFenced:h(k),codeFencedFence:N,codeFencedFenceInfo:b,codeFencedFenceMeta:_,codeFlowValue:$,codeIndented:h(E),codeText:h(K),codeTextData:$,data:$,definition:h(),definitionDestinationString:q,definitionLabelString:L,definitionTitleString:I,emphasis:h(),hardBreakEscape:h(J),hardBreakTrailing:h(J),htmlFlow:h(ae),htmlFlowData:$,htmlText:h(Y),htmlTextData:$,image:h(Z),label:ee,labelText:M,lineEnding:F,link:h(oe),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ie,resourceDestinationString:S,resourceTitleString:R,resource:U,setextHeading:h(X),setextHeadingLineSequence:te,setextHeadingText:P,strong:h(),thematicBreak:h()}};$g(t,(e||{}).mdastExtensions||[]);const r={};return s;function s(G){let se={type:"root",children:[]};const Te={stack:[se],tokenStack:[],config:t,enter:f,exit:p,buffer:u,resume:v,data:r},Ue=[];let $e=-1;for(;++$e<G.length;)if(G[$e][1].type==="listOrdered"||G[$e][1].type==="listUnordered")if(G[$e][0]==="enter")Ue.push($e);else{const Ye=Ue.pop();$e=o(G,Ye,$e)}for($e=-1;++$e<G.length;){const Ye=t[G[$e][0]];Dg.call(Ye,G[$e][1].type)&&Ye[G[$e][1].type].call(Object.assign({sliceSerialize:G[$e][2].sliceSerialize},Te),G[$e][1])}if(Te.tokenStack.length>0){const Ye=Te.tokenStack[Te.tokenStack.length-1];(Ye[1]||im).call(Te,void 0,Ye[0])}for(se.position={start:$r(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:$r(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<t.transforms.length;)se=t.transforms[$e](se)||se;return se}function o(G,se,Te){let Ue=se-1,$e=-1,Ye=!1,vt,at,dn,wn;for(;++Ue<=Te;){const _t=G[Ue];switch(_t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_t[0]==="enter"?$e++:$e--,wn=void 0;break}case"lineEndingBlank":{_t[0]==="enter"&&(vt&&!wn&&!$e&&!dn&&(dn=Ue),wn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wn=void 0}if(!$e&&_t[0]==="enter"&&_t[1].type==="listItemPrefix"||$e===-1&&_t[0]==="exit"&&(_t[1].type==="listUnordered"||_t[1].type==="listOrdered")){if(vt){let Qe=Ue;for(at=void 0;Qe--;){const Be=G[Qe];if(Be[1].type==="lineEnding"||Be[1].type==="lineEndingBlank"){if(Be[0]==="exit")continue;at&&(G[at][1].type="lineEndingBlank",Ye=!0),Be[1].type="lineEnding",at=Qe}else if(!(Be[1].type==="linePrefix"||Be[1].type==="blockQuotePrefix"||Be[1].type==="blockQuotePrefixWhitespace"||Be[1].type==="blockQuoteMarker"||Be[1].type==="listItemIndent"))break}dn&&(!at||dn<at)&&(vt._spread=!0),vt.end=Object.assign({},at?G[at][1].start:_t[1].end),G.splice(at||Ue,0,["exit",vt,_t[2]]),Ue++,Te++}if(_t[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},_t[1].start),end:void 0};vt=Qe,G.splice(Ue,0,["enter",Qe,_t[2]]),Ue++,Te++,dn=void 0,wn=!0}}}return G[se][1]._spread=Ye,Te}function a(G,se){return Te;function Te(Ue){f.call(this,G(Ue),Ue),se&&se.call(this,Ue)}}function u(){this.stack.push({type:"fragment",children:[]})}function f(G,se,Te){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([se,Te||void 0]),G.position={start:$r(se.start),end:void 0}}function h(G){return se;function se(Te){G&&G.call(this,Te),p.call(this,Te)}}function p(G,se){const Te=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==G.type&&(se?se.call(this,G,Ue[0]):(Ue[1]||im).call(this,G,Ue[0]));else throw new Error("Cannot close `"+G.type+"` ("+no({start:G.start,end:G.end})+"): its not open");Te.position.end=$r(G.end)}function v(){return rd(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function x(G){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function b(){const G=this.resume(),se=this.stack[this.stack.length-1];se.lang=G}function _(){const G=this.resume(),se=this.stack[this.stack.length-1];se.meta=G}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G.replace(/(\r?\n|\r)$/g,"")}function L(G){const se=this.resume(),Te=this.stack[this.stack.length-1];Te.label=se,Te.identifier=Wn(this.sliceSerialize(G)).toLowerCase()}function I(){const G=this.resume(),se=this.stack[this.stack.length-1];se.title=G}function q(){const G=this.resume(),se=this.stack[this.stack.length-1];se.url=G}function H(G){const se=this.stack[this.stack.length-1];if(!se.depth){const Te=this.sliceSerialize(G).length;se.depth=Te}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function te(G){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function X(){this.data.setextHeadingSlurpLineEnding=void 0}function ge(G){const Te=this.stack[this.stack.length-1].children;let Ue=Te[Te.length-1];(!Ue||Ue.type!=="text")&&(Ue=Qt(),Ue.position={start:$r(G.start),end:void 0},Te.push(Ue)),this.stack.push(Ue)}function $(G){const se=this.stack.pop();se.value+=this.sliceSerialize(G),se.position.end=$r(G.end)}function F(G){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Te=se.children[se.children.length-1];Te.position.end=$r(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(se.type)&&(ge.call(this,G),$.call(this,G))}function J(){this.data.atHardBreak=!0}function ae(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function Y(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function K(){const G=this.resume(),se=this.stack[this.stack.length-1];se.value=G}function oe(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=se,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function Z(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=se,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function M(G){const se=this.sliceSerialize(G),Te=this.stack[this.stack.length-2];Te.label=v3(se),Te.identifier=Wn(se).toLowerCase()}function ee(){const G=this.stack[this.stack.length-1],se=this.resume(),Te=this.stack[this.stack.length-1];if(this.data.inReference=!0,Te.type==="link"){const Ue=G.children;Te.children=Ue}else Te.alt=se}function S(){const G=this.resume(),se=this.stack[this.stack.length-1];se.url=G}function R(){const G=this.resume(),se=this.stack[this.stack.length-1];se.title=G}function U(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function ie(G){const se=this.resume(),Te=this.stack[this.stack.length-1];Te.label=se,Te.identifier=Wn(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function me(G){this.data.characterReferenceType=G.type}function pe(G){const se=this.sliceSerialize(G),Te=this.data.characterReferenceType;let Ue;Te?(Ue=Eg(se,Te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=id(se);const $e=this.stack[this.stack.length-1];$e.value+=Ue}function ze(G){const se=this.stack.pop();se.position.end=$r(G.end)}function Le(G){$.call(this,G);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(G)}function we(G){$.call(this,G);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(G)}function Je(){return{type:"blockquote",children:[]}}function ht(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function zt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ve(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function pt(){return{type:"break"}}function Mt(){return{type:"html",value:""}}function cn(){return{type:"image",title:null,url:"",alt:null}}function Ln(){return{type:"link",title:null,url:"",children:[]}}function Ut(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function en(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function Dt(){return{type:"paragraph",children:[]}}function In(){return{type:"strong",children:[]}}function Qt(){return{type:"text",value:""}}function bn(){return{type:"thematicBreak"}}}function $r(e){return{line:e.line,column:e.column,offset:e.offset}}function $g(e,t){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?$g(e,s):w3(e,s)}}function w3(e,t){let r;for(r in t)if(Dg.call(t,r))switch(r){case"canContainEols":{const s=t[r];s&&e[r].push(...s);break}case"transforms":{const s=t[r];s&&e[r].push(...s);break}case"enter":case"exit":{const s=t[r];s&&Object.assign(e[r],s);break}}}function im(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+no({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+no({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+no({start:t.start,end:t.end})+") is still open")}function k3(e){const t=this;t.parser=r;function r(s){return x3(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function _3(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function S3(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function j3(e,t){const r=t.value?t.value+`
`:"",s={};t.lang&&(s.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:s,children:[{type:"text",value:r}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function C3(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function N3(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function E3(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),o=us(s.toLowerCase()),a=e.footnoteOrder.indexOf(s);let u,f=e.footnoteCounts.get(s);f===void 0?(f=0,e.footnoteOrder.push(s),u=e.footnoteOrder.length):u=a+1,f+=1,e.footnoteCounts.set(s,f);const h={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+o,id:r+"fnref-"+o+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return e.patch(t,p),e.applyData(t,p)}function T3(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function P3(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function Fg(e,t){const r=t.referenceType;let s="]";if(r==="collapsed"?s+="[]":r==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const o=e.all(t),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const u=o[o.length-1];return u&&u.type==="text"?u.value+=s:o.push({type:"text",value:s}),o}function L3(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return Fg(e,t);const o={src:us(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(o.title=s.title);const a={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,a),e.applyData(t,a)}function I3(e,t){const r={src:us(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function A3(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const s={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,s),e.applyData(t,s)}function R3(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return Fg(e,t);const o={href:us(s.url||"")};s.title!==null&&s.title!==void 0&&(o.title=s.title);const a={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function O3(e,t){const r={href:us(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function z3(e,t,r){const s=e.all(t),o=r?M3(r):Ug(t),a={},u=[];if(typeof t.checked=="boolean"){const v=s[0];let g;v&&v.type==="element"&&v.tagName==="p"?g=v:(g={type:"element",tagName:"p",properties:{},children:[]},s.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let f=-1;for(;++f<s.length;){const v=s[f];(o||f!==0||v.type!=="element"||v.tagName!=="p")&&u.push({type:"text",value:`
`}),v.type==="element"&&v.tagName==="p"&&!o?u.push(...v.children):u.push(v)}const h=s[s.length-1];h&&(o||h.type!=="element"||h.tagName!=="p")&&u.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:a,children:u};return e.patch(t,p),e.applyData(t,p)}function M3(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let s=-1;for(;!t&&++s<r.length;)t=Ug(r[s])}return t}function Ug(e){const t=e.spread;return t??e.children.length>1}function D3(e,t){const r={},s=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++o<s.length;){const u=s[o];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function $3(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function F3(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function U3(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function B3(e,t){const r=e.all(t),s=r.shift(),o=[];if(s){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],u),o.push(u)}if(r.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},f=Zc(t.children[1]),h=bg(t.children[t.children.length-1]);f&&h&&(u.position={start:f,end:h}),o.push(u)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)}function q3(e,t,r){const s=r?r.children:void 0,a=(s?s.indexOf(t):1)===0?"th":"td",u=r&&r.type==="table"?r.align:void 0,f=u?u.length:t.children.length;let h=-1;const p=[];for(;++h<f;){const g=t.children[h],x={},b=u?u[h]:void 0;b&&(x.align=b);let _={type:"element",tagName:a,properties:x,children:[]};g&&(_.children=e.all(g),e.patch(g,_),_=e.applyData(g,_)),p.push(_)}const v={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,v),e.applyData(t,v)}function V3(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const sm=9,om=32;function H3(e){const t=String(e),r=/\r?\n|\r/g;let s=r.exec(t),o=0;const a=[];for(;s;)a.push(lm(t.slice(o,s.index),o>0,!0),s[0]),o=s.index+s[0].length,s=r.exec(t);return a.push(lm(t.slice(o),o>0,!1)),a.join("")}function lm(e,t,r){let s=0,o=e.length;if(t){let a=e.codePointAt(s);for(;a===sm||a===om;)s++,a=e.codePointAt(s)}if(r){let a=e.codePointAt(o-1);for(;a===sm||a===om;)o--,a=e.codePointAt(o-1)}return o>s?e.slice(s,o):""}function W3(e,t){const r={type:"text",value:H3(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function G3(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const K3={blockquote:_3,break:S3,code:j3,delete:C3,emphasis:N3,footnoteReference:E3,heading:T3,html:P3,imageReference:L3,image:I3,inlineCode:A3,linkReference:R3,link:O3,listItem:z3,list:D3,paragraph:$3,root:F3,strong:U3,table:B3,tableCell:V3,tableRow:q3,text:W3,thematicBreak:G3,toml:Ll,yaml:Ll,definition:Ll,footnoteDefinition:Ll};function Ll(){}const Bg=-1,Yl=0,io=1,ql=2,od=3,ld=4,ad=5,ud=6,qg=7,Vg=8,am=typeof self=="object"?self:globalThis,Q3=(e,t)=>{const r=(o,a)=>(e.set(a,o),o),s=o=>{if(e.has(o))return e.get(o);const[a,u]=t[o];switch(a){case Yl:case Bg:return r(u,o);case io:{const f=r([],o);for(const h of u)f.push(s(h));return f}case ql:{const f=r({},o);for(const[h,p]of u)f[s(h)]=s(p);return f}case od:return r(new Date(u),o);case ld:{const{source:f,flags:h}=u;return r(new RegExp(f,h),o)}case ad:{const f=r(new Map,o);for(const[h,p]of u)f.set(s(h),s(p));return f}case ud:{const f=r(new Set,o);for(const h of u)f.add(s(h));return f}case qg:{const{name:f,message:h}=u;return r(new am[f](h),o)}case Vg:return r(BigInt(u),o);case"BigInt":return r(Object(BigInt(u)),o);case"ArrayBuffer":return r(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:f}=new Uint8Array(u);return r(new DataView(f),u)}}return r(new am[a](u),o)};return s},um=e=>Q3(new Map,e)(0),Xi="",{toString:J3}={},{keys:Y3}=Object,Js=e=>{const t=typeof e;if(t!=="object"||!e)return[Yl,t];const r=J3.call(e).slice(8,-1);switch(r){case"Array":return[io,Xi];case"Object":return[ql,Xi];case"Date":return[od,Xi];case"RegExp":return[ld,Xi];case"Map":return[ad,Xi];case"Set":return[ud,Xi];case"DataView":return[io,r]}return r.includes("Array")?[io,r]:r.includes("Error")?[qg,r]:[ql,r]},Il=([e,t])=>e===Yl&&(t==="function"||t==="symbol"),X3=(e,t,r,s)=>{const o=(u,f)=>{const h=s.push(u)-1;return r.set(f,h),h},a=u=>{if(r.has(u))return r.get(u);let[f,h]=Js(u);switch(f){case Yl:{let v=u;switch(h){case"bigint":f=Vg,v=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+h);v=null;break;case"undefined":return o([Bg],u)}return o([f,v],u)}case io:{if(h){let x=u;return h==="DataView"?x=new Uint8Array(u.buffer):h==="ArrayBuffer"&&(x=new Uint8Array(u)),o([h,[...x]],u)}const v=[],g=o([f,v],u);for(const x of u)v.push(a(x));return g}case ql:{if(h)switch(h){case"BigInt":return o([h,u.toString()],u);case"Boolean":case"Number":case"String":return o([h,u.valueOf()],u)}if(t&&"toJSON"in u)return a(u.toJSON());const v=[],g=o([f,v],u);for(const x of Y3(u))(e||!Il(Js(u[x])))&&v.push([a(x),a(u[x])]);return g}case od:return o([f,u.toISOString()],u);case ld:{const{source:v,flags:g}=u;return o([f,{source:v,flags:g}],u)}case ad:{const v=[],g=o([f,v],u);for(const[x,b]of u)(e||!(Il(Js(x))||Il(Js(b))))&&v.push([a(x),a(b)]);return g}case ud:{const v=[],g=o([f,v],u);for(const x of u)(e||!Il(Js(x)))&&v.push(a(x));return g}}const{message:p}=u;return o([f,{name:h,message:p}],u)};return a},cm=(e,{json:t,lossy:r}={})=>{const s=[];return X3(!(t||r),!!t,new Map,s)(e),s},Vl=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?um(cm(e,t)):structuredClone(e):(e,t)=>um(cm(e,t));function Z3(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function e4(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function t4(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||Z3,s=e.options.footnoteBackLabel||e4,o=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let h=-1;for(;++h<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[h]);if(!p)continue;const v=e.all(p),g=String(p.identifier).toUpperCase(),x=us(g.toLowerCase());let b=0;const _=[],N=e.footnoteCounts.get(g);for(;N!==void 0&&++b<=N;){_.length>0&&_.push({type:"text",value:" "});let L=typeof r=="string"?r:r(h,b);typeof L=="string"&&(L={type:"text",value:L}),_.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(h,b),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const k=v[v.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const L=k.children[k.children.length-1];L&&L.type==="text"?L.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(..._)}else v.push(..._);const E={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(v,!0)};e.patch(p,E),f.push(E)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Vl(u),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(f,!0)},{type:"text",value:`
`}]}}const Xl=(function(e){if(e==null)return s4;if(typeof e=="function")return Zl(e);if(typeof e=="object")return Array.isArray(e)?n4(e):r4(e);if(typeof e=="string")return i4(e);throw new Error("Expected function, string, or object as test")});function n4(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Xl(e[r]);return Zl(s);function s(...o){let a=-1;for(;++a<t.length;)if(t[a].apply(this,o))return!0;return!1}}function r4(e){const t=e;return Zl(r);function r(s){const o=s;let a;for(a in e)if(o[a]!==t[a])return!1;return!0}}function i4(e){return Zl(t);function t(r){return r&&r.type===e}}function Zl(e){return t;function t(r,s,o){return!!(o4(r)&&e.call(this,r,typeof s=="number"?s:void 0,o||void 0))}}function s4(){return!0}function o4(e){return e!==null&&typeof e=="object"&&"type"in e}const Hg=[],l4=!0,Mc=!1,a4="skip";function Wg(e,t,r,s){let o;typeof t=="function"&&typeof r!="function"?(s=r,r=t):o=t;const a=Xl(o),u=s?-1:1;f(e,void 0,[])();function f(h,p,v){const g=h&&typeof h=="object"?h:{};if(typeof g.type=="string"){const b=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return x;function x(){let b=Hg,_,N,k;if((!t||a(h,p,v[v.length-1]||void 0))&&(b=u4(r(h,v)),b[0]===Mc))return b;if("children"in h&&h.children){const E=h;if(E.children&&b[0]!==a4)for(N=(s?E.children.length:-1)+u,k=v.concat(E);N>-1&&N<E.children.length;){const L=E.children[N];if(_=f(L,N,k)(),_[0]===Mc)return _;N=typeof _[1]=="number"?_[1]:N+u}}return b}}}function u4(e){return Array.isArray(e)?e:typeof e=="number"?[l4,e]:e==null?Hg:[e]}function cd(e,t,r,s){let o,a,u;typeof t=="function"&&typeof r!="function"?(a=void 0,u=t,o=r):(a=t,u=r,o=s),Wg(e,a,f,o);function f(h,p){const v=p[p.length-1],g=v?v.children.indexOf(h):void 0;return u(h,g,v)}}const Dc={}.hasOwnProperty,c4={};function d4(e,t){const r=t||c4,s=new Map,o=new Map,a=new Map,u={...K3,...r.handlers},f={all:p,applyData:h4,definitionById:s,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:u,one:h,options:r,patch:f4,wrap:m4};return cd(e,function(v){if(v.type==="definition"||v.type==="footnoteDefinition"){const g=v.type==="definition"?s:o,x=String(v.identifier).toUpperCase();g.has(x)||g.set(x,v)}}),f;function h(v,g){const x=v.type,b=f.handlers[x];if(Dc.call(f.handlers,x)&&b)return b(f,v,g);if(f.options.passThrough&&f.options.passThrough.includes(x)){if("children"in v){const{children:N,...k}=v,E=Vl(k);return E.children=f.all(v),E}return Vl(v)}return(f.options.unknownHandler||p4)(f,v,g)}function p(v){const g=[];if("children"in v){const x=v.children;let b=-1;for(;++b<x.length;){const _=f.one(x[b],v);if(_){if(b&&x[b-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=dm(_.value)),!Array.isArray(_)&&_.type==="element")){const N=_.children[0];N&&N.type==="text"&&(N.value=dm(N.value))}Array.isArray(_)?g.push(..._):g.push(_)}}}return g}}function f4(e,t){e.position&&(t.position=eb(e))}function h4(e,t){let r=t;if(e&&e.data){const s=e.data.hName,o=e.data.hChildren,a=e.data.hProperties;if(typeof s=="string")if(r.type==="element")r.tagName=s;else{const u="children"in r?r.children:[r];r={type:"element",tagName:s,properties:{},children:u}}r.type==="element"&&a&&Object.assign(r.properties,Vl(a)),"children"in r&&r.children&&o!==null&&o!==void 0&&(r.children=o)}return r}function p4(e,t){const r=t.data||{},s="value"in t&&!(Dc.call(r,"hProperties")||Dc.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function m4(e,t){const r=[];let s=-1;for(t&&r.push({type:"text",value:`
`});++s<e.length;)s&&r.push({type:"text",value:`
`}),r.push(e[s]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function dm(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function fm(e,t){const r=d4(e,t),s=r.one(e,void 0),o=t4(r),a=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function g4(e,t){return e&&"run"in e?async function(r,s){const o=fm(r,{file:s,...t});await e.run(o,s)}:function(r,s){return fm(r,{file:s,...e||t})}}function hm(e){if(e)throw e}var tc,pm;function v4(){if(pm)return tc;pm=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},a=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var v=e.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!v&&!g)return!1;var x;for(x in p);return typeof x>"u"||e.call(p,x)},u=function(p,v){r&&v.name==="__proto__"?r(p,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):p[v.name]=v.newValue},f=function(p,v){if(v==="__proto__")if(e.call(p,v)){if(s)return s(p,v).value}else return;return p[v]};return tc=function h(){var p,v,g,x,b,_,N=arguments[0],k=1,E=arguments.length,L=!1;for(typeof N=="boolean"&&(L=N,N=arguments[1]||{},k=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});k<E;++k)if(p=arguments[k],p!=null)for(v in p)g=f(N,v),x=f(p,v),N!==x&&(L&&x&&(a(x)||(b=o(x)))?(b?(b=!1,_=g&&o(g)?g:[]):_=g&&a(g)?g:{},u(N,{name:v,newValue:h(L,_,x)})):typeof x<"u"&&u(N,{name:v,newValue:x}));return N},tc}var y4=v4();const nc=Gl(y4);function $c(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function x4(){const e=[],t={run:r,use:s};return t;function r(...o){let a=-1;const u=o.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);f(null,...o);function f(h,...p){const v=e[++a];let g=-1;if(h){u(h);return}for(;++g<o.length;)(p[g]===null||p[g]===void 0)&&(p[g]=o[g]);o=p,v?b4(v,f)(...p):u(null,...p)}}function s(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function b4(e,t){let r;return s;function s(...u){const f=e.length>u.length;let h;f&&u.push(o);try{h=e.apply(this,u)}catch(p){const v=p;if(f&&r)throw v;return o(v)}f||(h&&h.then&&typeof h.then=="function"?h.then(a,o):h instanceof Error?o(h):a(h))}function o(u,...f){r||(r=!0,t(u,...f))}function a(u){o(null,u)}}const er={basename:w4,dirname:k4,extname:_4,join:S4,sep:"/"};function w4(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');go(e);let r=0,s=-1,o=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(a){r=o+1;break}}else s<0&&(a=!0,s=o+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let u=-1,f=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(a){r=o+1;break}}else u<0&&(a=!0,u=o+1),f>-1&&(e.codePointAt(o)===t.codePointAt(f--)?f<0&&(s=o):(f=-1,s=u));return r===s?s=u:s<0&&(s=e.length),e.slice(r,s)}function k4(e){if(go(e),e.length===0)return".";let t=-1,r=e.length,s;for(;--r;)if(e.codePointAt(r)===47){if(s){t=r;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function _4(e){go(e);let t=e.length,r=-1,s=0,o=-1,a=0,u;for(;t--;){const f=e.codePointAt(t);if(f===47){if(u){s=t+1;break}continue}r<0&&(u=!0,r=t+1),f===46?o<0?o=t:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||r<0||a===0||a===1&&o===r-1&&o===s+1?"":e.slice(o,r)}function S4(...e){let t=-1,r;for(;++t<e.length;)go(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":j4(r)}function j4(e){go(e);const t=e.codePointAt(0)===47;let r=C4(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function C4(e,t){let r="",s=0,o=-1,a=0,u=-1,f,h;for(;++u<=e.length;){if(u<e.length)f=e.codePointAt(u);else{if(f===47)break;f=47}if(f===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(r.length<2||s!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(h=r.lastIndexOf("/"),h!==r.length-1){h<0?(r="",s=0):(r=r.slice(0,h),s=r.length-1-r.lastIndexOf("/")),o=u,a=0;continue}}else if(r.length>0){r="",s=0,o=u,a=0;continue}}t&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(o+1,u):r=e.slice(o+1,u),s=u-o-1;o=u,a=0}else f===46&&a>-1?a++:a=-1}return r}function go(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const N4={cwd:E4};function E4(){return"/"}function Fc(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function T4(e){if(typeof e=="string")e=new URL(e);else if(!Fc(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return P4(e)}function P4(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const s=t.codePointAt(r+2);if(s===70||s===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const rc=["history","path","basename","stem","extname","dirname"];class Gg{constructor(t){let r;t?Fc(t)?r={path:t}:typeof t=="string"||L4(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":N4.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<rc.length;){const a=rc[s];a in r&&r[a]!==void 0&&r[a]!==null&&(this[a]=a==="history"?[...r[a]]:r[a])}let o;for(o in r)rc.includes(o)||(this[o]=r[o])}get basename(){return typeof this.path=="string"?er.basename(this.path):void 0}set basename(t){sc(t,"basename"),ic(t,"basename"),this.path=er.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?er.dirname(this.path):void 0}set dirname(t){mm(this.basename,"dirname"),this.path=er.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?er.extname(this.path):void 0}set extname(t){if(ic(t,"extname"),mm(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=er.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Fc(t)&&(t=T4(t)),sc(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?er.basename(this.path,this.extname):void 0}set stem(t){sc(t,"stem"),ic(t,"stem"),this.path=er.join(this.dirname||"",t+(this.extname||""))}fail(t,r,s){const o=this.message(t,r,s);throw o.fatal=!0,o}info(t,r,s){const o=this.message(t,r,s);return o.fatal=void 0,o}message(t,r,s){const o=new Kt(t,r,s);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function ic(e,t){if(e&&e.includes(er.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+er.sep+"`")}function sc(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function mm(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function L4(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const I4=(function(e){const s=this.constructor.prototype,o=s[e],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,s),a}),A4={}.hasOwnProperty;class dd extends I4{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=x4()}copy(){const t=new dd;let r=-1;for(;++r<this.attachers.length;){const s=this.attachers[r];t.use(...s)}return t.data(nc(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(ac("data",this.frozen),this.namespace[t]=r,this):A4.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ac("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const o=r.call(t,...s);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Al(t),s=this.parser||this.Parser;return oc("parse",s),s(String(r),r)}process(t,r){const s=this;return this.freeze(),oc("process",this.parser||this.Parser),lc("process",this.compiler||this.Compiler),r?o(void 0,r):new Promise(o);function o(a,u){const f=Al(t),h=s.parse(f);s.run(h,f,function(v,g,x){if(v||!g||!x)return p(v);const b=g,_=s.stringify(b,x);z4(_)?x.value=_:x.result=_,p(v,x)});function p(v,g){v||!g?u(v):a?a(g):r(void 0,g)}}}processSync(t){let r=!1,s;return this.freeze(),oc("processSync",this.parser||this.Parser),lc("processSync",this.compiler||this.Compiler),this.process(t,o),vm("processSync","process",r),s;function o(a,u){r=!0,hm(a),s=u}}run(t,r,s){gm(t),this.freeze();const o=this.transformers;return!s&&typeof r=="function"&&(s=r,r=void 0),s?a(void 0,s):new Promise(a);function a(u,f){const h=Al(r);o.run(t,h,p);function p(v,g,x){const b=g||t;v?f(v):u?u(b):s(void 0,b,x)}}}runSync(t,r){let s=!1,o;return this.run(t,r,a),vm("runSync","run",s),o;function a(u,f){hm(u),o=f,s=!0}}stringify(t,r){this.freeze();const s=Al(r),o=this.compiler||this.Compiler;return lc("stringify",o),gm(t),o(t,s)}use(t,...r){const s=this.attachers,o=this.namespace;if(ac("use",this.frozen),t!=null)if(typeof t=="function")h(t,r);else if(typeof t=="object")Array.isArray(t)?f(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[v,...g]=p;h(v,g)}else u(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function u(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(p.plugins),p.settings&&(o.settings=nc(!0,o.settings,p.settings))}function f(p){let v=-1;if(p!=null)if(Array.isArray(p))for(;++v<p.length;){const g=p[v];a(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,v){let g=-1,x=-1;for(;++g<s.length;)if(s[g][0]===p){x=g;break}if(x===-1)s.push([p,...v]);else if(v.length>0){let[b,..._]=v;const N=s[x][1];$c(N)&&$c(b)&&(b=nc(!0,N,b)),s[x]=[p,b,..._]}}}}const R4=new dd().freeze();function oc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function lc(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ac(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gm(e){if(!$c(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function vm(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Al(e){return O4(e)?e:new Gg(e)}function O4(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function z4(e){return typeof e=="string"||M4(e)}function M4(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const D4="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ym=[],xm={allowDangerousHtml:!0},$4=/^(https?|ircs?|mailto|xmpp)$/i,F4=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function U4(e){const t=B4(e),r=q4(e);return V4(t.runSync(t.parse(r),r),e)}function B4(e){const t=e.rehypePlugins||ym,r=e.remarkPlugins||ym,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xm}:xm;return R4().use(k3).use(r).use(g4,s).use(t)}function q4(e){const t=e.children||"",r=new Gg;return typeof t=="string"&&(r.value=t),r}function V4(e,t){const r=t.allowedElements,s=t.allowElement,o=t.components,a=t.disallowedElements,u=t.skipHtml,f=t.unwrapDisallowed,h=t.urlTransform||H4;for(const v of F4)Object.hasOwn(t,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+D4+v.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),cd(e,p),sb(e,{Fragment:c.Fragment,components:o,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function p(v,g,x){if(v.type==="raw"&&x&&typeof g=="number")return u?x.children.splice(g,1):x.children[g]={type:"text",value:v.value},g;if(v.type==="element"){let b;for(b in Xu)if(Object.hasOwn(Xu,b)&&Object.hasOwn(v.properties,b)){const _=v.properties[b],N=Xu[b];(N===null||N.includes(v.tagName))&&(v.properties[b]=h(String(_||""),b,v))}}if(v.type==="element"){let b=r?!r.includes(v.tagName):a?a.includes(v.tagName):!1;if(!b&&s&&typeof g=="number"&&(b=!s(v,g,x)),b&&x&&typeof g=="number")return f&&v.children?x.children.splice(g,1,...v.children):x.children.splice(g,1),g}}}function H4(e){const t=e.indexOf(":"),r=e.indexOf("?"),s=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||r!==-1&&t>r||s!==-1&&t>s||$4.test(e.slice(0,t))?e:""}function bm(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let s=0,o=r.indexOf(t);for(;o!==-1;)s++,o=r.indexOf(t,o+t.length);return s}function W4(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function G4(e,t,r){const o=Xl((r||{}).ignore||[]),a=K4(t);let u=-1;for(;++u<a.length;)Wg(e,"text",f);function f(p,v){let g=-1,x;for(;++g<v.length;){const b=v[g],_=x?x.children:void 0;if(o(b,_?_.indexOf(b):void 0,x))return;x=b}if(x)return h(p,v)}function h(p,v){const g=v[v.length-1],x=a[u][0],b=a[u][1];let _=0;const k=g.children.indexOf(p);let E=!1,L=[];x.lastIndex=0;let I=x.exec(p.value);for(;I;){const q=I.index,H={index:I.index,input:I.input,stack:[...v,p]};let P=b(...I,H);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?x.lastIndex=q+1:(_!==q&&L.push({type:"text",value:p.value.slice(_,q)}),Array.isArray(P)?L.push(...P):P&&L.push(P),_=q+I[0].length,E=!0),!x.global)break;I=x.exec(p.value)}return E?(_<p.value.length&&L.push({type:"text",value:p.value.slice(_)}),g.children.splice(k,1,...L)):L=[p],k+L.length}}function K4(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let s=-1;for(;++s<r.length;){const o=r[s];t.push([Q4(o[0]),J4(o[1])])}return t}function Q4(e){return typeof e=="string"?new RegExp(W4(e),"g"):e}function J4(e){return typeof e=="function"?e:function(){return e}}const uc="phrasing",cc=["autolink","link","image","label"];function Y4(){return{transforms:[i5],enter:{literalAutolink:Z4,literalAutolinkEmail:dc,literalAutolinkHttp:dc,literalAutolinkWww:dc},exit:{literalAutolink:r5,literalAutolinkEmail:n5,literalAutolinkHttp:e5,literalAutolinkWww:t5}}}function X4(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:uc,notInConstruct:cc},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:uc,notInConstruct:cc},{character:":",before:"[ps]",after:"\\/",inConstruct:uc,notInConstruct:cc}]}}function Z4(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function dc(e){this.config.enter.autolinkProtocol.call(this,e)}function e5(e){this.config.exit.autolinkProtocol.call(this,e)}function t5(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function n5(e){this.config.exit.autolinkEmail.call(this,e)}function r5(e){this.exit(e)}function i5(e){G4(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,s5],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),o5]],{ignore:["link","linkReference"]})}function s5(e,t,r,s,o){let a="";if(!Kg(o)||(/^w/i.test(t)&&(r=t+r,t="",a="http://"),!l5(r)))return!1;const u=a5(r+s);if(!u[0])return!1;const f={type:"link",title:null,url:a+t+u[0],children:[{type:"text",value:t+u[0]}]};return u[1]?[f,{type:"text",value:u[1]}]:f}function o5(e,t,r,s){return!Kg(s,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function l5(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function a5(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],s=r.indexOf(")");const o=bm(e,"(");let a=bm(e,")");for(;s!==-1&&o>a;)e+=r.slice(0,s+1),r=r.slice(s+1),s=r.indexOf(")"),a++;return[e,r]}function Kg(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||di(r)||Ql(r))&&(!t||r!==47)}Qg.peek=v5;function u5(){this.buffer()}function c5(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function d5(){this.buffer()}function f5(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function h5(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Wn(this.sliceSerialize(e)).toLowerCase(),r.label=t}function p5(e){this.exit(e)}function m5(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Wn(this.sliceSerialize(e)).toLowerCase(),r.label=t}function g5(e){this.exit(e)}function v5(){return"["}function Qg(e,t,r,s){const o=r.createTracker(s);let a=o.move("[^");const u=r.enter("footnoteReference"),f=r.enter("reference");return a+=o.move(r.safe(r.associationId(e),{after:"]",before:a})),f(),u(),a+=o.move("]"),a}function y5(){return{enter:{gfmFootnoteCallString:u5,gfmFootnoteCall:c5,gfmFootnoteDefinitionLabelString:d5,gfmFootnoteDefinition:f5},exit:{gfmFootnoteCallString:h5,gfmFootnoteCall:p5,gfmFootnoteDefinitionLabelString:m5,gfmFootnoteDefinition:g5}}}function x5(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:Qg},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(s,o,a,u){const f=a.createTracker(u);let h=f.move("[^");const p=a.enter("footnoteDefinition"),v=a.enter("label");return h+=f.move(a.safe(a.associationId(s),{before:h,after:"]"})),v(),h+=f.move("]:"),s.children&&s.children.length>0&&(f.shift(4),h+=f.move((t?`
`:" ")+a.indentLines(a.containerFlow(s,f.current()),t?Jg:b5))),p(),h}}function b5(e,t,r){return t===0?e:Jg(e,t,r)}function Jg(e,t,r){return(r?"":"    ")+e}const w5=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Yg.peek=C5;function k5(){return{canContainEols:["delete"],enter:{strikethrough:S5},exit:{strikethrough:j5}}}function _5(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:w5}],handlers:{delete:Yg}}}function S5(e){this.enter({type:"delete",children:[]},e)}function j5(e){this.exit(e)}function Yg(e,t,r,s){const o=r.createTracker(s),a=r.enter("strikethrough");let u=o.move("~~");return u+=r.containerPhrasing(e,{...o.current(),before:u,after:"~"}),u+=o.move("~~"),a(),u}function C5(){return"~"}function N5(e){return e.length}function E5(e,t){const r=t||{},s=(r.align||[]).concat(),o=r.stringLength||N5,a=[],u=[],f=[],h=[];let p=0,v=-1;for(;++v<e.length;){const N=[],k=[];let E=-1;for(e[v].length>p&&(p=e[v].length);++E<e[v].length;){const L=T5(e[v][E]);if(r.alignDelimiters!==!1){const I=o(L);k[E]=I,(h[E]===void 0||I>h[E])&&(h[E]=I)}N.push(L)}u[v]=N,f[v]=k}let g=-1;if(typeof s=="object"&&"length"in s)for(;++g<p;)a[g]=wm(s[g]);else{const N=wm(s);for(;++g<p;)a[g]=N}g=-1;const x=[],b=[];for(;++g<p;){const N=a[g];let k="",E="";N===99?(k=":",E=":"):N===108?k=":":N===114&&(E=":");let L=r.alignDelimiters===!1?1:Math.max(1,h[g]-k.length-E.length);const I=k+"-".repeat(L)+E;r.alignDelimiters!==!1&&(L=k.length+L+E.length,L>h[g]&&(h[g]=L),b[g]=L),x[g]=I}u.splice(1,0,x),f.splice(1,0,b),v=-1;const _=[];for(;++v<u.length;){const N=u[v],k=f[v];g=-1;const E=[];for(;++g<p;){const L=N[g]||"";let I="",q="";if(r.alignDelimiters!==!1){const H=h[g]-(k[g]||0),P=a[g];P===114?I=" ".repeat(H):P===99?H%2?(I=" ".repeat(H/2+.5),q=" ".repeat(H/2-.5)):(I=" ".repeat(H/2),q=I):q=" ".repeat(H)}r.delimiterStart!==!1&&!g&&E.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&L==="")&&(r.delimiterStart!==!1||g)&&E.push(" "),r.alignDelimiters!==!1&&E.push(I),E.push(L),r.alignDelimiters!==!1&&E.push(q),r.padding!==!1&&E.push(" "),(r.delimiterEnd!==!1||g!==p-1)&&E.push("|")}_.push(r.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return _.join(`
`)}function T5(e){return e==null?"":String(e)}function wm(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function P5(e,t,r,s){const o=r.enter("blockquote"),a=r.createTracker(s);a.move("> "),a.shift(2);const u=r.indentLines(r.containerFlow(e,a.current()),L5);return o(),u}function L5(e,t,r){return">"+(r?"":" ")+e}function I5(e,t){return km(e,t.inConstruct,!0)&&!km(e,t.notInConstruct,!1)}function km(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let s=-1;for(;++s<t.length;)if(e.includes(t[s]))return!0;return!1}function _m(e,t,r,s){let o=-1;for(;++o<r.unsafe.length;)if(r.unsafe[o].character===`
`&&I5(r.stack,r.unsafe[o]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function A5(e,t){const r=String(e);let s=r.indexOf(t),o=s,a=0,u=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===o?++a>u&&(u=a):a=1,o=s+t.length,s=r.indexOf(t,o);return u}function R5(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function O5(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function z5(e,t,r,s){const o=O5(r),a=e.value||"",u=o==="`"?"GraveAccent":"Tilde";if(R5(e,r)){const g=r.enter("codeIndented"),x=r.indentLines(a,M5);return g(),x}const f=r.createTracker(s),h=o.repeat(Math.max(A5(a,o)+1,3)),p=r.enter("codeFenced");let v=f.move(h);if(e.lang){const g=r.enter(`codeFencedLang${u}`);v+=f.move(r.safe(e.lang,{before:v,after:" ",encode:["`"],...f.current()})),g()}if(e.lang&&e.meta){const g=r.enter(`codeFencedMeta${u}`);v+=f.move(" "),v+=f.move(r.safe(e.meta,{before:v,after:`
`,encode:["`"],...f.current()})),g()}return v+=f.move(`
`),a&&(v+=f.move(a+`
`)),v+=f.move(h),p(),v}function M5(e,t,r){return(r?"":"    ")+e}function fd(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function D5(e,t,r,s){const o=fd(r),a=o==='"'?"Quote":"Apostrophe",u=r.enter("definition");let f=r.enter("label");const h=r.createTracker(s);let p=h.move("[");return p+=h.move(r.safe(r.associationId(e),{before:p,after:"]",...h.current()})),p+=h.move("]: "),f(),!e.url||/[\0- \u007F]/.test(e.url)?(f=r.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(r.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=r.enter("destinationRaw"),p+=h.move(r.safe(e.url,{before:p,after:e.title?" ":`
`,...h.current()}))),f(),e.title&&(f=r.enter(`title${a}`),p+=h.move(" "+o),p+=h.move(r.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),f()),u(),p}function $5(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ao(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Hl(e,t,r){const s=ss(e),o=ss(t);return s===void 0?o===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Xg.peek=F5;function Xg(e,t,r,s){const o=$5(r),a=r.enter("emphasis"),u=r.createTracker(s),f=u.move(o);let h=u.move(r.containerPhrasing(e,{after:o,before:f,...u.current()}));const p=h.charCodeAt(0),v=Hl(s.before.charCodeAt(s.before.length-1),p,o);v.inside&&(h=ao(p)+h.slice(1));const g=h.charCodeAt(h.length-1),x=Hl(s.after.charCodeAt(0),g,o);x.inside&&(h=h.slice(0,-1)+ao(g));const b=u.move(o);return a(),r.attentionEncodeSurroundingInfo={after:x.outside,before:v.outside},f+h+b}function F5(e,t,r){return r.options.emphasis||"*"}function U5(e,t){let r=!1;return cd(e,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return r=!0,Mc}),!!((!e.depth||e.depth<3)&&rd(e)&&(t.options.setext||r))}function B5(e,t,r,s){const o=Math.max(Math.min(6,e.depth||1),1),a=r.createTracker(s);if(U5(e,r)){const v=r.enter("headingSetext"),g=r.enter("phrasing"),x=r.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return g(),v(),x+`
`+(o===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const u="#".repeat(o),f=r.enter("headingAtx"),h=r.enter("phrasing");a.move(u+" ");let p=r.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(p)&&(p=ao(p.charCodeAt(0))+p.slice(1)),p=p?u+" "+p:u,r.options.closeAtx&&(p+=" "+u),h(),f(),p}Zg.peek=q5;function Zg(e){return e.value||""}function q5(){return"<"}e1.peek=V5;function e1(e,t,r,s){const o=fd(r),a=o==='"'?"Quote":"Apostrophe",u=r.enter("image");let f=r.enter("label");const h=r.createTracker(s);let p=h.move("![");return p+=h.move(r.safe(e.alt,{before:p,after:"]",...h.current()})),p+=h.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=r.enter("destinationLiteral"),p+=h.move("<"),p+=h.move(r.safe(e.url,{before:p,after:">",...h.current()})),p+=h.move(">")):(f=r.enter("destinationRaw"),p+=h.move(r.safe(e.url,{before:p,after:e.title?" ":")",...h.current()}))),f(),e.title&&(f=r.enter(`title${a}`),p+=h.move(" "+o),p+=h.move(r.safe(e.title,{before:p,after:o,...h.current()})),p+=h.move(o),f()),p+=h.move(")"),u(),p}function V5(){return"!"}t1.peek=H5;function t1(e,t,r,s){const o=e.referenceType,a=r.enter("imageReference");let u=r.enter("label");const f=r.createTracker(s);let h=f.move("![");const p=r.safe(e.alt,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),u();const v=r.stack;r.stack=[],u=r.enter("reference");const g=r.safe(r.associationId(e),{before:h,after:"]",...f.current()});return u(),r.stack=v,a(),o==="full"||!p||p!==g?h+=f.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function H5(){return"!"}n1.peek=W5;function n1(e,t,r){let s=e.value||"",o="`",a=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(s);)o+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++a<r.unsafe.length;){const u=r.unsafe[a],f=r.compilePattern(u);let h;if(u.atBreak)for(;h=f.exec(s);){let p=h.index;s.charCodeAt(p)===10&&s.charCodeAt(p-1)===13&&p--,s=s.slice(0,p)+" "+s.slice(h.index+1)}}return o+s+o}function W5(){return"`"}function r1(e,t){const r=rd(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}i1.peek=G5;function i1(e,t,r,s){const o=fd(r),a=o==='"'?"Quote":"Apostrophe",u=r.createTracker(s);let f,h;if(r1(e,r)){const v=r.stack;r.stack=[],f=r.enter("autolink");let g=u.move("<");return g+=u.move(r.containerPhrasing(e,{before:g,after:">",...u.current()})),g+=u.move(">"),f(),r.stack=v,g}f=r.enter("link"),h=r.enter("label");let p=u.move("[");return p+=u.move(r.containerPhrasing(e,{before:p,after:"](",...u.current()})),p+=u.move("]("),h(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(h=r.enter("destinationLiteral"),p+=u.move("<"),p+=u.move(r.safe(e.url,{before:p,after:">",...u.current()})),p+=u.move(">")):(h=r.enter("destinationRaw"),p+=u.move(r.safe(e.url,{before:p,after:e.title?" ":")",...u.current()}))),h(),e.title&&(h=r.enter(`title${a}`),p+=u.move(" "+o),p+=u.move(r.safe(e.title,{before:p,after:o,...u.current()})),p+=u.move(o),h()),p+=u.move(")"),f(),p}function G5(e,t,r){return r1(e,r)?"<":"["}s1.peek=K5;function s1(e,t,r,s){const o=e.referenceType,a=r.enter("linkReference");let u=r.enter("label");const f=r.createTracker(s);let h=f.move("[");const p=r.containerPhrasing(e,{before:h,after:"]",...f.current()});h+=f.move(p+"]["),u();const v=r.stack;r.stack=[],u=r.enter("reference");const g=r.safe(r.associationId(e),{before:h,after:"]",...f.current()});return u(),r.stack=v,a(),o==="full"||!p||p!==g?h+=f.move(g+"]"):o==="shortcut"?h=h.slice(0,-1):h+=f.move("]"),h}function K5(){return"["}function hd(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Q5(e){const t=hd(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function J5(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function o1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Y5(e,t,r,s){const o=r.enter("list"),a=r.bulletCurrent;let u=e.ordered?J5(r):hd(r);const f=e.ordered?u==="."?")":".":Q5(r);let h=t&&r.bulletLastUsed?u===r.bulletLastUsed:!1;if(!e.ordered){const v=e.children?e.children[0]:void 0;if((u==="*"||u==="-")&&v&&(!v.children||!v.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(h=!0),o1(r)===u&&v){let g=-1;for(;++g<e.children.length;){const x=e.children[g];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(u=f),r.bulletCurrent=u;const p=r.containerFlow(e,s);return r.bulletLastUsed=u,r.bulletCurrent=a,o(),p}function X5(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Z5(e,t,r,s){const o=X5(r);let a=r.bulletCurrent||hd(r);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let u=a.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(u=Math.ceil(u/4)*4);const f=r.createTracker(s);f.move(a+" ".repeat(u-a.length)),f.shift(u);const h=r.enter("listItem"),p=r.indentLines(r.containerFlow(e,f.current()),v);return h(),p;function v(g,x,b){return x?(b?"":" ".repeat(u))+g:(b?a:a+" ".repeat(u-a.length))+g}}function e6(e,t,r,s){const o=r.enter("paragraph"),a=r.enter("phrasing"),u=r.containerPhrasing(e,s);return a(),o(),u}const t6=Xl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function n6(e,t,r,s){return(e.children.some(function(u){return t6(u)})?r.containerPhrasing:r.containerFlow).call(r,e,s)}function r6(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}l1.peek=i6;function l1(e,t,r,s){const o=r6(r),a=r.enter("strong"),u=r.createTracker(s),f=u.move(o+o);let h=u.move(r.containerPhrasing(e,{after:o,before:f,...u.current()}));const p=h.charCodeAt(0),v=Hl(s.before.charCodeAt(s.before.length-1),p,o);v.inside&&(h=ao(p)+h.slice(1));const g=h.charCodeAt(h.length-1),x=Hl(s.after.charCodeAt(0),g,o);x.inside&&(h=h.slice(0,-1)+ao(g));const b=u.move(o+o);return a(),r.attentionEncodeSurroundingInfo={after:x.outside,before:v.outside},f+h+b}function i6(e,t,r){return r.options.strong||"*"}function s6(e,t,r,s){return r.safe(e.value,s)}function o6(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function l6(e,t,r){const s=(o1(r)+(r.options.ruleSpaces?" ":"")).repeat(o6(r));return r.options.ruleSpaces?s.slice(0,-1):s}const a1={blockquote:P5,break:_m,code:z5,definition:D5,emphasis:Xg,hardBreak:_m,heading:B5,html:Zg,image:e1,imageReference:t1,inlineCode:n1,link:i1,linkReference:s1,list:Y5,listItem:Z5,paragraph:e6,root:n6,strong:l1,text:s6,thematicBreak:l6};function a6(){return{enter:{table:u6,tableData:Sm,tableHeader:Sm,tableRow:d6},exit:{codeText:f6,table:c6,tableData:fc,tableHeader:fc,tableRow:fc}}}function u6(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function c6(e){this.exit(e),this.data.inTable=void 0}function d6(e){this.enter({type:"tableRow",children:[]},e)}function fc(e){this.exit(e)}function Sm(e){this.enter({type:"tableCell",children:[]},e)}function f6(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,h6));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function h6(e,t){return t==="|"?t:e}function p6(e){const t=e||{},r=t.tableCellPadding,s=t.tablePipeAlign,o=t.stringLength,a=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:u,tableCell:h,tableRow:f}};function u(b,_,N,k){return p(v(b,N,k),b.align)}function f(b,_,N,k){const E=g(b,N,k),L=p([E]);return L.slice(0,L.indexOf(`
`))}function h(b,_,N,k){const E=N.enter("tableCell"),L=N.enter("phrasing"),I=N.containerPhrasing(b,{...k,before:a,after:a});return L(),E(),I}function p(b,_){return E5(b,{align:_,alignDelimiters:s,padding:r,stringLength:o})}function v(b,_,N){const k=b.children;let E=-1;const L=[],I=_.enter("table");for(;++E<k.length;)L[E]=g(k[E],_,N);return I(),L}function g(b,_,N){const k=b.children;let E=-1;const L=[],I=_.enter("tableRow");for(;++E<k.length;)L[E]=h(k[E],b,_,N);return I(),L}function x(b,_,N){let k=a1.inlineCode(b,_,N);return N.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function m6(){return{exit:{taskListCheckValueChecked:jm,taskListCheckValueUnchecked:jm,paragraph:v6}}}function g6(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:y6}}}function jm(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function v6(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const s=r.children[0];if(s&&s.type==="text"){const o=t.children;let a=-1,u;for(;++a<o.length;){const f=o[a];if(f.type==="paragraph"){u=f;break}}u===r&&(s.value=s.value.slice(1),s.value.length===0?r.children.shift():r.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,r.position.start=Object.assign({},s.position.start)))}}this.exit(e)}function y6(e,t,r,s){const o=e.children[0],a=typeof e.checked=="boolean"&&o&&o.type==="paragraph",u="["+(e.checked?"x":" ")+"] ",f=r.createTracker(s);a&&f.move(u);let h=a1.listItem(e,t,r,{...s,...f.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),h;function p(v){return v+u}}function x6(){return[Y4(),y5(),k5(),a6(),m6()]}function b6(e){return{extensions:[X4(),x5(e),_5(),p6(e),g6()]}}const w6={tokenize:N6,partial:!0},u1={tokenize:E6,partial:!0},c1={tokenize:T6,partial:!0},d1={tokenize:P6,partial:!0},k6={tokenize:L6,partial:!0},f1={name:"wwwAutolink",tokenize:j6,previous:p1},h1={name:"protocolAutolink",tokenize:C6,previous:m1},gr={name:"emailAutolink",tokenize:S6,previous:g1},ir={};function _6(){return{text:ir}}let oi=48;for(;oi<123;)ir[oi]=gr,oi++,oi===58?oi=65:oi===91&&(oi=97);ir[43]=gr;ir[45]=gr;ir[46]=gr;ir[95]=gr;ir[72]=[gr,h1];ir[104]=[gr,h1];ir[87]=[gr,f1];ir[119]=[gr,f1];function S6(e,t,r){const s=this;let o,a;return u;function u(g){return!Uc(g)||!g1.call(s,s.previous)||pd(s.events)?r(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),f(g))}function f(g){return Uc(g)?(e.consume(g),f):g===64?(e.consume(g),h):r(g)}function h(g){return g===46?e.check(k6,v,p)(g):g===45||g===95||Gt(g)?(a=!0,e.consume(g),h):v(g)}function p(g){return e.consume(g),o=!0,h}function v(g){return a&&o&&Zt(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(g)):r(g)}}function j6(e,t,r){const s=this;return o;function o(u){return u!==87&&u!==119||!p1.call(s,s.previous)||pd(s.events)?r(u):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(w6,e.attempt(u1,e.attempt(c1,a),r),r)(u))}function a(u){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(u)}}function C6(e,t,r){const s=this;let o="",a=!1;return u;function u(g){return(g===72||g===104)&&m1.call(s,s.previous)&&!pd(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(g),e.consume(g),f):r(g)}function f(g){if(Zt(g)&&o.length<5)return o+=String.fromCodePoint(g),e.consume(g),f;if(g===58){const x=o.toLowerCase();if(x==="http"||x==="https")return e.consume(g),h}return r(g)}function h(g){return g===47?(e.consume(g),a?p:(a=!0,h)):r(g)}function p(g){return g===null||Bl(g)||it(g)||di(g)||Ql(g)?r(g):e.attempt(u1,e.attempt(c1,v),r)(g)}function v(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(g)}}function N6(e,t,r){let s=0;return o;function o(u){return(u===87||u===119)&&s<3?(s++,e.consume(u),o):u===46&&s===3?(e.consume(u),a):r(u)}function a(u){return u===null?r(u):t(u)}}function E6(e,t,r){let s,o,a;return u;function u(p){return p===46||p===95?e.check(d1,h,f)(p):p===null||it(p)||di(p)||p!==45&&Ql(p)?h(p):(a=!0,e.consume(p),u)}function f(p){return p===95?s=!0:(o=s,s=void 0),e.consume(p),u}function h(p){return o||s||!a?r(p):t(p)}}function T6(e,t){let r=0,s=0;return o;function o(u){return u===40?(r++,e.consume(u),o):u===41&&s<r?a(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?e.check(d1,t,a)(u):u===null||it(u)||di(u)?t(u):(e.consume(u),o)}function a(u){return u===41&&s++,e.consume(u),o}}function P6(e,t,r){return s;function s(f){return f===33||f===34||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===63||f===95||f===126?(e.consume(f),s):f===38?(e.consume(f),a):f===93?(e.consume(f),o):f===60||f===null||it(f)||di(f)?t(f):r(f)}function o(f){return f===null||f===40||f===91||it(f)||di(f)?t(f):s(f)}function a(f){return Zt(f)?u(f):r(f)}function u(f){return f===59?(e.consume(f),s):Zt(f)?(e.consume(f),u):r(f)}}function L6(e,t,r){return s;function s(a){return e.consume(a),o}function o(a){return Gt(a)?r(a):t(a)}}function p1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||it(e)}function m1(e){return!Zt(e)}function g1(e){return!(e===47||Uc(e))}function Uc(e){return e===43||e===45||e===46||e===95||Gt(e)}function pd(e){let t=e.length,r=!1;for(;t--;){const s=e[t][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){r=!0;break}if(s._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const I6={tokenize:F6,partial:!0};function A6(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:M6,continuation:{tokenize:D6},exit:$6}},text:{91:{name:"gfmFootnoteCall",tokenize:z6},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:R6,resolveTo:O6}}}}function R6(e,t,r){const s=this;let o=s.events.length;const a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let u;for(;o--;){const h=s.events[o][1];if(h.type==="labelImage"){u=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return f;function f(h){if(!u||!u._balanced)return r(h);const p=Wn(s.sliceSerialize({start:u.end,end:s.now()}));return p.codePointAt(0)!==94||!a.includes(p.slice(1))?r(h):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),t(h))}}function O6(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},f=[e[r+1],e[r+2],["enter",s,t],e[r+3],e[r+4],["enter",o,t],["exit",o,t],["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(r,e.length-r+1,...f),e}function z6(e,t,r){const s=this,o=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a=0,u;return f;function f(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),h}function h(g){return g!==94?r(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(g){if(a>999||g===93&&!u||g===null||g===91||it(g))return r(g);if(g===93){e.exit("chunkString");const x=e.exit("gfmFootnoteCallString");return o.includes(Wn(s.sliceSerialize(x)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(g)}return it(g)||(u=!0),a++,e.consume(g),g===92?v:p}function v(g){return g===91||g===92||g===93?(e.consume(g),a++,p):p(g)}}function M6(e,t,r){const s=this,o=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a,u=0,f;return h;function h(_){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(_),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(_){return _===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(_),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",v):r(_)}function v(_){if(u>999||_===93&&!f||_===null||_===91||it(_))return r(_);if(_===93){e.exit("chunkString");const N=e.exit("gfmFootnoteDefinitionLabelString");return a=Wn(s.sliceSerialize(N)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(_),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),x}return it(_)||(f=!0),u++,e.consume(_),_===92?g:v}function g(_){return _===91||_===92||_===93?(e.consume(_),u++,v):v(_)}function x(_){return _===58?(e.enter("definitionMarker"),e.consume(_),e.exit("definitionMarker"),o.includes(a)||o.push(a),Xe(e,b,"gfmFootnoteDefinitionWhitespace")):r(_)}function b(_){return t(_)}}function D6(e,t,r){return e.check(mo,t,e.attempt(I6,t,r))}function $6(e){e.exit("gfmFootnoteDefinition")}function F6(e,t,r){const s=this;return Xe(e,o,"gfmFootnoteDefinitionIndent",5);function o(a){const u=s.events[s.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?t(a):r(a)}}function U6(e){let r=(e||{}).singleTilde;const s={name:"strikethrough",tokenize:a,resolveAll:o};return r==null&&(r=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function o(u,f){let h=-1;for(;++h<u.length;)if(u[h][0]==="enter"&&u[h][1].type==="strikethroughSequenceTemporary"&&u[h][1]._close){let p=h;for(;p--;)if(u[p][0]==="exit"&&u[p][1].type==="strikethroughSequenceTemporary"&&u[p][1]._open&&u[h][1].end.offset-u[h][1].start.offset===u[p][1].end.offset-u[p][1].start.offset){u[h][1].type="strikethroughSequence",u[p][1].type="strikethroughSequence";const v={type:"strikethrough",start:Object.assign({},u[p][1].start),end:Object.assign({},u[h][1].end)},g={type:"strikethroughText",start:Object.assign({},u[p][1].end),end:Object.assign({},u[h][1].start)},x=[["enter",v,f],["enter",u[p][1],f],["exit",u[p][1],f],["enter",g,f]],b=f.parser.constructs.insideSpan.null;b&&xn(x,x.length,0,Jl(b,u.slice(p+1,h),f)),xn(x,x.length,0,[["exit",g,f],["enter",u[h][1],f],["exit",u[h][1],f],["exit",v,f]]),xn(u,p-1,h-p+3,x),h=p+x.length-2;break}}for(h=-1;++h<u.length;)u[h][1].type==="strikethroughSequenceTemporary"&&(u[h][1].type="data");return u}function a(u,f,h){const p=this.previous,v=this.events;let g=0;return x;function x(_){return p===126&&v[v.length-1][1].type!=="characterEscape"?h(_):(u.enter("strikethroughSequenceTemporary"),b(_))}function b(_){const N=ss(p);if(_===126)return g>1?h(_):(u.consume(_),g++,b);if(g<2&&!r)return h(_);const k=u.exit("strikethroughSequenceTemporary"),E=ss(_);return k._open=!E||E===2&&!!N,k._close=!N||N===2&&!!E,f(_)}}}class B6{constructor(){this.map=[]}add(t,r,s){q6(this,t,r,s)}consume(t){if(this.map.sort(function(a,u){return a[0]-u[0]}),this.map.length===0)return;let r=this.map.length;const s=[];for(;r>0;)r-=1,s.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];s.push(t.slice()),t.length=0;let o=s.pop();for(;o;){for(const a of o)t.push(a);o=s.pop()}this.map.length=0}}function q6(e,t,r,s){let o=0;if(!(r===0&&s.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=r,e.map[o][2].push(...s);return}o+=1}e.map.push([t,r,s])}}function V6(e,t){let r=!1;const s=[];for(;t<e.length;){const o=e[t];if(r){if(o[0]==="enter")o[1].type==="tableContent"&&s.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=s.length-1;s[a]=s[a]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return s}function H6(){return{flow:{null:{name:"table",tokenize:W6,resolveAll:G6}}}}function W6(e,t,r){const s=this;let o=0,a=0,u;return f;function f($){let F=s.events.length-1;for(;F>-1;){const Y=s.events[F][1].type;if(Y==="lineEnding"||Y==="linePrefix")F--;else break}const J=F>-1?s.events[F][1].type:null,ae=J==="tableHead"||J==="tableRow"?P:h;return ae===P&&s.parser.lazy[s.now().line]?r($):ae($)}function h($){return e.enter("tableHead"),e.enter("tableRow"),p($)}function p($){return $===124||(u=!0,a+=1),v($)}function v($){return $===null?r($):Oe($)?a>1?(a=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),b):r($):Ke($)?Xe(e,v,"whitespace")($):(a+=1,u&&(u=!1,o+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),u=!0,v):(e.enter("data"),g($)))}function g($){return $===null||$===124||it($)?(e.exit("data"),v($)):(e.consume($),$===92?x:g)}function x($){return $===92||$===124?(e.consume($),g):g($)}function b($){return s.interrupt=!1,s.parser.lazy[s.now().line]?r($):(e.enter("tableDelimiterRow"),u=!1,Ke($)?Xe(e,_,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):_($))}function _($){return $===45||$===58?k($):$===124?(u=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),N):H($)}function N($){return Ke($)?Xe(e,k,"whitespace")($):k($)}function k($){return $===58?(a+=1,u=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),E):$===45?(a+=1,E($)):$===null||Oe($)?q($):H($)}function E($){return $===45?(e.enter("tableDelimiterFiller"),L($)):H($)}function L($){return $===45?(e.consume($),L):$===58?(u=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),I):(e.exit("tableDelimiterFiller"),I($))}function I($){return Ke($)?Xe(e,q,"whitespace")($):q($)}function q($){return $===124?_($):$===null||Oe($)?!u||o!==a?H($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):H($)}function H($){return r($)}function P($){return e.enter("tableRow"),te($)}function te($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),te):$===null||Oe($)?(e.exit("tableRow"),t($)):Ke($)?Xe(e,te,"whitespace")($):(e.enter("data"),X($))}function X($){return $===null||$===124||it($)?(e.exit("data"),te($)):(e.consume($),$===92?ge:X)}function ge($){return $===92||$===124?(e.consume($),X):X($)}}function G6(e,t){let r=-1,s=!0,o=0,a=[0,0,0,0],u=[0,0,0,0],f=!1,h=0,p,v,g;const x=new B6;for(;++r<e.length;){const b=e[r],_=b[1];b[0]==="enter"?_.type==="tableHead"?(f=!1,h!==0&&(Cm(x,t,h,p,v),v=void 0,h=0),p={type:"table",start:Object.assign({},_.start),end:Object.assign({},_.end)},x.add(r,0,[["enter",p,t]])):_.type==="tableRow"||_.type==="tableDelimiterRow"?(s=!0,g=void 0,a=[0,0,0,0],u=[0,r+1,0,0],f&&(f=!1,v={type:"tableBody",start:Object.assign({},_.start),end:Object.assign({},_.end)},x.add(r,0,[["enter",v,t]])),o=_.type==="tableDelimiterRow"?2:v?3:1):o&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")?(s=!1,u[2]===0&&(a[1]!==0&&(u[0]=u[1],g=Rl(x,t,a,o,void 0,g),a=[0,0,0,0]),u[2]=r)):_.type==="tableCellDivider"&&(s?s=!1:(a[1]!==0&&(u[0]=u[1],g=Rl(x,t,a,o,void 0,g)),a=u,u=[a[1],r,0,0])):_.type==="tableHead"?(f=!0,h=r):_.type==="tableRow"||_.type==="tableDelimiterRow"?(h=r,a[1]!==0?(u[0]=u[1],g=Rl(x,t,a,o,r,g)):u[1]!==0&&(g=Rl(x,t,u,o,r,g)),o=0):o&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")&&(u[3]=r)}for(h!==0&&Cm(x,t,h,p,v),x.consume(t.events),r=-1;++r<t.events.length;){const b=t.events[r];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=V6(t.events,r))}return e}function Rl(e,t,r,s,o,a){const u=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",f="tableContent";r[0]!==0&&(a.end=Object.assign({},ts(t.events,r[0])),e.add(r[0],0,[["exit",a,t]]));const h=ts(t.events,r[1]);if(a={type:u,start:Object.assign({},h),end:Object.assign({},h)},e.add(r[1],0,[["enter",a,t]]),r[2]!==0){const p=ts(t.events,r[2]),v=ts(t.events,r[3]),g={type:f,start:Object.assign({},p),end:Object.assign({},v)};if(e.add(r[2],0,[["enter",g,t]]),s!==2){const x=t.events[r[2]],b=t.events[r[3]];if(x[1].end=Object.assign({},b[1].end),x[1].type="chunkText",x[1].contentType="text",r[3]>r[2]+1){const _=r[2]+1,N=r[3]-r[2]-1;e.add(_,N,[])}}e.add(r[3]+1,0,[["exit",g,t]])}return o!==void 0&&(a.end=Object.assign({},ts(t.events,o)),e.add(o,0,[["exit",a,t]]),a=void 0),a}function Cm(e,t,r,s,o){const a=[],u=ts(t.events,r);o&&(o.end=Object.assign({},u),a.push(["exit",o,t])),s.end=Object.assign({},u),a.push(["exit",s,t]),e.add(r+1,0,a)}function ts(e,t){const r=e[t],s=r[0]==="enter"?"start":"end";return r[1][s]}const K6={name:"tasklistCheck",tokenize:J6};function Q6(){return{text:{91:K6}}}function J6(e,t,r){const s=this;return o;function o(h){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?r(h):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),a)}function a(h){return it(h)?(e.enter("taskListCheckValueUnchecked"),e.consume(h),e.exit("taskListCheckValueUnchecked"),u):h===88||h===120?(e.enter("taskListCheckValueChecked"),e.consume(h),e.exit("taskListCheckValueChecked"),u):r(h)}function u(h){return h===93?(e.enter("taskListCheckMarker"),e.consume(h),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),f):r(h)}function f(h){return Oe(h)?t(h):Ke(h)?e.check({tokenize:Y6},t,r)(h):r(h)}}function Y6(e,t,r){return Xe(e,s,"whitespace");function s(o){return o===null?r(o):t(o)}}function X6(e){return Ng([_6(),A6(),U6(e),H6(),Q6()])}const Z6={};function ek(e){const t=this,r=e||Z6,s=t.data(),o=s.micromarkExtensions||(s.micromarkExtensions=[]),a=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),u=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);o.push(X6(r)),a.push(x6()),u.push(b6(r))}const tk=({slug:e})=>{const[t,r]=j.useState(""),[s,o]=j.useState(!0),[a,u]=j.useState(null);return j.useEffect(()=>{const f=async()=>{const p=await fetch(`/pages/${e}.md`,{cache:"no-store"});if(p.ok){const v=await p.text();r(v)}else r(`# Page Not Found

This page does not exist.`);o(!1)},h=async()=>{const{data:p}=await Q.from("profiles").select("*").eq("username","liaotian").single();p&&u(p)};f(),h()},[e]),s?c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex items-center justify-center",children:c.jsx("div",{className:"text-2xl",children:"Loading..."})}):c.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-background))] pt-20 pb-10",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[c.jsx("article",{className:"prose max-w-none bg-[rgb(var(--color-surface))] p-8 mb-8 rounded-2xl border border-[rgb(var(--color-border))]",children:c.jsx(U4,{remarkPlugins:[ek],children:t})}),c.jsx("div",{className:"bg-[rgb(var(--color-surface))] rounded-2xl p-6 border border-[rgb(var(--color-border))] shadow-sm",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:a?.avatar_url||"https://api.dicebear.com/7.x/avataaars/svg?seed=liaotian",alt:"liaotian",className:"w-16 h-16 rounded-full border-2 border-[rgb(var(--color-primary))]"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-xl font-bold",children:a?.display_name||"LiaoTian"}),a?.verified&&c.jsx(rr,{size:20,className:"text-[rgb(var(--color-accent))]"})]}),c.jsxs("p",{className:"text-[rgb(var(--color-text-secondary))]",children:["@",a?.username||"liaotian"]}),c.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))] mt-1",children:[c.jsx("a",{href:"/",className:"text-[rgb(var(--color-accent))]",children:"Sign Up"})," for LiaoTian"]})]})]})}),c.jsxs("div",{className:"mt-10 text-center text-sm text-[rgb(var(--color-text-secondary))]",children:[" Mux ",new Date().getFullYear()]})]})})},nk="2025-11-07T12:51:03.751Z",rk=[{key:"profiles",icon:fg,description:"Total User Accounts",type:"count",table:"profiles"},{key:"posts",icon:Br,description:"Total Content Posts",type:"count",table:"posts"},{key:"messages",icon:Fl,description:"(Your) Total Messages",type:"count",table:"messages"},{key:"likes",icon:is,description:"Total Likes/Reactions",type:"count",table:"likes"},{key:"comments",icon:Fl,description:"Total Comments",type:"count",table:"comments"}],ik=[{key:"online_now",icon:ui,description:"Currently Online (Last 5 min)",type:"activity",minutes:5},{key:"online_24h",icon:ui,description:"Online in last 24 hours",type:"activity",minutes:1440},{key:"online_7d",icon:ui,description:"Online in last 7 days",type:"activity",minutes:10080},{key:"online_30d",icon:ui,description:"Online in last 30 days",type:"activity",minutes:720*60},{key:"online_1y",icon:ui,description:"Online in last year",type:"activity",minutes:365*24*60}],v1=5,sk=e=>{const t=new Date;return t.setMinutes(t.getMinutes()-e),t.toISOString()},Nm=e=>{if(!e)return"Never";const t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);if(s<60)return`${s}s ago`;const o=Math.floor(s/60);if(o<60)return`${o}m ago`;const a=Math.floor(o/60);if(a<24)return`${a}h ago`;const u=Math.floor(a/24);return u<30?`${u}d ago`:`${Math.floor(u/30)}mo ago`},ok=e=>{const t=new Date(e).getTime();let s=new Date().getTime()-t;if(s<0)return"Platform launching soon!";const o=1e3*60*60,a=o*24;let u=s;const f=[],h=Math.floor(u/(a*365.25));h>0&&(f.push(`${h} year(s)`),u%=a*365.25);const p=Math.floor(u/(a*30.44));p>0&&(f.push(`${p} month(s)`),u%=a*30.44);const v=Math.floor(u/a);u%=a;const g=Math.floor(u/o);return h>0||p>0?(v>0&&f.push(`${v} day(s)`),g>0&&f.push(`${g} hour(s)`),f.join(" ")):`${v} day(s) and ${g} hour(s)`},lk=async()=>{const e=rk.map(async t=>{try{const{count:r,error:s}=await Q.from(t.table).select("*",{count:"exact",head:!0});if(s){const o=s.code==="42P01"?`(Table "${t.table}" not found)`:`(DB Error: ${s.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:o,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:r||0,error:!1,type:t.type}}catch(r){const s=r instanceof Error?r.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${s})`,type:t.type}}});return Promise.all(e)},ak=async()=>{const e=ik.map(async t=>{try{const r=sk(t.minutes),{count:s,error:o}=await Q.from("profiles").select("*",{count:"exact",head:!0}).gte("last_seen",r);if(o){const a=`(DB Error: ${o.message})`;return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:a,type:t.type}}return{key:t.key,label:t.description,icon:t.icon,value:s||0,error:!1,type:t.type}}catch(r){const s=r instanceof Error?r.message:"Unknown Error";return{key:t.key,label:t.description,icon:t.icon,value:"Error",error:!0,errorMessage:`(${s})`,type:t.type}}});return Promise.all(e)},uk=async()=>{const e="highest_followers",t="Highest Followers",r=Ec;try{const{data:s,error:o}=await Q.from("profiles").select("id, username, display_name, avatar_url");if(o)throw o;const{data:a,error:u}=await Q.from("follows").select("following_id");if(u)throw u;const f={};for(const x of a){const b=x.following_id;f[b]=(f[b]||0)+1}let h=null,p=-1;for(const[x,b]of Object.entries(f))b>p&&(p=b,h=x);const v=s.find(x=>x.id===h);let g;return v&&h?g={id:h,username:v.username,display_name:v.display_name,avatar_url:v.avatar_url,follower_count:p}:g={id:"N/A",username:"system",display_name:"No Followers Yet",avatar_url:"https://placehold.co/64x64/60A5FA/FFFFFF?text=NA",follower_count:0},{key:e,label:t,icon:r,value:{profile:g},error:!1,type:"highest_follower"}}catch(s){const o=s instanceof Error?s.message:"Unknown Error";return{key:e,label:t,icon:r,value:"Error",error:!0,errorMessage:`(Failed to calculate top profile: ${o})`,type:"highest_follower"}}},ck=async()=>{const e="time_since_launch",t="Time Since Launch",r=ui;try{const s=ok(nk);return{key:e,label:t,icon:r,value:s,error:!1,type:"time_since_launch"}}catch(s){const o=s instanceof Error?s.message:"Unknown Error";return{key:e,label:t,icon:r,value:"Error",error:!0,errorMessage:`(Failed to calculate time: ${o})`,type:"time_since_launch"}}},dk=async()=>{const e="recently_joined",t="5 Most Recently Joined Users",r=cg;try{const{data:s,error:o}=await Q.from("profiles").select("id, username, display_name, avatar_url, created_at").order("created_at",{ascending:!1}).limit(v1);if(o)throw o;return{key:e,label:t,icon:r,value:{list:s},error:!1,type:"recent_users"}}catch(s){const o=s instanceof Error?s.message:"Unknown Error";return{key:e,label:t,icon:r,value:"Error",error:!0,errorMessage:`(Failed to fetch recent users: ${o})`,type:"recent_users"}}},fk=async()=>{const e="recently_online",t="5 Most Recently Online Users",r=Ry;try{const{data:s,error:o}=await Q.from("profiles").select("id, username, display_name, avatar_url, last_seen").not("last_seen","is",null).order("last_seen",{ascending:!1}).limit(v1);if(o)throw o;return{key:e,label:t,icon:r,value:{list:s},error:!1,type:"recent_online"}}catch(s){const o=s instanceof Error?s.message:"Unknown Error";return{key:e,label:t,icon:r,value:"Error",error:!0,errorMessage:`(Failed to fetch recent online users: ${o})`,type:"recent_online"}}},Em=()=>{const[e,t]=j.useState([]),[r,s]=j.useState(!0),[o,a]=j.useState(null);if(j.useEffect(()=>{(async()=>{s(!0),a(null);try{const[E,L,I,q,H,P]=await Promise.all([lk(),ak(),uk(),ck(),dk(),fk()]),te=[...E,...L,I,q,H,P];t(te)}catch{a("Failed to fetch statistics due to a critical, unexpected error.")}finally{s(!1)}})()},[]),o)return c.jsxs("div",{className:"max-w-4xl mx-auto mt-10 p-6 bg-red-100 border border-red-400 rounded-xl shadow-xl",children:[c.jsxs("h2",{className:"flex items-center text-xl font-bold text-red-800 mb-4",children:[c.jsx(Hs,{className:"mr-2 h-6 w-6"})," Statistics Load Error"]}),c.jsx("p",{className:"text-red-700",children:o})]});const u=k=>{const E=k.icon,L=k.error||k.value==="Error";return c.jsxs("div",{className:`p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl
              ${L?"bg-red-50 border border-red-200":"bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]"}
            `,children:[c.jsx("div",{className:"flex items-start justify-between",children:c.jsx("div",{className:`p-3 rounded-full ${L?"bg-red-500":"bg-[rgba(var(--color-primary),0.1)]"}`,children:c.jsx(E,{className:`h-6 w-6 ${L?"text-white":"text-[rgb(var(--color-primary))]"}`})})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("p",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider",children:k.label}),L?c.jsxs("div",{className:"flex items-center mt-1 text-2xl font-bold text-red-600",children:[c.jsx(Hs,{className:"h-5 w-5 mr-1"}),"ERROR"]}):c.jsx("p",{className:"mt-1 text-4xl font-extrabold text-[rgb(var(--color-text))]",children:k.value.toLocaleString()}),L&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:k.errorMessage})]})]},k.key)},f=k=>{const E=k.icon,L=k.error||k.value==="Error",I=!L&&typeof k.value!="number"&&typeof k.value!="string"&&"list"in k.value?k.value.list:[],q=k.key==="recently_online";return c.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full",children:[c.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-4 border-b pb-2 border-[rgb(var(--color-border))]",children:[c.jsx(E,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",k.label]}),L?c.jsxs("div",{className:"text-red-500 flex items-center",children:[c.jsx(Hs,{className:"h-4 w-4 mr-1"})," ",k.errorMessage||"Error fetching list."]}):I.length===0?c.jsx("p",{className:"text-[rgb(var(--color-text-secondary))]",children:"No users found."}):c.jsx("ul",{className:"space-y-3",children:I.map((H,P)=>c.jsxs("li",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("img",{src:H.avatar_url||`https://placehold.co/40x40/60A5FA/FFFFFF?text=${H.display_name.charAt(0)}`,alt:`${H.username}'s avatar`,className:"w-8 h-8 rounded-full object-cover flex-shrink-0",onError:te=>{te.target.onerror=null,te.target.src=`https://placehold.co/40x40/60A5FA/FFFFFF?text=${H.display_name.charAt(0)}`}}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-bold text-[rgb(var(--color-text))] truncate",children:H.display_name}),c.jsxs("p",{className:"text-xs text-[rgb(var(--color-text-secondary))] truncate",children:["@",H.username]})]})]}),c.jsx("p",{className:"text-xs font-semibold text-[rgb(var(--color-primary))] flex-shrink-0 ml-2",children:Nm(q?H.last_seen:H.created_at)})]},H.id))})]},k.key)},h=k=>{const E=k.icon,L=k.error||k.value==="Error",q=!L&&typeof k.value!="number"&&typeof k.value!="string"&&"profile"in k.value?k.value.profile:null;return L?c.jsxs("div",{className:"p-6 rounded-xl shadow-lg bg-red-50 border border-red-200",children:[c.jsxs("h3",{className:"text-sm font-medium text-red-800 uppercase tracking-wider flex items-center mb-4",children:[c.jsx(Hs,{className:"h-4 w-4 mr-2"})," ",k.label]}),c.jsx("p",{className:"text-red-600",children:k.errorMessage||"Failed to fetch top profile."})]},k.key):q?c.jsxs("div",{className:"p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))]",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center",children:[c.jsx(E,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",k.label]}),c.jsx(Ec,{className:"h-6 w-6 text-[rgb(var(--color-primary))]"})]}),c.jsxs("div",{className:"flex items-center space-x-6 p-4 rounded-lg bg-[rgb(var(--color-background))] border border-[rgb(var(--color-border))]",children:[c.jsx("img",{src:q.avatar_url,alt:`${q.username}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-4 border-[rgb(var(--color-accent))]",onError:H=>{H.target.onerror=null,H.target.src=`https://placehold.co/64x64/60A5FA/FFFFFF?text=${q.display_name.charAt(0)}`}}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:q.display_name}),c.jsxs("p",{className:"text-sm text-[rgb(var(--color-text-secondary))]",children:["@",q.username]}),c.jsxs("p",{className:"mt-1 text-3xl font-extrabold text-[rgb(var(--color-text))]",children:[q.follower_count?q.follower_count.toLocaleString():"N/A",c.jsx("span",{className:"ml-2 text-base font-normal text-[rgb(var(--color-primary))]",children:"Followers"})]})]})]})]},k.key):null},p=k=>{const E=k.icon;return k.error||k.value==="Error"?c.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-red-50 border border-red-200 h-full",children:[c.jsxs("h4",{className:"text-xs font-medium text-red-800 uppercase tracking-wider flex items-center mb-1",children:[c.jsx(Hs,{className:"h-3 w-3 mr-1"})," ",k.label]}),c.jsx("p",{className:"text-red-600 text-sm",children:k.errorMessage||"Failed to fetch time."})]},k.key):c.jsxs("div",{className:"p-4 rounded-xl shadow-md bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border))] h-full flex flex-col justify-center",children:[c.jsxs("h4",{className:"text-xs font-medium text-[rgb(var(--color-text-secondary))] uppercase tracking-wider flex items-center mb-1",children:[c.jsx(E,{className:"h-4 w-4 mr-2 text-[rgb(var(--color-primary))]"})," ",k.label]}),c.jsx("p",{className:"text-base font-bold text-[rgb(var(--color-text))] break-words",children:k.value})]},k.key)},v=e.filter(k=>k.type==="count"),g=e.filter(k=>k.type==="activity"),x=e.find(k=>k.type==="highest_follower"),b=e.find(k=>k.type==="time_since_launch"),_=e.find(k=>k.type==="recent_users"),N=e.find(k=>k.type==="recent_online");return c.jsxs("div",{className:"max-w-6xl bg-[rgb(var(--color-background))] mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex items-center mb-10",children:[c.jsx("h2",{className:"text-4xl font-extrabold text-[rgb(var(--color-text))] tracking-tight",children:"Platform Statistics"}),c.jsx("p",{className:"ml-3 mt-1 text-lg text-[rgb(var(--color-text-secondary))]",children:"Database counts and user activity."})]}),r?c.jsxs("div",{className:"col-span-full flex justify-center items-center py-20",children:[c.jsx(qy,{className:"h-8 w-8 animate-spin text-[rgb(var(--color-primary))]"}),c.jsx("span",{className:"ml-3 text-lg text-[rgb(var(--color-text-secondary))]",children:"Loading Platform Stats..."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(Ec,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Community & Recent Activity"]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10",children:[c.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6",children:[x&&h(x),b&&p(b)]}),_&&c.jsx("div",{className:"lg:col-span-1",children:f(_)}),N&&c.jsx("div",{className:"lg:col-span-1",children:f(N)})]}),c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(ui,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," User Activity Counts"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-10",children:g.map(u)}),c.jsxs("h3",{className:"text-2xl font-semibold text-[rgb(var(--color-text))] mb-4 flex items-center",children:[c.jsx(My,{className:"h-5 w-5 mr-2 text-[rgb(var(--color-accent))]"})," Core Database Entries"]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:v.map(u)})]})]})};Mm();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uo.apply(this,arguments)}var ci;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ci||(ci={}));const Tm="popstate";function hk(e){e===void 0&&(e={});function t(s,o){let{pathname:a,search:u,hash:f}=s.location;return Bc("",{pathname:a,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){return typeof o=="string"?o:y1(o)}return gk(t,r,null,e)}function nr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pk(e,t){{typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mk(){return Math.random().toString(36).substr(2,8)}function Pm(e,t){return{usr:e.state,key:e.key,idx:t}}function Bc(e,t,r,s){return r===void 0&&(r=null),uo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ea(t):t,{state:r,key:t&&t.key||s||mk()})}function y1(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ea(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function gk(e,t,r,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:a=!1}=s,u=o.history,f=ci.Pop,h=null,p=v();p==null&&(p=0,u.replaceState(uo({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function g(){f=ci.Pop;let k=v(),E=k==null?null:k-p;p=k,h&&h({action:f,location:N.location,delta:E})}function x(k,E){f=ci.Push;let L=Bc(N.location,k,E);p=v()+1;let I=Pm(L,p),q=N.createHref(L);try{u.pushState(I,"",q)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;o.location.assign(q)}a&&h&&h({action:f,location:N.location,delta:1})}function b(k,E){f=ci.Replace;let L=Bc(N.location,k,E);p=v();let I=Pm(L,p),q=N.createHref(L);u.replaceState(I,"",q),a&&h&&h({action:f,location:N.location,delta:0})}function _(k){let E=o.location.origin!=="null"?o.location.origin:o.location.href,L=typeof k=="string"?k:y1(k);return L=L.replace(/ $/,"%20"),nr(E,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,E)}let N={get action(){return f},get location(){return e(o,u)},listen(k){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Tm,g),h=k,()=>{o.removeEventListener(Tm,g),h=null}},createHref(k){return t(o,k)},createURL:_,encodeLocation(k){let E=_(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:x,replace:b,go(k){return u.go(k)}};return N}var Lm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lm||(Lm={}));function vk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const yk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xk=e=>yk.test(e);function bk(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:o=""}=typeof e=="string"?ea(e):e,a;if(r)if(xk(r))a=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),pk(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+r))}r.startsWith("/")?a=Im(r.substring(1),"/"):a=Im(r,t)}else a=t;return{pathname:a,search:jk(s),hash:Ck(o)}}function Im(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function hc(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function kk(e,t){let r=wk(e);return t?r.map((s,o)=>o===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function _k(e,t,r,s){s===void 0&&(s=!1);let o;typeof e=="string"?o=ea(e):(o=uo({},e),nr(!o.pathname||!o.pathname.includes("?"),hc("?","pathname","search",o)),nr(!o.pathname||!o.pathname.includes("#"),hc("#","pathname","hash",o)),nr(!o.search||!o.search.includes("#"),hc("#","search","hash",o)));let a=e===""||o.pathname==="",u=a?"/":o.pathname,f;if(u==null)f=r;else{let g=t.length-1;if(!s&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),g-=1;o.pathname=x.join("/")}f=g>=0?t[g]:"/"}let h=bk(o,f),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||v)&&(h.pathname+="/"),h}const Sk=e=>e.join("/").replace(/\/\/+/g,"/"),jk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ck=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,x1=["post","put","patch","delete"];new Set(x1);const Nk=["get",...x1];new Set(Nk);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Wl.apply(this,arguments)}const b1=j.createContext(null),md=j.createContext(null),gd=j.createContext(null),vd=j.createContext({outlet:null,matches:[],isDataRoute:!1});function yd(){return j.useContext(gd)!=null}function w1(){return yd()||nr(!1),j.useContext(gd).location}function k1(e){j.useContext(md).static||j.useLayoutEffect(e)}function _1(){let{isDataRoute:e}=j.useContext(vd);return e?Ik():Ek()}function Ek(){yd()||nr(!1);let e=j.useContext(b1),{basename:t,future:r,navigator:s}=j.useContext(md),{matches:o}=j.useContext(vd),{pathname:a}=w1(),u=JSON.stringify(kk(o,r.v7_relativeSplatPath)),f=j.useRef(!1);return k1(()=>{f.current=!0}),j.useCallback(function(p,v){if(v===void 0&&(v={}),!f.current)return;if(typeof p=="number"){s.go(p);return}let g=_k(p,JSON.parse(u),a,v.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Sk([t,g.pathname])),(v.replace?s.replace:s.push)(g,v.state,v)},[t,s,u,a,e])}var S1=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(S1||{}),j1=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(j1||{});function Tk(e){let t=j.useContext(b1);return t||nr(!1),t}function Pk(e){let t=j.useContext(vd);return t||nr(!1),t}function Lk(e){let t=Pk(),r=t.matches[t.matches.length-1];return r.route.id||nr(!1),r.route.id}function Ik(){let{router:e}=Tk(S1.UseNavigateStable),t=Lk(j1.UseNavigateStable),r=j.useRef(!1);return k1(()=>{r.current=!0}),j.useCallback(function(o,a){a===void 0&&(a={}),r.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Wl({fromRouteId:t},a)))},[e,t])}function Ak(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Rk(e){let{basename:t="/",children:r=null,location:s,navigationType:o=ci.Pop,navigator:a,static:u=!1,future:f}=e;yd()&&nr(!1);let h=t.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:h,navigator:a,static:u,future:Wl({v7_relativeSplatPath:!1},f)}),[h,f,a,u]);typeof s=="string"&&(s=ea(s));let{pathname:v="/",search:g="",hash:x="",state:b=null,key:_="default"}=s,N=j.useMemo(()=>{let k=vk(v,h);return k==null?null:{location:{pathname:k,search:g,hash:x,state:b,key:_},navigationType:o}},[h,v,g,x,b,_,o]);return N==null?null:j.createElement(md.Provider,{value:p},j.createElement(gd.Provider,{children:r,value:N}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ok="6";try{window.__reactRouterVersion=Ok}catch{}const zk="startTransition",Am=y2[zk];function Mk(e){let{basename:t,children:r,future:s,window:o}=e,a=j.useRef();a.current==null&&(a.current=hk({window:o,v5Compat:!0}));let u=a.current,[f,h]=j.useState({action:u.action,location:u.location}),{v7_startTransition:p}=s||{},v=j.useCallback(g=>{p&&Am?Am(()=>h(g)):h(g)},[h,p]);return j.useLayoutEffect(()=>u.listen(v),[u,v]),j.useEffect(()=>Ak(s),[s]),j.createElement(Rk,{basename:t,children:r,location:f.location,navigationType:f.action,navigator:u,future:s})}var Rm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rm||(Rm={}));var Om;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Om||(Om={}));const Dk=e=>{switch(e){case"like":return c.jsx(is,{size:16,className:"text-red-500 fill-red-500"});case"comment":return c.jsx(ho,{size:16,className:"text-blue-500 fill-blue-500"});case"follow":return c.jsx(cg,{size:16,className:"text-green-500"});default:return c.jsx(ix,{size:16,className:"text-[rgb(var(--color-text-secondary))]"})}},$k=e=>{switch(e.type){case"like":return"liked your post.";case"comment":return"commented on your post.";case"follow":return"started following you.";default:return"sent you a notification."}},Fk=({onClose:e})=>{const{user:t}=Gn(),r=_1(),[s,o]=j.useState([]),[a,u]=j.useState(!1),[f,h]=j.useState(!1);j.useEffect(()=>{if(!t)return;u(!0);const g=async()=>{const{data:b,error:_}=await Q.from("notifications").select(`
          *,
          actor:profiles!notifications_actor_id_fkey (username, display_name, avatar_url)
        `).eq("recipient_id",t.id).order("created_at",{ascending:!1}).limit(50);_?console.error("Error fetching notifications:",_):o(b||[]),u(!1)};g();const x=Q.channel(`notifications-${t.id}`);return x.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},()=>{g()}),x.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(_=>_.map(N=>N.id===b.new.id?{...N,is_read:b.new.is_read}:N))}),x.on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},b=>{o(_=>_.filter(N=>N.id!==b.old.id))}),x.subscribe(),()=>{Q.removeChannel(x)}},[t]);const p=async()=>{if(!t||f)return;h(!0);const{error:g}=await Q.from("notifications").delete().eq("recipient_id",t.id).eq("is_read",!0);g?console.error("Error clearing notifications:",g):o(x=>x.filter(b=>!b.is_read)),h(!1)},v=g=>{g.is_read||o(x=>x.map(b=>b.id===g.id?{...b,is_read:!0}:b)),e(),g.type==="follow"&&g.actor?.username&&r(`/?${g.actor.username}`)};return c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm h-full bg-[rgb(var(--color-background))] shadow-xl overflow-y-auto",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"sticky top-0 bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] p-4 flex justify-between items-center z-10",children:[c.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-text))]",children:"Notifications"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:p,disabled:f||!s.some(g=>g.is_read),className:"text-sm p-1 px-3 rounded-full text-red-600 border border-red-600 hover:bg-red-600 hover:text-[rgb(var(--color-text-on-primary))] transition disabled:opacity-50",title:"Clear all seen notifications",children:[c.jsx(Nc,{size:16,className:"inline mr-1"}),f?"Clearing...":"Clear All Seen"]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition text-[rgb(var(--color-text))]",children:c.jsx(kt,{size:24})})]})]}),c.jsxs("div",{className:"flex flex-col",children:[a&&c.jsx("div",{className:"p-4 text-center text-[rgb(var(--color-text-secondary))]",children:"Loading notifications..."}),!a&&s.length===0&&c.jsx("div",{className:"p-12 text-center text-[rgb(var(--color-text-secondary))]",children:"You're all caught up! No notifications."}),!a&&s.length>0&&c.jsx("div",{children:s.map(g=>c.jsxs("div",{onClick:()=>v(g),className:`flex items-start gap-4 p-3 border-b border-[rgb(var(--color-border))] cursor-pointer hover:bg-[rgb(var(--color-surface-hover))] transition ${g.is_read?"":"bg-[rgba(var(--color-primary),0.05)]"}`,children:[c.jsx("div",{className:"w-6 h-6 flex items-center justify-center pt-1",children:Dk(g.type)}),c.jsxs("div",{className:"flex-1 min-w-0 flex items-start gap-3",children:[c.jsx("img",{src:g.actor?.avatar_url||"/default-avatar.png",alt:g.actor?.username||"user",className:"w-10 h-10 rounded-full object-cover",onClick:x=>{x.stopPropagation(),g.actor?.username&&(e(),r(`/?${g.actor.username}`))}}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-[rgb(var(--color-text))] break-words",children:[c.jsxs("span",{className:"font-bold cursor-pointer hover:underline",onClick:x=>{x.stopPropagation(),g.actor?.username&&(e(),r(`/?${g.actor.username}`))},children:[g.actor?.display_name||"User"," "]})," ",$k(g)]}),c.jsx("span",{className:"text-xs text-[rgb(var(--color-text-secondary))]\\",children:new Date(g.created_at).toLocaleDateString()})]})]})]},g.id))})]})]})})};var zm={},Uk="@vercel/analytics",Bk="1.5.0",qk=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function C1(){return typeof window<"u"}function N1(){try{const e="production"}catch{}return"production"}function Vk(e="auto"){if(e==="auto"){window.vam=N1();return}window.vam=e}function Hk(){return(C1()?window.vam:N1())||"production"}function qc(){return Hk()==="development"}function Wk(e){return e.scriptSrc?e.scriptSrc:qc()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Gk(e={debug:!0}){var t;if(!C1())return;Vk(e.mode),qk(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const r=Wk(e);if(document.head.querySelector(`script[src*="${r}"]`))return;const s=document.createElement("script");s.src=r,s.defer=!0,s.dataset.sdkn=Uk+(e.framework?`/${e.framework}`:""),s.dataset.sdkv=Bk,e.disableAutoTrack&&(s.dataset.disableAutoTrack="1"),e.endpoint?s.dataset.endpoint=e.endpoint:e.basePath&&(s.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(s.dataset.dsn=e.dsn),s.onerror=()=>{const o=qc()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${o}`)},qc()&&e.debug===!1&&(s.dataset.debug="false"),document.head.appendChild(s)}function Kk({route:e,path:t}){var r;(r=window.va)==null||r.call(window,"pageview",{route:e,path:t})}function Qk(){if(!(typeof process>"u"||typeof zm>"u"))return zm.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Jk(e){return j.useEffect(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),j.useEffect(()=>{Gk({framework:e.framework||"react",basePath:e.basePath??Qk(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),j.useEffect(()=>{e.route&&e.path&&Kk({route:e.route,path:e.path})},[e.route,e.path]),null}const Ol="M403.68 234.366c-3.681 5.618-30.224 30.851-40.724 38.713-25.347 18.983-38.394 24.776-77.79 34.544-23.062 5.718-26.126 6.76-29.666 10.087-7.857 7.384-13.863 11.247-21.384 13.752-9.789 3.259-12.116 5.672-12.116 12.558 0 3.825-.438 5.035-2.25 6.216-2.635 1.716-20.674 9.566-29.076 12.652l-5.825 2.141-2.971-2.116c-9.884-7.038-20.846.73-18.023 12.769 1.281 5.464 4.697 13.648 7.648 18.323 2.003 3.172 3.01 3.922 4.768 3.546 1.226-.263 4.254-.713 6.729-1.001 42.493-4.949 40.864-5.209 23.4 3.732-19.939 10.207-18.133 8.396-15.298 15.335 3.253 7.964 12.604 17.385 20.007 20.156l5.391 2.019.571-3.146c2.04-11.232 8.429-15.14 35.313-21.598l16.883-4.056 13.117 2.49c12.523 2.378 44.627 6.84 45.186 6.281.557-.557-2.339-3.496-10.071-10.22-12.342-10.734-11.967-10.234-8.194-10.934 3.07-.569 13.356.364 24.48 2.221 5.695.951 6.849 1.949 10.602 9.17 8.474 16.302 4.32 33.766-10.663 44.834-12.739 9.412-30.225 15.712-58.895 21.221-41.565 7.986-66.646 14.612-87.823 23.201-38.111 15.456-64.943 39.315-81.349 72.337-25.537 51.399-13.852 115.129 29.49 160.845 11.285 11.904 24.516 22.439 35.558 28.313 9.965 5.301 26.891 11.195 32.681 11.381l4.114.131-3.5.619-3.5.618 4.157 1.262c19.446 5.905 48.822 7.93 69.843 4.814 35.165-5.213 59.534-15.919 91.968-40.404 14.472-10.926 38.359-33.149 60.337-56.135 45.747-47.846 70.153-71.503 80.342-77.878C518.855 595.832 531.512 592 544 592c18.29 0 32.472 6.933 42.959 21 6.102 8.186 10.208 17.124 12.861 28 2.382 9.768 3.878 23.317 2.327 21.069-.752-1.088-1.147-.49-1.65 2.5-1.775 10.54-7.924 25.284-13.676 32.793-8.697 11.352-23.899 22.822-37.247 28.103-13.613 5.385-37.399 10.294-61.035 12.597-27.42 2.671-56.809 7.787-72.039 12.54-28.765 8.977-52.539 27.345-63.932 49.398-14.355 27.783-13.427 60.661 2.466 87.415 5.626 9.47 8.339 12.945 16.466 21.088 6.022 6.035 7.163 6.986 17.716 14.777 18.026 13.307 43.527 22.826 73.017 27.255 13.391 2.011 52.549 2.016 54.558.007.202-.202-2.256-.881-5.462-1.508-14.198-2.779-32.245-10.073-41.829-16.905-15.141-10.793-30.463-25.813-37.688-36.946-2.029-3.126-5.016-7.483-6.638-9.683C416.705 874.014 413 864.636 413 854.684c0-5.65 2.569-16.422 4.312-18.082 9.77-9.301 25.027-16.03 48.822-21.533 64.081-14.82 109.776-51.401 128.122-102.569 3.224-8.992 6.818-27.367 7.726-39.5l.71-9.5.154 9.583c.144 8.953-.301 12.954-2.993 26.917-1.404 7.286-7.125 23.019-11.09 30.5-1.749 3.3-3.649 7.009-4.222 8.242-.572 1.233-1.378 2.246-1.791 2.25s-.75.646-.75 1.425-.357 1.566-.793 1.75-1.887 2.133-3.226 4.333c-2.159 3.55-12.538 16.048-17.218 20.734-3.451 3.456-18.579 15.488-22.376 17.797-2.138 1.3-4.112 2.667-4.387 3.039-.275.371-5.9 3.4-12.5 6.731-16.549 8.351-30.523 13.68-47.732 18.205-2.602.684-4.477 1.656-4.166 2.16.312.503 1.316.689 2.232.412s8.641-1.213 17.166-2.081c40.585-4.13 69.071-9.765 92.5-18.298 15.33-5.583 37.661-18.554 50.945-29.591 10.296-8.554 25.124-24.582 33.34-36.037 3.374-4.704 13.526-23.941 16.397-31.071 2.83-7.028 5.649-16.706 8.011-27.5 1.966-8.988 2.293-13.308 2.27-30-.029-21.817-1.459-32.183-6.545-47.461-4.267-12.818-13.982-32.084-21.064-41.771-7.41-10.137-23.927-26.589-33.354-33.222-15.179-10.682-37.054-20.061-56.5-24.226-13.245-2.836-42.849-2.586-57.5.487-27.999 5.872-54.161 18.066-78.5 36.589-8.789 6.689-30.596 26.259-34.981 31.392-5.122 5.997-38.941 40.833-55.176 56.835-15.863 15.637-22.787 22.017-31.337 28.877-2.742 2.2-5.89 4.829-6.996 5.843-1.105 1.013-6.06 4.488-11.01 7.722s-9.45 6.242-10 6.686c-2.014 1.624-12.507 6.373-19.656 8.896-8.791 3.103-26.867 4.32-35.998 2.425-14.396-2.989-26.608-12.051-32.574-24.172-3.938-8-5.216-13.468-5.248-22.44-.05-14.406 4.83-25.419 16.415-37.046 8.018-8.047 15.344-13.02 27.453-18.636 13.664-6.337 24.699-9.76 68.608-21.281 23.61-6.195 53.403-16.746 65-23.02 37.251-20.151 62.371-49.521 70.969-82.977 3.164-12.312 4.368-32.296 2.62-43.5-2.675-17.153-11.273-37.276-22.004-51.5-10.94-14.501-29.977-30.241-43.244-35.755l-4.987-2.072 5.325-2.166c15.935-6.483 33.215-19.607 42.642-32.385 5.925-8.032 12.007-19.627 10.884-20.751-.359-.358-2.374.874-4.48 2.739-19.929 17.652-32.524 25.61-53.225 33.626-8.739 3.383-30.986 9.264-35.049 9.264-.617 0 2.629-2.521 7.214-5.602 21.853-14.688 39.424-33.648 49.197-53.085 2.254-4.483 7.638-17.828 7.638-18.932 0-1.228-1.997-.034-3.32 1.985m-9.601 249.217c.048 1.165.285 1.402.604.605.289-.722.253-1.585-.079-1.917s-.568.258-.525 1.312m-6.62 20.484c-.363.586-.445 1.281-.183 1.543s.743-.218 1.069-1.067c.676-1.762.1-2.072-.886-.476m207.291 56.656c1.788.222 4.712.222 6.5 0 1.788-.221.325-.403-3.25-.403s-5.038.182-3.25.403m13.333-.362c.23.199 3.117.626 6.417.949 3.811.374 5.27.268 4-.29-1.892-.832-11.303-1.427-10.417-.659M627 564.137c3.575 1.072 7.4 2.351 8.5 2.842 1.1.49 4.025 1.764 6.5 2.83 6.457 2.78 15.574 9.246 22.445 15.918 5.858 5.687 5.899 4.716.055-1.277-3.395-3.481-13.251-11.028-18.5-14.164-4.511-2.696-20.509-8.314-23.33-8.192-1.193.051.755.97 4.33 2.043M283.572 749.028c-2.161 1.635-3.511 2.96-3 2.945.945-.027 8.341-5.92 7.428-5.918-.275 0-2.268 1.338-4.428 2.973M264.5 760.049c-14.725 7.213-25.192 9.921-42 10.865-12.896.724-13.276.798-4.822.936 16.858.275 31.491-2.958 46.822-10.347 6.099-2.939 11.984-6.524 10.5-6.396-.275.023-5 2.247-10.5 4.942M435 897.859c0 1.77 20.812 21.955 28.752 27.887 10.355 7.736 27.863 16.301 40.248 19.691 11.885 3.254 27.788 4.339 38.679 2.641 15.915-2.483 42.821-11.687 56.321-19.268 4.671-2.624 21.633-13.314 22.917-14.443.229-.202.185-.599-.098-.882s-2.496.561-4.917 1.876c-8.642 4.692-29.216 11.343-44.402 14.354-7.013 1.391-13.746 1.775-30.5 1.738-19.299-.042-22.831-.32-34.5-2.724-25.415-5.234-48.507-14.972-66.207-27.92-5.432-3.973-6.293-4.377-6.293-2.95",pc="0 0 784 1168",Yk=()=>{const[e,t]=j.useState("feed"),[r,s]=j.useState(""),[o,a]=j.useState(),[u,f]=j.useState(!1),[h,p]=j.useState(),[v,g]=j.useState(null),[x,b]=j.useState(null),[_,N]=j.useState("chats"),{user:k,profile:E,loading:L,signOut:I}=Gn(),q=w1(),H=_1(),[P,te]=j.useState(0),[X,ge]=j.useState(0),[$,F]=j.useState(!1);if(j.useEffect(()=>{(async()=>{const oe=q.pathname,Z=new URLSearchParams(q.search),M=oe.match(/^\/invite\/([a-zA-Z0-9-]{3,20})$/),ee=Z.get("invite"),S=M?M[1]:ee;if(S&&k){g(S),t("messages"),N("gazebos"),M&&H("/message",{replace:!0});return}const R=oe.match(/^\/gazebo\/?([a-zA-Z0-9-]{0,})?$/),U=Z.get("gazebo"),C=R?R[1]:U;if((C||R)&&k){N("gazebos"),C&&b(C),t("messages"),R&&window.history.replaceState({},"","/message");return}const ie=Z.get("user");if(oe==="/message"&&ie&&k){const{data:we}=await Q.from("profiles").select("*").eq("username",ie).single();we&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:we}))},500),t("messages");return}const me=Z.get("status");if(me&&k){const{data:we}=await Q.from("statuses").select("*, profiles!user_id(*)").eq("id",me).single();if(we){const Je={...we.profiles,statuses:[we],hasUnseen:!1};window.dispatchEvent(new CustomEvent("openStatusViewer",{detail:{users:[Je],initialUserId:we.user_id}})),t("feed")}return}const pe=Z.get("post");if(pe){const{data:we}=await Q.from("posts").select("user_id").eq("id",pe).maybeSingle();if(we){a(we.user_id),p(pe),t("profile");return}}const ze=Z.get("user");if(oe==="/"&&ze){const{data:we}=await Q.from("profiles").select("id").eq("username",ze.toLowerCase()).single();if(we){a(we.id),t("profile");return}}if(oe==="/message"){t("messages");return}if(oe==="/stats"){t("stats");return}const Le=oe.match(/^\/([a-zA-Z0-9-]+)$/);if(Le){const we=Le[1];if(!["user","invite","gazebo","message","stats"].includes(we)){t("page"),s(we);return}}oe==="/"&&(t("feed"),a(void 0),p(void 0))})()},[q.pathname,q.search,k,H]),j.useEffect(()=>{E?.theme&&(document.body.className=`theme-${E.theme}`)},[E?.theme]),j.useEffect(()=>{if(!k)return;const K=async()=>{const{count:M}=await Q.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",k.id).eq("read",!1);te(M||0);try{const{count:ee}=await Q.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",k.id).eq("is_read",!1);ge(ee||0)}catch{console.warn("Could not fetch notifications.")}};K();const oe=()=>{K()};window.addEventListener("messagesRead",oe);const Z=Q.channel(`user-notifications:${k.id}`);return Z.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${k.id}`},M=>{M.new.read===!1&&te(ee=>ee+1)}),Z.on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`recipient_id=eq.${k.id}`},M=>{K()}),Z.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${k.id}`},()=>{ge(M=>M+1)}),Z.on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${k.id}`},M=>{M.old.is_read===!1&&M.new.is_read===!0&&ge(ee=>Math.max(0,ee-1))}),Z.subscribe(),()=>{Q.removeChannel(Z),window.removeEventListener("messagesRead",oe)}},[k]),j.useEffect(()=>{const K=oe=>{const Z=oe.detail;Q.from("profiles").select("username").eq("id",Z).single().then(({data:M})=>{M&&(H(`/?user=${M.username}`),a(Z),t("profile"))})};return window.addEventListener("navigateToProfile",K),()=>window.removeEventListener("navigateToProfile",K)},[H]),j.useEffect(()=>{if(!k)return;const K=async()=>{await Q.from("profiles").update({last_seen:new Date().toISOString()}).eq("id",k.id)};K();const oe=setInterval(K,3e4);return()=>clearInterval(oe)},[k]),L)return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))] flex flex-col items-center justify-center text-2xl font-bold text-[rgb(var(--color-text))]",style:{background:"linear-gradient(to bottom right, rgba(var(--color-surface),0.05), rgba(var(--color-primary),0.05))"},children:[c.jsx("div",{className:"logo-loading-container w-[150px] h-auto relative mb-4",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:pc,className:"logo-svg",children:[c.jsx("defs",{children:c.jsx("clipPath",{id:"logo-clip",children:c.jsx("rect",{id:"clip-rect",x:"0",y:"0",width:"100%",height:"100%"})})}),c.jsx("path",{d:Ol,fill:"none",stroke:"rgb(var(--color-primary))",strokeWidth:"10",strokeOpacity:"0.1"}),c.jsx("path",{d:Ol,fill:"rgb(var(--color-primary))",clipPath:"url(#logo-clip)",className:"logo-fill-animated"})]})}),"Loading..."]});if(e==="page"&&r)return c.jsx(tk,{slug:r});if(e==="stats")return c.jsx(Em,{});if(!k||!E)return e==="profile"&&o?c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[c.jsx("div",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:pc,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>H("/"),children:c.jsx("path",{d:Ol,fill:"rgb(var(--color-primary))"})}),c.jsx("a",{href:"/",className:"text-[rgb(var(--color-primary))] hover:text-[rgba(var(--color-primary),0.8)] font-bold",children:" Back to Home"})]})}),c.jsx(zp,{userId:o,initialPostId:h})]}):e==="messages"?c.jsx(Np,{}):c.jsx(Np,{});const J=K=>{t("messages"),a(void 0),H(`/message?user=${K.username}`),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openDirectMessage",{detail:K}))},100)},ae=()=>{t("settings"),a(void 0)},Y=async()=>{F(!0);try{await Q.from("notifications").update({is_read:!0}).eq("recipient_id",k.id).eq("is_read",!1),ge(0)}catch{console.warn("Could not mark notifications as read.")}};return c.jsxs("div",{className:"min-h-screen bg-[rgb(var(--color-background))]",children:[c.jsx("nav",{className:"bg-[rgb(var(--color-surface))] border-b border-[rgb(var(--color-border))] sticky top-0 z-50 shadow-sm",children:c.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 h-14",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:pc,className:"w-[32px] h-[32px] cursor-pointer",onClick:()=>{t("feed"),a(void 0),H("/")},children:c.jsx("path",{d:Ol,fill:"rgb(var(--color-primary))"})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>f(!0),className:"p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:c.jsx(Ul,{size:20,className:"text-[rgb(var(--color-text-secondary))]"})}),c.jsx("button",{onClick:()=>{t("feed"),a(void 0),p(void 0),H("/")},className:`p-3 rounded-full transition ${e==="feed"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:c.jsx(By,{size:20})}),c.jsxs("button",{onClick:()=>{t("messages"),a(void 0),p(void 0),H("/message")},className:`relative p-3 rounded-full transition ${e==="messages"?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:[c.jsx(Fl,{size:20}),P>0&&c.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),c.jsxs("button",{onClick:Y,className:"relative p-3 rounded-full hover:bg-[rgb(var(--color-surface-hover))] transition",children:[c.jsx(Oy,{size:20,className:"text-[rgb(var(--color-text-secondary))]"}),X>0&&c.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),c.jsx("button",{onClick:()=>{E?.username&&(H(`/?user=${E.username}`),a(void 0),t("profile"))},className:`p-3 rounded-full transition ${e==="profile"&&!o?"bg-[rgba(var(--color-primary),0.1)] text-[rgb(var(--color-primary))]":"hover:bg-[rgb(var(--color-surface-hover))] text-[rgb(var(--color-text-secondary))]"}`,children:c.jsx(dg,{size:20})}),c.jsx("button",{onClick:I,className:"p-3 rounded-full hover:bg-[rgba(239,68,68,0.1)] text-red-600 transition",children:c.jsx(Wy,{size:20})})]})]})}),c.jsxs("main",{className:"h-[90vh] overflow-auto",children:[e==="feed"&&c.jsx(xx,{}),e==="messages"&&c.jsx(Sx,{initialInviteCode:v,onInviteHandled:()=>g(null),initialTab:_,initialGazeboId:x}),e==="profile"&&c.jsx(zp,{userId:o,initialPostId:h,onMessage:J,onSettings:!o||o===k.id?ae:void 0},o||"own-profile"),e==="settings"&&c.jsx(Px,{}),$&&c.jsx(Fk,{onClose:()=>F(!1)}),u&&c.jsx(Nx,{onClose:()=>f(!1)}),e==="stats"&&k&&c.jsx(Em,{})]}),e!=="messages"&&c.jsxs("footer",{className:"text-center text-[rgb(var(--color-text-secondary))] text-xs py-4 border-t border-[rgb(var(--color-border))] bg-[rgb(var(--color-surface))]",children:[" Mux ",new Date().getFullYear()]})]})};function Xk(){return c.jsx(Ly,{children:c.jsxs(Mk,{children:[c.jsx(Yk,{}),c.jsx(gx,{}),c.jsx(Jk,{})]})})}_2.createRoot(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(Xk,{})}));export{rg as A,rr as B,Qu as C,Sp as F,ig as I,Wy as L,Tl as M,Yy as P,v2 as R,ag as S,Nc as T,fg as U,rx as V,kt as X,_1 as a,Xy as b,Ee as c,bx as d,Cp as e,lg as f,to as g,ls as h,Fy as i,c as j,Qy as k,Br as l,og as m,Jc as n,oo as o,nx as p,Gl as q,j as r,Q as s,Gn as u};
